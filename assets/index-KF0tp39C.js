var xne=Object.defineProperty;var xN=n=>{throw TypeError(n)};var wne=(n,e,t)=>e in n?xne(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ce=(n,e,t)=>wne(n,typeof e!="symbol"?e+"":e,t),Cw=(n,e,t)=>e.has(n)||xN("Cannot "+t);var Q=(n,e,t)=>(Cw(n,e,"read from private field"),t?t.call(n):e.get(n)),Te=(n,e,t)=>e.has(n)?xN("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),he=(n,e,t,r)=>(Cw(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),St=(n,e,t)=>(Cw(n,e,"access private method"),t);var l0=(n,e,t,r)=>({set _(i){he(n,e,i,t)},get _(){return Q(n,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function TP(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function _ne(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var mW={exports:{}},Pb={},gW={exports:{}},_t={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rg=Symbol.for("react.element"),Sne=Symbol.for("react.portal"),kne=Symbol.for("react.fragment"),Cne=Symbol.for("react.strict_mode"),Ene=Symbol.for("react.profiler"),Tne=Symbol.for("react.provider"),Mne=Symbol.for("react.context"),Ine=Symbol.for("react.forward_ref"),Pne=Symbol.for("react.suspense"),One=Symbol.for("react.memo"),Rne=Symbol.for("react.lazy"),wN=Symbol.iterator;function Dne(n){return n===null||typeof n!="object"?null:(n=wN&&n[wN]||n["@@iterator"],typeof n=="function"?n:null)}var vW={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yW=Object.assign,bW={};function Rd(n,e,t){this.props=n,this.context=e,this.refs=bW,this.updater=t||vW}Rd.prototype.isReactComponent={};Rd.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Rd.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function xW(){}xW.prototype=Rd.prototype;function MP(n,e,t){this.props=n,this.context=e,this.refs=bW,this.updater=t||vW}var IP=MP.prototype=new xW;IP.constructor=MP;yW(IP,Rd.prototype);IP.isPureReactComponent=!0;var _N=Array.isArray,wW=Object.prototype.hasOwnProperty,PP={current:null},_W={key:!0,ref:!0,__self:!0,__source:!0};function SW(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)wW.call(e,r)&&!_W.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:rg,type:n,key:s,ref:o,props:i,_owner:PP.current}}function Nne(n,e){return{$$typeof:rg,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function OP(n){return typeof n=="object"&&n!==null&&n.$$typeof===rg}function Ane(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var SN=/\/+/g;function Ew(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Ane(""+n.key):e.toString(36)}function Ov(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case rg:case Sne:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Ew(o,0):r,_N(i)?(t="",n!=null&&(t=n.replace(SN,"$&/")+"/"),Ov(i,e,t,"",function(c){return c})):i!=null&&(OP(i)&&(i=Nne(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(SN,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",_N(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+Ew(s,a);o+=Ov(s,e,t,l,i)}else if(l=Dne(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+Ew(s,a++),o+=Ov(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function c0(n,e,t){if(n==null)return n;var r=[],i=0;return Ov(n,r,"","",function(s){return e.call(t,s,i++)}),r}function Lne(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Kr={current:null},Rv={transition:null},Fne={ReactCurrentDispatcher:Kr,ReactCurrentBatchConfig:Rv,ReactCurrentOwner:PP};function kW(){throw Error("act(...) is not supported in production builds of React.")}_t.Children={map:c0,forEach:function(n,e,t){c0(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return c0(n,function(){e++}),e},toArray:function(n){return c0(n,function(e){return e})||[]},only:function(n){if(!OP(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};_t.Component=Rd;_t.Fragment=kne;_t.Profiler=Ene;_t.PureComponent=MP;_t.StrictMode=Cne;_t.Suspense=Pne;_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fne;_t.act=kW;_t.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=yW({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=PP.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)wW.call(e,l)&&!_W.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:rg,type:n.type,key:i,ref:s,props:r,_owner:o}};_t.createContext=function(n){return n={$$typeof:Mne,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Tne,_context:n},n.Consumer=n};_t.createElement=SW;_t.createFactory=function(n){var e=SW.bind(null,n);return e.type=n,e};_t.createRef=function(){return{current:null}};_t.forwardRef=function(n){return{$$typeof:Ine,render:n}};_t.isValidElement=OP;_t.lazy=function(n){return{$$typeof:Rne,_payload:{_status:-1,_result:n},_init:Lne}};_t.memo=function(n,e){return{$$typeof:One,type:n,compare:e===void 0?null:e}};_t.startTransition=function(n){var e=Rv.transition;Rv.transition={};try{n()}finally{Rv.transition=e}};_t.unstable_act=kW;_t.useCallback=function(n,e){return Kr.current.useCallback(n,e)};_t.useContext=function(n){return Kr.current.useContext(n)};_t.useDebugValue=function(){};_t.useDeferredValue=function(n){return Kr.current.useDeferredValue(n)};_t.useEffect=function(n,e){return Kr.current.useEffect(n,e)};_t.useId=function(){return Kr.current.useId()};_t.useImperativeHandle=function(n,e,t){return Kr.current.useImperativeHandle(n,e,t)};_t.useInsertionEffect=function(n,e){return Kr.current.useInsertionEffect(n,e)};_t.useLayoutEffect=function(n,e){return Kr.current.useLayoutEffect(n,e)};_t.useMemo=function(n,e){return Kr.current.useMemo(n,e)};_t.useReducer=function(n,e,t){return Kr.current.useReducer(n,e,t)};_t.useRef=function(n){return Kr.current.useRef(n)};_t.useState=function(n){return Kr.current.useState(n)};_t.useSyncExternalStore=function(n,e,t){return Kr.current.useSyncExternalStore(n,e,t)};_t.useTransition=function(){return Kr.current.useTransition()};_t.version="18.3.1";gW.exports=_t;var I=gW.exports;const de=TP(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jne=I,$ne=Symbol.for("react.element"),Bne=Symbol.for("react.fragment"),zne=Object.prototype.hasOwnProperty,qne=jne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Une={key:!0,ref:!0,__self:!0,__source:!0};function CW(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)zne.call(e,r)&&!Une.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:$ne,type:n,key:s,ref:o,props:i,_owner:qne.current}}Pb.Fragment=Bne;Pb.jsx=CW;Pb.jsxs=CW;mW.exports=Pb;var k=mW.exports,KT={},EW={exports:{}},$i={},TW={exports:{}},MW={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e($,U){var H=$.length;$.push(U);e:for(;0<H;){var K=H-1>>>1,J=$[K];if(0<i(J,U))$[K]=U,$[H]=J,H=K;else break e}}function t($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var U=$[0],H=$.pop();if(H!==U){$[0]=H;e:for(var K=0,J=$.length,Z=J>>>1;K<Z;){var q=2*(K+1)-1,X=$[q],G=q+1,ne=$[G];if(0>i(X,H))G<J&&0>i(ne,X)?($[K]=ne,$[G]=H,K=G):($[K]=X,$[q]=H,K=q);else if(G<J&&0>i(ne,H))$[K]=ne,$[G]=H,K=G;else break e}}return U}function i($,U){var H=$.sortIndex-U.sortIndex;return H!==0?H:$.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,f=!1,m=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var U=t(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=$)r(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=t(c)}}function S($){if(g=!1,w($),!m)if(t(l)!==null)m=!0,L(_);else{var U=t(c);U!==null&&B(S,U.startTime-$)}}function _($,U){m=!1,g&&(g=!1,y(T),T=-1),f=!0;var H=d;try{for(w(U),h=t(l);h!==null&&(!(h.expirationTime>U)||$&&!D());){var K=h.callback;if(typeof K=="function"){h.callback=null,d=h.priorityLevel;var J=K(h.expirationTime<=U);U=n.unstable_now(),typeof J=="function"?h.callback=J:h===t(l)&&r(l),w(U)}else r(l);h=t(l)}if(h!==null)var Z=!0;else{var q=t(c);q!==null&&B(S,q.startTime-U),Z=!1}return Z}finally{h=null,d=H,f=!1}}var E=!1,C=null,T=-1,O=5,R=-1;function D(){return!(n.unstable_now()-R<O)}function A(){if(C!==null){var $=n.unstable_now();R=$;var U=!0;try{U=C(!0,$)}finally{U?F():(E=!1,C=null)}}else E=!1}var F;if(typeof b=="function")F=function(){b(A)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,j=z.port2;z.port1.onmessage=A,F=function(){j.postMessage(null)}}else F=function(){v(A,0)};function L($){C=$,E||(E=!0,F())}function B($,U){T=v(function(){$(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_continueExecution=function(){m||f||(m=!0,L(_))},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function($){switch(d){case 1:case 2:case 3:var U=3;break;default:U=d}var H=d;d=U;try{return $()}finally{d=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function($,U){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var H=d;d=$;try{return U()}finally{d=H}},n.unstable_scheduleCallback=function($,U,H){var K=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?K+H:K):H=K,$){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=H+J,$={id:u++,callback:U,priorityLevel:$,startTime:H,expirationTime:J,sortIndex:-1},H>K?($.sortIndex=H,e(c,$),t(l)===null&&$===t(c)&&(g?(y(T),T=-1):g=!0,B(S,H-K))):($.sortIndex=J,e(l,$),m||f||(m=!0,L(_))),$},n.unstable_shouldYield=D,n.unstable_wrapCallback=function($){var U=d;return function(){var H=d;d=U;try{return $.apply(this,arguments)}finally{d=H}}}})(MW);TW.exports=MW;var Wne=TW.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hne=I,Li=Wne;function xe(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var IW=new Set,zp={};function au(n,e){Xh(n,e),Xh(n+"Capture",e)}function Xh(n,e){for(zp[n]=e,n=0;n<e.length;n++)IW.add(e[n])}var ha=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),XT=Object.prototype.hasOwnProperty,Yne=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kN={},CN={};function Gne(n){return XT.call(CN,n)?!0:XT.call(kN,n)?!1:Yne.test(n)?CN[n]=!0:(kN[n]=!0,!1)}function Vne(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Kne(n,e,t,r){if(e===null||typeof e>"u"||Vne(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xr(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Tr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Tr[n]=new Xr(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Tr[e]=new Xr(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Tr[n]=new Xr(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Tr[n]=new Xr(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Tr[n]=new Xr(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Tr[n]=new Xr(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Tr[n]=new Xr(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Tr[n]=new Xr(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Tr[n]=new Xr(n,5,!1,n.toLowerCase(),null,!1,!1)});var RP=/[\-:]([a-z])/g;function DP(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(RP,DP);Tr[e]=new Xr(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(RP,DP);Tr[e]=new Xr(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(RP,DP);Tr[e]=new Xr(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Tr[n]=new Xr(n,1,!1,n.toLowerCase(),null,!1,!1)});Tr.xlinkHref=new Xr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Tr[n]=new Xr(n,1,!1,n.toLowerCase(),null,!0,!0)});function NP(n,e,t,r){var i=Tr.hasOwnProperty(e)?Tr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Kne(e,t,i,r)&&(t=null),r||i===null?Gne(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var va=Hne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u0=Symbol.for("react.element"),qu=Symbol.for("react.portal"),Uu=Symbol.for("react.fragment"),AP=Symbol.for("react.strict_mode"),QT=Symbol.for("react.profiler"),PW=Symbol.for("react.provider"),OW=Symbol.for("react.context"),LP=Symbol.for("react.forward_ref"),JT=Symbol.for("react.suspense"),ZT=Symbol.for("react.suspense_list"),FP=Symbol.for("react.memo"),Wa=Symbol.for("react.lazy"),RW=Symbol.for("react.offscreen"),EN=Symbol.iterator;function pf(n){return n===null||typeof n!="object"?null:(n=EN&&n[EN]||n["@@iterator"],typeof n=="function"?n:null)}var Mn=Object.assign,Tw;function Kf(n){if(Tw===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Tw=e&&e[1]||""}return`
`+Tw+n}var Mw=!1;function Iw(n,e){if(!n||Mw)return"";Mw=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Mw=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Kf(n):""}function Xne(n){switch(n.tag){case 5:return Kf(n.type);case 16:return Kf("Lazy");case 13:return Kf("Suspense");case 19:return Kf("SuspenseList");case 0:case 2:case 15:return n=Iw(n.type,!1),n;case 11:return n=Iw(n.type.render,!1),n;case 1:return n=Iw(n.type,!0),n;default:return""}}function eM(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Uu:return"Fragment";case qu:return"Portal";case QT:return"Profiler";case AP:return"StrictMode";case JT:return"Suspense";case ZT:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case OW:return(n.displayName||"Context")+".Consumer";case PW:return(n._context.displayName||"Context")+".Provider";case LP:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case FP:return e=n.displayName||null,e!==null?e:eM(n.type)||"Memo";case Wa:e=n._payload,n=n._init;try{return eM(n(e))}catch{}}return null}function Qne(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return eM(e);case 8:return e===AP?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cl(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function DW(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Jne(n){var e=DW(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function h0(n){n._valueTracker||(n._valueTracker=Jne(n))}function NW(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=DW(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function cy(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function tM(n,e){var t=e.checked;return Mn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function TN(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Cl(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function AW(n,e){e=e.checked,e!=null&&NP(n,"checked",e,!1)}function nM(n,e){AW(n,e);var t=Cl(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?rM(n,e.type,t):e.hasOwnProperty("defaultValue")&&rM(n,e.type,Cl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function MN(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function rM(n,e,t){(e!=="number"||cy(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Xf=Array.isArray;function uh(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Cl(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function iM(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(xe(91));return Mn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function IN(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(xe(92));if(Xf(t)){if(1<t.length)throw Error(xe(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Cl(t)}}function LW(n,e){var t=Cl(e.value),r=Cl(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function PN(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function FW(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sM(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?FW(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var d0,jW=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(d0=d0||document.createElement("div"),d0.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=d0.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function qp(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var fp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zne=["Webkit","ms","Moz","O"];Object.keys(fp).forEach(function(n){Zne.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),fp[e]=fp[n]})});function $W(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||fp.hasOwnProperty(n)&&fp[n]?(""+e).trim():e+"px"}function BW(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=$W(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var ere=Mn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oM(n,e){if(e){if(ere[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(xe(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(xe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(xe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(xe(62))}}function aM(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lM=null;function jP(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var cM=null,hh=null,dh=null;function ON(n){if(n=og(n)){if(typeof cM!="function")throw Error(xe(280));var e=n.stateNode;e&&(e=Ab(e),cM(n.stateNode,n.type,e))}}function zW(n){hh?dh?dh.push(n):dh=[n]:hh=n}function qW(){if(hh){var n=hh,e=dh;if(dh=hh=null,ON(n),e)for(n=0;n<e.length;n++)ON(e[n])}}function UW(n,e){return n(e)}function WW(){}var Pw=!1;function HW(n,e,t){if(Pw)return n(e,t);Pw=!0;try{return UW(n,e,t)}finally{Pw=!1,(hh!==null||dh!==null)&&(WW(),qW())}}function Up(n,e){var t=n.stateNode;if(t===null)return null;var r=Ab(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(xe(231,e,typeof t));return t}var uM=!1;if(ha)try{var mf={};Object.defineProperty(mf,"passive",{get:function(){uM=!0}}),window.addEventListener("test",mf,mf),window.removeEventListener("test",mf,mf)}catch{uM=!1}function tre(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var pp=!1,uy=null,hy=!1,hM=null,nre={onError:function(n){pp=!0,uy=n}};function rre(n,e,t,r,i,s,o,a,l){pp=!1,uy=null,tre.apply(nre,arguments)}function ire(n,e,t,r,i,s,o,a,l){if(rre.apply(this,arguments),pp){if(pp){var c=uy;pp=!1,uy=null}else throw Error(xe(198));hy||(hy=!0,hM=c)}}function lu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function YW(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function RN(n){if(lu(n)!==n)throw Error(xe(188))}function sre(n){var e=n.alternate;if(!e){if(e=lu(n),e===null)throw Error(xe(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return RN(i),n;if(s===r)return RN(i),e;s=s.sibling}throw Error(xe(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(xe(189))}}if(t.alternate!==r)throw Error(xe(190))}if(t.tag!==3)throw Error(xe(188));return t.stateNode.current===t?n:e}function GW(n){return n=sre(n),n!==null?VW(n):null}function VW(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=VW(n);if(e!==null)return e;n=n.sibling}return null}var KW=Li.unstable_scheduleCallback,DN=Li.unstable_cancelCallback,ore=Li.unstable_shouldYield,are=Li.unstable_requestPaint,Bn=Li.unstable_now,lre=Li.unstable_getCurrentPriorityLevel,$P=Li.unstable_ImmediatePriority,XW=Li.unstable_UserBlockingPriority,dy=Li.unstable_NormalPriority,cre=Li.unstable_LowPriority,QW=Li.unstable_IdlePriority,Ob=null,go=null;function ure(n){if(go&&typeof go.onCommitFiberRoot=="function")try{go.onCommitFiberRoot(Ob,n,void 0,(n.current.flags&128)===128)}catch{}}var Rs=Math.clz32?Math.clz32:fre,hre=Math.log,dre=Math.LN2;function fre(n){return n>>>=0,n===0?32:31-(hre(n)/dre|0)|0}var f0=64,p0=4194304;function Qf(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function fy(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Qf(a):(s&=o,s!==0&&(r=Qf(s)))}else o=t&~i,o!==0?r=Qf(o):s!==0&&(r=Qf(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Rs(e),i=1<<t,r|=n[t],e&=~i;return r}function pre(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mre(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Rs(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=pre(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function dM(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function JW(){var n=f0;return f0<<=1,!(f0&4194240)&&(f0=64),n}function Ow(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function ig(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Rs(e),n[e]=t}function gre(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Rs(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function BP(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Rs(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Wt=0;function ZW(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var eH,zP,tH,nH,rH,fM=!1,m0=[],dl=null,fl=null,pl=null,Wp=new Map,Hp=new Map,Ga=[],vre="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function NN(n,e){switch(n){case"focusin":case"focusout":dl=null;break;case"dragenter":case"dragleave":fl=null;break;case"mouseover":case"mouseout":pl=null;break;case"pointerover":case"pointerout":Wp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hp.delete(e.pointerId)}}function gf(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=og(e),e!==null&&zP(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function yre(n,e,t,r,i){switch(e){case"focusin":return dl=gf(dl,n,e,t,r,i),!0;case"dragenter":return fl=gf(fl,n,e,t,r,i),!0;case"mouseover":return pl=gf(pl,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Wp.set(s,gf(Wp.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Hp.set(s,gf(Hp.get(s)||null,n,e,t,r,i)),!0}return!1}function iH(n){var e=oc(n.target);if(e!==null){var t=lu(e);if(t!==null){if(e=t.tag,e===13){if(e=YW(t),e!==null){n.blockedOn=e,rH(n.priority,function(){tH(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Dv(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=pM(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);lM=r,t.target.dispatchEvent(r),lM=null}else return e=og(t),e!==null&&zP(e),n.blockedOn=t,!1;e.shift()}return!0}function AN(n,e,t){Dv(n)&&t.delete(e)}function bre(){fM=!1,dl!==null&&Dv(dl)&&(dl=null),fl!==null&&Dv(fl)&&(fl=null),pl!==null&&Dv(pl)&&(pl=null),Wp.forEach(AN),Hp.forEach(AN)}function vf(n,e){n.blockedOn===e&&(n.blockedOn=null,fM||(fM=!0,Li.unstable_scheduleCallback(Li.unstable_NormalPriority,bre)))}function Yp(n){function e(i){return vf(i,n)}if(0<m0.length){vf(m0[0],n);for(var t=1;t<m0.length;t++){var r=m0[t];r.blockedOn===n&&(r.blockedOn=null)}}for(dl!==null&&vf(dl,n),fl!==null&&vf(fl,n),pl!==null&&vf(pl,n),Wp.forEach(e),Hp.forEach(e),t=0;t<Ga.length;t++)r=Ga[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Ga.length&&(t=Ga[0],t.blockedOn===null);)iH(t),t.blockedOn===null&&Ga.shift()}var fh=va.ReactCurrentBatchConfig,py=!0;function xre(n,e,t,r){var i=Wt,s=fh.transition;fh.transition=null;try{Wt=1,qP(n,e,t,r)}finally{Wt=i,fh.transition=s}}function wre(n,e,t,r){var i=Wt,s=fh.transition;fh.transition=null;try{Wt=4,qP(n,e,t,r)}finally{Wt=i,fh.transition=s}}function qP(n,e,t,r){if(py){var i=pM(n,e,t,r);if(i===null)zw(n,e,r,my,t),NN(n,r);else if(yre(i,n,e,t,r))r.stopPropagation();else if(NN(n,r),e&4&&-1<vre.indexOf(n)){for(;i!==null;){var s=og(i);if(s!==null&&eH(s),s=pM(n,e,t,r),s===null&&zw(n,e,r,my,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else zw(n,e,r,null,t)}}var my=null;function pM(n,e,t,r){if(my=null,n=jP(r),n=oc(n),n!==null)if(e=lu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=YW(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return my=n,null}function sH(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lre()){case $P:return 1;case XW:return 4;case dy:case cre:return 16;case QW:return 536870912;default:return 16}default:return 16}}var ol=null,UP=null,Nv=null;function oH(){if(Nv)return Nv;var n,e=UP,t=e.length,r,i="value"in ol?ol.value:ol.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Nv=i.slice(n,1<r?1-r:void 0)}function Av(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function g0(){return!0}function LN(){return!1}function Bi(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?g0:LN,this.isPropagationStopped=LN,this}return Mn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=g0)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=g0)},persist:function(){},isPersistent:g0}),e}var Dd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},WP=Bi(Dd),sg=Mn({},Dd,{view:0,detail:0}),_re=Bi(sg),Rw,Dw,yf,Rb=Mn({},sg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:HP,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==yf&&(yf&&n.type==="mousemove"?(Rw=n.screenX-yf.screenX,Dw=n.screenY-yf.screenY):Dw=Rw=0,yf=n),Rw)},movementY:function(n){return"movementY"in n?n.movementY:Dw}}),FN=Bi(Rb),Sre=Mn({},Rb,{dataTransfer:0}),kre=Bi(Sre),Cre=Mn({},sg,{relatedTarget:0}),Nw=Bi(Cre),Ere=Mn({},Dd,{animationName:0,elapsedTime:0,pseudoElement:0}),Tre=Bi(Ere),Mre=Mn({},Dd,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ire=Bi(Mre),Pre=Mn({},Dd,{data:0}),jN=Bi(Pre),Ore={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rre={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dre={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nre(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Dre[n])?!!e[n]:!1}function HP(){return Nre}var Are=Mn({},sg,{key:function(n){if(n.key){var e=Ore[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Av(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Rre[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:HP,charCode:function(n){return n.type==="keypress"?Av(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Av(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Lre=Bi(Are),Fre=Mn({},Rb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$N=Bi(Fre),jre=Mn({},sg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:HP}),$re=Bi(jre),Bre=Mn({},Dd,{propertyName:0,elapsedTime:0,pseudoElement:0}),zre=Bi(Bre),qre=Mn({},Rb,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ure=Bi(qre),Wre=[9,13,27,32],YP=ha&&"CompositionEvent"in window,mp=null;ha&&"documentMode"in document&&(mp=document.documentMode);var Hre=ha&&"TextEvent"in window&&!mp,aH=ha&&(!YP||mp&&8<mp&&11>=mp),BN=" ",zN=!1;function lH(n,e){switch(n){case"keyup":return Wre.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cH(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Wu=!1;function Yre(n,e){switch(n){case"compositionend":return cH(e);case"keypress":return e.which!==32?null:(zN=!0,BN);case"textInput":return n=e.data,n===BN&&zN?null:n;default:return null}}function Gre(n,e){if(Wu)return n==="compositionend"||!YP&&lH(n,e)?(n=oH(),Nv=UP=ol=null,Wu=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return aH&&e.locale!=="ko"?null:e.data;default:return null}}var Vre={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qN(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!Vre[n.type]:e==="textarea"}function uH(n,e,t,r){zW(r),e=gy(e,"onChange"),0<e.length&&(t=new WP("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var gp=null,Gp=null;function Kre(n){wH(n,0)}function Db(n){var e=Gu(n);if(NW(e))return n}function Xre(n,e){if(n==="change")return e}var hH=!1;if(ha){var Aw;if(ha){var Lw="oninput"in document;if(!Lw){var UN=document.createElement("div");UN.setAttribute("oninput","return;"),Lw=typeof UN.oninput=="function"}Aw=Lw}else Aw=!1;hH=Aw&&(!document.documentMode||9<document.documentMode)}function WN(){gp&&(gp.detachEvent("onpropertychange",dH),Gp=gp=null)}function dH(n){if(n.propertyName==="value"&&Db(Gp)){var e=[];uH(e,Gp,n,jP(n)),HW(Kre,e)}}function Qre(n,e,t){n==="focusin"?(WN(),gp=e,Gp=t,gp.attachEvent("onpropertychange",dH)):n==="focusout"&&WN()}function Jre(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Db(Gp)}function Zre(n,e){if(n==="click")return Db(e)}function eie(n,e){if(n==="input"||n==="change")return Db(e)}function tie(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var As=typeof Object.is=="function"?Object.is:tie;function Vp(n,e){if(As(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!XT.call(e,i)||!As(n[i],e[i]))return!1}return!0}function HN(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function YN(n,e){var t=HN(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=HN(t)}}function fH(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?fH(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function pH(){for(var n=window,e=cy();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=cy(n.document)}return e}function GP(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function nie(n){var e=pH(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&fH(t.ownerDocument.documentElement,t)){if(r!==null&&GP(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=YN(t,s);var o=YN(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var rie=ha&&"documentMode"in document&&11>=document.documentMode,Hu=null,mM=null,vp=null,gM=!1;function GN(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;gM||Hu==null||Hu!==cy(r)||(r=Hu,"selectionStart"in r&&GP(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vp&&Vp(vp,r)||(vp=r,r=gy(mM,"onSelect"),0<r.length&&(e=new WP("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Hu)))}function v0(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Yu={animationend:v0("Animation","AnimationEnd"),animationiteration:v0("Animation","AnimationIteration"),animationstart:v0("Animation","AnimationStart"),transitionend:v0("Transition","TransitionEnd")},Fw={},mH={};ha&&(mH=document.createElement("div").style,"AnimationEvent"in window||(delete Yu.animationend.animation,delete Yu.animationiteration.animation,delete Yu.animationstart.animation),"TransitionEvent"in window||delete Yu.transitionend.transition);function Nb(n){if(Fw[n])return Fw[n];if(!Yu[n])return n;var e=Yu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in mH)return Fw[n]=e[t];return n}var gH=Nb("animationend"),vH=Nb("animationiteration"),yH=Nb("animationstart"),bH=Nb("transitionend"),xH=new Map,VN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ol(n,e){xH.set(n,e),au(e,[n])}for(var jw=0;jw<VN.length;jw++){var $w=VN[jw],iie=$w.toLowerCase(),sie=$w[0].toUpperCase()+$w.slice(1);Ol(iie,"on"+sie)}Ol(gH,"onAnimationEnd");Ol(vH,"onAnimationIteration");Ol(yH,"onAnimationStart");Ol("dblclick","onDoubleClick");Ol("focusin","onFocus");Ol("focusout","onBlur");Ol(bH,"onTransitionEnd");Xh("onMouseEnter",["mouseout","mouseover"]);Xh("onMouseLeave",["mouseout","mouseover"]);Xh("onPointerEnter",["pointerout","pointerover"]);Xh("onPointerLeave",["pointerout","pointerover"]);au("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));au("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));au("onBeforeInput",["compositionend","keypress","textInput","paste"]);au("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));au("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));au("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oie=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jf));function KN(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,ire(r,e,void 0,n),n.currentTarget=null}function wH(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;KN(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;KN(i,a,c),s=l}}}if(hy)throw n=hM,hy=!1,hM=null,n}function ln(n,e){var t=e[wM];t===void 0&&(t=e[wM]=new Set);var r=n+"__bubble";t.has(r)||(_H(e,n,2,!1),t.add(r))}function Bw(n,e,t){var r=0;e&&(r|=4),_H(t,n,r,e)}var y0="_reactListening"+Math.random().toString(36).slice(2);function Kp(n){if(!n[y0]){n[y0]=!0,IW.forEach(function(t){t!=="selectionchange"&&(oie.has(t)||Bw(t,!1,n),Bw(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[y0]||(e[y0]=!0,Bw("selectionchange",!1,e))}}function _H(n,e,t,r){switch(sH(e)){case 1:var i=xre;break;case 4:i=wre;break;default:i=qP}t=i.bind(null,e,t,n),i=void 0,!uM||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function zw(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=oc(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}HW(function(){var c=s,u=jP(t),h=[];e:{var d=xH.get(n);if(d!==void 0){var f=WP,m=n;switch(n){case"keypress":if(Av(t)===0)break e;case"keydown":case"keyup":f=Lre;break;case"focusin":m="focus",f=Nw;break;case"focusout":m="blur",f=Nw;break;case"beforeblur":case"afterblur":f=Nw;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=FN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=kre;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=$re;break;case gH:case vH:case yH:f=Tre;break;case bH:f=zre;break;case"scroll":f=_re;break;case"wheel":f=Ure;break;case"copy":case"cut":case"paste":f=Ire;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=$N}var g=(e&4)!==0,v=!g&&n==="scroll",y=g?d!==null?d+"Capture":null:d;g=[];for(var b=c,w;b!==null;){w=b;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,y!==null&&(S=Up(b,y),S!=null&&g.push(Xp(b,S,w)))),v)break;b=b.return}0<g.length&&(d=new f(d,m,null,t,u),h.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",d&&t!==lM&&(m=t.relatedTarget||t.fromElement)&&(oc(m)||m[da]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(m=t.relatedTarget||t.toElement,f=c,m=m?oc(m):null,m!==null&&(v=lu(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=c),f!==m)){if(g=FN,S="onMouseLeave",y="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(g=$N,S="onPointerLeave",y="onPointerEnter",b="pointer"),v=f==null?d:Gu(f),w=m==null?d:Gu(m),d=new g(S,b+"leave",f,t,u),d.target=v,d.relatedTarget=w,S=null,oc(u)===c&&(g=new g(y,b+"enter",m,t,u),g.target=w,g.relatedTarget=v,S=g),v=S,f&&m)t:{for(g=f,y=m,b=0,w=g;w;w=Mu(w))b++;for(w=0,S=y;S;S=Mu(S))w++;for(;0<b-w;)g=Mu(g),b--;for(;0<w-b;)y=Mu(y),w--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=Mu(g),y=Mu(y)}g=null}else g=null;f!==null&&XN(h,d,f,g,!1),m!==null&&v!==null&&XN(h,v,m,g,!0)}}e:{if(d=c?Gu(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var _=Xre;else if(qN(d))if(hH)_=eie;else{_=Jre;var E=Qre}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(_=Zre);if(_&&(_=_(n,c))){uH(h,_,t,u);break e}E&&E(n,d,c),n==="focusout"&&(E=d._wrapperState)&&E.controlled&&d.type==="number"&&rM(d,"number",d.value)}switch(E=c?Gu(c):window,n){case"focusin":(qN(E)||E.contentEditable==="true")&&(Hu=E,mM=c,vp=null);break;case"focusout":vp=mM=Hu=null;break;case"mousedown":gM=!0;break;case"contextmenu":case"mouseup":case"dragend":gM=!1,GN(h,t,u);break;case"selectionchange":if(rie)break;case"keydown":case"keyup":GN(h,t,u)}var C;if(YP)e:{switch(n){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Wu?lH(n,t)&&(T="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(T="onCompositionStart");T&&(aH&&t.locale!=="ko"&&(Wu||T!=="onCompositionStart"?T==="onCompositionEnd"&&Wu&&(C=oH()):(ol=u,UP="value"in ol?ol.value:ol.textContent,Wu=!0)),E=gy(c,T),0<E.length&&(T=new jN(T,n,null,t,u),h.push({event:T,listeners:E}),C?T.data=C:(C=cH(t),C!==null&&(T.data=C)))),(C=Hre?Yre(n,t):Gre(n,t))&&(c=gy(c,"onBeforeInput"),0<c.length&&(u=new jN("onBeforeInput","beforeinput",null,t,u),h.push({event:u,listeners:c}),u.data=C))}wH(h,e)})}function Xp(n,e,t){return{instance:n,listener:e,currentTarget:t}}function gy(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Up(n,t),s!=null&&r.unshift(Xp(n,s,i)),s=Up(n,e),s!=null&&r.push(Xp(n,s,i))),n=n.return}return r}function Mu(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function XN(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Up(t,s),l!=null&&o.unshift(Xp(t,l,a))):i||(l=Up(t,s),l!=null&&o.push(Xp(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var aie=/\r\n?/g,lie=/\u0000|\uFFFD/g;function QN(n){return(typeof n=="string"?n:""+n).replace(aie,`
`).replace(lie,"")}function b0(n,e,t){if(e=QN(e),QN(n)!==e&&t)throw Error(xe(425))}function vy(){}var vM=null,yM=null;function bM(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xM=typeof setTimeout=="function"?setTimeout:void 0,cie=typeof clearTimeout=="function"?clearTimeout:void 0,JN=typeof Promise=="function"?Promise:void 0,uie=typeof queueMicrotask=="function"?queueMicrotask:typeof JN<"u"?function(n){return JN.resolve(null).then(n).catch(hie)}:xM;function hie(n){setTimeout(function(){throw n})}function qw(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Yp(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Yp(e)}function ml(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function ZN(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Nd=Math.random().toString(36).slice(2),ho="__reactFiber$"+Nd,Qp="__reactProps$"+Nd,da="__reactContainer$"+Nd,wM="__reactEvents$"+Nd,die="__reactListeners$"+Nd,fie="__reactHandles$"+Nd;function oc(n){var e=n[ho];if(e)return e;for(var t=n.parentNode;t;){if(e=t[da]||t[ho]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=ZN(n);n!==null;){if(t=n[ho])return t;n=ZN(n)}return e}n=t,t=n.parentNode}return null}function og(n){return n=n[ho]||n[da],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Gu(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(xe(33))}function Ab(n){return n[Qp]||null}var _M=[],Vu=-1;function Rl(n){return{current:n}}function un(n){0>Vu||(n.current=_M[Vu],_M[Vu]=null,Vu--)}function rn(n,e){Vu++,_M[Vu]=n.current,n.current=e}var El={},Nr=Rl(El),ci=Rl(!1),$c=El;function Qh(n,e){var t=n.type.contextTypes;if(!t)return El;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function ui(n){return n=n.childContextTypes,n!=null}function yy(){un(ci),un(Nr)}function eA(n,e,t){if(Nr.current!==El)throw Error(xe(168));rn(Nr,e),rn(ci,t)}function SH(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(xe(108,Qne(n)||"Unknown",i));return Mn({},t,r)}function by(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||El,$c=Nr.current,rn(Nr,n),rn(ci,ci.current),!0}function tA(n,e,t){var r=n.stateNode;if(!r)throw Error(xe(169));t?(n=SH(n,e,$c),r.__reactInternalMemoizedMergedChildContext=n,un(ci),un(Nr),rn(Nr,n)):un(ci),rn(ci,t)}var Wo=null,Lb=!1,Uw=!1;function kH(n){Wo===null?Wo=[n]:Wo.push(n)}function pie(n){Lb=!0,kH(n)}function Dl(){if(!Uw&&Wo!==null){Uw=!0;var n=0,e=Wt;try{var t=Wo;for(Wt=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Wo=null,Lb=!1}catch(i){throw Wo!==null&&(Wo=Wo.slice(n+1)),KW($P,Dl),i}finally{Wt=e,Uw=!1}}return null}var Ku=[],Xu=0,xy=null,wy=0,rs=[],is=0,Bc=null,Zo=1,ea="";function Xl(n,e){Ku[Xu++]=wy,Ku[Xu++]=xy,xy=n,wy=e}function CH(n,e,t){rs[is++]=Zo,rs[is++]=ea,rs[is++]=Bc,Bc=n;var r=Zo;n=ea;var i=32-Rs(r)-1;r&=~(1<<i),t+=1;var s=32-Rs(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Zo=1<<32-Rs(e)+i|t<<i|r,ea=s+n}else Zo=1<<s|t<<i|r,ea=n}function VP(n){n.return!==null&&(Xl(n,1),CH(n,1,0))}function KP(n){for(;n===xy;)xy=Ku[--Xu],Ku[Xu]=null,wy=Ku[--Xu],Ku[Xu]=null;for(;n===Bc;)Bc=rs[--is],rs[is]=null,ea=rs[--is],rs[is]=null,Zo=rs[--is],rs[is]=null}var Pi=null,Ii=null,bn=!1,Is=null;function EH(n,e){var t=ss(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function nA(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Pi=n,Ii=ml(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Pi=n,Ii=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Bc!==null?{id:Zo,overflow:ea}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ss(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Pi=n,Ii=null,!0):!1;default:return!1}}function SM(n){return(n.mode&1)!==0&&(n.flags&128)===0}function kM(n){if(bn){var e=Ii;if(e){var t=e;if(!nA(n,e)){if(SM(n))throw Error(xe(418));e=ml(t.nextSibling);var r=Pi;e&&nA(n,e)?EH(r,t):(n.flags=n.flags&-4097|2,bn=!1,Pi=n)}}else{if(SM(n))throw Error(xe(418));n.flags=n.flags&-4097|2,bn=!1,Pi=n}}}function rA(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Pi=n}function x0(n){if(n!==Pi)return!1;if(!bn)return rA(n),bn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!bM(n.type,n.memoizedProps)),e&&(e=Ii)){if(SM(n))throw TH(),Error(xe(418));for(;e;)EH(n,e),e=ml(e.nextSibling)}if(rA(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(xe(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Ii=ml(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Ii=null}}else Ii=Pi?ml(n.stateNode.nextSibling):null;return!0}function TH(){for(var n=Ii;n;)n=ml(n.nextSibling)}function Jh(){Ii=Pi=null,bn=!1}function XP(n){Is===null?Is=[n]:Is.push(n)}var mie=va.ReactCurrentBatchConfig;function bf(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(xe(309));var r=t.stateNode}if(!r)throw Error(xe(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(xe(284));if(!t._owner)throw Error(xe(290,n))}return n}function w0(n,e){throw n=Object.prototype.toString.call(e),Error(xe(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function iA(n){var e=n._init;return e(n._payload)}function MH(n){function e(y,b){if(n){var w=y.deletions;w===null?(y.deletions=[b],y.flags|=16):w.push(b)}}function t(y,b){if(!n)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function i(y,b){return y=bl(y,b),y.index=0,y.sibling=null,y}function s(y,b,w){return y.index=w,n?(w=y.alternate,w!==null?(w=w.index,w<b?(y.flags|=2,b):w):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return n&&y.alternate===null&&(y.flags|=2),y}function a(y,b,w,S){return b===null||b.tag!==6?(b=Xw(w,y.mode,S),b.return=y,b):(b=i(b,w),b.return=y,b)}function l(y,b,w,S){var _=w.type;return _===Uu?u(y,b,w.props.children,S,w.key):b!==null&&(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Wa&&iA(_)===b.type)?(S=i(b,w.props),S.ref=bf(y,b,w),S.return=y,S):(S=qv(w.type,w.key,w.props,null,y.mode,S),S.ref=bf(y,b,w),S.return=y,S)}function c(y,b,w,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=Qw(w,y.mode,S),b.return=y,b):(b=i(b,w.children||[]),b.return=y,b)}function u(y,b,w,S,_){return b===null||b.tag!==7?(b=Tc(w,y.mode,S,_),b.return=y,b):(b=i(b,w),b.return=y,b)}function h(y,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Xw(""+b,y.mode,w),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case u0:return w=qv(b.type,b.key,b.props,null,y.mode,w),w.ref=bf(y,null,b),w.return=y,w;case qu:return b=Qw(b,y.mode,w),b.return=y,b;case Wa:var S=b._init;return h(y,S(b._payload),w)}if(Xf(b)||pf(b))return b=Tc(b,y.mode,w,null),b.return=y,b;w0(y,b)}return null}function d(y,b,w,S){var _=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:a(y,b,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case u0:return w.key===_?l(y,b,w,S):null;case qu:return w.key===_?c(y,b,w,S):null;case Wa:return _=w._init,d(y,b,_(w._payload),S)}if(Xf(w)||pf(w))return _!==null?null:u(y,b,w,S,null);w0(y,w)}return null}function f(y,b,w,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(w)||null,a(b,y,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case u0:return y=y.get(S.key===null?w:S.key)||null,l(b,y,S,_);case qu:return y=y.get(S.key===null?w:S.key)||null,c(b,y,S,_);case Wa:var E=S._init;return f(y,b,w,E(S._payload),_)}if(Xf(S)||pf(S))return y=y.get(w)||null,u(b,y,S,_,null);w0(b,S)}return null}function m(y,b,w,S){for(var _=null,E=null,C=b,T=b=0,O=null;C!==null&&T<w.length;T++){C.index>T?(O=C,C=null):O=C.sibling;var R=d(y,C,w[T],S);if(R===null){C===null&&(C=O);break}n&&C&&R.alternate===null&&e(y,C),b=s(R,b,T),E===null?_=R:E.sibling=R,E=R,C=O}if(T===w.length)return t(y,C),bn&&Xl(y,T),_;if(C===null){for(;T<w.length;T++)C=h(y,w[T],S),C!==null&&(b=s(C,b,T),E===null?_=C:E.sibling=C,E=C);return bn&&Xl(y,T),_}for(C=r(y,C);T<w.length;T++)O=f(C,y,T,w[T],S),O!==null&&(n&&O.alternate!==null&&C.delete(O.key===null?T:O.key),b=s(O,b,T),E===null?_=O:E.sibling=O,E=O);return n&&C.forEach(function(D){return e(y,D)}),bn&&Xl(y,T),_}function g(y,b,w,S){var _=pf(w);if(typeof _!="function")throw Error(xe(150));if(w=_.call(w),w==null)throw Error(xe(151));for(var E=_=null,C=b,T=b=0,O=null,R=w.next();C!==null&&!R.done;T++,R=w.next()){C.index>T?(O=C,C=null):O=C.sibling;var D=d(y,C,R.value,S);if(D===null){C===null&&(C=O);break}n&&C&&D.alternate===null&&e(y,C),b=s(D,b,T),E===null?_=D:E.sibling=D,E=D,C=O}if(R.done)return t(y,C),bn&&Xl(y,T),_;if(C===null){for(;!R.done;T++,R=w.next())R=h(y,R.value,S),R!==null&&(b=s(R,b,T),E===null?_=R:E.sibling=R,E=R);return bn&&Xl(y,T),_}for(C=r(y,C);!R.done;T++,R=w.next())R=f(C,y,T,R.value,S),R!==null&&(n&&R.alternate!==null&&C.delete(R.key===null?T:R.key),b=s(R,b,T),E===null?_=R:E.sibling=R,E=R);return n&&C.forEach(function(A){return e(y,A)}),bn&&Xl(y,T),_}function v(y,b,w,S){if(typeof w=="object"&&w!==null&&w.type===Uu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case u0:e:{for(var _=w.key,E=b;E!==null;){if(E.key===_){if(_=w.type,_===Uu){if(E.tag===7){t(y,E.sibling),b=i(E,w.props.children),b.return=y,y=b;break e}}else if(E.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Wa&&iA(_)===E.type){t(y,E.sibling),b=i(E,w.props),b.ref=bf(y,E,w),b.return=y,y=b;break e}t(y,E);break}else e(y,E);E=E.sibling}w.type===Uu?(b=Tc(w.props.children,y.mode,S,w.key),b.return=y,y=b):(S=qv(w.type,w.key,w.props,null,y.mode,S),S.ref=bf(y,b,w),S.return=y,y=S)}return o(y);case qu:e:{for(E=w.key;b!==null;){if(b.key===E)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){t(y,b.sibling),b=i(b,w.children||[]),b.return=y,y=b;break e}else{t(y,b);break}else e(y,b);b=b.sibling}b=Qw(w,y.mode,S),b.return=y,y=b}return o(y);case Wa:return E=w._init,v(y,b,E(w._payload),S)}if(Xf(w))return m(y,b,w,S);if(pf(w))return g(y,b,w,S);w0(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(t(y,b.sibling),b=i(b,w),b.return=y,y=b):(t(y,b),b=Xw(w,y.mode,S),b.return=y,y=b),o(y)):t(y,b)}return v}var Zh=MH(!0),IH=MH(!1),_y=Rl(null),Sy=null,Qu=null,QP=null;function JP(){QP=Qu=Sy=null}function ZP(n){var e=_y.current;un(_y),n._currentValue=e}function CM(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function ph(n,e){Sy=n,QP=Qu=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(oi=!0),n.firstContext=null)}function us(n){var e=n._currentValue;if(QP!==n)if(n={context:n,memoizedValue:e,next:null},Qu===null){if(Sy===null)throw Error(xe(308));Qu=n,Sy.dependencies={lanes:0,firstContext:n}}else Qu=Qu.next=n;return e}var ac=null;function eO(n){ac===null?ac=[n]:ac.push(n)}function PH(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,eO(e)):(t.next=i.next,i.next=t),e.interleaved=t,fa(n,r)}function fa(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ha=!1;function tO(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OH(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ra(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function gl(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Dt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,fa(n,t)}return i=r.interleaved,i===null?(e.next=e,eO(r)):(e.next=i.next,i.next=e),r.interleaved=e,fa(n,t)}function Lv(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,BP(n,t)}}function sA(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function ky(n,e,t,r){var i=n.updateQueue;Ha=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=n,g=a;switch(d=e,f=t,g.tag){case 1:if(m=g.payload,typeof m=="function"){h=m.call(f,h,d);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,d=typeof m=="function"?m.call(f,h,d):m,d==null)break e;h=Mn({},h,d);break e;case 2:Ha=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);qc|=o,n.lanes=o,n.memoizedState=h}}function oA(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(xe(191,i));i.call(r)}}}var ag={},vo=Rl(ag),Jp=Rl(ag),Zp=Rl(ag);function lc(n){if(n===ag)throw Error(xe(174));return n}function nO(n,e){switch(rn(Zp,e),rn(Jp,n),rn(vo,ag),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:sM(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=sM(e,n)}un(vo),rn(vo,e)}function ed(){un(vo),un(Jp),un(Zp)}function RH(n){lc(Zp.current);var e=lc(vo.current),t=sM(e,n.type);e!==t&&(rn(Jp,n),rn(vo,t))}function rO(n){Jp.current===n&&(un(vo),un(Jp))}var kn=Rl(0);function Cy(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ww=[];function iO(){for(var n=0;n<Ww.length;n++)Ww[n]._workInProgressVersionPrimary=null;Ww.length=0}var Fv=va.ReactCurrentDispatcher,Hw=va.ReactCurrentBatchConfig,zc=0,Tn=null,er=null,or=null,Ey=!1,yp=!1,em=0,gie=0;function Ir(){throw Error(xe(321))}function sO(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!As(n[t],e[t]))return!1;return!0}function oO(n,e,t,r,i,s){if(zc=s,Tn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fv.current=n===null||n.memoizedState===null?xie:wie,n=t(r,i),yp){s=0;do{if(yp=!1,em=0,25<=s)throw Error(xe(301));s+=1,or=er=null,e.updateQueue=null,Fv.current=_ie,n=t(r,i)}while(yp)}if(Fv.current=Ty,e=er!==null&&er.next!==null,zc=0,or=er=Tn=null,Ey=!1,e)throw Error(xe(300));return n}function aO(){var n=em!==0;return em=0,n}function no(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return or===null?Tn.memoizedState=or=n:or=or.next=n,or}function hs(){if(er===null){var n=Tn.alternate;n=n!==null?n.memoizedState:null}else n=er.next;var e=or===null?Tn.memoizedState:or.next;if(e!==null)or=e,er=n;else{if(n===null)throw Error(xe(310));er=n,n={memoizedState:er.memoizedState,baseState:er.baseState,baseQueue:er.baseQueue,queue:er.queue,next:null},or===null?Tn.memoizedState=or=n:or=or.next=n}return or}function tm(n,e){return typeof e=="function"?e(n):e}function Yw(n){var e=hs(),t=e.queue;if(t===null)throw Error(xe(311));t.lastRenderedReducer=n;var r=er,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((zc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Tn.lanes|=u,qc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,As(r,e.memoizedState)||(oi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Tn.lanes|=s,qc|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Gw(n){var e=hs(),t=e.queue;if(t===null)throw Error(xe(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);As(s,e.memoizedState)||(oi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function DH(){}function NH(n,e){var t=Tn,r=hs(),i=e(),s=!As(r.memoizedState,i);if(s&&(r.memoizedState=i,oi=!0),r=r.queue,lO(FH.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||or!==null&&or.memoizedState.tag&1){if(t.flags|=2048,nm(9,LH.bind(null,t,r,i,e),void 0,null),fr===null)throw Error(xe(349));zc&30||AH(t,e,i)}return i}function AH(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Tn.updateQueue,e===null?(e={lastEffect:null,stores:null},Tn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function LH(n,e,t,r){e.value=t,e.getSnapshot=r,jH(e)&&$H(n)}function FH(n,e,t){return t(function(){jH(e)&&$H(n)})}function jH(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!As(n,t)}catch{return!0}}function $H(n){var e=fa(n,1);e!==null&&Ds(e,n,1,-1)}function aA(n){var e=no();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tm,lastRenderedState:n},e.queue=n,n=n.dispatch=bie.bind(null,Tn,n),[e.memoizedState,n]}function nm(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Tn.updateQueue,e===null?(e={lastEffect:null,stores:null},Tn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function BH(){return hs().memoizedState}function jv(n,e,t,r){var i=no();Tn.flags|=n,i.memoizedState=nm(1|e,t,void 0,r===void 0?null:r)}function Fb(n,e,t,r){var i=hs();r=r===void 0?null:r;var s=void 0;if(er!==null){var o=er.memoizedState;if(s=o.destroy,r!==null&&sO(r,o.deps)){i.memoizedState=nm(e,t,s,r);return}}Tn.flags|=n,i.memoizedState=nm(1|e,t,s,r)}function lA(n,e){return jv(8390656,8,n,e)}function lO(n,e){return Fb(2048,8,n,e)}function zH(n,e){return Fb(4,2,n,e)}function qH(n,e){return Fb(4,4,n,e)}function UH(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function WH(n,e,t){return t=t!=null?t.concat([n]):null,Fb(4,4,UH.bind(null,e,n),t)}function cO(){}function HH(n,e){var t=hs();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&sO(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function YH(n,e){var t=hs();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&sO(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function GH(n,e,t){return zc&21?(As(t,e)||(t=JW(),Tn.lanes|=t,qc|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,oi=!0),n.memoizedState=t)}function vie(n,e){var t=Wt;Wt=t!==0&&4>t?t:4,n(!0);var r=Hw.transition;Hw.transition={};try{n(!1),e()}finally{Wt=t,Hw.transition=r}}function VH(){return hs().memoizedState}function yie(n,e,t){var r=yl(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},KH(n))XH(e,t);else if(t=PH(n,e,t,r),t!==null){var i=Yr();Ds(t,n,r,i),QH(t,e,r)}}function bie(n,e,t){var r=yl(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(KH(n))XH(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,As(a,o)){var l=e.interleaved;l===null?(i.next=i,eO(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=PH(n,e,i,r),t!==null&&(i=Yr(),Ds(t,n,r,i),QH(t,e,r))}}function KH(n){var e=n.alternate;return n===Tn||e!==null&&e===Tn}function XH(n,e){yp=Ey=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function QH(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,BP(n,t)}}var Ty={readContext:us,useCallback:Ir,useContext:Ir,useEffect:Ir,useImperativeHandle:Ir,useInsertionEffect:Ir,useLayoutEffect:Ir,useMemo:Ir,useReducer:Ir,useRef:Ir,useState:Ir,useDebugValue:Ir,useDeferredValue:Ir,useTransition:Ir,useMutableSource:Ir,useSyncExternalStore:Ir,useId:Ir,unstable_isNewReconciler:!1},xie={readContext:us,useCallback:function(n,e){return no().memoizedState=[n,e===void 0?null:e],n},useContext:us,useEffect:lA,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,jv(4194308,4,UH.bind(null,e,n),t)},useLayoutEffect:function(n,e){return jv(4194308,4,n,e)},useInsertionEffect:function(n,e){return jv(4,2,n,e)},useMemo:function(n,e){var t=no();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=no();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=yie.bind(null,Tn,n),[r.memoizedState,n]},useRef:function(n){var e=no();return n={current:n},e.memoizedState=n},useState:aA,useDebugValue:cO,useDeferredValue:function(n){return no().memoizedState=n},useTransition:function(){var n=aA(!1),e=n[0];return n=vie.bind(null,n[1]),no().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Tn,i=no();if(bn){if(t===void 0)throw Error(xe(407));t=t()}else{if(t=e(),fr===null)throw Error(xe(349));zc&30||AH(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,lA(FH.bind(null,r,s,n),[n]),r.flags|=2048,nm(9,LH.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=no(),e=fr.identifierPrefix;if(bn){var t=ea,r=Zo;t=(r&~(1<<32-Rs(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=em++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=gie++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},wie={readContext:us,useCallback:HH,useContext:us,useEffect:lO,useImperativeHandle:WH,useInsertionEffect:zH,useLayoutEffect:qH,useMemo:YH,useReducer:Yw,useRef:BH,useState:function(){return Yw(tm)},useDebugValue:cO,useDeferredValue:function(n){var e=hs();return GH(e,er.memoizedState,n)},useTransition:function(){var n=Yw(tm)[0],e=hs().memoizedState;return[n,e]},useMutableSource:DH,useSyncExternalStore:NH,useId:VH,unstable_isNewReconciler:!1},_ie={readContext:us,useCallback:HH,useContext:us,useEffect:lO,useImperativeHandle:WH,useInsertionEffect:zH,useLayoutEffect:qH,useMemo:YH,useReducer:Gw,useRef:BH,useState:function(){return Gw(tm)},useDebugValue:cO,useDeferredValue:function(n){var e=hs();return er===null?e.memoizedState=n:GH(e,er.memoizedState,n)},useTransition:function(){var n=Gw(tm)[0],e=hs().memoizedState;return[n,e]},useMutableSource:DH,useSyncExternalStore:NH,useId:VH,unstable_isNewReconciler:!1};function _s(n,e){if(n&&n.defaultProps){e=Mn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function EM(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Mn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var jb={isMounted:function(n){return(n=n._reactInternals)?lu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Yr(),i=yl(n),s=ra(r,i);s.payload=e,t!=null&&(s.callback=t),e=gl(n,s,i),e!==null&&(Ds(e,n,i,r),Lv(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Yr(),i=yl(n),s=ra(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=gl(n,s,i),e!==null&&(Ds(e,n,i,r),Lv(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Yr(),r=yl(n),i=ra(t,r);i.tag=2,e!=null&&(i.callback=e),e=gl(n,i,r),e!==null&&(Ds(e,n,r,t),Lv(e,n,r))}};function cA(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Vp(t,r)||!Vp(i,s):!0}function JH(n,e,t){var r=!1,i=El,s=e.contextType;return typeof s=="object"&&s!==null?s=us(s):(i=ui(e)?$c:Nr.current,r=e.contextTypes,s=(r=r!=null)?Qh(n,i):El),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jb,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function uA(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&jb.enqueueReplaceState(e,e.state,null)}function TM(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},tO(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=us(s):(s=ui(e)?$c:Nr.current,i.context=Qh(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(EM(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&jb.enqueueReplaceState(i,i.state,null),ky(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function td(n,e){try{var t="",r=e;do t+=Xne(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function Vw(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function MM(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Sie=typeof WeakMap=="function"?WeakMap:Map;function ZH(n,e,t){t=ra(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Iy||(Iy=!0,jM=r),MM(n,e)},t}function eY(n,e,t){t=ra(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){MM(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){MM(n,e),typeof r!="function"&&(vl===null?vl=new Set([this]):vl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function hA(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new Sie;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=Fie.bind(null,n,e,t),e.then(n,n))}function dA(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function fA(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ra(-1,1),e.tag=2,gl(t,e,1))),t.lanes|=1),n)}var kie=va.ReactCurrentOwner,oi=!1;function zr(n,e,t,r){e.child=n===null?IH(e,null,t,r):Zh(e,n.child,t,r)}function pA(n,e,t,r,i){t=t.render;var s=e.ref;return ph(e,i),r=oO(n,e,t,r,s,i),t=aO(),n!==null&&!oi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,pa(n,e,i)):(bn&&t&&VP(e),e.flags|=1,zr(n,e,r,i),e.child)}function mA(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!vO(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,tY(n,e,s,r,i)):(n=qv(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Vp,t(o,r)&&n.ref===e.ref)return pa(n,e,i)}return e.flags|=1,n=bl(s,r),n.ref=e.ref,n.return=e,e.child=n}function tY(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(Vp(s,r)&&n.ref===e.ref)if(oi=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(oi=!0);else return e.lanes=n.lanes,pa(n,e,i)}return IM(n,e,t,r,i)}function nY(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn(Zu,ki),ki|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,rn(Zu,ki),ki|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,rn(Zu,ki),ki|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,rn(Zu,ki),ki|=r;return zr(n,e,i,t),e.child}function rY(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function IM(n,e,t,r,i){var s=ui(t)?$c:Nr.current;return s=Qh(e,s),ph(e,i),t=oO(n,e,t,r,s,i),r=aO(),n!==null&&!oi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,pa(n,e,i)):(bn&&r&&VP(e),e.flags|=1,zr(n,e,t,i),e.child)}function gA(n,e,t,r,i){if(ui(t)){var s=!0;by(e)}else s=!1;if(ph(e,i),e.stateNode===null)$v(n,e),JH(e,t,r),TM(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=us(c):(c=ui(t)?$c:Nr.current,c=Qh(e,c));var u=t.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&uA(e,o,r,c),Ha=!1;var d=e.memoizedState;o.state=d,ky(e,r,o,i),l=e.memoizedState,a!==r||d!==l||ci.current||Ha?(typeof u=="function"&&(EM(e,t,u,r),l=e.memoizedState),(a=Ha||cA(e,t,a,r,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,OH(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:_s(e.type,a),o.props=c,h=e.pendingProps,d=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=us(l):(l=ui(t)?$c:Nr.current,l=Qh(e,l));var f=t.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&uA(e,o,r,l),Ha=!1,d=e.memoizedState,o.state=d,ky(e,r,o,i);var m=e.memoizedState;a!==h||d!==m||ci.current||Ha?(typeof f=="function"&&(EM(e,t,f,r),m=e.memoizedState),(c=Ha||cA(e,t,c,r,d,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),r=!1)}return PM(n,e,t,r,s,i)}function PM(n,e,t,r,i,s){rY(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&tA(e,t,!1),pa(n,e,s);r=e.stateNode,kie.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Zh(e,n.child,null,s),e.child=Zh(e,null,a,s)):zr(n,e,a,s),e.memoizedState=r.state,i&&tA(e,t,!0),e.child}function iY(n){var e=n.stateNode;e.pendingContext?eA(n,e.pendingContext,e.pendingContext!==e.context):e.context&&eA(n,e.context,!1),nO(n,e.containerInfo)}function vA(n,e,t,r,i){return Jh(),XP(i),e.flags|=256,zr(n,e,t,r),e.child}var OM={dehydrated:null,treeContext:null,retryLane:0};function RM(n){return{baseLanes:n,cachePool:null,transitions:null}}function sY(n,e,t){var r=e.pendingProps,i=kn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),rn(kn,i&1),n===null)return kM(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=zb(o,r,0,null),n=Tc(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=RM(t),e.memoizedState=OM,n):uO(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Cie(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=bl(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=bl(a,s):(s=Tc(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?RM(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=OM,r}return s=n.child,n=s.sibling,r=bl(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function uO(n,e){return e=zb({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function _0(n,e,t,r){return r!==null&&XP(r),Zh(e,n.child,null,t),n=uO(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Cie(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=Vw(Error(xe(422))),_0(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=zb({mode:"visible",children:r.children},i,0,null),s=Tc(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Zh(e,n.child,null,o),e.child.memoizedState=RM(o),e.memoizedState=OM,s);if(!(e.mode&1))return _0(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(xe(419)),r=Vw(s,r,void 0),_0(n,e,o,r)}if(a=(o&n.childLanes)!==0,oi||a){if(r=fr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,fa(n,i),Ds(r,n,i,-1))}return gO(),r=Vw(Error(xe(421))),_0(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=jie.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Ii=ml(i.nextSibling),Pi=e,bn=!0,Is=null,n!==null&&(rs[is++]=Zo,rs[is++]=ea,rs[is++]=Bc,Zo=n.id,ea=n.overflow,Bc=e),e=uO(e,r.children),e.flags|=4096,e)}function yA(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),CM(n.return,e,t)}function Kw(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function oY(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(zr(n,e,r.children,t),r=kn.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&yA(n,t,e);else if(n.tag===19)yA(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(rn(kn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Cy(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Kw(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Cy(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}Kw(e,!0,t,null,s);break;case"together":Kw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $v(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function pa(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),qc|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(xe(153));if(e.child!==null){for(n=e.child,t=bl(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=bl(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Eie(n,e,t){switch(e.tag){case 3:iY(e),Jh();break;case 5:RH(e);break;case 1:ui(e.type)&&by(e);break;case 4:nO(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;rn(_y,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(rn(kn,kn.current&1),e.flags|=128,null):t&e.child.childLanes?sY(n,e,t):(rn(kn,kn.current&1),n=pa(n,e,t),n!==null?n.sibling:null);rn(kn,kn.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return oY(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),rn(kn,kn.current),r)break;return null;case 22:case 23:return e.lanes=0,nY(n,e,t)}return pa(n,e,t)}var aY,DM,lY,cY;aY=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};DM=function(){};lY=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,lc(vo.current);var s=null;switch(t){case"input":i=tM(n,i),r=tM(n,r),s=[];break;case"select":i=Mn({},i,{value:void 0}),r=Mn({},r,{value:void 0}),s=[];break;case"textarea":i=iM(n,i),r=iM(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=vy)}oM(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(zp.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(zp.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ln("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};cY=function(n,e,t,r){t!==r&&(e.flags|=4)};function xf(n,e){if(!bn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Pr(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Tie(n,e,t){var r=e.pendingProps;switch(KP(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pr(e),null;case 1:return ui(e.type)&&yy(),Pr(e),null;case 3:return r=e.stateNode,ed(),un(ci),un(Nr),iO(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(x0(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Is!==null&&(zM(Is),Is=null))),DM(n,e),Pr(e),null;case 5:rO(e);var i=lc(Zp.current);if(t=e.type,n!==null&&e.stateNode!=null)lY(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(xe(166));return Pr(e),null}if(n=lc(vo.current),x0(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[ho]=e,r[Qp]=s,n=(e.mode&1)!==0,t){case"dialog":ln("cancel",r),ln("close",r);break;case"iframe":case"object":case"embed":ln("load",r);break;case"video":case"audio":for(i=0;i<Jf.length;i++)ln(Jf[i],r);break;case"source":ln("error",r);break;case"img":case"image":case"link":ln("error",r),ln("load",r);break;case"details":ln("toggle",r);break;case"input":TN(r,s),ln("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ln("invalid",r);break;case"textarea":IN(r,s),ln("invalid",r)}oM(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&b0(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&b0(r.textContent,a,n),i=["children",""+a]):zp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ln("scroll",r)}switch(t){case"input":h0(r),MN(r,s,!0);break;case"textarea":h0(r),PN(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=vy)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=FW(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[ho]=e,n[Qp]=r,aY(n,e,!1,!1),e.stateNode=n;e:{switch(o=aM(t,r),t){case"dialog":ln("cancel",n),ln("close",n),i=r;break;case"iframe":case"object":case"embed":ln("load",n),i=r;break;case"video":case"audio":for(i=0;i<Jf.length;i++)ln(Jf[i],n);i=r;break;case"source":ln("error",n),i=r;break;case"img":case"image":case"link":ln("error",n),ln("load",n),i=r;break;case"details":ln("toggle",n),i=r;break;case"input":TN(n,r),i=tM(n,r),ln("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Mn({},r,{value:void 0}),ln("invalid",n);break;case"textarea":IN(n,r),i=iM(n,r),ln("invalid",n);break;default:i=r}oM(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?BW(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&jW(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&qp(n,l):typeof l=="number"&&qp(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(zp.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ln("scroll",n):l!=null&&NP(n,s,l,o))}switch(t){case"input":h0(n),MN(n,r,!1);break;case"textarea":h0(n),PN(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Cl(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?uh(n,!!r.multiple,s,!1):r.defaultValue!=null&&uh(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=vy)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pr(e),null;case 6:if(n&&e.stateNode!=null)cY(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(xe(166));if(t=lc(Zp.current),lc(vo.current),x0(e)){if(r=e.stateNode,t=e.memoizedProps,r[ho]=e,(s=r.nodeValue!==t)&&(n=Pi,n!==null))switch(n.tag){case 3:b0(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&b0(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[ho]=e,e.stateNode=r}return Pr(e),null;case 13:if(un(kn),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(bn&&Ii!==null&&e.mode&1&&!(e.flags&128))TH(),Jh(),e.flags|=98560,s=!1;else if(s=x0(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(xe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(xe(317));s[ho]=e}else Jh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pr(e),s=!1}else Is!==null&&(zM(Is),Is=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||kn.current&1?tr===0&&(tr=3):gO())),e.updateQueue!==null&&(e.flags|=4),Pr(e),null);case 4:return ed(),DM(n,e),n===null&&Kp(e.stateNode.containerInfo),Pr(e),null;case 10:return ZP(e.type._context),Pr(e),null;case 17:return ui(e.type)&&yy(),Pr(e),null;case 19:if(un(kn),s=e.memoizedState,s===null)return Pr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)xf(s,!1);else{if(tr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Cy(n),o!==null){for(e.flags|=128,xf(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return rn(kn,kn.current&1|2),e.child}n=n.sibling}s.tail!==null&&Bn()>nd&&(e.flags|=128,r=!0,xf(s,!1),e.lanes=4194304)}else{if(!r)if(n=Cy(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),xf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!bn)return Pr(e),null}else 2*Bn()-s.renderingStartTime>nd&&t!==1073741824&&(e.flags|=128,r=!0,xf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Bn(),e.sibling=null,t=kn.current,rn(kn,r?t&1|2:t&1),e):(Pr(e),null);case 22:case 23:return mO(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ki&1073741824&&(Pr(e),e.subtreeFlags&6&&(e.flags|=8192)):Pr(e),null;case 24:return null;case 25:return null}throw Error(xe(156,e.tag))}function Mie(n,e){switch(KP(e),e.tag){case 1:return ui(e.type)&&yy(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return ed(),un(ci),un(Nr),iO(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return rO(e),null;case 13:if(un(kn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(xe(340));Jh()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return un(kn),null;case 4:return ed(),null;case 10:return ZP(e.type._context),null;case 22:case 23:return mO(),null;case 24:return null;default:return null}}var S0=!1,Dr=!1,Iie=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function Ju(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Dn(n,e,r)}else t.current=null}function NM(n,e,t){try{t()}catch(r){Dn(n,e,r)}}var bA=!1;function Pie(n,e){if(vM=py,n=pH(),GP(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=n,d=null;t:for(;;){for(var f;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===n)break t;if(d===t&&++c===i&&(a=o),d===s&&++u===r&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(yM={focusedElem:n,selectionRange:t},py=!1,Ye=e;Ye!==null;)if(e=Ye,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Ye=n;else for(;Ye!==null;){e=Ye;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,v=m.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:_s(e.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(xe(163))}}catch(S){Dn(e,e.return,S)}if(n=e.sibling,n!==null){n.return=e.return,Ye=n;break}Ye=e.return}return m=bA,bA=!1,m}function bp(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&NM(e,t,s)}i=i.next}while(i!==r)}}function $b(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function AM(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function uY(n){var e=n.alternate;e!==null&&(n.alternate=null,uY(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[ho],delete e[Qp],delete e[wM],delete e[die],delete e[fie])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function hY(n){return n.tag===5||n.tag===3||n.tag===4}function xA(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||hY(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function LM(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=vy));else if(r!==4&&(n=n.child,n!==null))for(LM(n,e,t),n=n.sibling;n!==null;)LM(n,e,t),n=n.sibling}function FM(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(FM(n,e,t),n=n.sibling;n!==null;)FM(n,e,t),n=n.sibling}var br=null,Ms=!1;function Ia(n,e,t){for(t=t.child;t!==null;)dY(n,e,t),t=t.sibling}function dY(n,e,t){if(go&&typeof go.onCommitFiberUnmount=="function")try{go.onCommitFiberUnmount(Ob,t)}catch{}switch(t.tag){case 5:Dr||Ju(t,e);case 6:var r=br,i=Ms;br=null,Ia(n,e,t),br=r,Ms=i,br!==null&&(Ms?(n=br,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):br.removeChild(t.stateNode));break;case 18:br!==null&&(Ms?(n=br,t=t.stateNode,n.nodeType===8?qw(n.parentNode,t):n.nodeType===1&&qw(n,t),Yp(n)):qw(br,t.stateNode));break;case 4:r=br,i=Ms,br=t.stateNode.containerInfo,Ms=!0,Ia(n,e,t),br=r,Ms=i;break;case 0:case 11:case 14:case 15:if(!Dr&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&NM(t,e,o),i=i.next}while(i!==r)}Ia(n,e,t);break;case 1:if(!Dr&&(Ju(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Dn(t,e,a)}Ia(n,e,t);break;case 21:Ia(n,e,t);break;case 22:t.mode&1?(Dr=(r=Dr)||t.memoizedState!==null,Ia(n,e,t),Dr=r):Ia(n,e,t);break;default:Ia(n,e,t)}}function wA(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Iie),e.forEach(function(r){var i=$ie.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function bs(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:br=a.stateNode,Ms=!1;break e;case 3:br=a.stateNode.containerInfo,Ms=!0;break e;case 4:br=a.stateNode.containerInfo,Ms=!0;break e}a=a.return}if(br===null)throw Error(xe(160));dY(s,o,i),br=null,Ms=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Dn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fY(e,n),e=e.sibling}function fY(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(bs(e,n),Ks(n),r&4){try{bp(3,n,n.return),$b(3,n)}catch(g){Dn(n,n.return,g)}try{bp(5,n,n.return)}catch(g){Dn(n,n.return,g)}}break;case 1:bs(e,n),Ks(n),r&512&&t!==null&&Ju(t,t.return);break;case 5:if(bs(e,n),Ks(n),r&512&&t!==null&&Ju(t,t.return),n.flags&32){var i=n.stateNode;try{qp(i,"")}catch(g){Dn(n,n.return,g)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&AW(i,s),aM(a,o);var c=aM(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?BW(i,h):u==="dangerouslySetInnerHTML"?jW(i,h):u==="children"?qp(i,h):NP(i,u,h,c)}switch(a){case"input":nM(i,s);break;case"textarea":LW(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?uh(i,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?uh(i,!!s.multiple,s.defaultValue,!0):uh(i,!!s.multiple,s.multiple?[]:"",!1))}i[Qp]=s}catch(g){Dn(n,n.return,g)}}break;case 6:if(bs(e,n),Ks(n),r&4){if(n.stateNode===null)throw Error(xe(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(g){Dn(n,n.return,g)}}break;case 3:if(bs(e,n),Ks(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Yp(e.containerInfo)}catch(g){Dn(n,n.return,g)}break;case 4:bs(e,n),Ks(n);break;case 13:bs(e,n),Ks(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(fO=Bn())),r&4&&wA(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Dr=(c=Dr)||u,bs(e,n),Dr=c):bs(e,n),Ks(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(Ye=n,u=n.child;u!==null;){for(h=Ye=u;Ye!==null;){switch(d=Ye,f=d.child,d.tag){case 0:case 11:case 14:case 15:bp(4,d,d.return);break;case 1:Ju(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){r=d,t=d.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Dn(r,t,g)}}break;case 5:Ju(d,d.return);break;case 22:if(d.memoizedState!==null){SA(h);continue}}f!==null?(f.return=d,Ye=f):SA(h)}u=u.sibling}e:for(u=null,h=n;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=$W("display",o))}catch(g){Dn(n,n.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){Dn(n,n.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:bs(e,n),Ks(n),r&4&&wA(n);break;case 21:break;default:bs(e,n),Ks(n)}}function Ks(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(hY(t)){var r=t;break e}t=t.return}throw Error(xe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(qp(i,""),r.flags&=-33);var s=xA(n);FM(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=xA(n);LM(n,a,o);break;default:throw Error(xe(161))}}catch(l){Dn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Oie(n,e,t){Ye=n,pY(n)}function pY(n,e,t){for(var r=(n.mode&1)!==0;Ye!==null;){var i=Ye,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||S0;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Dr;a=S0;var c=Dr;if(S0=o,(Dr=l)&&!c)for(Ye=i;Ye!==null;)o=Ye,l=o.child,o.tag===22&&o.memoizedState!==null?kA(i):l!==null?(l.return=o,Ye=l):kA(i);for(;s!==null;)Ye=s,pY(s),s=s.sibling;Ye=i,S0=a,Dr=c}_A(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ye=s):_A(n)}}function _A(n){for(;Ye!==null;){var e=Ye;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Dr||$b(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Dr)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:_s(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&oA(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}oA(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Yp(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(xe(163))}Dr||e.flags&512&&AM(e)}catch(d){Dn(e,e.return,d)}}if(e===n){Ye=null;break}if(t=e.sibling,t!==null){t.return=e.return,Ye=t;break}Ye=e.return}}function SA(n){for(;Ye!==null;){var e=Ye;if(e===n){Ye=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Ye=t;break}Ye=e.return}}function kA(n){for(;Ye!==null;){var e=Ye;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{$b(4,e)}catch(l){Dn(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Dn(e,i,l)}}var s=e.return;try{AM(e)}catch(l){Dn(e,s,l)}break;case 5:var o=e.return;try{AM(e)}catch(l){Dn(e,o,l)}}}catch(l){Dn(e,e.return,l)}if(e===n){Ye=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ye=a;break}Ye=e.return}}var Rie=Math.ceil,My=va.ReactCurrentDispatcher,hO=va.ReactCurrentOwner,ls=va.ReactCurrentBatchConfig,Dt=0,fr=null,Qn=null,Er=0,ki=0,Zu=Rl(0),tr=0,rm=null,qc=0,Bb=0,dO=0,xp=null,ri=null,fO=0,nd=1/0,Uo=null,Iy=!1,jM=null,vl=null,k0=!1,al=null,Py=0,wp=0,$M=null,Bv=-1,zv=0;function Yr(){return Dt&6?Bn():Bv!==-1?Bv:Bv=Bn()}function yl(n){return n.mode&1?Dt&2&&Er!==0?Er&-Er:mie.transition!==null?(zv===0&&(zv=JW()),zv):(n=Wt,n!==0||(n=window.event,n=n===void 0?16:sH(n.type)),n):1}function Ds(n,e,t,r){if(50<wp)throw wp=0,$M=null,Error(xe(185));ig(n,t,r),(!(Dt&2)||n!==fr)&&(n===fr&&(!(Dt&2)&&(Bb|=t),tr===4&&Va(n,Er)),hi(n,r),t===1&&Dt===0&&!(e.mode&1)&&(nd=Bn()+500,Lb&&Dl()))}function hi(n,e){var t=n.callbackNode;mre(n,e);var r=fy(n,n===fr?Er:0);if(r===0)t!==null&&DN(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&DN(t),e===1)n.tag===0?pie(CA.bind(null,n)):kH(CA.bind(null,n)),uie(function(){!(Dt&6)&&Dl()}),t=null;else{switch(ZW(r)){case 1:t=$P;break;case 4:t=XW;break;case 16:t=dy;break;case 536870912:t=QW;break;default:t=dy}t=_Y(t,mY.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function mY(n,e){if(Bv=-1,zv=0,Dt&6)throw Error(xe(327));var t=n.callbackNode;if(mh()&&n.callbackNode!==t)return null;var r=fy(n,n===fr?Er:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Oy(n,r);else{e=r;var i=Dt;Dt|=2;var s=vY();(fr!==n||Er!==e)&&(Uo=null,nd=Bn()+500,Ec(n,e));do try{Aie();break}catch(a){gY(n,a)}while(!0);JP(),My.current=s,Dt=i,Qn!==null?e=0:(fr=null,Er=0,e=tr)}if(e!==0){if(e===2&&(i=dM(n),i!==0&&(r=i,e=BM(n,i))),e===1)throw t=rm,Ec(n,0),Va(n,r),hi(n,Bn()),t;if(e===6)Va(n,r);else{if(i=n.current.alternate,!(r&30)&&!Die(i)&&(e=Oy(n,r),e===2&&(s=dM(n),s!==0&&(r=s,e=BM(n,s))),e===1))throw t=rm,Ec(n,0),Va(n,r),hi(n,Bn()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(xe(345));case 2:Ql(n,ri,Uo);break;case 3:if(Va(n,r),(r&130023424)===r&&(e=fO+500-Bn(),10<e)){if(fy(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Yr(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=xM(Ql.bind(null,n,ri,Uo),e);break}Ql(n,ri,Uo);break;case 4:if(Va(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Rs(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Bn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Rie(r/1960))-r,10<r){n.timeoutHandle=xM(Ql.bind(null,n,ri,Uo),r);break}Ql(n,ri,Uo);break;case 5:Ql(n,ri,Uo);break;default:throw Error(xe(329))}}}return hi(n,Bn()),n.callbackNode===t?mY.bind(null,n):null}function BM(n,e){var t=xp;return n.current.memoizedState.isDehydrated&&(Ec(n,e).flags|=256),n=Oy(n,e),n!==2&&(e=ri,ri=t,e!==null&&zM(e)),n}function zM(n){ri===null?ri=n:ri.push.apply(ri,n)}function Die(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!As(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Va(n,e){for(e&=~dO,e&=~Bb,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Rs(e),r=1<<t;n[t]=-1,e&=~r}}function CA(n){if(Dt&6)throw Error(xe(327));mh();var e=fy(n,0);if(!(e&1))return hi(n,Bn()),null;var t=Oy(n,e);if(n.tag!==0&&t===2){var r=dM(n);r!==0&&(e=r,t=BM(n,r))}if(t===1)throw t=rm,Ec(n,0),Va(n,e),hi(n,Bn()),t;if(t===6)throw Error(xe(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Ql(n,ri,Uo),hi(n,Bn()),null}function pO(n,e){var t=Dt;Dt|=1;try{return n(e)}finally{Dt=t,Dt===0&&(nd=Bn()+500,Lb&&Dl())}}function Uc(n){al!==null&&al.tag===0&&!(Dt&6)&&mh();var e=Dt;Dt|=1;var t=ls.transition,r=Wt;try{if(ls.transition=null,Wt=1,n)return n()}finally{Wt=r,ls.transition=t,Dt=e,!(Dt&6)&&Dl()}}function mO(){ki=Zu.current,un(Zu)}function Ec(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,cie(t)),Qn!==null)for(t=Qn.return;t!==null;){var r=t;switch(KP(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yy();break;case 3:ed(),un(ci),un(Nr),iO();break;case 5:rO(r);break;case 4:ed();break;case 13:un(kn);break;case 19:un(kn);break;case 10:ZP(r.type._context);break;case 22:case 23:mO()}t=t.return}if(fr=n,Qn=n=bl(n.current,null),Er=ki=e,tr=0,rm=null,dO=Bb=qc=0,ri=xp=null,ac!==null){for(e=0;e<ac.length;e++)if(t=ac[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}ac=null}return n}function gY(n,e){do{var t=Qn;try{if(JP(),Fv.current=Ty,Ey){for(var r=Tn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ey=!1}if(zc=0,or=er=Tn=null,yp=!1,em=0,hO.current=null,t===null||t.return===null){tr=1,rm=e,Qn=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Er,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=dA(o);if(f!==null){f.flags&=-257,fA(f,o,a,s,e),f.mode&1&&hA(s,c,e),e=f,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){hA(s,c,e),gO();break e}l=Error(xe(426))}}else if(bn&&a.mode&1){var v=dA(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),fA(v,o,a,s,e),XP(td(l,a));break e}}s=l=td(l,a),tr!==4&&(tr=2),xp===null?xp=[s]:xp.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=ZH(s,l,e);sA(s,y);break e;case 1:a=l;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(vl===null||!vl.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=eY(s,a,e);sA(s,S);break e}}s=s.return}while(s!==null)}bY(t)}catch(_){e=_,Qn===t&&t!==null&&(Qn=t=t.return);continue}break}while(!0)}function vY(){var n=My.current;return My.current=Ty,n===null?Ty:n}function gO(){(tr===0||tr===3||tr===2)&&(tr=4),fr===null||!(qc&268435455)&&!(Bb&268435455)||Va(fr,Er)}function Oy(n,e){var t=Dt;Dt|=2;var r=vY();(fr!==n||Er!==e)&&(Uo=null,Ec(n,e));do try{Nie();break}catch(i){gY(n,i)}while(!0);if(JP(),Dt=t,My.current=r,Qn!==null)throw Error(xe(261));return fr=null,Er=0,tr}function Nie(){for(;Qn!==null;)yY(Qn)}function Aie(){for(;Qn!==null&&!ore();)yY(Qn)}function yY(n){var e=wY(n.alternate,n,ki);n.memoizedProps=n.pendingProps,e===null?bY(n):Qn=e,hO.current=null}function bY(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Mie(t,e),t!==null){t.flags&=32767,Qn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{tr=6,Qn=null;return}}else if(t=Tie(t,e,ki),t!==null){Qn=t;return}if(e=e.sibling,e!==null){Qn=e;return}Qn=e=n}while(e!==null);tr===0&&(tr=5)}function Ql(n,e,t){var r=Wt,i=ls.transition;try{ls.transition=null,Wt=1,Lie(n,e,t,r)}finally{ls.transition=i,Wt=r}return null}function Lie(n,e,t,r){do mh();while(al!==null);if(Dt&6)throw Error(xe(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(xe(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(gre(n,s),n===fr&&(Qn=fr=null,Er=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||k0||(k0=!0,_Y(dy,function(){return mh(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=ls.transition,ls.transition=null;var o=Wt;Wt=1;var a=Dt;Dt|=4,hO.current=null,Pie(n,t),fY(t,n),nie(yM),py=!!vM,yM=vM=null,n.current=t,Oie(t),are(),Dt=a,Wt=o,ls.transition=s}else n.current=t;if(k0&&(k0=!1,al=n,Py=i),s=n.pendingLanes,s===0&&(vl=null),ure(t.stateNode),hi(n,Bn()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Iy)throw Iy=!1,n=jM,jM=null,n;return Py&1&&n.tag!==0&&mh(),s=n.pendingLanes,s&1?n===$M?wp++:(wp=0,$M=n):wp=0,Dl(),null}function mh(){if(al!==null){var n=ZW(Py),e=ls.transition,t=Wt;try{if(ls.transition=null,Wt=16>n?16:n,al===null)var r=!1;else{if(n=al,al=null,Py=0,Dt&6)throw Error(xe(331));var i=Dt;for(Dt|=4,Ye=n.current;Ye!==null;){var s=Ye,o=s.child;if(Ye.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ye=c;Ye!==null;){var u=Ye;switch(u.tag){case 0:case 11:case 15:bp(8,u,s)}var h=u.child;if(h!==null)h.return=u,Ye=h;else for(;Ye!==null;){u=Ye;var d=u.sibling,f=u.return;if(uY(u),u===c){Ye=null;break}if(d!==null){d.return=f,Ye=d;break}Ye=f}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}Ye=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ye=o;else e:for(;Ye!==null;){if(s=Ye,s.flags&2048)switch(s.tag){case 0:case 11:case 15:bp(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Ye=y;break e}Ye=s.return}}var b=n.current;for(Ye=b;Ye!==null;){o=Ye;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Ye=w;else e:for(o=b;Ye!==null;){if(a=Ye,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:$b(9,a)}}catch(_){Dn(a,a.return,_)}if(a===o){Ye=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,Ye=S;break e}Ye=a.return}}if(Dt=i,Dl(),go&&typeof go.onPostCommitFiberRoot=="function")try{go.onPostCommitFiberRoot(Ob,n)}catch{}r=!0}return r}finally{Wt=t,ls.transition=e}}return!1}function EA(n,e,t){e=td(t,e),e=ZH(n,e,1),n=gl(n,e,1),e=Yr(),n!==null&&(ig(n,1,e),hi(n,e))}function Dn(n,e,t){if(n.tag===3)EA(n,n,t);else for(;e!==null;){if(e.tag===3){EA(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vl===null||!vl.has(r))){n=td(t,n),n=eY(e,n,1),e=gl(e,n,1),n=Yr(),e!==null&&(ig(e,1,n),hi(e,n));break}}e=e.return}}function Fie(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Yr(),n.pingedLanes|=n.suspendedLanes&t,fr===n&&(Er&t)===t&&(tr===4||tr===3&&(Er&130023424)===Er&&500>Bn()-fO?Ec(n,0):dO|=t),hi(n,e)}function xY(n,e){e===0&&(n.mode&1?(e=p0,p0<<=1,!(p0&130023424)&&(p0=4194304)):e=1);var t=Yr();n=fa(n,e),n!==null&&(ig(n,e,t),hi(n,t))}function jie(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),xY(n,t)}function $ie(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(xe(314))}r!==null&&r.delete(e),xY(n,t)}var wY;wY=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||ci.current)oi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return oi=!1,Eie(n,e,t);oi=!!(n.flags&131072)}else oi=!1,bn&&e.flags&1048576&&CH(e,wy,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;$v(n,e),n=e.pendingProps;var i=Qh(e,Nr.current);ph(e,t),i=oO(null,e,r,n,i,t);var s=aO();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ui(r)?(s=!0,by(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,tO(e),i.updater=jb,e.stateNode=i,i._reactInternals=e,TM(e,r,n,t),e=PM(null,e,r,!0,s,t)):(e.tag=0,bn&&s&&VP(e),zr(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch($v(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=zie(r),n=_s(r,n),i){case 0:e=IM(null,e,r,n,t);break e;case 1:e=gA(null,e,r,n,t);break e;case 11:e=pA(null,e,r,n,t);break e;case 14:e=mA(null,e,r,_s(r.type,n),t);break e}throw Error(xe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_s(r,i),IM(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_s(r,i),gA(n,e,r,i,t);case 3:e:{if(iY(e),n===null)throw Error(xe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,OH(n,e),ky(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=td(Error(xe(423)),e),e=vA(n,e,r,t,i);break e}else if(r!==i){i=td(Error(xe(424)),e),e=vA(n,e,r,t,i);break e}else for(Ii=ml(e.stateNode.containerInfo.firstChild),Pi=e,bn=!0,Is=null,t=IH(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Jh(),r===i){e=pa(n,e,t);break e}zr(n,e,r,t)}e=e.child}return e;case 5:return RH(e),n===null&&kM(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,bM(r,i)?o=null:s!==null&&bM(r,s)&&(e.flags|=32),rY(n,e),zr(n,e,o,t),e.child;case 6:return n===null&&kM(e),null;case 13:return sY(n,e,t);case 4:return nO(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Zh(e,null,r,t):zr(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_s(r,i),pA(n,e,r,i,t);case 7:return zr(n,e,e.pendingProps,t),e.child;case 8:return zr(n,e,e.pendingProps.children,t),e.child;case 12:return zr(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,rn(_y,r._currentValue),r._currentValue=o,s!==null)if(As(s.value,o)){if(s.children===i.children&&!ci.current){e=pa(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ra(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),CM(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(xe(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),CM(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}zr(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ph(e,t),i=us(i),r=r(i),e.flags|=1,zr(n,e,r,t),e.child;case 14:return r=e.type,i=_s(r,e.pendingProps),i=_s(r.type,i),mA(n,e,r,i,t);case 15:return tY(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_s(r,i),$v(n,e),e.tag=1,ui(r)?(n=!0,by(e)):n=!1,ph(e,t),JH(e,r,i),TM(e,r,i,t),PM(null,e,r,!0,n,t);case 19:return oY(n,e,t);case 22:return nY(n,e,t)}throw Error(xe(156,e.tag))};function _Y(n,e){return KW(n,e)}function Bie(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ss(n,e,t,r){return new Bie(n,e,t,r)}function vO(n){return n=n.prototype,!(!n||!n.isReactComponent)}function zie(n){if(typeof n=="function")return vO(n)?1:0;if(n!=null){if(n=n.$$typeof,n===LP)return 11;if(n===FP)return 14}return 2}function bl(n,e){var t=n.alternate;return t===null?(t=ss(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function qv(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")vO(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Uu:return Tc(t.children,i,s,e);case AP:o=8,i|=8;break;case QT:return n=ss(12,t,e,i|2),n.elementType=QT,n.lanes=s,n;case JT:return n=ss(13,t,e,i),n.elementType=JT,n.lanes=s,n;case ZT:return n=ss(19,t,e,i),n.elementType=ZT,n.lanes=s,n;case RW:return zb(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case PW:o=10;break e;case OW:o=9;break e;case LP:o=11;break e;case FP:o=14;break e;case Wa:o=16,r=null;break e}throw Error(xe(130,n==null?n:typeof n,""))}return e=ss(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Tc(n,e,t,r){return n=ss(7,n,r,e),n.lanes=t,n}function zb(n,e,t,r){return n=ss(22,n,r,e),n.elementType=RW,n.lanes=t,n.stateNode={isHidden:!1},n}function Xw(n,e,t){return n=ss(6,n,null,e),n.lanes=t,n}function Qw(n,e,t){return e=ss(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function qie(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ow(0),this.expirationTimes=Ow(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ow(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function yO(n,e,t,r,i,s,o,a,l){return n=new qie(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ss(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},tO(s),n}function Uie(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qu,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function SY(n){if(!n)return El;n=n._reactInternals;e:{if(lu(n)!==n||n.tag!==1)throw Error(xe(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ui(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(xe(171))}if(n.tag===1){var t=n.type;if(ui(t))return SH(n,t,e)}return e}function kY(n,e,t,r,i,s,o,a,l){return n=yO(t,r,!0,n,i,s,o,a,l),n.context=SY(null),t=n.current,r=Yr(),i=yl(t),s=ra(r,i),s.callback=e??null,gl(t,s,i),n.current.lanes=i,ig(n,i,r),hi(n,r),n}function qb(n,e,t,r){var i=e.current,s=Yr(),o=yl(i);return t=SY(t),e.context===null?e.context=t:e.pendingContext=t,e=ra(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=gl(i,e,o),n!==null&&(Ds(n,i,o,s),Lv(n,i,o)),o}function Ry(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function TA(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function bO(n,e){TA(n,e),(n=n.alternate)&&TA(n,e)}function Wie(){return null}var CY=typeof reportError=="function"?reportError:function(n){console.error(n)};function xO(n){this._internalRoot=n}Ub.prototype.render=xO.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(xe(409));qb(n,e,null,null)};Ub.prototype.unmount=xO.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Uc(function(){qb(null,n,null,null)}),e[da]=null}};function Ub(n){this._internalRoot=n}Ub.prototype.unstable_scheduleHydration=function(n){if(n){var e=nH();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ga.length&&e!==0&&e<Ga[t].priority;t++);Ga.splice(t,0,n),t===0&&iH(n)}};function wO(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Wb(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function MA(){}function Hie(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Ry(o);s.call(c)}}var o=kY(e,r,n,0,null,!1,!1,"",MA);return n._reactRootContainer=o,n[da]=o.current,Kp(n.nodeType===8?n.parentNode:n),Uc(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Ry(l);a.call(c)}}var l=yO(n,0,!1,null,null,!1,!1,"",MA);return n._reactRootContainer=l,n[da]=l.current,Kp(n.nodeType===8?n.parentNode:n),Uc(function(){qb(e,l,t,r)}),l}function Hb(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ry(o);a.call(l)}}qb(e,o,n,i)}else o=Hie(t,e,n,i,r);return Ry(o)}eH=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Qf(e.pendingLanes);t!==0&&(BP(e,t|1),hi(e,Bn()),!(Dt&6)&&(nd=Bn()+500,Dl()))}break;case 13:Uc(function(){var r=fa(n,1);if(r!==null){var i=Yr();Ds(r,n,1,i)}}),bO(n,1)}};zP=function(n){if(n.tag===13){var e=fa(n,134217728);if(e!==null){var t=Yr();Ds(e,n,134217728,t)}bO(n,134217728)}};tH=function(n){if(n.tag===13){var e=yl(n),t=fa(n,e);if(t!==null){var r=Yr();Ds(t,n,e,r)}bO(n,e)}};nH=function(){return Wt};rH=function(n,e){var t=Wt;try{return Wt=n,e()}finally{Wt=t}};cM=function(n,e,t){switch(e){case"input":if(nM(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=Ab(r);if(!i)throw Error(xe(90));NW(r),nM(r,i)}}}break;case"textarea":LW(n,t);break;case"select":e=t.value,e!=null&&uh(n,!!t.multiple,e,!1)}};UW=pO;WW=Uc;var Yie={usingClientEntryPoint:!1,Events:[og,Gu,Ab,zW,qW,pO]},wf={findFiberByHostInstance:oc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gie={bundleType:wf.bundleType,version:wf.version,rendererPackageName:wf.rendererPackageName,rendererConfig:wf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:va.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=GW(n),n===null?null:n.stateNode},findFiberByHostInstance:wf.findFiberByHostInstance||Wie,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var C0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!C0.isDisabled&&C0.supportsFiber)try{Ob=C0.inject(Gie),go=C0}catch{}}$i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yie;$i.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wO(e))throw Error(xe(200));return Uie(n,e,null,t)};$i.createRoot=function(n,e){if(!wO(n))throw Error(xe(299));var t=!1,r="",i=CY;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=yO(n,1,!1,null,null,t,!1,r,i),n[da]=e.current,Kp(n.nodeType===8?n.parentNode:n),new xO(e)};$i.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(xe(188)):(n=Object.keys(n).join(","),Error(xe(268,n)));return n=GW(e),n=n===null?null:n.stateNode,n};$i.flushSync=function(n){return Uc(n)};$i.hydrate=function(n,e,t){if(!Wb(e))throw Error(xe(200));return Hb(null,n,e,!0,t)};$i.hydrateRoot=function(n,e,t){if(!wO(n))throw Error(xe(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=CY;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=kY(e,null,n,1,t??null,i,!1,s,o),n[da]=e.current,Kp(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Ub(e)};$i.render=function(n,e,t){if(!Wb(e))throw Error(xe(200));return Hb(null,n,e,!1,t)};$i.unmountComponentAtNode=function(n){if(!Wb(n))throw Error(xe(40));return n._reactRootContainer?(Uc(function(){Hb(null,null,n,!1,function(){n._reactRootContainer=null,n[da]=null})}),!0):!1};$i.unstable_batchedUpdates=pO;$i.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Wb(t))throw Error(xe(200));if(n==null||n._reactInternals===void 0)throw Error(xe(38));return Hb(n,e,t,!1,r)};$i.version="18.3.1-next-f1338f8080-20240426";function EY(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(EY)}catch(n){console.error(n)}}EY(),EW.exports=$i;var Bs=EW.exports;const Vie=TP(Bs);var IA=Bs;KT.createRoot=IA.createRoot,KT.hydrateRoot=IA.hydrateRoot;var lg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Kie={setTimeout:(n,e)=>setTimeout(n,e),clearTimeout:n=>clearTimeout(n),setInterval:(n,e)=>setInterval(n,e),clearInterval:n=>clearInterval(n)},Xa,EP,iW,Xie=(iW=class{constructor(){Te(this,Xa,Kie);Te(this,EP,!1)}setTimeoutProvider(n){he(this,Xa,n)}setTimeout(n,e){return Q(this,Xa).setTimeout(n,e)}clearTimeout(n){Q(this,Xa).clearTimeout(n)}setInterval(n,e){return Q(this,Xa).setInterval(n,e)}clearInterval(n){Q(this,Xa).clearInterval(n)}},Xa=new WeakMap,EP=new WeakMap,iW),qM=new Xie;function Qie(n){setTimeout(n,0)}var Yb=typeof window>"u"||"Deno"in globalThis;function es(){}function Jie(n,e){return typeof n=="function"?n(e):n}function Zie(n){return typeof n=="number"&&n>=0&&n!==1/0}function ese(n,e){return Math.max(n+(e||0)-Date.now(),0)}function UM(n,e){return typeof n=="function"?n(e):n}function tse(n,e){return typeof n=="function"?n(e):n}function PA(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==_O(o,e.options))return!1}else if(!im(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function OA(n,e){const{exact:t,status:r,predicate:i,mutationKey:s}=n;if(s){if(!e.options.mutationKey)return!1;if(t){if(Wc(e.options.mutationKey)!==Wc(s))return!1}else if(!im(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function _O(n,e){return((e==null?void 0:e.queryKeyHashFn)||Wc)(n)}function Wc(n){return JSON.stringify(n,(e,t)=>WM(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function im(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>im(n[t],e[t])):!1}var nse=Object.prototype.hasOwnProperty;function TY(n,e,t=0){if(n===e)return n;if(t>500)return e;const r=RA(n)&&RA(e);if(!r&&!(WM(n)&&WM(e)))return e;const s=(r?n:Object.keys(n)).length,o=r?e:Object.keys(e),a=o.length,l=r?new Array(a):{};let c=0;for(let u=0;u<a;u++){const h=r?u:o[u],d=n[h],f=e[h];if(d===f){l[h]=d,(r?u<s:nse.call(n,h))&&c++;continue}if(d===null||f===null||typeof d!="object"||typeof f!="object"){l[h]=f;continue}const m=TY(d,f,t+1);l[h]=m,m===d&&c++}return s===a&&c===s?n:l}function rse(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function RA(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function WM(n){if(!DA(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!DA(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function DA(n){return Object.prototype.toString.call(n)==="[object Object]"}function ise(n){return new Promise(e=>{qM.setTimeout(e,n)})}function sse(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?TY(n,e):e}function ose(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function ase(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var SO=Symbol();function MY(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===SO?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function lse(n,e){return typeof n=="function"?n(...e):!!n}function cse(n,e,t){let r=!1,i;return Object.defineProperty(n,"signal",{enumerable:!0,get:()=>(i??(i=e()),r||(r=!0,i.aborted?t():i.addEventListener("abort",t,{once:!0})),i)}),n}var vc,Qa,_h,sW,use=(sW=class extends lg{constructor(){super();Te(this,vc);Te(this,Qa);Te(this,_h);he(this,_h,e=>{if(!Yb&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){Q(this,Qa)||this.setEventListener(Q(this,_h))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,Qa))==null||e.call(this),he(this,Qa,void 0))}setEventListener(e){var t;he(this,_h,e),(t=Q(this,Qa))==null||t.call(this),he(this,Qa,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Q(this,vc)!==e&&(he(this,vc,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof Q(this,vc)=="boolean"?Q(this,vc):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},vc=new WeakMap,Qa=new WeakMap,_h=new WeakMap,sW),IY=new use;function hse(){let n,e;const t=new Promise((i,s)=>{n=i,e=s});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}var dse=Qie;function fse(){let n=[],e=0,t=a=>{a()},r=a=>{a()},i=dse;const s=a=>{e?n.push(a):i(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var _r=fse(),Sh,Ja,kh,oW,pse=(oW=class extends lg{constructor(){super();Te(this,Sh,!0);Te(this,Ja);Te(this,kh);he(this,kh,e=>{if(!Yb&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){Q(this,Ja)||this.setEventListener(Q(this,kh))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,Ja))==null||e.call(this),he(this,Ja,void 0))}setEventListener(e){var t;he(this,kh,e),(t=Q(this,Ja))==null||t.call(this),he(this,Ja,e(this.setOnline.bind(this)))}setOnline(e){Q(this,Sh)!==e&&(he(this,Sh,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Q(this,Sh)}},Sh=new WeakMap,Ja=new WeakMap,kh=new WeakMap,oW),Dy=new pse;function mse(n){return Math.min(1e3*2**n,3e4)}function PY(n){return(n??"online")==="online"?Dy.isOnline():!0}var HM=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function OY(n){let e=!1,t=0,r;const i=hse(),s=()=>i.status!=="pending",o=g=>{var v;if(!s()){const y=new HM(g);d(y),(v=n.onCancel)==null||v.call(n,y)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>IY.isFocused()&&(n.networkMode==="always"||Dy.isOnline())&&n.canRun(),u=()=>PY(n.networkMode)&&n.canRun(),h=g=>{s()||(r==null||r(),i.resolve(g))},d=g=>{s()||(r==null||r(),i.reject(g))},f=()=>new Promise(g=>{var v;r=y=>{(s()||c())&&g(y)},(v=n.onPause)==null||v.call(n)}).then(()=>{var g;r=void 0,s()||(g=n.onContinue)==null||g.call(n)}),m=()=>{if(s())return;let g;const v=t===0?n.initialPromise:void 0;try{g=v??n.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(h).catch(y=>{var E;if(s())return;const b=n.retry??(Yb?0:3),w=n.retryDelay??mse,S=typeof w=="function"?w(t,y):w,_=b===!0||typeof b=="number"&&t<b||typeof b=="function"&&b(t,y);if(e||!_){d(y);return}t++,(E=n.onFail)==null||E.call(n,t,y),ise(S).then(()=>c()?void 0:f()).then(()=>{e?d(y):m()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?m():f().then(m),i)}}var yc,aW,RY=(aW=class{constructor(){Te(this,yc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Zie(this.gcTime)&&he(this,yc,qM.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Yb?1/0:5*60*1e3))}clearGcTimeout(){Q(this,yc)&&(qM.clearTimeout(Q(this,yc)),he(this,yc,void 0))}},yc=new WeakMap,aW),bc,Ch,Zi,xc,sr,Xm,wc,Cs,Bo,lW,gse=(lW=class extends RY{constructor(e){super();Te(this,Cs);Te(this,bc);Te(this,Ch);Te(this,Zi);Te(this,xc);Te(this,sr);Te(this,Xm);Te(this,wc);he(this,wc,!1),he(this,Xm,e.defaultOptions),this.setOptions(e.options),this.observers=[],he(this,xc,e.client),he(this,Zi,Q(this,xc).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,he(this,bc,AA(this.options)),this.state=e.state??Q(this,bc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=Q(this,sr))==null?void 0:e.promise}setOptions(e){if(this.options={...Q(this,Xm),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=AA(this.options);t.data!==void 0&&(this.setState(NA(t.data,t.dataUpdatedAt)),he(this,bc,t))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Q(this,Zi).remove(this)}setData(e,t){const r=sse(this.state.data,e,this.options);return St(this,Cs,Bo).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){St(this,Cs,Bo).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,i;const t=(r=Q(this,sr))==null?void 0:r.promise;return(i=Q(this,sr))==null||i.cancel(e),t?t.then(es).catch(es):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Q(this,bc))}isActive(){return this.observers.some(e=>tse(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===SO||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>UM(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!ese(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=Q(this,sr))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=Q(this,sr))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Q(this,Zi).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(Q(this,sr)&&(Q(this,wc)?Q(this,sr).cancel({revert:!0}):Q(this,sr).cancelRetry()),this.scheduleGc()),Q(this,Zi).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||St(this,Cs,Bo).call(this,{type:"invalidate"})}async fetch(e,t){var l,c,u,h,d,f,m,g,v,y,b,w;if(this.state.fetchStatus!=="idle"&&((l=Q(this,sr))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(Q(this,sr))return Q(this,sr).continueRetry(),Q(this,sr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const S=this.observers.find(_=>_.options.queryFn);S&&this.setOptions(S.options)}const r=new AbortController,i=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(he(this,wc,!0),r.signal)})},s=()=>{const S=MY(this.options,t),E=(()=>{const C={client:Q(this,xc),queryKey:this.queryKey,meta:this.meta};return i(C),C})();return he(this,wc,!1),this.options.persister?this.options.persister(S,E,this):S(E)},a=(()=>{const S={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:Q(this,xc),state:this.state,fetchFn:s};return i(S),S})();(c=this.options.behavior)==null||c.onFetch(a,this),he(this,Ch,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&St(this,Cs,Bo).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta}),he(this,sr,OY({initialPromise:t==null?void 0:t.initialPromise,fn:a.fetchFn,onCancel:S=>{S instanceof HM&&S.revert&&this.setState({...Q(this,Ch),fetchStatus:"idle"}),r.abort()},onFail:(S,_)=>{St(this,Cs,Bo).call(this,{type:"failed",failureCount:S,error:_})},onPause:()=>{St(this,Cs,Bo).call(this,{type:"pause"})},onContinue:()=>{St(this,Cs,Bo).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const S=await Q(this,sr).start();if(S===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(S),(f=(d=Q(this,Zi).config).onSuccess)==null||f.call(d,S,this),(g=(m=Q(this,Zi).config).onSettled)==null||g.call(m,S,this.state.error,this),S}catch(S){if(S instanceof HM){if(S.silent)return Q(this,sr).promise;if(S.revert){if(this.state.data===void 0)throw S;return this.state.data}}throw St(this,Cs,Bo).call(this,{type:"error",error:S}),(y=(v=Q(this,Zi).config).onError)==null||y.call(v,S,this),(w=(b=Q(this,Zi).config).onSettled)==null||w.call(b,this.state.data,S,this),S}finally{this.scheduleGc()}}},bc=new WeakMap,Ch=new WeakMap,Zi=new WeakMap,xc=new WeakMap,sr=new WeakMap,Xm=new WeakMap,wc=new WeakMap,Cs=new WeakSet,Bo=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...vse(r.data,this.options),fetchMeta:e.meta??null};case"success":const i={...r,...NA(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return he(this,Ch,e.manual?i:void 0),i;case"error":const s=e.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),_r.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Q(this,Zi).notify({query:this,type:"updated",action:e})})},lW);function vse(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:PY(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function NA(n,e){return{data:n,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function AA(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}function LA(n){return{onFetch:(e,t)=>{var u,h,d,f,m;const r=e.options,i=(d=(h=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:d.direction,s=((f=e.state.data)==null?void 0:f.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const v=w=>{cse(w,()=>e.signal,()=>g=!0)},y=MY(e.options,e.fetchOptions),b=async(w,S,_)=>{if(g)return Promise.reject();if(S==null&&w.pages.length)return Promise.resolve(w);const C=(()=>{const D={client:e.client,queryKey:e.queryKey,pageParam:S,direction:_?"backward":"forward",meta:e.options.meta};return v(D),D})(),T=await y(C),{maxPages:O}=e.options,R=_?ase:ose;return{pages:R(w.pages,T,O),pageParams:R(w.pageParams,S,O)}};if(i&&s.length){const w=i==="backward",S=w?yse:FA,_={pages:s,pageParams:o},E=S(r,_);a=await b(_,E,w)}else{const w=n??s.length;do{const S=l===0?o[0]??r.initialPageParam:FA(r,a);if(l>0&&S==null)break;a=await b(a,S),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var g,v;return(v=(g=e.options).persister)==null?void 0:v.call(g,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function FA(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function yse(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var Qm,oo,Br,_c,ao,Ba,cW,bse=(cW=class extends RY{constructor(e){super();Te(this,ao);Te(this,Qm);Te(this,oo);Te(this,Br);Te(this,_c);he(this,Qm,e.client),this.mutationId=e.mutationId,he(this,Br,e.mutationCache),he(this,oo,[]),this.state=e.state||DY(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Q(this,oo).includes(e)||(Q(this,oo).push(e),this.clearGcTimeout(),Q(this,Br).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){he(this,oo,Q(this,oo).filter(t=>t!==e)),this.scheduleGc(),Q(this,Br).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Q(this,oo).length||(this.state.status==="pending"?this.scheduleGc():Q(this,Br).remove(this))}continue(){var e;return((e=Q(this,_c))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,c,u,h,d,f,m,g,v,y,b,w,S,_,E,C,T,O;const t=()=>{St(this,ao,Ba).call(this,{type:"continue"})},r={client:Q(this,Qm),meta:this.options.meta,mutationKey:this.options.mutationKey};he(this,_c,OY({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(R,D)=>{St(this,ao,Ba).call(this,{type:"failed",failureCount:R,error:D})},onPause:()=>{St(this,ao,Ba).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Q(this,Br).canRun(this)}));const i=this.state.status==="pending",s=!Q(this,_c).canStart();try{if(i)t();else{St(this,ao,Ba).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(o=Q(this,Br).config).onMutate)==null?void 0:a.call(o,e,this,r));const D=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e,r));D!==this.state.context&&St(this,ao,Ba).call(this,{type:"pending",context:D,variables:e,isPaused:s})}const R=await Q(this,_c).start();return await((h=(u=Q(this,Br).config).onSuccess)==null?void 0:h.call(u,R,e,this.state.context,this,r)),await((f=(d=this.options).onSuccess)==null?void 0:f.call(d,R,e,this.state.context,r)),await((g=(m=Q(this,Br).config).onSettled)==null?void 0:g.call(m,R,null,this.state.variables,this.state.context,this,r)),await((y=(v=this.options).onSettled)==null?void 0:y.call(v,R,null,e,this.state.context,r)),St(this,ao,Ba).call(this,{type:"success",data:R}),R}catch(R){try{await((w=(b=Q(this,Br).config).onError)==null?void 0:w.call(b,R,e,this.state.context,this,r))}catch(D){Promise.reject(D)}try{await((_=(S=this.options).onError)==null?void 0:_.call(S,R,e,this.state.context,r))}catch(D){Promise.reject(D)}try{await((C=(E=Q(this,Br).config).onSettled)==null?void 0:C.call(E,void 0,R,this.state.variables,this.state.context,this,r))}catch(D){Promise.reject(D)}try{await((O=(T=this.options).onSettled)==null?void 0:O.call(T,void 0,R,e,this.state.context,r))}catch(D){Promise.reject(D)}throw St(this,ao,Ba).call(this,{type:"error",error:R}),R}finally{Q(this,Br).runNext(this)}}},Qm=new WeakMap,oo=new WeakMap,Br=new WeakMap,_c=new WeakMap,ao=new WeakSet,Ba=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),_r.batch(()=>{Q(this,oo).forEach(r=>{r.onMutationUpdate(e)}),Q(this,Br).notify({mutation:this,type:"updated",action:e})})},cW);function DY(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Go,Es,Jm,uW,xse=(uW=class extends lg{constructor(e={}){super();Te(this,Go);Te(this,Es);Te(this,Jm);this.config=e,he(this,Go,new Set),he(this,Es,new Map),he(this,Jm,0)}build(e,t,r){const i=new bse({client:e,mutationCache:this,mutationId:++l0(this,Jm)._,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){Q(this,Go).add(e);const t=E0(e);if(typeof t=="string"){const r=Q(this,Es).get(t);r?r.push(e):Q(this,Es).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Q(this,Go).delete(e)){const t=E0(e);if(typeof t=="string"){const r=Q(this,Es).get(t);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&Q(this,Es).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=E0(e);if(typeof t=="string"){const r=Q(this,Es).get(t),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const t=E0(e);if(typeof t=="string"){const i=(r=Q(this,Es).get(t))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){_r.batch(()=>{Q(this,Go).forEach(e=>{this.notify({type:"removed",mutation:e})}),Q(this,Go).clear(),Q(this,Es).clear()})}getAll(){return Array.from(Q(this,Go))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>OA(t,r))}findAll(e={}){return this.getAll().filter(t=>OA(e,t))}notify(e){_r.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return _r.batch(()=>Promise.all(e.map(t=>t.continue().catch(es))))}},Go=new WeakMap,Es=new WeakMap,Jm=new WeakMap,uW);function E0(n){var e;return(e=n.options.scope)==null?void 0:e.id}var Vo,Za,ei,Ko,ua,Uv,YM,hW,wse=(hW=class extends lg{constructor(t,r){super();Te(this,ua);Te(this,Vo);Te(this,Za);Te(this,ei);Te(this,Ko);he(this,Vo,t),this.setOptions(r),this.bindMethods(),St(this,ua,Uv).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var i;const r=this.options;this.options=Q(this,Vo).defaultMutationOptions(t),rse(this.options,r)||Q(this,Vo).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Q(this,ei),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Wc(r.mutationKey)!==Wc(this.options.mutationKey)?this.reset():((i=Q(this,ei))==null?void 0:i.state.status)==="pending"&&Q(this,ei).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=Q(this,ei))==null||t.removeObserver(this)}onMutationUpdate(t){St(this,ua,Uv).call(this),St(this,ua,YM).call(this,t)}getCurrentResult(){return Q(this,Za)}reset(){var t;(t=Q(this,ei))==null||t.removeObserver(this),he(this,ei,void 0),St(this,ua,Uv).call(this),St(this,ua,YM).call(this)}mutate(t,r){var i;return he(this,Ko,r),(i=Q(this,ei))==null||i.removeObserver(this),he(this,ei,Q(this,Vo).getMutationCache().build(Q(this,Vo),this.options)),Q(this,ei).addObserver(this),Q(this,ei).execute(t)}},Vo=new WeakMap,Za=new WeakMap,ei=new WeakMap,Ko=new WeakMap,ua=new WeakSet,Uv=function(){var r;const t=((r=Q(this,ei))==null?void 0:r.state)??DY();he(this,Za,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},YM=function(t){_r.batch(()=>{var r,i,s,o,a,l,c,u;if(Q(this,Ko)&&this.hasListeners()){const h=Q(this,Za).variables,d=Q(this,Za).context,f={client:Q(this,Vo),meta:this.options.meta,mutationKey:this.options.mutationKey};if((t==null?void 0:t.type)==="success"){try{(i=(r=Q(this,Ko)).onSuccess)==null||i.call(r,t.data,h,d,f)}catch(m){Promise.reject(m)}try{(o=(s=Q(this,Ko)).onSettled)==null||o.call(s,t.data,null,h,d,f)}catch(m){Promise.reject(m)}}else if((t==null?void 0:t.type)==="error"){try{(l=(a=Q(this,Ko)).onError)==null||l.call(a,t.error,h,d,f)}catch(m){Promise.reject(m)}try{(u=(c=Q(this,Ko)).onSettled)==null||u.call(c,void 0,t.error,h,d,f)}catch(m){Promise.reject(m)}}}this.listeners.forEach(h=>{h(Q(this,Za))})})},hW),lo,dW,_se=(dW=class extends lg{constructor(e={}){super();Te(this,lo);this.config=e,he(this,lo,new Map)}build(e,t,r){const i=t.queryKey,s=t.queryHash??_O(i,t);let o=this.get(s);return o||(o=new gse({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){Q(this,lo).has(e.queryHash)||(Q(this,lo).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=Q(this,lo).get(e.queryHash);t&&(e.destroy(),t===e&&Q(this,lo).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){_r.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Q(this,lo).get(e)}getAll(){return[...Q(this,lo).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>PA(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>PA(e,r)):t}notify(e){_r.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){_r.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){_r.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},lo=new WeakMap,dW),Rn,el,tl,Eh,Th,nl,Mh,Ih,fW,Sse=(fW=class{constructor(n={}){Te(this,Rn);Te(this,el);Te(this,tl);Te(this,Eh);Te(this,Th);Te(this,nl);Te(this,Mh);Te(this,Ih);he(this,Rn,n.queryCache||new _se),he(this,el,n.mutationCache||new xse),he(this,tl,n.defaultOptions||{}),he(this,Eh,new Map),he(this,Th,new Map),he(this,nl,0)}mount(){l0(this,nl)._++,Q(this,nl)===1&&(he(this,Mh,IY.subscribe(async n=>{n&&(await this.resumePausedMutations(),Q(this,Rn).onFocus())})),he(this,Ih,Dy.subscribe(async n=>{n&&(await this.resumePausedMutations(),Q(this,Rn).onOnline())})))}unmount(){var n,e;l0(this,nl)._--,Q(this,nl)===0&&((n=Q(this,Mh))==null||n.call(this),he(this,Mh,void 0),(e=Q(this,Ih))==null||e.call(this),he(this,Ih,void 0))}isFetching(n){return Q(this,Rn).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return Q(this,el).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=Q(this,Rn).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=Q(this,Rn).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(UM(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return Q(this,Rn).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=Q(this,Rn).get(r.queryHash),s=i==null?void 0:i.state.data,o=Jie(e,s);if(o!==void 0)return Q(this,Rn).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return _r.batch(()=>Q(this,Rn).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=Q(this,Rn).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=Q(this,Rn);_r.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=Q(this,Rn);return _r.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=_r.batch(()=>Q(this,Rn).findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(es).catch(es)}invalidateQueries(n,e={}){return _r.batch(()=>(Q(this,Rn).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=_r.batch(()=>Q(this,Rn).findAll(n).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,t);return t.throwOnError||(s=s.catch(es)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(es)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=Q(this,Rn).build(this,e);return t.isStaleByTime(UM(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(es).catch(es)}fetchInfiniteQuery(n){return n.behavior=LA(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(es).catch(es)}ensureInfiniteQueryData(n){return n.behavior=LA(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Dy.isOnline()?Q(this,el).resumePausedMutations():Promise.resolve()}getQueryCache(){return Q(this,Rn)}getMutationCache(){return Q(this,el)}getDefaultOptions(){return Q(this,tl)}setDefaultOptions(n){he(this,tl,n)}setQueryDefaults(n,e){Q(this,Eh).set(Wc(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...Q(this,Eh).values()],t={};return e.forEach(r=>{im(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){Q(this,Th).set(Wc(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...Q(this,Th).values()],t={};return e.forEach(r=>{im(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...Q(this,tl).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=_O(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===SO&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...Q(this,tl).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){Q(this,Rn).clear(),Q(this,el).clear()}},Rn=new WeakMap,el=new WeakMap,tl=new WeakMap,Eh=new WeakMap,Th=new WeakMap,nl=new WeakMap,Mh=new WeakMap,Ih=new WeakMap,fW),NY=I.createContext(void 0),kse=n=>{const e=I.useContext(NY);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Cse=({client:n,children:e})=>(I.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),k.jsx(NY.Provider,{value:n,children:e}));function Ese(n,e){const t=kse(),[r]=I.useState(()=>new wse(t,n));I.useEffect(()=>{r.setOptions(n)},[r,n]);const i=I.useSyncExternalStore(I.useCallback(o=>r.subscribe(_r.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=I.useCallback((o,a)=>{r.mutate(o,a).catch(es)},[r]);if(i.error&&lse(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}function kO(n,{strict:e=!0}={}){return!n||typeof n!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(n):n.startsWith("0x")}function jA(n){return kO(n,{strict:!1})?Math.ceil((n.length-2)/2):n.length}const AY="2.44.4";let _f={getDocsUrl:({docsBaseUrl:n,docsPath:e="",docsSlug:t})=>e?`${n??"https://viem.sh"}${e}${t?`#${t}`:""}`:void 0,version:`viem@${AY}`},zs=class GM extends Error{constructor(e,t={}){var a;const r=(()=>{var l;return t.cause instanceof GM?t.cause.details:(l=t.cause)!=null&&l.message?t.cause.message:t.details})(),i=t.cause instanceof GM&&t.cause.docsPath||t.docsPath,s=(a=_f.getDocsUrl)==null?void 0:a.call(_f,{...t,docsPath:i}),o=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...r?[`Details: ${r}`]:[],..._f.version?[`Version: ${_f.version}`]:[]].join(`
`);super(o,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=i,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=AY}walk(e){return LY(this,e)}};function LY(n,e){return e!=null&&e(n)?n:n&&typeof n=="object"&&"cause"in n&&n.cause!==void 0?LY(n.cause,e):e?null:n}class Tse extends zs{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class FY extends zs{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}function cg(n,{dir:e,size:t=32}={}){return typeof n=="string"?Mse(n,{dir:e,size:t}):Ise(n,{dir:e,size:t})}function Mse(n,{dir:e,size:t=32}={}){if(t===null)return n;const r=n.replace("0x","");if(r.length>t*2)throw new FY({size:Math.ceil(r.length/2),targetSize:t,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function Ise(n,{dir:e,size:t=32}={}){if(t===null)return n;if(n.length>t)throw new FY({size:n.length,targetSize:t,type:"bytes"});const r=new Uint8Array(t);for(let i=0;i<t;i++){const s=e==="right";r[s?i:t-i-1]=n[s?i:n.length-i-1]}return r}class Pse extends zs{constructor({max:e,min:t,signed:r,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class Ose extends zs{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Gb(n,{size:e}){if(jA(n)>e)throw new Ose({givenSize:jA(n),maxSize:e})}const Rse=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Dse(n,e={}){let t="";for(let i=0;i<n.length;i++)t+=Rse[n[i]];const r=`0x${t}`;return typeof e.size=="number"?(Gb(r,{size:e.size}),cg(r,{dir:"right",size:e.size})):r}function VM(n,e={}){const{signed:t,size:r}=e,i=BigInt(n);let s;r?t?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof n=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&t?-s-1n:0;if(s&&i>s||i<o){const l=typeof n=="bigint"?"n":"";throw new Pse({max:s?`${s}${l}`:void 0,min:`${o}${l}`,signed:t,size:r,value:`${n}${l}`})}const a=`0x${(t&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?cg(a,{size:r}):a}const Nse=new TextEncoder;function Ase(n,e={}){const t=Nse.encode(n);return Dse(t,e)}const Lse=new TextEncoder;function Fse(n,e={}){return typeof n=="number"||typeof n=="bigint"?$se(n,e):typeof n=="boolean"?jse(n,e):kO(n)?jY(n,e):$Y(n,e)}function jse(n,e={}){const t=new Uint8Array(1);return t[0]=Number(n),typeof e.size=="number"?(Gb(t,{size:e.size}),cg(t,{size:e.size})):t}const Lo={zero:48,nine:57,A:65,F:70,a:97,f:102};function $A(n){if(n>=Lo.zero&&n<=Lo.nine)return n-Lo.zero;if(n>=Lo.A&&n<=Lo.F)return n-(Lo.A-10);if(n>=Lo.a&&n<=Lo.f)return n-(Lo.a-10)}function jY(n,e={}){let t=n;e.size&&(Gb(t,{size:e.size}),t=cg(t,{dir:"right",size:e.size}));let r=t.slice(2);r.length%2&&(r=`0${r}`);const i=r.length/2,s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const l=$A(r.charCodeAt(a++)),c=$A(r.charCodeAt(a++));if(l===void 0||c===void 0)throw new zs(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);s[o]=l*16+c}return s}function $se(n,e){const t=VM(n,e);return jY(t)}function $Y(n,e={}){const t=Lse.encode(n);return typeof e.size=="number"?(Gb(t,{size:e.size}),cg(t,{dir:"right",size:e.size})):t}const T0=BigInt(2**32-1),BA=BigInt(32);function Bse(n,e=!1){return e?{h:Number(n&T0),l:Number(n>>BA&T0)}:{h:Number(n>>BA&T0)|0,l:Number(n&T0)|0}}function zse(n,e=!1){const t=n.length;let r=new Uint32Array(t),i=new Uint32Array(t);for(let s=0;s<t;s++){const{h:o,l:a}=Bse(n[s],e);[r[s],i[s]]=[o,a]}return[r,i]}const qse=(n,e,t)=>n<<t|e>>>32-t,Use=(n,e,t)=>e<<t|n>>>32-t,Wse=(n,e,t)=>e<<t-32|n>>>64-t,Hse=(n,e,t)=>n<<t-32|e>>>64-t;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Yse(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function zA(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function Ny(n,...e){if(!Yse(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function qA(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function Gse(n,e){Ny(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function Vse(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function BY(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}const Kse=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Xse(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function Qse(n){for(let e=0;e<n.length;e++)n[e]=Xse(n[e]);return n}const UA=Kse?n=>n:Qse;function Jse(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function zY(n){return typeof n=="string"&&(n=Jse(n)),Ny(n),n}let Zse=class{};function eoe(n){const e=r=>n().update(zY(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}const toe=BigInt(0),Sf=BigInt(1),noe=BigInt(2),roe=BigInt(7),ioe=BigInt(256),soe=BigInt(113),qY=[],UY=[],WY=[];for(let n=0,e=Sf,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],qY.push(2*(5*r+t)),UY.push((n+1)*(n+2)/2%64);let i=toe;for(let s=0;s<7;s++)e=(e<<Sf^(e>>roe)*soe)%ioe,e&noe&&(i^=Sf<<(Sf<<BigInt(s))-Sf);WY.push(i)}const HY=zse(WY,!0),ooe=HY[0],aoe=HY[1],WA=(n,e,t)=>t>32?Wse(n,e,t):qse(n,e,t),HA=(n,e,t)=>t>32?Hse(n,e,t):Use(n,e,t);function loe(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=t[l],u=t[l+1],h=WA(c,u,1)^t[a],d=HA(c,u,1)^t[a+1];for(let f=0;f<50;f+=10)n[o+f]^=h,n[o+f+1]^=d}let i=n[2],s=n[3];for(let o=0;o<24;o++){const a=UY[o],l=WA(i,s,a),c=HA(i,s,a),u=qY[o];i=n[u],s=n[u+1],n[u]=l,n[u+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=n[o+a];for(let a=0;a<10;a++)n[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}n[0]^=ooe[r],n[1]^=aoe[r]}BY(t)}let coe=class YY extends Zse{constructor(e,t,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,zA(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Vse(this.state)}clone(){return this._cloneInto()}keccak(){UA(this.state32),loe(this.state32,this.rounds),UA(this.state32),this.posOut=0,this.pos=0}update(e){qA(this),e=zY(e),Ny(e);const{blockLen:t,state:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,t&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){qA(this,!1),Ny(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return zA(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Gse(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,BY(this.state)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new YY(t,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const uoe=(n,e,t)=>eoe(()=>new coe(e,n,t)),hoe=uoe(1,136,256/8);function doe(n,e){return hoe(kO(n,{strict:!1})?Fse(n):n)}class CO extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const foe=/^0x[a-fA-F0-9]{40}$/,Jw=new CO(8192);function poe(n,e){const{strict:t=!0}=e??{},r=`${n}.${t}`;if(Jw.has(r))return Jw.get(r);const i=foe.test(n)?n.toLowerCase()===n?!0:t?GY(n)===n:!0:!1;return Jw.set(r,i),i}const Zw=new CO(8192);function GY(n,e){if(Zw.has(`${n}.${e}`))return Zw.get(`${n}.${e}`);const t=n.substring(2).toLowerCase(),r=doe($Y(t)),i=t.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(r[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return Zw.set(`${n}.${e}`,s),s}function M0(n,e){if(!poe(n,{strict:!1}))throw new Tse({address:n});return GY(n,e)}function moe(n){return typeof n=="string"?{address:n,type:"json-rpc"}:n}const Mc=(n,e,t)=>JSON.stringify(n,(r,i)=>typeof i=="bigint"?i.toString():i,t),EO=n=>n;class _p extends zs{constructor({body:e,cause:t,details:r,headers:i,status:s,url:o}){super("HTTP request failed.",{cause:t,details:r,metaMessages:[s&&`Status: ${s}`,`URL: ${EO(o)}`,e&&`Request body: ${Mc(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=i,this.status=s,this.url=o}}class VY extends zs{constructor({body:e,error:t,url:r}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${EO(r)}`,`Request body: ${Mc(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code,this.data=t.data,this.url=r}}class YA extends zs{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${EO(t)}`,`Request body: ${Mc(e)}`],name:"TimeoutError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=t}}const goe=-1;class yi extends zs{constructor(e,{code:t,docsPath:r,metaMessages:i,name:s,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:i||(e==null?void 0:e.metaMessages),name:s||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=s||e.name,this.code=e instanceof VY?e.code:t??goe}}class zi extends yi{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class sm extends yi{constructor(e){super(e,{code:sm.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(sm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class om extends yi{constructor(e){super(e,{code:om.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(om,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class am extends yi{constructor(e,{method:t}={}){super(e,{code:am.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}}Object.defineProperty(am,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class lm extends yi{constructor(e){super(e,{code:lm.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(lm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class rd extends yi{constructor(e){super(e,{code:rd.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(rd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class cm extends yi{constructor(e){super(e,{code:cm.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(cm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class um extends yi{constructor(e){super(e,{code:um.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(um,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class xl extends yi{constructor(e){super(e,{code:xl.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(xl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class hm extends yi{constructor(e){super(e,{code:hm.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(hm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class cc extends yi{constructor(e,{method:t}={}){super(e,{code:cc.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not supported.`})}}Object.defineProperty(cc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class id extends yi{constructor(e){super(e,{code:id.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(id,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class dm extends yi{constructor(e){super(e,{code:dm.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(dm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class qr extends zi{constructor(e){super(e,{code:qr.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(qr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class fm extends zi{constructor(e){super(e,{code:fm.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(fm,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class pm extends zi{constructor(e,{method:t}={}){super(e,{code:pm.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}}Object.defineProperty(pm,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class mm extends zi{constructor(e){super(e,{code:mm.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(mm,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class gm extends zi{constructor(e){super(e,{code:gm.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(gm,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Hc extends zi{constructor(e){super(e,{code:Hc.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Hc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class vm extends zi{constructor(e){super(e,{code:vm.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(vm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class ym extends zi{constructor(e){super(e,{code:ym.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(ym,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class bm extends zi{constructor(e){super(e,{code:bm.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(bm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class xm extends zi{constructor(e){super(e,{code:xm.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(xm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class wm extends zi{constructor(e){super(e,{code:wm.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(wm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class _m extends zi{constructor(e){super(e,{code:_m.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(_m,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Sm extends zi{constructor(e){super(e,{code:Sm.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Sm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class voe extends yi{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function yoe(){let n=()=>{},e=()=>{};return{promise:new Promise((r,i)=>{n=r,e=i}),resolve:n,reject:e}}const e1=new Map;function boe({fn:n,id:e,shouldSplitBatch:t,wait:r=0,sort:i}){const s=async()=>{const u=l();o();const h=u.map(({args:d})=>d);h.length!==0&&n(h).then(d=>{i&&Array.isArray(d)&&d.sort(i);for(let f=0;f<u.length;f++){const{resolve:m}=u[f];m==null||m([d[f],d])}}).catch(d=>{for(let f=0;f<u.length;f++){const{reject:m}=u[f];m==null||m(d)}})},o=()=>e1.delete(e),a=()=>l().map(({args:u})=>u),l=()=>e1.get(e)||[],c=u=>e1.set(e,[...l(),u]);return{flush:o,async schedule(u){const{promise:h,resolve:d,reject:f}=yoe();return(t==null?void 0:t([...a(),u]))&&s(),l().length>0?(c({args:u,resolve:d,reject:f}),h):(c({args:u,resolve:d,reject:f}),setTimeout(s,r),h)}}}const I0=new CO(8192);function xoe(n,{enabled:e=!0,id:t}){if(!e||!t)return n();if(I0.get(t))return I0.get(t);const r=n().finally(()=>I0.delete(t));return I0.set(t,r),r}async function woe(n){return new Promise(e=>setTimeout(e,n))}function KY(n,{delay:e=100,retryCount:t=2,shouldRetry:r=()=>!0}={}){return new Promise((i,s)=>{const o=async({count:a=0}={})=>{const l=async({error:c})=>{const u=typeof e=="function"?e({count:a,error:c}):e;u&&await woe(u),o({count:a+1})};try{const c=await n();i(c)}catch(c){if(a<t&&await r({count:a,error:c}))return l({error:c});s(c)}};o()})}function _oe(n,e={}){return async(t,r={})=>{var h;const{dedupe:i=!1,methods:s,retryDelay:o=150,retryCount:a=3,uid:l}={...e,...r},{method:c}=t;if((h=s==null?void 0:s.exclude)!=null&&h.includes(c))throw new cc(new Error("method not supported"),{method:c});if(s!=null&&s.include&&!s.include.includes(c))throw new cc(new Error("method not supported"),{method:c});const u=i?Ase(`${l}.${Mc(t)}`):void 0;return xoe(()=>KY(async()=>{try{return await n(t)}catch(d){const f=d;switch(f.code){case sm.code:throw new sm(f);case om.code:throw new om(f);case am.code:throw new am(f,{method:t.method});case lm.code:throw new lm(f);case rd.code:throw new rd(f);case cm.code:throw new cm(f);case um.code:throw new um(f);case xl.code:throw new xl(f);case hm.code:throw new hm(f);case cc.code:throw new cc(f,{method:t.method});case id.code:throw new id(f);case dm.code:throw new dm(f);case qr.code:throw new qr(f);case fm.code:throw new fm(f);case pm.code:throw new pm(f);case mm.code:throw new mm(f);case gm.code:throw new gm(f);case Hc.code:throw new Hc(f);case vm.code:throw new vm(f);case ym.code:throw new ym(f);case bm.code:throw new bm(f);case xm.code:throw new xm(f);case wm.code:throw new wm(f);case _m.code:throw new _m(f);case Sm.code:throw new Sm(f);case 5e3:throw new qr(f);default:throw d instanceof zs?d:new voe(f)}}},{delay:({count:d,error:f})=>{var m;if(f&&f instanceof _p){const g=(m=f==null?void 0:f.headers)==null?void 0:m.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g,10)*1e3}return~~(1<<d)*o},retryCount:a,shouldRetry:({error:d})=>Soe(d)}),{enabled:i,id:u})}}function Soe(n){return"code"in n&&typeof n.code=="number"?n.code===-1||n.code===id.code||n.code===rd.code:n instanceof _p&&n.status?n.status===403||n.status===408||n.status===413||n.status===429||n.status===500||n.status===502||n.status===503||n.status===504:!0}function XY(n){const e={formatters:void 0,fees:void 0,serializers:void 0,...n};function t(r){return i=>{const s=typeof i=="function"?i(r):i,o={...r,...s};return Object.assign(o,{extend:t(o)})}}return Object.assign(e,{extend:t(e)})}function QY(n,{errorInstance:e=new Error("timed out"),timeout:t,signal:r}){return new Promise((i,s)=>{(async()=>{let o;try{const a=new AbortController;t>0&&(o=setTimeout(()=>{r?a.abort():s(e)},t)),i(await n({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&s(e),s(a)}finally{clearTimeout(o)}})()})}function koe(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const GA=koe();function Coe(n,e={}){const{url:t,headers:r}=Eoe(n);return{async request(i){var m;const{body:s,fetchFn:o=e.fetchFn??fetch,onRequest:a=e.onRequest,onResponse:l=e.onResponse,timeout:c=e.timeout??1e4}=i,u={...e.fetchOptions??{},...i.fetchOptions??{}},{headers:h,method:d,signal:f}=u;try{const g=await QY(async({signal:y})=>{const b={...u,body:Array.isArray(s)?Mc(s.map(E=>({jsonrpc:"2.0",id:E.id??GA.take(),...E}))):Mc({jsonrpc:"2.0",id:s.id??GA.take(),...s}),headers:{...r,"Content-Type":"application/json",...h},method:d||"POST",signal:f||(c>0?y:null)},w=new Request(t,b),S=await(a==null?void 0:a(w,b))??{...b,url:t};return await o(S.url??t,S)},{errorInstance:new YA({body:s,url:t}),timeout:c,signal:!0});l&&await l(g);let v;if((m=g.headers.get("Content-Type"))!=null&&m.startsWith("application/json"))v=await g.json();else{v=await g.text();try{v=JSON.parse(v||"{}")}catch(y){if(g.ok)throw y;v={error:v}}}if(!g.ok)throw new _p({body:s,details:Mc(v.error)||g.statusText,headers:g.headers,status:g.status,url:t});return v}catch(g){throw g instanceof _p||g instanceof YA?g:new _p({body:s,cause:g,url:t})}}}}function Eoe(n){try{const e=new URL(n),t=(()=>{if(e.username){const r=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`;return e.username="",e.password="",{url:e.toString(),headers:{Authorization:`Basic ${btoa(r)}`}}}})();return{url:e.toString(),...t}}catch{return{url:n}}}const Wv="3.2.2",Toe=()=>`@wagmi/core@${Wv}`;var JY=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Ay,ZY;let Vb=class KM extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return Toe()}constructor(e,t={}){var s;super(),Ay.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=t.cause instanceof KM?t.cause.details:(s=t.cause)!=null&&s.message?t.cause.message:t.details,i=t.cause instanceof KM&&t.cause.docsPath||t.docsPath;this.message=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: ${this.docsBaseUrl}${i}.html${t.docsSlug?`#${t.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),t.cause&&(this.cause=t.cause),this.details=r,this.docsPath=i,this.metaMessages=t.metaMessages,this.shortMessage=e}walk(e){return JY(this,Ay,"m",ZY).call(this,this,e)}};Ay=new WeakSet,ZY=function n(e,t){return t!=null&&t(e)?e:e.cause?JY(this,Ay,"m",n).call(this,e.cause,t):e};class XM extends Vb{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class Moe extends Vb{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}async function Ioe(n,e){var r;let t;if(typeof e.connector=="function"?t=n._internal.connectors.setup(e.connector):t=e.connector,t.uid===n.state.current)throw new Moe;try{n.setState(a=>({...a,status:"connecting"})),t.emitter.emit("message",{type:"connecting"});const{connector:i,...s}=e,o=await t.connect(s);return t.emitter.off("connect",n._internal.events.connect),t.emitter.on("change",n._internal.events.change),t.emitter.on("disconnect",n._internal.events.disconnect),await((r=n.storage)==null?void 0:r.setItem("recentConnectorId",t.id)),n.setState(a=>({...a,connections:new Map(a.connections).set(t.uid,{accounts:s.withCapabilities?o.accounts.map(l=>typeof l=="object"?l.address:l):o.accounts,chainId:o.chainId,connector:t}),current:t.uid,status:"connected"})),{accounts:s.withCapabilities?o.accounts.map(a=>typeof a=="object"?a:{address:a,capabilities:{}}):o.accounts,chainId:o.chainId}}catch(i){throw n.setState(s=>({...s,status:s.current?"connected":"disconnected"})),i}}const QM=256;let P0=QM,O0;function eG(n=11){if(!O0||P0+n>QM*2){O0="",P0=0;for(let e=0;e<QM;e++)O0+=(256+Math.random()*256|0).toString(16).substring(1)}return O0.substring(P0,P0+++n)}function Poe(n){const{batch:e,chain:t,ccipRead:r,key:i="base",name:s="Base Client",type:o="base"}=n,a=n.experimental_blockTag??(typeof(t==null?void 0:t.experimental_preconfirmationTime)=="number"?"pending":void 0),l=(t==null?void 0:t.blockTime)??12e3,c=Math.min(Math.max(Math.floor(l/2),500),4e3),u=n.pollingInterval??c,h=n.cacheTime??u,d=n.account?moe(n.account):void 0,{config:f,request:m,value:g}=n.transport({account:d,chain:t,pollingInterval:u}),v={...f,...g},y={account:d,batch:e,cacheTime:h,ccipRead:r,chain:t,key:i,name:s,pollingInterval:u,request:m,transport:v,type:o,uid:eG(),...a?{experimental_blockTag:a}:{}};function b(w){return S=>{const _=S(w);for(const C in y)delete _[C];const E={...w,..._};return Object.assign(E,{extend:b(E)})}}return Object.assign(y,{extend:b(y)})}function Ooe({key:n,methods:e,name:t,request:r,retryCount:i=3,retryDelay:s=150,timeout:o,type:a},l){const c=eG();return{config:{key:n,methods:e,name:t,request:r,retryCount:i,retryDelay:s,timeout:o,type:a},request:_oe(r,{methods:e,retryCount:i,retryDelay:s,uid:c}),value:l}}class Roe extends zs{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function VA(n,e={}){const{batch:t,fetchFn:r,fetchOptions:i,key:s="http",methods:o,name:a="HTTP JSON-RPC",onFetchRequest:l,onFetchResponse:c,retryDelay:u,raw:h}=e;return({chain:d,retryCount:f,timeout:m})=>{const{batchSize:g=1e3,wait:v=0}=typeof t=="object"?t:{},y=e.retryCount??f,b=m??e.timeout??1e4,w=d==null?void 0:d.rpcUrls.default.http[0];if(!w)throw new Roe;const S=Coe(w,{fetchFn:r,fetchOptions:i,onRequest:l,onResponse:c,timeout:b});return Ooe({key:s,methods:o,name:a,async request({method:_,params:E}){const C={method:_,params:E},{schedule:T}=boe({id:w,wait:v,shouldSplitBatch(A){return A.length>g},fn:A=>S.request({body:A}),sort:(A,F)=>A.id-F.id}),O=async A=>t?T(A):[await S.request({body:A})],[{error:R,result:D}]=await O(C);if(h)return{error:R,result:D};if(R)throw new VY({body:C,error:R,url:w});return D},retryCount:y,retryDelay:u,timeout:b,type:"http"},{fetchOptions:i,url:w})}}let R0=[];function KA(n){const e=n.connectors;return R0.length===e.length&&R0.every((t,r)=>t===e[r])?R0:(R0=e,e)}let t1=!1;async function Doe(n,e={}){var c,u;if(t1)return[];t1=!0,n.setState(h=>({...h,status:h.current?"reconnecting":"connecting"}));const t=[];if((c=e.connectors)!=null&&c.length)for(const h of e.connectors){let d;typeof h=="function"?d=n._internal.connectors.setup(h):d=h,t.push(d)}else t.push(...n.connectors);let r;try{r=await((u=n.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const i={};for(const[,h]of n.state.connections)i[h.connector.id]=1;r&&(i[r]=0);const s=Object.keys(i).length>0?[...t].sort((h,d)=>(i[h.id]??10)-(i[d.id]??10)):t;let o=!1;const a=[],l=[];for(const h of s){const d=await h.getProvider().catch(()=>{});if(!d||l.some(g=>g===d)||!await h.isAuthorized())continue;const m=await h.connect({isReconnecting:!0}).catch(()=>null);m&&(h.emitter.off("connect",n._internal.events.connect),h.emitter.on("change",n._internal.events.change),h.emitter.on("disconnect",n._internal.events.disconnect),n.setState(g=>{const v=new Map(o?g.connections:new Map).set(h.uid,{accounts:m.accounts,chainId:m.chainId,connector:h});return{...g,current:o?g.current:h.uid,connections:v}}),a.push({accounts:m.accounts,chainId:m.chainId,connector:h}),l.push(d),o=!0)}return(n.state.status==="reconnecting"||n.state.status==="connecting")&&(o?n.setState(h=>({...h,status:"connected"})):n.setState(h=>({...h,connections:new Map,current:null,status:"disconnected"}))),t1=!1,a}class Iu extends Vb{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}function Noe(n,e){const{onChange:t}=e;return n._internal.connectors.subscribe((r,i)=>{t(Object.values(r),i)})}Kb.type="injected";function Kb(n={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:t}=n;function r(){const l=n.target;if(typeof l=="function"){const c=l();if(c)return c}return typeof l=="object"?l:typeof l=="string"?{...Aoe[l]??{id:l,name:`${l[0].toUpperCase()}${l.slice(1)}`,provider:`is${l[0].toUpperCase()}${l.slice(1)}`}}:{id:"injected",name:"Injected",provider(c){return c==null?void 0:c.ethereum}}}let i,s,o,a;return l=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},type:Kb.type,async setup(){const c=await this.getProvider();c!=null&&c.on&&n.target&&(o||(o=this.onConnect.bind(this),c.on("connect",o)),i||(i=this.onAccountsChanged.bind(this),c.on("accountsChanged",i)))},async connect({chainId:c,isReconnecting:u,withCapabilities:h}={}){var m,g,v,y,b,w;const d=await this.getProvider();if(!d)throw new Iu;let f=[];if(u)f=await this.getAccounts().catch(()=>[]);else if(e)try{f=(y=(v=(g=(m=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:m.caveats)==null?void 0:g[0])==null?void 0:v.value)==null?void 0:y.map(_=>M0(_)),f.length>0&&(f=await this.getAccounts())}catch(S){const _=S;if(_.code===qr.code)throw new qr(_);if(_.code===xl.code)throw _}try{!(f!=null&&f.length)&&!u&&(f=(await d.request({method:"eth_requestAccounts"})).map(E=>M0(E))),o&&(d.removeListener("connect",o),o=void 0),i||(i=this.onAccountsChanged.bind(this),d.on("accountsChanged",i)),s||(s=this.onChainChanged.bind(this),d.on("chainChanged",s)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let S=await this.getChainId();if(c&&S!==c){const _=await this.switchChain({chainId:c}).catch(E=>{if(E.code===qr.code)throw E;return{id:S}});S=(_==null?void 0:_.id)??S}return e&&await((b=l.storage)==null?void 0:b.removeItem(`${this.id}.disconnected`)),n.target||await((w=l.storage)==null?void 0:w.setItem("injected.connected",!0)),{accounts:h?f.map(_=>({address:_,capabilities:{}})):f,chainId:S}}catch(S){const _=S;throw _.code===qr.code?new qr(_):_.code===xl.code?new xl(_):_}},async disconnect(){var u,h;const c=await this.getProvider();if(!c)throw new Iu;s&&(c.removeListener("chainChanged",s),s=void 0),a&&(c.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),c.on("connect",o));try{await QY(()=>c.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=l.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),n.target||await((h=l.storage)==null?void 0:h.removeItem("injected.connected"))},async getAccounts(){const c=await this.getProvider();if(!c)throw new Iu;return(await c.request({method:"eth_accounts"})).map(h=>M0(h))},async getChainId(){const c=await this.getProvider();if(!c)throw new Iu;const u=await c.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let c;const u=r();return typeof u.provider=="function"?c=u.provider(window):typeof u.provider=="string"?c=Hv(window,u.provider):c=u.provider,c&&!c.removeListener&&("off"in c&&typeof c.off=="function"?c.removeListener=c.off:c.removeListener=()=>{}),c},async isAuthorized(){var c,u;try{if(e&&await((c=l.storage)==null?void 0:c.getItem(`${this.id}.disconnected`))||!n.target&&!await((u=l.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(t!==void 0&&t!==!1){const m=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",m),!!await this.getProvider()),g=typeof t=="number"?t:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(y=>window.addEventListener("ethereum#initialized",()=>y(m()),{once:!0}))]:[],new Promise(y=>setTimeout(()=>y(m()),g))]))return!0}throw new Iu}return!!(await KY(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:c,chainId:u}){var m,g,v,y;const h=await this.getProvider();if(!h)throw new Iu;const d=l.chains.find(b=>b.id===u);if(!d)throw new Hc(new XM);const f=new Promise(b=>{const w=S=>{"chainId"in S&&S.chainId===u&&(l.emitter.off("change",w),b())};l.emitter.on("change",w)});try{return await Promise.all([h.request({method:"wallet_switchEthereumChain",params:[{chainId:VM(u)}]}).then(async()=>{await this.getChainId()===u&&l.emitter.emit("change",{chainId:u})}),f]),d}catch(b){const w=b;if(w.code===4902||((g=(m=w==null?void 0:w.data)==null?void 0:m.originalError)==null?void 0:g.code)===4902)try{const{default:S,..._}=d.blockExplorers??{};let E;c!=null&&c.blockExplorerUrls?E=c.blockExplorerUrls:S&&(E=[S.url,...Object.values(_).map(O=>O.url)]);let C;(v=c==null?void 0:c.rpcUrls)!=null&&v.length?C=c.rpcUrls:C=[((y=d.rpcUrls.default)==null?void 0:y.http[0])??""];const T={blockExplorerUrls:E,chainId:VM(u),chainName:(c==null?void 0:c.chainName)??d.name,iconUrls:c==null?void 0:c.iconUrls,nativeCurrency:(c==null?void 0:c.nativeCurrency)??d.nativeCurrency,rpcUrls:C};return await Promise.all([h.request({method:"wallet_addEthereumChain",params:[T]}).then(async()=>{if(await this.getChainId()===u)l.emitter.emit("change",{chainId:u});else throw new qr(new Error("User rejected switch after adding network."))}),f]),d}catch(S){throw new qr(S)}throw w.code===qr.code?new qr(w):new Hc(w)}},async onAccountsChanged(c){var u;if(c.length===0)this.onDisconnect();else if(l.emitter.listenerCount("connect")){const h=(await this.getChainId()).toString();this.onConnect({chainId:h}),e&&await((u=l.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else l.emitter.emit("change",{accounts:c.map(h=>M0(h))})},onChainChanged(c){const u=Number(c);l.emitter.emit("change",{chainId:u})},async onConnect(c){const u=await this.getAccounts();if(u.length===0)return;const h=Number(c.chainId);l.emitter.emit("connect",{accounts:u,chainId:h});const d=await this.getProvider();d&&(o&&(d.removeListener("connect",o),o=void 0),i||(i=this.onAccountsChanged.bind(this),d.on("accountsChanged",i)),s||(s=this.onChainChanged.bind(this),d.on("chainChanged",s)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a)))},async onDisconnect(c){const u=await this.getProvider();c&&c.code===1013&&u&&(await this.getAccounts()).length||(l.emitter.emit("disconnect"),u&&(s&&(u.removeListener("chainChanged",s),s=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const Aoe={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(n){return n!=null&&n.coinbaseWalletExtension?n.coinbaseWalletExtension:Hv(n,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(n){return Hv(n,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const t=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of t)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(n){var e,t;return(e=n==null?void 0:n.phantom)!=null&&e.ethereum?(t=n.phantom)==null?void 0:t.ethereum:Hv(n,"isPhantom")}}};function Hv(n,e){function t(i){return typeof e=="function"?e(i):typeof e=="string"?i[e]:!0}const r=n.ethereum;if(r!=null&&r.providers)return r.providers.find(i=>t(i));if(r&&t(r))return r}function Loe(n){if(typeof window>"u")return;const e=t=>n(t.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function Foe(){const n=new Set;let e=[];const t=()=>Loe(i=>{e.some(({info:s})=>s.uuid===i.info.uuid)||(e=[...e,i],n.forEach(s=>s(e,{added:[i]})))});let r=t();return{_listeners(){return n},clear(){n.forEach(i=>i([],{removed:[...e]})),e=[]},destroy(){this.clear(),n.clear(),r==null||r()},findProvider({rdns:i}){return e.find(s=>s.info.rdns===i)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=t()},subscribe(i,{emitImmediately:s}={}){return n.add(i),s&&i(e,{added:e}),()=>n.delete(i)}}}const joe=n=>(e,t,r)=>{const i=r.subscribe;return r.subscribe=(o,a,l)=>{let c=o;if(a){const u=(l==null?void 0:l.equalityFn)||Object.is;let h=o(r.getState());c=d=>{const f=o(d);if(!u(h,f)){const m=h;a(h=f,m)}},l!=null&&l.fireImmediately&&a(h,h)}return i(c)},n(e,t,r)},$oe=joe;function Boe(n,e){let t;try{t=n()}catch{return}return{getItem:i=>{var s;const o=l=>l===null?null:JSON.parse(l,void 0),a=(s=t.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>t.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>t.removeItem(i)}}const JM=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(r){return JM(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return JM(r)(t)}}}},zoe=(n,e)=>(t,r,i)=>{let s={storage:Boe(()=>localStorage),partialize:g=>g,version:0,merge:(g,v)=>({...v,...g}),...e},o=!1;const a=new Set,l=new Set;let c=s.storage;if(!c)return n((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),t(...g)},r,i);const u=()=>{const g=s.partialize({...r()});return c.setItem(s.name,{state:g,version:s.version})},h=i.setState;i.setState=(g,v)=>{h(g,v),u()};const d=n((...g)=>{t(...g),u()},r,i);i.getInitialState=()=>d;let f;const m=()=>{var g,v;if(!c)return;o=!1,a.forEach(b=>{var w;return b((w=r())!=null?w:d)});const y=((v=s.onRehydrateStorage)==null?void 0:v.call(s,(g=r())!=null?g:d))||void 0;return JM(c.getItem.bind(c))(s.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==s.version){if(s.migrate)return[!0,s.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var w;const[S,_]=b;if(f=s.merge(_,(w=r())!=null?w:d),t(f,!0),S)return u()}).then(()=>{y==null||y(f,void 0),f=r(),o=!0,l.forEach(b=>b(f))}).catch(b=>{y==null||y(void 0,b)})};return i.persist={setOptions:g=>{s={...s,...g},g.storage&&(c=g.storage)},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(l.add(g),()=>{l.delete(g)})},s.skipHydration||m(),f||d},qoe=zoe,XA=n=>{let e;const t=new Set,r=(c,u)=>{const h=typeof c=="function"?c(e):c;if(!Object.is(h,e)){const d=e;e=u??(typeof h!="object"||h===null)?h:Object.assign({},e,h),t.forEach(f=>f(e,d))}},i=()=>e,a={setState:r,getState:i,getInitialState:()=>l,subscribe:c=>(t.add(c),()=>t.delete(c))},l=e=n(r,i,a);return a},n1=n=>n?XA(n):XA;var tG={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,h,d){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,h||l,d),m=t?t+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],f]:l._events[m].push(f):(l._events[m]=f,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,h;if(this._eventsCount===0)return c;for(h in u=this._events)e.call(u,h)&&c.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=t?t+c:c,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var d=0,f=h.length,m=new Array(f);d<f;d++)m[d]=h[d].fn;return m},a.prototype.listenerCount=function(c){var u=t?t+c:c,h=this._events[u];return h?h.fn?1:h.length:0},a.prototype.emit=function(c,u,h,d,f,m){var g=t?t+c:c;if(!this._events[g])return!1;var v=this._events[g],y=arguments.length,b,w;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,h),!0;case 4:return v.fn.call(v.context,u,h,d),!0;case 5:return v.fn.call(v.context,u,h,d,f),!0;case 6:return v.fn.call(v.context,u,h,d,f,m),!0}for(w=1,b=new Array(y-1);w<y;w++)b[w-1]=arguments[w];v.fn.apply(v.context,b)}else{var S=v.length,_;for(w=0;w<S;w++)switch(v[w].once&&this.removeListener(c,v[w].fn,void 0,!0),y){case 1:v[w].fn.call(v[w].context);break;case 2:v[w].fn.call(v[w].context,u);break;case 3:v[w].fn.call(v[w].context,u,h);break;case 4:v[w].fn.call(v[w].context,u,h,d);break;default:if(!b)for(_=1,b=new Array(y-1);_<y;_++)b[_-1]=arguments[_];v[w].fn.apply(v[w].context,b)}}return!0},a.prototype.on=function(c,u,h){return s(this,c,u,h,!1)},a.prototype.once=function(c,u,h){return s(this,c,u,h,!0)},a.prototype.removeListener=function(c,u,h,d){var f=t?t+c:c;if(!this._events[f])return this;if(!u)return o(this,f),this;var m=this._events[f];if(m.fn)m.fn===u&&(!d||m.once)&&(!h||m.context===h)&&o(this,f);else{for(var g=0,v=[],y=m.length;g<y;g++)(m[g].fn!==u||d&&!m[g].once||h&&m[g].context!==h)&&v.push(m[g]);v.length?this._events[f]=v.length===1?v[0]:v:o(this,f)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=t?t+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,n.exports=a})(tG);var Uoe=tG.exports;const Woe=TP(Uoe);let Hoe=class{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new Woe})}on(e,t){this._emitter.on(e,t)}once(e,t){this._emitter.once(e,t)}off(e,t){this._emitter.off(e,t)}emit(e,...t){const r=t[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}};function Yoe(n){return new Hoe(n)}function Goe(n,e){return JSON.parse(n,(t,r)=>{let i=r;return(i==null?void 0:i.__type)==="bigint"&&(i=BigInt(i.value)),(i==null?void 0:i.__type)==="Map"&&(i=new Map(i.value)),(e==null?void 0:e(t,i))??i})}function QA(n,e){return n.slice(0,e).join(".")||"."}function JA(n,e){const{length:t}=n;for(let r=0;r<t;++r)if(n[r]===e)return r+1;return 0}function Voe(n,e){const t=typeof n=="function",r=typeof e=="function",i=[],s=[];return function(a,l){if(typeof l=="object")if(i.length){const c=JA(i,this);c===0?i[i.length]=this:(i.splice(c),s.splice(c)),s[s.length]=a;const u=JA(i,l);if(u!==0)return r?e.call(this,a,l,QA(s,u)):`[ref=${QA(s,u)}]`}else i[0]=l,s[0]=a;return t?n.call(this,a,l):l}}function Koe(n,e,t,r){return JSON.stringify(n,Voe((i,s)=>{let o=s;return typeof o=="bigint"&&(o={__type:"bigint",value:s.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(s.entries())}),(e==null?void 0:e(i,o))??o},r),t??void 0)}function Xoe(n){const{deserialize:e=Goe,key:t="wagmi",serialize:r=Koe,storage:i=nG}=n;function s(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...i,key:t,async getItem(o,a){const l=i.getItem(`${t}.${o}`),c=await s(l);return c?e(c)??null:a??null},async setItem(o,a){const l=`${t}.${o}`;a===null?await s(i.removeItem(l)):await s(i.setItem(l,r(a)))},async removeItem(o){await s(i.removeItem(`${t}.${o}`))}}}const nG={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function Qoe(){const n=typeof window<"u"&&window.localStorage?window.localStorage:nG;return{getItem(e){return n.getItem(e)},removeItem(e){n.removeItem(e)},setItem(e,t){try{n.setItem(e,t)}catch{}}}}const ZM=256;let D0=ZM,N0;function Joe(n=11){if(!N0||D0+n>ZM*2){N0="",D0=0;for(let e=0;e<ZM;e++)N0+=(256+Math.random()*256|0).toString(16).substring(1)}return N0.substring(D0,D0+++n)}function Zoe(n){const{multiInjectedProviderDiscovery:e=!0,storage:t=Xoe({storage:Qoe()}),syncConnectedChain:r=!0,ssr:i=!1,...s}=n,o=typeof window<"u"&&e?Foe():void 0,a=n1(()=>s.chains),l=n1(()=>{const _=[],E=new Set;for(const C of s.connectors??[]){const T=c(C);if(_.push(T),!i&&T.rdns){const O=typeof T.rdns=="string"?[T.rdns]:T.rdns;for(const R of O)E.add(R)}}if(!i&&o){const C=o.getProviders();for(const T of C)E.has(T.info.rdns)||_.push(c(u(T)))}return _});function c(_){var T;const E=Yoe(Joe()),C={..._({emitter:E,chains:a.getState(),storage:t,transports:s.transports}),emitter:E,uid:E.uid};return E.on("connect",w),(T=C.setup)==null||T.call(C),C}function u(_){const{info:E}=_,C=_.provider;return Kb({target:{...E,id:E.rdns,provider:C}})}const h=new Map;function d(_={}){const E=_.chainId??v.getState().chainId,C=a.getState().find(O=>O.id===E);if(_.chainId&&!C)throw new XM;{const O=h.get(v.getState().chainId);if(O&&!C)return O;if(!C)throw new XM}{const O=h.get(E);if(O)return O}let T;if(s.client)T=s.client({chain:C});else{const O=C.id,R=a.getState().map(F=>F.id),D={},A=Object.entries(s);for(const[F,z]of A)if(!(F==="chains"||F==="client"||F==="connectors"||F==="transports"))if(typeof z=="object")if(O in z)D[F]=z[O];else{if(R.some(L=>L in z))continue;D[F]=z}else D[F]=z;T=Poe({...D,chain:C,batch:D.batch??{multicall:!0},transport:F=>s.transports[O]({...F,connectors:l})})}return h.set(E,T),T}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let m;const g="0.0.0-canary-";Wv.startsWith(g)?m=Number.parseInt(Wv.replace(g,""),10):m=Number.parseInt(Wv.split(".")[0]??"0",10);const v=n1($oe(t?qoe(f,{migrate(_,E){if(E===m)return _;const C=f(),T=y(_,C.chainId);return{...C,chainId:T}},name:"store",partialize(_){return{connections:{__type:"Map",value:Array.from(_.connections.entries()).map(([E,C])=>{const{id:T,name:O,type:R,uid:D}=C.connector;return[E,{...C,connector:{id:T,name:O,type:R,uid:D}}]})},chainId:_.chainId,current:_.current}},merge(_,E){typeof _=="object"&&_&&"status"in _&&delete _.status;const C=y(_,E.chainId);return{...E,..._,chainId:C}},skipHydration:i,storage:t,version:m}):f));v.setState(f());function y(_,E){return _&&typeof _=="object"&&"chainId"in _&&typeof _.chainId=="number"&&a.getState().some(C=>C.id===_.chainId)?_.chainId:E}r&&v.subscribe(({connections:_,current:E})=>{var C;return E?(C=_.get(E))==null?void 0:C.chainId:void 0},_=>{if(a.getState().some(C=>C.id===_))return v.setState(C=>({...C,chainId:_??C.chainId}))}),o==null||o.subscribe(_=>{const E=new Set,C=new Set;for(const O of l.getState())if(E.add(O.id),O.rdns){const R=typeof O.rdns=="string"?[O.rdns]:O.rdns;for(const D of R)C.add(D)}const T=[];for(const O of _){if(C.has(O.info.rdns))continue;const R=c(u(O));E.has(R.id)||T.push(R)}t&&!v.persist.hasHydrated()||l.setState(O=>[...O,...T],!0)});function b(_){v.setState(E=>{const C=E.connections.get(_.uid);return C?{...E,connections:new Map(E.connections).set(_.uid,{accounts:_.accounts??C.accounts,chainId:_.chainId??C.chainId,connector:C.connector})}:E})}function w(_){v.getState().status==="connecting"||v.getState().status==="reconnecting"||v.setState(E=>{const C=l.getState().find(T=>T.uid===_.uid);return C?(C.emitter.listenerCount("connect")&&C.emitter.off("connect",b),C.emitter.listenerCount("change")||C.emitter.on("change",b),C.emitter.listenerCount("disconnect")||C.emitter.on("disconnect",S),{...E,connections:new Map(E.connections).set(_.uid,{accounts:_.accounts,chainId:_.chainId,connector:C}),current:_.uid,status:"connected"}):E})}function S(_){v.setState(E=>{const C=E.connections.get(_.uid);if(C){const O=C.connector;O.emitter.listenerCount("change")&&C.connector.emitter.off("change",b),O.emitter.listenerCount("disconnect")&&C.connector.emitter.off("disconnect",S),O.emitter.listenerCount("connect")||C.connector.emitter.on("connect",w)}if(E.connections.delete(_.uid),E.connections.size===0)return{...E,connections:new Map,current:null,status:"disconnected"};const T=E.connections.values().next().value;return{...E,connections:new Map(E.connections),current:T.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return l.getState()},storage:t,getClient:d,get state(){return v.getState()},setState(_){let E;typeof _=="function"?E=_(v.getState()):E=_;const C=f();typeof E!="object"&&(E=C),Object.keys(C).some(O=>!(O in E))&&(E=C),v.setState(E,!0)},subscribe(_,E,C){return v.subscribe(_,E,C?{...C,fireImmediately:C.emitImmediately}:void 0)},_internal:{mipd:o,async revalidate(){const _=v.getState(),E=_.connections;let C=_.current;for(const[,T]of E){const O=T.connector;O.isAuthorized&&await O.isAuthorized()||(E.delete(O.uid),C===O.uid&&(C=null))}v.setState(T=>({...T,connections:E,current:C}))},store:v,ssr:!!i,syncConnectedChain:r,transports:s.transports,chains:{setState(_){const E=typeof _=="function"?_(a.getState()):_;if(E.length!==0)return a.setState(E,!0)},subscribe(_){return a.subscribe(_)}},connectors:{providerDetailToConnector:u,setup:c,setState(_){return l.setState(typeof _=="function"?_(l.getState()):_,!0)},subscribe(_){return l.subscribe(_)}},events:{change:b,connect:w,disconnect:S}}}}function eae(n,e){const{initialState:t,reconnectOnMount:r}=e;return t&&!n._internal.store.persist.hasHydrated()&&n.setState({...t,chainId:n.chains.some(i=>i.id===t.chainId)?t.chainId:n.chains[0].id,connections:r?t.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){n._internal.ssr&&(await n._internal.store.persist.rehydrate(),n._internal.mipd&&n._internal.connectors.setState(i=>{var l;const s=new Set;for(const c of i??[])if(c.rdns){const u=Array.isArray(c.rdns)?c.rdns:[c.rdns];for(const h of u)s.add(h)}const o=[],a=((l=n._internal.mipd)==null?void 0:l.getProviders())??[];for(const c of a){if(s.has(c.info.rdns))continue;const u=n._internal.connectors.providerDetailToConnector(c),h=n._internal.connectors.setup(u);o.push(h)}return[...i,...o]})),r?Doe(n):n.storage&&n.setState(i=>({...i,connections:new Map}))}}}function tae(n){const{children:e,config:t,initialState:r,reconnectOnMount:i=!0}=n,{onMount:s}=eae(t,{initialState:r,reconnectOnMount:i});t._internal.ssr||s();const o=I.useRef(!0);return I.useEffect(()=>{if(o.current&&t._internal.ssr)return s(),()=>{o.current=!1}},[]),e}const rG=I.createContext(void 0);function nae(n){const{children:e,config:t}=n,r={value:t};return I.createElement(tae,n,I.createElement(rG.Provider,r,e))}const rae="3.3.2",iae=()=>`wagmi@${rae}`;class sae extends Vb{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return iae()}}class oae extends sae{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function aae(n){return{mutationFn(e){return Ioe(n,e)},mutationKey:["connect"]}}function iG(n={}){const e=n.config??I.useContext(rG);if(!e)throw new oae;return e}function lae(n={}){const e=iG(n);return I.useSyncExternalStore(t=>Noe(e,{onChange:t}),()=>KA(e),()=>KA(e))}function cae(n={}){const e=iG(n),t=aae(e),r=Ese({...n.mutation,...t});return I.useEffect(()=>e.subscribe(({status:i})=>i,(i,s)=>{s==="connected"&&i==="disconnected"&&r.reset()}),[e,r.reset]),{...r,connect:r.mutate,connectAsync:r.mutateAsync,connectors:lae({config:e})}}function uae(n){return n.replace(/_([a-z])/g,(e,t)=>t.toUpperCase())}function hae(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&n.constructor===Object}function sd(n){if(n==null)return n;if(Array.isArray(n))return n.map(e=>sd(e));if(hae(n)){const e={};for(const[t,r]of Object.entries(n)){const i=uae(t);e[i]=sd(r)}return e}return n}class TO{constructor(e,t=3,r=3e4){ce(this,"baseURL");ce(this,"timeout");ce(this,"maxRetries");this.baseURL=e.replace(/\/$/,""),this.maxRetries=t,this.timeout=r}async do(e){var o,a,l,c,u,h,d,f,m;const t=Date.now();let r=null,i=null;for(let g=1;g<=this.maxRetries;g++)try{return{...await this.doRequest(e),duration:Date.now()-t}}catch(v){if(r=v,this.isNonceError(v))throw v;const y=this.parseErrorBody(v);if(i=y,this.isServiceUnavailable(y)){const b=(o=y==null?void 0:y.details)==null?void 0:o.retryAfterSeconds,w=(a=y==null?void 0:y.details)==null?void 0:a.circuitBreakerState,S=(l=y==null?void 0:y.details)==null?void 0:l.readsAllowed,_=(c=y==null?void 0:y.details)==null?void 0:c.requestType;if(w==="OPEN"){const E=((u=y==null?void 0:y.details)==null?void 0:u.serviceStatus)||"UNAVAILABLE",C=[];S&&C.push("reads"),(h=y==null?void 0:y.details)!=null&&h.writesAllowed&&C.push("writes"),(d=y==null?void 0:y.details)!=null&&d.streamsAllowed&&C.push("streams");const T=C.length>0?` (Allowed: ${C.join(", ")})`:" (No operations allowed)";throw new Error(`Service temporarily unavailable: Circuit breaker is OPEN. Service status: ${E}.${T} Retry after ${b||30} seconds. Request type: ${_||"unknown"}. Details: ${(y==null?void 0:y.message)||"Service unavailable"}`)}if(b&&g<this.maxRetries){await this.delay(b*1e3);continue}}if(g<this.maxRetries){const b=g*1e3;await this.delay(b)}}let s=`Request failed after ${this.maxRetries} attempts: ${r==null?void 0:r.message}`;throw(f=i==null?void 0:i.details)!=null&&f.retryAfterSeconds&&(s+=` (Service requested retry after ${i.details.retryAfterSeconds} seconds)`),(m=i==null?void 0:i.details)!=null&&m.circuitBreakerState&&(s+=` (Circuit breaker: ${i.details.circuitBreakerState})`),new Error(s)}async doRequest(e){const t=`${this.baseURL}${e.path}`,r={"Content-Type":"application/json",Accept:"application/json, */*",...e.headers},i={method:e.method,headers:r,signal:AbortSignal.timeout(this.timeout)};e.body&&e.method!=="GET"?i.body=JSON.stringify(e.body):e.method==="GET"&&(i.body=void 0);const s=await fetch(t,i);let o;const a=s.headers.get("content-type");if(a!=null&&a.includes("application/json"))try{const l=await s.json();o=sd(l)}catch{o=await s.text()}else o=await s.text();if(s.status>=400)throw new Error(`HTTP ${s.status}: ${JSON.stringify(o)}`);return{statusCode:s.status,body:o,headers:s.headers}}isNonceError(e){const t=(e==null?void 0:e.message)||"";return t.toLowerCase().includes("nonce")||t.includes("InvalidNonce")||t.includes("NonceError")}parseErrorBody(e){try{const r=((e==null?void 0:e.message)||"").match(/HTTP \d+: (.+)$/);if(r&&r[1]){const i=JSON.parse(r[1]);if(i&&typeof i=="object"&&(i.error===503||i.code==="SERVICE_UNAVAILABLE"))return sd(i)}}catch{}return null}isServiceUnavailable(e){var t;return e?e.error===503||e.code==="SERVICE_UNAVAILABLE"||((t=e.details)==null?void 0:t.circuitBreakerState)==="OPEN":!1}delay(e){return new Promise(t=>setTimeout(t,e))}async get(e,t){return this.do({method:"GET",path:e,headers:t})}async post(e,t,r){return this.do({method:"POST",path:e,body:t,headers:r})}async put(e,t,r){return this.do({method:"PUT",path:e,body:t,headers:r})}async delete(e,t){return this.do({method:"DELETE",path:e,headers:t})}getBaseURL(){return this.baseURL}setTimeout(e){this.timeout=e}getTimeout(){return this.timeout}}let kf={instance:null,module:null},dae=null;async function fae(){try{if(window.Go)console.log("wasm_exec.js already loaded");else{console.log("Loading wasm_exec.js...");const a=["/wasm_exec.js","https://cdn.jsdelivr.net/gh/golang/go@go1.21.0/misc/wasm/wasm_exec.js","https://cdn.jsdelivr.net/gh/golang/go@go1.20.0/misc/wasm/wasm_exec.js","https://unpkg.com/@go-wasm/wasm_exec@latest/wasm_exec.js"];let l=!1,c=null;for(const u of a)try{console.log(`Trying to load wasm_exec.js from: ${u}`),await new Promise((h,d)=>{const f=document.createElement("script");f.src=u,f.async=!0,f.onload=()=>{console.log(`Successfully loaded wasm_exec.js from: ${u}`),h()},f.onerror=()=>{d(new Error(`Failed to load from ${u}`))},document.head.appendChild(f)}),l=!0;break}catch(h){console.warn(`Failed to load from ${u}:`,h==null?void 0:h.message),c=h,document.head.querySelectorAll(`script[src="${u}"]`).forEach(f=>f.remove())}if(!l)throw new Error(`Failed to load wasm_exec.js from all sources. Last error: ${(c==null?void 0:c.message)||"Unknown error"}. Please ensure wasm_exec.js is available. You can download it from: https://github.com/golang/go/blob/master/misc/wasm/wasm_exec.js`);console.log("wasm_exec.js loaded successfully")}const n=window.Go;if(!n)throw new Error("Go runtime not available. Make sure wasm_exec.js is loaded.");console.log("Go runtime available");const e=new n;dae=e,console.log("Go instance created");const t="/morm_signer.wasm";console.log("Loading WASM from:",t);let r;try{const a=await fetch(t);if(console.log("WASM fetch response:",{status:a.status,statusText:a.statusText,ok:a.ok,url:a.url}),!a.ok){const l=await a.text().catch(()=>"Unable to read error response");throw new Error(`Failed to load WASM from ${t}: ${a.status} ${a.statusText}. Make sure the morm_signer.wasm file is available in the public directory.`)}r=await a.arrayBuffer(),console.log("WASM file loaded successfully, size:",r.byteLength,"bytes")}catch(a){throw console.error("WASM fetch failed:",a),new Error(`Failed to fetch WASM file: ${(a==null?void 0:a.message)||a}. The file should be accessible at ${window.location.origin}${t}`)}console.log("Instantiating WASM module...");let i;try{i=await WebAssembly.instantiate(r,e.importObject),console.log("WASM module instantiated successfully")}catch(a){throw console.error("Failed to instantiate WASM:",a),new Error(`Failed to instantiate WASM module: ${(a==null?void 0:a.message)||a}. The WASM file may be corrupted or incompatible.`)}kf.instance=i.instance,kf.module=i.module,console.log("Running Go program..."),console.log("Window object before Go run:",Object.keys(window).filter(a=>typeof window[a]=="function"&&(a.startsWith("morm")||a.startsWith("derive")||a.startsWith("generate")||a==="Go")));try{e.run(kf.instance),console.log("Go program started (run() completed)")}catch(a){throw console.error("Failed to run Go program:",a),new Error(`Failed to run Go program: ${(a==null?void 0:a.message)||a}. The WASM module may not be compatible with the current Go runtime.`)}console.log("Waiting for Go initialization and function exports...");const s=10;let o=[];for(let a=1;a<=s;a++){const l=Math.min(a*200,2e3);await new Promise(u=>setTimeout(u,l));const c=Object.keys(window).filter(u=>typeof window[u]=="function");if(o=c.filter(u=>u.startsWith("morm")||u.startsWith("derive")||u.startsWith("generate")||u.startsWith("Generate")||u.startsWith("verify")||u.startsWith("map")||u.startsWith("validate")||u==="GetSupportedSignatureTypes"||u==="IsSignatureTypeSupported"),console.log(`Attempt ${a}/${s}:`,{waitTime:`${l}ms`,allWindowFunctions:c.length,exportedFunctions:o,sampleWindowKeys:c.slice(0,20)}),o.length>0){console.log(" Go functions found!",o);break}a===s&&(console.warn(" No expected functions found. All window functions:",c.sort()),console.warn(" Check if functions are exported with different names or if there are Go runtime errors"))}if(o.length===0){const a=[],l=Object.keys(window);if(console.error("Debugging info:",{totalWindowKeys:l.length,allFunctions:l.filter(c=>typeof window[c]=="function"),hasGo:typeof window.Go=="function",wasmInstance:kf.instance!==null,wasmModule:kf.module!==null}),typeof window.InitWASMSigner=="function"){console.log("Found InitWASMSigner function, calling it...");try{window.InitWASMSigner(),await new Promise(u=>setTimeout(u,500));const c=Object.keys(window).filter(u=>typeof window[u]=="function"&&(u.startsWith("morm")||u.startsWith("derive")||u.startsWith("generate")||u.startsWith("Generate")||u==="GetSupportedSignatureTypes"||u==="IsSignatureTypeSupported"));c.length>0&&(console.log(" Functions found after InitWASMSigner!",c),o=c)}catch(c){console.error("Failed to call InitWASMSigner:",c)}}if(o.length===0)throw new Error(`Go functions not exported after initialization.

ROOT CAUSE: The Go main() function in main_wasm.go does not call InitWASMSigner(), which is required to export functions via js.Global().Set().

SOLUTION: The Go code needs to be fixed. In main_wasm.go, the main() function should call:
  InitWASMSigner(CreateTestnetDomain()) // or appropriate domain

Current status:
- WASM file loaded: 
- Go runtime loaded: ${typeof window.Go=="function"?"":""}
- Go program run: 
- Functions exported: 

Check the browser console for detailed debugging information.`)}return console.log("WASM module loaded and initialized successfully"),!0}catch(n){throw console.error("Failed to load WASM module:",n),new Error((n==null?void 0:n.message)||`Failed to load WASM module: ${String(n)}`)}}class pae{constructor(){ce(this,"isInitialized",!1);ce(this,"wasmLoaded",!1)}async initialize(){try{return this.wasmLoaded=await fae(),this.isInitialized=this.wasmLoaded,this.wasmLoaded}catch(e){throw console.error("Failed to initialize MormSigner:",e),new Error((e==null?void 0:e.message)||"Failed to initialize WASM module")}}isReady(){return this.isInitialized&&this.wasmLoaded&&typeof window.mormGenerateEthereumKeypair=="function"&&typeof window.GenerateSingleSignature=="function"&&typeof window.GenerateMultisignSignatures=="function"&&typeof window.GetSupportedSignatureTypes=="function"&&typeof window.IsSignatureTypeSupported=="function"}async generateAddress(e,t=0){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const r=window.deriveAddress(e,t);return typeof r=="string"?{success:!0,address:r,index:t,mnemonic:e.substring(0,20)+"..."}:r&&r.error?{success:!1,error:r.error}:{success:!1,error:"Failed to derive address"}}catch(r){return console.error("Failed to generate address:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async generateMnemonic(e=12){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const t=window.generateMnemonic(e);return typeof t=="string"?{success:!0,mnemonic:t}:t&&t.error?{success:!1,error:t.error}:{success:!1,error:"Failed to generate mnemonic"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async generateKeypair(){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const e=window.mormGenerateEthereumKeypair();return e.error?{success:!1,error:e.error}:{success:!0,privateKey:e.privateKey,address:e.address}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async signMessage(e,t,r={}){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const i=(r.useEIP712,"ECDSA_LEGACY"),s=window.generateSignature(i,e,t);return typeof s=="string"?{success:!0,signature:s,message:t,options:r}:s&&s.error?{success:!1,error:s.error}:{success:!1,error:"Failed to generate signature"}}catch(i){return console.error("Failed to sign message:",i),{success:!1,error:i instanceof Error?i.message:"Unknown error"}}}async signDeposit(e,t,r,i={}){const s={...i,depositMode:!0,walletAddress:t,amount:r},o=JSON.stringify({action:"deposit",owner:t,amount:r,nonce:i.nonce||Date.now(),deadline:i.deadline||Date.now()+36e5}),a=await this.signMessage(e,o,s);return{success:a.success,signature:a.signature,message:a.message,address:t,options:a.options,error:a.error}}async signEIP712(e,t,r={}){const i={...r,useEIP712:!0};return this.signMessage(e,t,i)}async prepareAgentSign(e){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const t=window.mormPrepareAgentSign(e.owner,e.agent,e.expiresInDays,e.permissions,e.nonce);return t&&t.error?{success:!1,error:t.error}:{success:!0,typedData:t}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async signAgentApproval(e,t){const r=await this.prepareAgentSign(t);if(!r.success||!r.typedData)return r;const i=JSON.stringify({action:"agent::approve",wallet:t.owner,agent:t.agent,agentName:t.agentName||"",expiresInDays:t.expiresInDays,permissions:t.permissions,nonce:t.nonce,deadline:Date.now()+t.expiresInDays*24*60*60*1e3}),s=await this.signMessage(e,i,{useEIP712:!0});return s.success?{success:!0,typedData:r.typedData,signature:s.signature}:{success:!1,error:s.error}}async verifySignature(e,t,r){if(!this.isReady())throw new Error("MormSigner not initialized");try{const i=window.verifySignature(e,t,r);return typeof i=="boolean"?i:!1}catch(i){return console.error("Failed to verify signature:",i),!1}}mapAlgorithm(e){if(!this.isReady())return"ECDSA_LEGACY";try{return window.mapAlgorithm(e)}catch(t){return console.error("Failed to map algorithm:",t),"ECDSA_LEGACY"}}validateNonce(e,t){if(!this.isReady())return!1;try{return window.validateNonce(e,t)}catch(r){return console.error("Failed to validate nonce:",r),!1}}getStatus(){return{initialized:this.isInitialized,wasmLoaded:this.wasmLoaded,ready:this.isReady()}}async generateSingleSignature(e,t,r){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const i=window.GenerateSingleSignature(e,t,r);return i.error?{success:!1,error:i.error}:{success:!0,signature:i.signature}}catch(i){return console.error("Failed to generate single signature:",i),{success:!1,error:i instanceof Error?i.message:"Unknown error"}}}async generateMultisignSignatures(e,t,r=!1){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const i=window.GenerateMultisignSignatures(e,t,r);if(i.error)return{success:!1,error:i.error};let s=null;if(i.tx)try{s=JSON.parse(i.tx)}catch(o){console.warn("Failed to parse updated transaction JSON:",o)}return{success:!0,tx:s,txJSON:i.tx}}catch(i){return console.error("Failed to generate multisign signatures:",i),{success:!1,error:i instanceof Error?i.message:"Unknown error"}}}getSupportedSignatureTypes(){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{return{success:!0,types:window.GetSupportedSignatureTypes()}}catch(e){return console.error("Failed to get supported signature types:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}isSignatureTypeSupported(e){if(!this.isReady())return!1;try{return window.IsSignatureTypeSupported(e)}catch(t){return console.error("Failed to check signature type support:",t),!1}}}const Oi=new pae,mae=6e4,ZA=1e4,r1=24*60*60*1e3,i1=1;class sG{constructor(e,t){ce(this,"infoClient");ce(this,"storage");ce(this,"onChainState",new Map);ce(this,"offChainNonces",new Map);ce(this,"syncTimers",new Map);this.infoClient=e,this.storage=t}persistState(e,t){var r;(r=this.storage)==null||r.setSnapshot(e,{confirmed:t.confirmed,pending:[...t.pending],lastSync:t.lastSync})}getOrCreateState(e){var i;const t=e.toLowerCase();let r=this.onChainState.get(t);if(!r){const s=(i=this.storage)==null?void 0:i.getSnapshot(t);r=s?{confirmed:s.confirmed,pending:[...s.pending],lastSync:s.lastSync,mu:!1}:{confirmed:0,pending:[],lastSync:0,mu:!1},this.onChainState.set(t,r)}return r}async acquireLock(e){for(;e.mu;)await new Promise(t=>setTimeout(t,10));e.mu=!0}releaseLock(e){e.mu=!1}async syncWithCore(e){const t=this.getOrCreateState(e),r=Date.now();if(!(r-t.lastSync<mae))try{const s=(await this.infoClient.getNonceStatus(e,!1)).nextNonce;t.confirmed=s>0?s-1:0,t.lastSync=r,console.log(`[NonceManager] syncWithCore: owner=${e}, serverNextNonce=${s}, confirmed=${t.confirmed}`),this.persistState(e,t)}catch(i){console.warn(`[NonceManager] Failed to sync with core for ${e}:`,i)}}async getNonce(e,t="latest"){const r=e.toLowerCase(),i=this.getOrCreateState(r);if(await this.syncWithCore(r),t==="latest")return i.confirmed;{const s=i.pending.length>0?Math.max(...i.pending):i.confirmed;return Math.max(i.confirmed,s)}}async validateNonce(e,t,r=!1){const i=e.toLowerCase(),s=this.getOrCreateState(i);await this.acquireLock(s);try{if(r||await this.syncWithCore(i),s.confirmed===0&&t<i1)throw new Error(`nonce too low for new account: got ${t}, minimum ${i1}`);if(s.confirmed>0&&t<=s.confirmed)throw new Error(`nonce too low: got ${t}, confirmed ${s.confirmed}`);if(s.pending.includes(t))throw new Error(`nonce already pending: ${t}`);if(s.pending.length>=ZA)throw new Error(`pending nonce limit reached: max ${ZA} pending nonces`);if(r){const o=this.offChainNonces.get(i);if(o){const a=o.get(t);if(a){const l=Date.now();if(l-a<r1)throw new Error(`nonce already used (off-chain): ${t}, expires in ${Math.floor((r1-(l-a))/1e3)}s`);o.delete(t)}}}s.pending.push(t),s.pending.sort((o,a)=>o-a),this.persistState(i,s)}finally{this.releaseLock(s)}}async commitNonce(e,t,r=!1){const i=e.toLowerCase(),s=this.getOrCreateState(i);await this.acquireLock(s);try{const o=s.pending.indexOf(t);if(o!==-1&&s.pending.splice(o,1),r){let a=this.offChainNonces.get(i);a||(a=new Map,this.offChainNonces.set(i,a)),a.set(t,Date.now())}else if(t===s.confirmed+1)for(s.confirmed=t;s.pending.length>0&&s.pending[0]===s.confirmed+1;){const a=s.pending.shift();s.confirmed=a}this.persistState(i,s)}finally{this.releaseLock(s)}}async rejectNonce(e,t,r=!1){const i=e.toLowerCase(),s=this.getOrCreateState(i);await this.acquireLock(s);try{const o=s.pending.indexOf(t);if(o!==-1&&s.pending.splice(o,1),r){const a=this.offChainNonces.get(i);a&&a.delete(t)}this.persistState(i,s)}finally{this.releaseLock(s)}}async getExpectedNextNonce(e,t=!1){const r=e.toLowerCase();await this.syncWithCore(r);const i=this.getOrCreateState(r),s=i.pending.length>0?Math.max(...i.pending):i.confirmed,o=Math.max(i.confirmed+1,s+1),a=o===0?i1:o;if(t)try{await this.validateNonce(r,a,!1)}catch(l){console.warn(`[NonceManager] Failed to reserve nonce ${a}:`,l.message)}return{next_nonce:a,reserved:t,timestamp:Date.now()}}cleanupExpiredOffChainNonces(){const e=Date.now();for(const[t,r]of this.offChainNonces.entries()){for(const[i,s]of r.entries())e-s>=r1&&r.delete(i);r.size===0&&this.offChainNonces.delete(t)}}resetNonce(e){var i,s;const t=e.toLowerCase();this.onChainState.delete(t),this.offChainNonces.delete(t),(s=(i=this.storage)==null?void 0:i.clearOwner)==null||s.call(i,t);const r=this.syncTimers.get(t);r&&(clearInterval(r),this.syncTimers.delete(t))}getState(e){const t=e.toLowerCase();return this.onChainState.get(t)}}const Ly=1e8;function jn(n){const e=typeof n=="string"?parseFloat(n):n;if(isNaN(e))throw new Error(`Invalid value for satoshi conversion: ${n}`);if(e<0)throw new Error(`Negative values not allowed for satoshi conversion: ${n}`);const t=Math.round(e*Ly);return BigInt(t.toFixed(0)).toString()}function ar(n){const e=n.includes(".")?n.split(".")[0]:n,t=BigInt(e),r=BigInt(Ly),i=t/r,s=t%r;return Number(i)+Number(s)/Ly}function gae(n){if(n<0)throw new Error(`Negative values not allowed: ${n}`);return Math.floor(n*Ly)}function e3(n){return`0x${(typeof n=="string"?parseInt(n,10):n).toString(16)}`}function st(n){if(n==null||n==="")return 0;if(typeof n=="string"||typeof n=="number")try{return ar(typeof n=="string"?n:String(n))}catch{return 0}return 0}function vae(n){if(n==null||n==="")return 0;try{if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?0:e}return typeof n=="number"?isNaN(n)?0:n:0}catch{return 0}}function Fy(n){if(n==null||n==="")return BigInt(0);try{const e=typeof n=="string"?n:String(n);return e.trim()===""||isNaN(Number(e))?BigInt(0):BigInt(e)}catch{return BigInt(0)}}function yae(n){return n===0?"":n.toFixed(6).replace(/\.?0+$/,"")}class Ls{constructor(e){ce(this,"httpClient");ce(this,"sessionToken");this.httpClient=new TO(e.baseURL),this.sessionToken=e.sessionToken}setSessionToken(e){this.sessionToken=e}getHeaders(){const e={Accept:"application/json, */*"};return this.sessionToken&&(e.Authorization=`Bearer ${this.sessionToken}`),e}async getMarkets(){var r;const t=(await this.httpClient.get("/market/v1/all",this.getHeaders())).body;if(t&&typeof t=="object"&&"markets"in t){const i=t.count??t.total??((r=t.markets)==null?void 0:r.length)??0;return{markets:t.markets??[],total:i,count:t.count}}return{markets:[],total:0}}async getMarketsWithFilters(e,t){var a;let r="/market/v1/all";const i=[];e&&i.push(`filter=${e}`),t&&i.push("active_only=true"),i.length>0&&(r+="?"+i.join("&"));const o=(await this.httpClient.get(r,this.getHeaders())).body;if(o&&typeof o=="object"&&"markets"in o){const l=o.count??o.total??((a=o.markets)==null?void 0:a.length)??0;return{markets:o.markets??[],total:l,count:o.count}}return{markets:[],total:0}}async getMarketByID(e){return(await this.httpClient.get(`/market/v1/market/${e}`,this.getHeaders())).body}async getMarketBySymbol(e){return(await this.httpClient.get(`/market/v1/market/by-symbol/${encodeURIComponent(e)}`,this.getHeaders())).body}async getMarketByTicker(e){return(await this.httpClient.get(`/market/v1/market/by-ticker/${encodeURIComponent(e)}`,this.getHeaders())).body}async getMarketByMoniker(e){return(await this.httpClient.get(`/market/v1/market/by-moniker/${encodeURIComponent(e)}`,this.getHeaders())).body}async getMarketStats(e){return(await this.httpClient.get(`/market/v1/market/${e}/stats`,this.getHeaders())).body}async getTicker(e){return this.getMarketStats(e)}async getExchangeInfo(){return(await this.httpClient.get("/market/v1/exchangeInfo",this.getHeaders())).body}async getOrderbook(e,t=!0,r=20){const i=r>0&&r<100?r:20,s=`/clob/v1/orderbook/${e}?depth=${i}`,a=(await this.httpClient.get(s,this.getHeaders())).body;return{marketIndex:a.marketIndex,symbol:a.symbol,bids:this.normalizePriceLevels(a.bids,t),asks:this.normalizePriceLevels(a.asks,t),sequenceId:a.sequenceId!=null?Number(a.sequenceId):void 0,checksum:a.checksum,blockHeight:a.blockHeight,updatedAt:a.updatedAt}}normalizePriceLevels(e,t){return Array.isArray(e)?e.map(r=>{let i,s;if(typeof r=="object"&&r!==null&&"price"in r){const o=r;i=o.price,s=o.quantity}else if(Array.isArray(r)&&r.length>=2)i=String(r[0]),s=String(r[1]);else return[0,0];return t?[ar(i),ar(s)]:[i,s]}):[]}async getMarketTrades(e,t){let r=`/clob/v1/market/${e}/trades`;t&&t>0&&(r+=`?limit=${t}`);const i=await this.httpClient.get(r,this.getHeaders());console.debug("[InfoClient] getMarketTrades response for marketId:",e,"response:",i.body);const s=i.body;if(s&&typeof s=="object"&&"trades"in s&&Array.isArray(s.trades))return s.trades;if(Array.isArray(s))return s;const o=s;return o!=null&&o.data&&Array.isArray(o.data)?o.data:(console.warn("[InfoClient] getMarketTrades: Unexpected response structure:",i.body),[])}async getTrades(e,t){let r=`/clob/v1/trades?symbol=${e}`;t&&t>0&&(r+=`&limit=${t}`);const s=(await this.httpClient.get(r,this.getHeaders())).body;if(s&&typeof s=="object"&&"trades"in s&&Array.isArray(s.trades))return s.trades;if(Array.isArray(s))return s;const o=s;return o!=null&&o.data&&Array.isArray(o.data)?o.data:[]}async getAggTrades(e,t,r,i){let s=`/market/v1/aggTrades?symbol=${e}`;return t&&t>0&&(s+=`&limit=${t}`),r&&r>0&&(s+=`&startTime=${r}`),i&&i>0&&(s+=`&endTime=${i}`),(await this.httpClient.get(s,this.getHeaders())).body}async getKlines(e,t,r,i,s){let o=`/clob/v1/klines?symbol=${e}&interval=${t}`;r&&r>0&&(o+=`&limit=${r}`),i&&i>0&&(o+=`&startTime=${i}`),s&&s>0&&(o+=`&endTime=${s}`);const l=(await this.httpClient.get(o,this.getHeaders())).body;return Array.isArray(l)?l:[]}async getContinuousKlines(e,t,r,i,s,o){let a=`/market/v1/continuousKlines?pair=${e}&contractType=${t}&interval=${r}`;return i&&i>0&&(a+=`&limit=${i}`),s&&s>0&&(a+=`&startTime=${s}`),o&&o>0&&(a+=`&endTime=${o}`),(await this.httpClient.get(a,this.getHeaders())).body}async getPremiumIndex(e){let t="/market/v1/premiumIndex";e&&(t+=`?symbol=${e}`);const i=(await this.httpClient.get(t,this.getHeaders())).body;return Array.isArray(i),i}async getFundingRate(e,t,r,i){let s="/market/v1/fundingRate";const o=[];e&&o.push(`symbol=${e}`),t&&t>0&&o.push(`limit=${t}`),r&&r>0&&o.push(`startTime=${r}`),i&&i>0&&o.push(`endTime=${i}`),o.length>0&&(s+="?"+o.join("&"));const l=(await this.httpClient.get(s,this.getHeaders())).body;return Array.isArray(l)?l:l&&typeof l=="object"&&"data"in l&&Array.isArray(l.data)?l.data:l?[l]:[]}async getFundingInfo(){const t=(await this.httpClient.get("/market/v1/fundingInfo",this.getHeaders())).body;return Array.isArray(t)?t:[]}async getDeliveryPrice(e){return(await this.httpClient.get(`/market/v1/deliveryPrice?pair=${e}`,this.getHeaders())).body}async getOpenInterest(e){return(await this.httpClient.get(`/market/v1/openInterest?symbol=${e}`,this.getHeaders())).body}async getTopLongShortPositionRatio(e,t,r,i,s){let o=`/market/v1/topLongShortPositionRatio?symbol=${e}&period=${t}`;r&&r>0&&(o+=`&limit=${r}`),i&&i>0&&(o+=`&startTime=${i}`),s&&s>0&&(o+=`&endTime=${s}`);const l=(await this.httpClient.get(o,this.getHeaders())).body;return Array.isArray(l),l}async getGlobalLongShortAccountRatio(e,t,r,i,s){let o=`/market/v1/globalLongShortAccountRatio?symbol=${e}&period=${t}`;r&&r>0&&(o+=`&limit=${r}`),i&&i>0&&(o+=`&startTime=${i}`),s&&s>0&&(o+=`&endTime=${s}`);const l=(await this.httpClient.get(o,this.getHeaders())).body;return Array.isArray(l),l}async getTicker24hr(e){let t="/market/v1/ticker/24hr";e&&(t+=`?ticker=${encodeURIComponent(e)}`);const i=(await this.httpClient.get(t,this.getHeaders())).body;return Array.isArray(i),i}async getTickerPrice(e){let t="/market/v1/ticker/price";e&&(t+=`?ticker=${encodeURIComponent(e)}`);const i=(await this.httpClient.get(t,this.getHeaders())).body;return Array.isArray(i),i}async getOrderbookTicker(e){let t="/market/v1/ticker/bookTicker";e&&(t+=`?ticker=${encodeURIComponent(e)}`);const i=(await this.httpClient.get(t,this.getHeaders())).body;return Array.isArray(i),i}async getOrderbookMoniker(e){return this.getOrderbookTicker(e)}async getBasis(e,t,r,i,s){let o=`/market/v1/basis?symbol=${e}&period=${t}`;r&&r>0&&(o+=`&limit=${r}`),i&&i>0&&(o+=`&startTime=${i}`),s&&s>0&&(o+=`&endTime=${s}`);const l=(await this.httpClient.get(o,this.getHeaders())).body;return Array.isArray(l),l}async getIndexInfo(e){let t="/market/v1/indexInfo";return e&&(t+=`?symbol=${e}`),(await this.httpClient.get(t,this.getHeaders())).body}async getAssetIndex(e){let t="/market/v1/assetIndex";e&&(t+=`?symbol=${e}`);const i=(await this.httpClient.get(t,this.getHeaders())).body;return Array.isArray(i),i}async getConstituents(e){return(await this.httpClient.get(`/market/v1/constituents?symbol=${e}`,this.getHeaders())).body}async getTWAP(e,t){return(await this.httpClient.get(`/market/v1/twap?symbol=${e}&duration=${t}`,this.getHeaders())).body}async getTransactionHistory(e){const t=new URLSearchParams({address:e.address});return e.txType&&t.set("txType",e.txType),e.limit&&t.set("limit",e.limit.toString()),e.offset&&t.set("offset",e.offset.toString()),(await this.httpClient.get(`/bank/v1/transactions/history?${t.toString()}`,this.getHeaders())).body}async getBucketMetrics(){return(await this.httpClient.get("/bucket/v1/metrics",this.getHeaders())).body}async getBucketEfficiencyMetrics(){return(await this.httpClient.get("/bucket/v1/metrics/efficiency",this.getHeaders())).body}async getAddressPnL(e){return(await this.httpClient.get(`/bucket/v1/pnl/address/${encodeURIComponent(e)}`,this.getHeaders())).body}async getBucketPnL(e){return(await this.httpClient.get(`/bucket/v1/pnl/bucket/${encodeURIComponent(e)}`,this.getHeaders())).body}async getPositions(e,t){if(!e)throw new Error("walletAddress is required for getPositions");let r=`/bucket/v1/address/${e}/positions`;t!==void 0&&(r+=`?active_only=${t}`);const s=(await this.httpClient.get(r,this.getHeaders())).body;return Array.isArray(s)?s:s&&typeof s=="object"&&"positions"in s&&Array.isArray(s.positions)?s.positions:[]}async getBalance(e,t){var a;const r=`/bank/v1/balance/${encodeURIComponent(e)}?asset=${encodeURIComponent(t)}`,s=(await this.httpClient.get(r,this.getHeaders())).body,o=s.asset;if(typeof o=="object"&&(o!=null&&o.symbol))return{...s,asset:o.symbol};if(!o&&s.collateralAssetIndex){const l=((a=s.collateralAssetIndex)==null?void 0:a.ticker)??s.collateralAssetIndex;if(typeof l=="string")return{...s,asset:l}}return s}async getBalances(e){const r=(await this.httpClient.get(`/bank/v1/balances/${e}`,this.getHeaders())).body;return r&&typeof r=="object"&&"balances"in r&&Array.isArray(r.balances)?r.balances.map(i=>{var a;const s=i.asset;if(typeof s=="string")return i;if(s&&typeof s=="object"&&typeof s.symbol=="string")return{...i,asset:s.symbol};const o=((a=i.collateralAssetIndex)==null?void 0:a.ticker)??i.collateralAssetIndex;return o&&typeof o=="string"?{...i,asset:o}:i}):[]}async getBalanceDecimal(e,t){const r=await this.getBalance(e,t);if(r&&typeof r=="object"){const i={...r};return i.balance&&(i.balance=ar(i.balance)),i.availableBalance&&(i.available=ar(i.availableBalance)),i.available&&typeof i.available=="string"&&(i.available=ar(i.available)),i.lockedBalance&&(i.locked=ar(i.lockedBalance)),i.locked&&typeof i.locked=="string"&&(i.locked=ar(i.locked)),i}return r}async getOrders(e,t){return this.getOrdersByAddress(e,t?{marketIndex:t}:void 0)}async getOrdersByMarket(e,t){const r=new URLSearchParams;t!=null&&t.symbol&&r.set("symbol",t.symbol),t!=null&&t.status&&r.set("status",t.status),(t==null?void 0:t.offset)!=null&&r.set("paginationRequest.offset",String(t.offset)),(t==null?void 0:t.limit)!=null&&r.set("paginationRequest.limit",String(t.limit));const i=r.toString(),s=`/clob/v1/market/${encodeURIComponent(e)}/orders${i?`?${i}`:""}`;return(await this.httpClient.get(s,this.getHeaders())).body??{orders:[],totalCount:0,timestamp:Date.now()}}async getOrdersByAddress(e,t){const r=`/clob/v1/address/${encodeURIComponent(e)}/orders`,i=new URLSearchParams;t!=null&&t.marketIndex&&i.set("marketIndex",t.marketIndex),t!=null&&t.status&&i.set("status",t.status),(t==null?void 0:t.limit)!=null&&i.set("paginationRequest.limit",String(t.limit)),(t==null?void 0:t.offset)!=null&&i.set("paginationRequest.offset",String(t.offset));const s=i.toString(),o=s?`${r}?${s}`:r;return(await this.httpClient.get(o,this.getHeaders())).body}async getOrder(e,t){return(await this.httpClient.get(`/clob/v1/order/${encodeURIComponent(e)}?address=${encodeURIComponent(t)}`,this.getHeaders())).body}async getOrderHistory(e){return this.getOrdersByAddress(e)}async getAddressLiquidations(e){const t=new URLSearchParams;return e.limit!=null&&t.set("limit",e.limit.toString()),e.offset!=null&&t.set("offset",e.offset.toString()),e.start_time!=null&&t.set("start_time",e.start_time.toString()),e.end_time!=null&&t.set("end_time",e.end_time.toString()),(await this.httpClient.get(`/clob/v1/address/${encodeURIComponent(e.address)}/liquidations${t.toString()?`?${t.toString()}`:""}`,this.getHeaders())).body}async getUserTrades(e,t){let r=`/clob/v1/address/trades?address=${encodeURIComponent(e)}`;t&&(r+=`&symbol=${encodeURIComponent(t)}`);const s=(await this.httpClient.get(r,this.getHeaders())).body;if(s&&typeof s=="object"&&"trades"in s&&Array.isArray(s.trades))return s.trades;if(Array.isArray(s))return s;const o=s;return o!=null&&o.data&&Array.isArray(o.data)?o.data:[]}async getTradeHistory(e,t){return this.getUserTrades(e,t)}async getPosition(e,t){let r=`/clob/v1/address/position?address=${encodeURIComponent(e)}`;t&&(r+=`&symbol=${encodeURIComponent(t)}`);const s=(await this.httpClient.get(r,this.getHeaders())).body;return s&&typeof s=="object"&&"positions"in s&&Array.isArray(s.positions)?s.positions:[]}async getBuckets(e){var r;const t=await this.httpClient.get(`/bucket/v1/address/${e}/buckets`,this.getHeaders());return(r=t.body)!=null&&r.buckets&&Array.isArray(t.body.buckets)?t.body.buckets:[]}async getBucket(e){const t=await this.httpClient.get(`/bucket/v1/bucket/${e}`,this.getHeaders()),r=t.body;return(r==null?void 0:r.bucket)!=null?r.bucket:t.body}async getMarketData(e){var u,h;const t=`/clob/v1/orderbook/${encodeURIComponent(e)}/snapshot?depth=1`,i=(await this.httpClient.get(t,this.getHeaders())).body,s=(i==null?void 0:i.bids)??[],o=(i==null?void 0:i.asks)??[],a=(u=s[0])==null?void 0:u.price,l=(h=o[0])==null?void 0:h.price;let c;return a!=null&&l!=null?c=(parseFloat(a)+parseFloat(l))/2:a!=null?c=parseFloat(a):l!=null&&(c=parseFloat(l)),{...i??{},symbol:i==null?void 0:i.symbol,assetPair:i==null?void 0:i.symbol,lastPrice:c!=null?String(c):void 0,last_price:c,markPrice:c!=null?String(c):void 0,mark_price:c}}async getMarketCandles(e,t,r){const i=new URLSearchParams({interval:t,limit:String(r)}),s=`/clob/v1/market/${encodeURIComponent(e)}/klines?${i.toString()}`,a=(await this.httpClient.get(s,this.getHeaders())).body;if(Array.isArray(a))return a;const l=a==null?void 0:a.klines;return Array.isArray(l)?l:[]}async getOrderbookSnapshot(e,t=100){const r=`/v1/stream/orderbook/${encodeURIComponent(e)}/snapshot?depth=${t}`;return(await this.httpClient.get(r,this.getHeaders())).body}async getLocalChecksum(e,t=25){const r=`/v1/stream/local-checksum/${encodeURIComponent(e)}?depth=${t}`;return(await this.httpClient.get(r,this.getHeaders())).body}async getStreamStats(){return(await this.httpClient.get("/v1/stream/stats",this.getHeaders())).body}async getChecksum(e,t,r,i){const s=new URLSearchParams({stream_type:e,stream_key:t});return r!=null&&s.set("depth",String(r)),i&&s.set("address",i),(await this.httpClient.get(`/v1/stream/checksum?${s.toString()}`,this.getHeaders())).body}async getOrderbookChecksum(e,t=25){var o;const r=`/clob/v1/market/${encodeURIComponent(e)}/checksum?depth=${t}`,i=await this.httpClient.get(r,this.getHeaders()),s=i.body;return{market_index:String((s==null?void 0:s.marketIndex)??e),checksum:(s==null?void 0:s.checksum)??"",sequence_id:s==null?void 0:s.sequenceId,depth:t,timestamp:(o=i.body)==null?void 0:o.timestamp}}async resyncOrderbookIfMismatch(e,t,r=25){const i=await this.getLocalChecksum(e,r);return t!=null&&i.checksum!==t?{mismatch:!0,snapshot:await this.getOrderbookSnapshot(e,r)}:{mismatch:!1}}async getNonceStatus(e,t=!1){let r=`/router/v1/nonce/status/${encodeURIComponent(e)}`;return t&&(r+="?reserve=true"),(await this.httpClient.get(r,this.getHeaders())).body}async getNonceBatch(e,t){const r=`/router/v1/nonce/batch/${encodeURIComponent(e)}?count=${t}`,s=(await this.httpClient.get(r,this.getHeaders())).body;return(s==null?void 0:s.nonces)??[]}async getAuthNonce(e){const t=`/auth/v1/nonce?owner=${encodeURIComponent(e)}`;return(await this.httpClient.get(t,this.getHeaders())).body}async nonceRollback(e,t){return(await this.httpClient.post("/router/v1/nonce/rollback",{address:e,nonce:t},this.getHeaders())).body}async getSupportedActions(){return(await this.httpClient.get("/router/v1/tx/supported-actions",this.getHeaders())).body}async validateAction(e){return(await this.httpClient.get(`/router/v1/tx/validate-action?action=${encodeURIComponent(e)}`,this.getHeaders())).body}async getHealthSummary(){return(await this.httpClient.get("/router/v1/health/summary",this.getHeaders())).body}async getHealthDaemons(){return(await this.httpClient.get("/router/v1/health/daemons",this.getHeaders())).body}async getHealthRisk(){return(await this.httpClient.get("/router/v1/health/risk",this.getHeaders())).body}async getHealthBucket(){return(await this.httpClient.get("/router/v1/health/bucket",this.getHeaders())).body}async getHealthCircuitBreaker(){return(await this.httpClient.get("/router/v1/health/circuit-breaker",this.getHeaders())).body}async getHealthCoredaemon(){return(await this.httpClient.get("/router/v1/health/coredaemon",this.getHeaders())).body}async getHealthLive(){return(await this.httpClient.get("/health/live",this.getHeaders())).body}async getHealthReady(e,t){const r=new URLSearchParams;e&&r.set("verbose","true"),t&&r.set("strict","true");const i=r.toString(),s=i?`/health/ready?${i}`:"/health/ready";return(await this.httpClient.get(s,this.getHeaders())).body}async getServerTime(){return(await this.httpClient.get("/router/v1/time",this.getHeaders())).body}async getMetricsTPS(){return(await this.httpClient.get("/router/v1/metrics/tps",this.getHeaders())).body}async getMetricsLatency(){return(await this.httpClient.get("/router/v1/metrics/latency",this.getHeaders())).body}}const oG="6.16.0";async function MO(n){const e=Object.keys(n);return(await Promise.all(e.map(r=>Promise.resolve(n[r])))).reduce((r,i,s)=>(r[e[s]]=i,r),{})}function Ri(n,e,t){for(let r in e){let i=e[r];Object.defineProperty(n,r,{enumerable:!0,value:i,writable:!1})}}function eh(n,e){if(n==null)return"null";if(e==null&&(e=new Set),typeof n=="object"){if(e.has(n))return"[Circular]";e.add(n)}if(Array.isArray(n))return"[ "+n.map(t=>eh(t,e)).join(", ")+" ]";if(n instanceof Uint8Array){const t="0123456789abcdef";let r="0x";for(let i=0;i<n.length;i++)r+=t[n[i]>>4],r+=t[n[i]&15];return r}if(typeof n=="object"&&typeof n.toJSON=="function")return eh(n.toJSON(),e);switch(typeof n){case"boolean":case"number":case"symbol":return n.toString();case"bigint":return BigInt(n).toString();case"string":return JSON.stringify(n);case"object":{const t=Object.keys(n);return t.sort(),"{ "+t.map(r=>`${eh(r,e)}: ${eh(n[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function bae(n,e,t){let r=n;{const s=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${eh(t)}`);for(const o in t){if(o==="shortMessage")continue;const a=t[o];s.push(o+"="+eh(a))}}s.push(`code=${e}`),s.push(`version=${oG}`),s.length&&(n+=" ("+s.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(n);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(n);break;default:i=new Error(n)}return Ri(i,{code:e}),t&&Object.assign(i,t),i.shortMessage==null&&Ri(i,{shortMessage:r}),i}function Rt(n,e,t,r){if(!n)throw bae(e,t,r)}function ie(n,e,t,r){Rt(n,e,"INVALID_ARGUMENT",{argument:t,value:r})}const xae=["NFD","NFC","NFKD","NFKC"].reduce((n,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");n.push(e)}catch{}return n},[]);function aG(n){Rt(xae.indexOf(n)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:n}})}function Xb(n,e,t){if(t==null&&(t=""),n!==e){let r=t,i="new";t&&(r+=".",i+=" "+t),Rt(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function lG(n,e,t){if(n instanceof Uint8Array)return t?new Uint8Array(n):n;if(typeof n=="string"&&n.length%2===0&&n.match(/^0x[0-9a-f]*$/i)){const r=new Uint8Array((n.length-2)/2);let i=2;for(let s=0;s<r.length;s++)r[s]=parseInt(n.substring(i,i+2),16),i+=2;return r}ie(!1,"invalid BytesLike value",e||"value",n)}function Ve(n,e){return lG(n,e,!1)}function Bu(n,e){return lG(n,e,!0)}function wo(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&n.length!==2+2*e||e===!0&&n.length%2!==0)}function Qb(n){return wo(n,!0)||n instanceof Uint8Array}const t3="0123456789abcdef";function $e(n){const e=Ve(n);let t="0x";for(let r=0;r<e.length;r++){const i=e[r];t+=t3[(i&240)>>4]+t3[i&15]}return t}function Wn(n){return"0x"+n.map(e=>$e(e).substring(2)).join("")}function Sp(n){return wo(n,!0)?(n.length-2)/2:Ve(n).length}function IO(n,e,t){const r=Ve(n);return t>r.length&&Rt(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:t}),$e(r.slice(e,t))}function wae(n,e,t){const r=Ve(n);Rt(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),i.set(r,e-r.length),$e(i)}function Tl(n,e){return wae(n,e)}const Jb=BigInt(0),rc=BigInt(1),th=9007199254740991;function _ae(n,e){let t=nn(n,"value");const r=BigInt(Di(e,"width")),i=rc<<r-rc;if(t<Jb){t=-t,Rt(t<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});const s=(rc<<r)-rc;return(~t&s)+rc}else Rt(t<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});return t}function Sae(n,e){const t=PO(n,"value"),r=BigInt(Di(e,"bits"));return t&(rc<<r)-rc}function nn(n,e){switch(typeof n){case"bigint":return n;case"number":return ie(Number.isInteger(n),"underflow",e||"value",n),ie(n>=-th&&n<=th,"overflow",e||"value",n),BigInt(n);case"string":try{if(n==="")throw new Error("empty string");return n[0]==="-"&&n[1]!=="-"?-BigInt(n.substring(1)):BigInt(n)}catch(t){ie(!1,`invalid BigNumberish string: ${t.message}`,e||"value",n)}}ie(!1,"invalid BigNumberish value",e||"value",n)}function PO(n,e){const t=nn(n,e);return Rt(t>=Jb,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:n}),t}const n3="0123456789abcdef";function cG(n){if(n instanceof Uint8Array){let e="0x0";for(const t of n)e+=n3[t>>4],e+=n3[t&15];return BigInt(e)}return nn(n)}function Di(n,e){switch(typeof n){case"bigint":return ie(n>=-th&&n<=th,"overflow",e||"value",n),Number(n);case"number":return ie(Number.isInteger(n),"underflow",e||"value",n),ie(n>=-th&&n<=th,"overflow",e||"value",n),n;case"string":try{if(n==="")throw new Error("empty string");return Di(BigInt(n),e)}catch(t){ie(!1,`invalid numeric string: ${t.message}`,e||"value",n)}}ie(!1,"invalid numeric value",e||"value",n)}function od(n,e){const t=PO(n,"value");let r=t.toString(16);{const i=Di(e,"width");if(i===0&&t===Jb)return"0x";for(Rt(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:n});r.length<i*2;)r="0"+r}return"0x"+r}function qn(n,e){const t=PO(n,"value");if(t===Jb)return new Uint8Array(0);let r=t.toString(16);r.length%2&&(r="0"+r);const i=new Uint8Array(r.length/2);for(let s=0;s<i.length;s++){const o=s*2;i[s]=parseInt(r.substring(o,o+2),16)}return i}function kae(n){let e=$e(Qb(n)?n:qn(n)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const jy="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let A0=null;function Cae(n){if(A0==null){A0={};for(let t=0;t<jy.length;t++)A0[jy[t]]=BigInt(t)}const e=A0[n];return ie(e!=null,"invalid base58 value","letter",n),e}const Eae=BigInt(0),eI=BigInt(58);function Tae(n){const e=Ve(n);let t=cG(e),r="";for(;t;)r=jy[Number(t%eI)]+r,t/=eI;for(let i=0;i<e.length&&!e[i];i++)r=jy[0]+r;return r}function Mae(n){let e=Eae;for(let t=0;t<n.length;t++)e*=eI,e+=Cae(n[t]);return e}function Ic(n,e){ie(typeof n=="string","invalid string value","str",n),e!=null&&(aG(e),n=n.normalize(e));let t=[];for(let r=0;r<n.length;r++){const i=n.charCodeAt(r);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){r++;const s=n.charCodeAt(r);ie(r<n.length&&(s&64512)===56320,"invalid surrogate pair","str",n);const o=65536+((i&1023)<<10)+(s&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return new Uint8Array(t)}function Iae(n){let e=n.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function r3(n,e,t){let r=0;for(let i=0;i<t;i++)r=r*256+n[e+i];return r}function i3(n,e,t,r){const i=[];for(;t<e+1+r;){const s=uG(n,t);i.push(s.result),t+=s.consumed,Rt(t<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:n,length:r,offset:e})}return{consumed:1+r,result:i}}function uG(n,e){Rt(n.length!==0,"data too short","BUFFER_OVERRUN",{buffer:n,length:0,offset:1});const t=r=>{Rt(r<=n.length,"data short segment too short","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r})};if(n[e]>=248){const r=n[e]-247;t(e+1+r);const i=r3(n,e+1,r);return t(e+1+r+i),i3(n,e,e+1+r,r+i)}else if(n[e]>=192){const r=n[e]-192;return t(e+1+r),i3(n,e,e+1,r)}else if(n[e]>=184){const r=n[e]-183;t(e+1+r);const i=r3(n,e+1,r);t(e+1+r+i);const s=$e(n.slice(e+1+r,e+1+r+i));return{consumed:1+r+i,result:s}}else if(n[e]>=128){const r=n[e]-128;t(e+1+r);const i=$e(n.slice(e+1,e+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:Iae(n[e])}}function ug(n){const e=Ve(n,"data"),t=uG(e,0);return ie(t.consumed===e.length,"unexpected junk after rlp payload","data",n),t.result}function s3(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function hG(n){if(Array.isArray(n)){let r=[];if(n.forEach(function(s){r=r.concat(hG(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=s3(r.length);return i.unshift(247+i.length),i.concat(r)}const e=Array.prototype.slice.call(Ve(n,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=s3(e.length);return t.unshift(183+t.length),t.concat(e)}const o3="0123456789abcdef";function ia(n){let e="0x";for(const t of hG(n))e+=o3[t>>4],e+=o3[t&15];return e}function Pae(n){const e=Ve(n,"randomBytes");e[6]=e[6]&15|64,e[8]=e[8]&63|128;const t=$e(e);return[t.substring(2,10),t.substring(10,14),t.substring(14,18),t.substring(18,22),t.substring(22,34)].join("-")}function Ci(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function OO(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function dG(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ci(n.outputLen),Ci(n.blockLen)}function ad(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function fG(n,e){OO(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const s1=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pG=n=>n instanceof Uint8Array,Yv=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),Gv=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Xs=(n,e)=>n<<32-e|n>>>e,Oae=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Oae)throw new Error("Non little-endian hardware is not supported");const Rae=async()=>{};async function a3(n,e,t){let r=Date.now();for(let i=0;i<n;i++){t(i);const s=Date.now()-r;s>=0&&s<e||(await Rae(),r+=s)}}function Dae(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function ld(n){if(typeof n=="string"&&(n=Dae(n)),!pG(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function Nae(...n){const e=new Uint8Array(n.reduce((r,i)=>r+i.length,0));let t=0;return n.forEach(r=>{if(!pG(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}class RO{clone(){return this._cloneInto()}}const Aae={}.toString;function mG(n,e){if(e!==void 0&&Aae.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(n,e)}function Zb(n){const e=r=>n().update(ld(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function Lae(n=32){if(s1&&typeof s1.getRandomValues=="function")return s1.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}class gG extends RO{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,dG(e);const r=ld(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return ad(this),this.iHash.update(e),this}digestInto(e){ad(this),OO(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ex=(n,e,t)=>new gG(n,e).update(t).digest();ex.create=(n,e)=>new gG(n,e);function Fae(n,e,t,r){dG(n);const i=mG({dkLen:32,asyncTick:10},r),{c:s,dkLen:o,asyncTick:a}=i;if(Ci(s),Ci(o),Ci(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=ld(e),c=ld(t),u=new Uint8Array(o),h=ex.create(n,l),d=h._cloneInto().update(c);return{c:s,dkLen:o,asyncTick:a,DK:u,PRF:h,PRFSalt:d}}function jae(n,e,t,r,i){return n.destroy(),e.destroy(),r&&r.destroy(),i.fill(0),t}function DO(n,e,t,r){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:l}=Fae(n,e,t,r);let c;const u=new Uint8Array(4),h=Gv(u),d=new Uint8Array(a.outputLen);for(let f=1,m=0;m<s;f++,m+=a.outputLen){const g=o.subarray(m,m+a.outputLen);h.setInt32(0,f,!1),(c=l._cloneInto(c)).update(u).digestInto(d),g.set(d.subarray(0,g.length));for(let v=1;v<i;v++){a._cloneInto(c).update(d).digestInto(d);for(let y=0;y<g.length;y++)g[y]^=d[y]}}return jae(a,l,o,c,d)}function $ae(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=r?4:0,c=r?0:4;n.setUint32(e+l,o,r),n.setUint32(e+c,a,r)}class NO extends RO{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Gv(this.buffer)}update(e){ad(this);const{view:t,buffer:r,blockLen:i}=this;e=ld(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=Gv(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ad(this),fG(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)t[h]=0;$ae(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=Gv(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<c;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(r),e}}const Bae=(n,e,t)=>n&e^~n&t,zae=(n,e,t)=>n&e^n&t^e&t,qae=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Pa=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Oa=new Uint32Array(64);class Uae extends NO{constructor(){super(64,32,8,!1),this.A=Pa[0]|0,this.B=Pa[1]|0,this.C=Pa[2]|0,this.D=Pa[3]|0,this.E=Pa[4]|0,this.F=Pa[5]|0,this.G=Pa[6]|0,this.H=Pa[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,t,r,i,s,o,a,l]}set(e,t,r,i,s,o,a,l){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,t){for(let h=0;h<16;h++,t+=4)Oa[h]=e.getUint32(t,!1);for(let h=16;h<64;h++){const d=Oa[h-15],f=Oa[h-2],m=Xs(d,7)^Xs(d,18)^d>>>3,g=Xs(f,17)^Xs(f,19)^f>>>10;Oa[h]=g+Oa[h-7]+m+Oa[h-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:c,H:u}=this;for(let h=0;h<64;h++){const d=Xs(a,6)^Xs(a,11)^Xs(a,25),f=u+d+Bae(a,l,c)+qae[h]+Oa[h]|0,g=(Xs(r,2)^Xs(r,13)^Xs(r,22))+zae(r,i,s)|0;u=c,c=l,l=a,a=o+f|0,o=s,s=i,i=r,r=f+g|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,l,c,u)}roundClean(){Oa.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ad=Zb(()=>new Uae),L0=BigInt(2**32-1),tI=BigInt(32);function vG(n,e=!1){return e?{h:Number(n&L0),l:Number(n>>tI&L0)}:{h:Number(n>>tI&L0)|0,l:Number(n&L0)|0}}function yG(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:s,l:o}=vG(n[i],e);[t[i],r[i]]=[s,o]}return[t,r]}const Wae=(n,e)=>BigInt(n>>>0)<<tI|BigInt(e>>>0),Hae=(n,e,t)=>n>>>t,Yae=(n,e,t)=>n<<32-t|e>>>t,Gae=(n,e,t)=>n>>>t|e<<32-t,Vae=(n,e,t)=>n<<32-t|e>>>t,Kae=(n,e,t)=>n<<64-t|e>>>t-32,Xae=(n,e,t)=>n>>>t-32|e<<64-t,Qae=(n,e)=>e,Jae=(n,e)=>n,bG=(n,e,t)=>n<<t|e>>>32-t,xG=(n,e,t)=>e<<t|n>>>32-t,wG=(n,e,t)=>e<<t-32|n>>>64-t,_G=(n,e,t)=>n<<t-32|e>>>64-t;function Zae(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const ele=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),tle=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,nle=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),rle=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,ile=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),sle=(n,e,t,r,i,s)=>e+t+r+i+s+(n/2**32|0)|0,vt={fromBig:vG,split:yG,toBig:Wae,shrSH:Hae,shrSL:Yae,rotrSH:Gae,rotrSL:Vae,rotrBH:Kae,rotrBL:Xae,rotr32H:Qae,rotr32L:Jae,rotlSH:bG,rotlSL:xG,rotlBH:wG,rotlBL:_G,add:Zae,add3L:ele,add3H:tle,add4L:nle,add4H:rle,add5H:sle,add5L:ile},[ole,ale]=vt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Ra=new Uint32Array(80),Da=new Uint32Array(80);class lle extends NO{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:u,Fh:h,Fl:d,Gh:f,Gl:m,Hh:g,Hl:v}=this;return[e,t,r,i,s,o,a,l,c,u,h,d,f,m,g,v]}set(e,t,r,i,s,o,a,l,c,u,h,d,f,m,g,v){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=u|0,this.Fh=h|0,this.Fl=d|0,this.Gh=f|0,this.Gl=m|0,this.Hh=g|0,this.Hl=v|0}process(e,t){for(let w=0;w<16;w++,t+=4)Ra[w]=e.getUint32(t),Da[w]=e.getUint32(t+=4);for(let w=16;w<80;w++){const S=Ra[w-15]|0,_=Da[w-15]|0,E=vt.rotrSH(S,_,1)^vt.rotrSH(S,_,8)^vt.shrSH(S,_,7),C=vt.rotrSL(S,_,1)^vt.rotrSL(S,_,8)^vt.shrSL(S,_,7),T=Ra[w-2]|0,O=Da[w-2]|0,R=vt.rotrSH(T,O,19)^vt.rotrBH(T,O,61)^vt.shrSH(T,O,6),D=vt.rotrSL(T,O,19)^vt.rotrBL(T,O,61)^vt.shrSL(T,O,6),A=vt.add4L(C,D,Da[w-7],Da[w-16]),F=vt.add4H(A,E,R,Ra[w-7],Ra[w-16]);Ra[w]=F|0,Da[w]=A|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:u,Eh:h,El:d,Fh:f,Fl:m,Gh:g,Gl:v,Hh:y,Hl:b}=this;for(let w=0;w<80;w++){const S=vt.rotrSH(h,d,14)^vt.rotrSH(h,d,18)^vt.rotrBH(h,d,41),_=vt.rotrSL(h,d,14)^vt.rotrSL(h,d,18)^vt.rotrBL(h,d,41),E=h&f^~h&g,C=d&m^~d&v,T=vt.add5L(b,_,C,ale[w],Da[w]),O=vt.add5H(T,y,S,E,ole[w],Ra[w]),R=T|0,D=vt.rotrSH(r,i,28)^vt.rotrBH(r,i,34)^vt.rotrBH(r,i,39),A=vt.rotrSL(r,i,28)^vt.rotrBL(r,i,34)^vt.rotrBL(r,i,39),F=r&s^r&a^s&a,z=i&o^i&l^o&l;y=g|0,b=v|0,g=f|0,v=m|0,f=h|0,m=d|0,{h,l:d}=vt.add(c|0,u|0,O|0,R|0),c=a|0,u=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const j=vt.add3L(R,A,z);r=vt.add3H(j,O,D,F),i=j|0}({h:r,l:i}=vt.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=vt.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=vt.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:u}=vt.add(this.Dh|0,this.Dl|0,c|0,u|0),{h,l:d}=vt.add(this.Eh|0,this.El|0,h|0,d|0),{h:f,l:m}=vt.add(this.Fh|0,this.Fl|0,f|0,m|0),{h:g,l:v}=vt.add(this.Gh|0,this.Gl|0,g|0,v|0),{h:y,l:b}=vt.add(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,i,s,o,a,l,c,u,h,d,f,m,g,v,y,b)}roundClean(){Ra.fill(0),Da.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const AO=Zb(()=>new lle);function cle(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const l3=cle(),c3=l3.crypto||l3.msCrypto;function ule(n){switch(n){case"sha256":return Ad.create();case"sha512":return AO.create()}ie(!1,"invalid hashing algorithm name","algorithm",n)}function hle(n,e){const t={sha256:Ad,sha512:AO}[n];return ie(t!=null,"invalid hmac algorithm","algorithm",n),ex.create(t,e)}function dle(n,e,t,r,i){const s={sha256:Ad,sha512:AO}[i];return ie(s!=null,"invalid pbkdf2 algorithm","algorithm",i),DO(s,n,e,{c:t,dkLen:r})}function fle(n){Rt(c3!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),ie(Number.isInteger(n)&&n>0&&n<=1024,"invalid length","length",n);const e=new Uint8Array(n);return c3.getRandomValues(e),e}let SG=!1;const kG=function(n,e,t){return hle(n,e).update(t).digest()};let CG=kG;function Ld(n,e,t){const r=Ve(e,"key"),i=Ve(t,"data");return $e(CG(n,r,i))}Ld._=kG;Ld.lock=function(){SG=!0};Ld.register=function(n){if(SG)throw new Error("computeHmac is locked");CG=n};Object.freeze(Ld);const[EG,TG,MG]=[[],[],[]],ple=BigInt(0),Cf=BigInt(1),mle=BigInt(2),gle=BigInt(7),vle=BigInt(256),yle=BigInt(113);for(let n=0,e=Cf,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],EG.push(2*(5*r+t)),TG.push((n+1)*(n+2)/2%64);let i=ple;for(let s=0;s<7;s++)e=(e<<Cf^(e>>gle)*yle)%vle,e&mle&&(i^=Cf<<(Cf<<BigInt(s))-Cf);MG.push(i)}const[ble,xle]=yG(MG,!0),u3=(n,e,t)=>t>32?wG(n,e,t):bG(n,e,t),h3=(n,e,t)=>t>32?_G(n,e,t):xG(n,e,t);function wle(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=t[l],u=t[l+1],h=u3(c,u,1)^t[a],d=h3(c,u,1)^t[a+1];for(let f=0;f<50;f+=10)n[o+f]^=h,n[o+f+1]^=d}let i=n[2],s=n[3];for(let o=0;o<24;o++){const a=TG[o],l=u3(i,s,a),c=h3(i,s,a),u=EG[o];i=n[u],s=n[u+1],n[u]=l,n[u+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=n[o+a];for(let a=0;a<10;a++)n[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}n[0]^=ble[r],n[1]^=xle[r]}t.fill(0)}class LO extends RO{constructor(e,t,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Ci(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Yv(this.state)}keccak(){wle(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){ad(this);const{blockLen:t,state:r}=this;e=ld(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,t&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){ad(this,!1),OO(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ci(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(fG(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new LO(t,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const _le=(n,e,t)=>Zb(()=>new LO(e,n,t)),Sle=_le(1,136,256/8);let IG=!1;const PG=function(n){return Sle(n)};let OG=PG;function ur(n){const e=Ve(n,"data");return $e(OG(e))}ur._=PG;ur.lock=function(){IG=!0};ur.register=function(n){if(IG)throw new TypeError("keccak256 is locked");OG=n};Object.freeze(ur);const kle=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),RG=Uint8Array.from({length:16},(n,e)=>e),Cle=RG.map(n=>(9*n+5)%16);let FO=[RG],jO=[Cle];for(let n=0;n<4;n++)for(let e of[FO,jO])e.push(e[n].map(t=>kle[t]));const DG=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(n=>new Uint8Array(n)),Ele=FO.map((n,e)=>n.map(t=>DG[e][t])),Tle=jO.map((n,e)=>n.map(t=>DG[e][t])),Mle=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Ile=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),F0=(n,e)=>n<<e|n>>>32-e;function d3(n,e,t,r){return n===0?e^t^r:n===1?e&t|~e&r:n===2?(e|~t)^r:n===3?e&r|t&~r:e^(t|~r)}const j0=new Uint32Array(16);class Ple extends NO{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:r,h3:i,h4:s}=this;return[e,t,r,i,s]}set(e,t,r,i,s){this.h0=e|0,this.h1=t|0,this.h2=r|0,this.h3=i|0,this.h4=s|0}process(e,t){for(let f=0;f<16;f++,t+=4)j0[f]=e.getUint32(t,!0);let r=this.h0|0,i=r,s=this.h1|0,o=s,a=this.h2|0,l=a,c=this.h3|0,u=c,h=this.h4|0,d=h;for(let f=0;f<5;f++){const m=4-f,g=Mle[f],v=Ile[f],y=FO[f],b=jO[f],w=Ele[f],S=Tle[f];for(let _=0;_<16;_++){const E=F0(r+d3(f,s,a,c)+j0[y[_]]+g,w[_])+h|0;r=h,h=c,c=F0(a,10)|0,a=s,s=E}for(let _=0;_<16;_++){const E=F0(i+d3(m,o,l,u)+j0[b[_]]+v,S[_])+d|0;i=d,d=u,u=F0(l,10)|0,l=o,o=E}}this.set(this.h1+a+u|0,this.h2+c+d|0,this.h3+h+i|0,this.h4+r+o|0,this.h0+s+l|0)}roundClean(){j0.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const Ole=Zb(()=>new Ple);let NG=!1;const AG=function(n){return Ole(n)};let LG=AG;function Fd(n){const e=Ve(n,"data");return $e(LG(e))}Fd._=AG;Fd.lock=function(){NG=!0};Fd.register=function(n){if(NG)throw new TypeError("ripemd160 is locked");LG=n};Object.freeze(Fd);let FG=!1;const jG=function(n,e,t,r,i){return dle(n,e,t,r,i)};let $G=jG;function hg(n,e,t,r,i){const s=Ve(n,"password"),o=Ve(e,"salt");return $e($G(s,o,t,r,i))}hg._=jG;hg.lock=function(){FG=!0};hg.register=function(n){if(FG)throw new Error("pbkdf2 is locked");$G=n};Object.freeze(hg);let BG=!1;const zG=function(n){return new Uint8Array(fle(n))};let qG=zG;function sa(n){return qG(n)}sa._=zG;sa.lock=function(){BG=!0};sa.register=function(n){if(BG)throw new Error("randomBytes is locked");qG=n};Object.freeze(sa);const Ft=(n,e)=>n<<e|n>>>32-e;function f3(n,e,t,r,i,s){let o=n[e++]^t[r++],a=n[e++]^t[r++],l=n[e++]^t[r++],c=n[e++]^t[r++],u=n[e++]^t[r++],h=n[e++]^t[r++],d=n[e++]^t[r++],f=n[e++]^t[r++],m=n[e++]^t[r++],g=n[e++]^t[r++],v=n[e++]^t[r++],y=n[e++]^t[r++],b=n[e++]^t[r++],w=n[e++]^t[r++],S=n[e++]^t[r++],_=n[e++]^t[r++],E=o,C=a,T=l,O=c,R=u,D=h,A=d,F=f,z=m,j=g,L=v,B=y,$=b,U=w,H=S,K=_;for(let J=0;J<8;J+=2)R^=Ft(E+$|0,7),z^=Ft(R+E|0,9),$^=Ft(z+R|0,13),E^=Ft($+z|0,18),j^=Ft(D+C|0,7),U^=Ft(j+D|0,9),C^=Ft(U+j|0,13),D^=Ft(C+U|0,18),H^=Ft(L+A|0,7),T^=Ft(H+L|0,9),A^=Ft(T+H|0,13),L^=Ft(A+T|0,18),O^=Ft(K+B|0,7),F^=Ft(O+K|0,9),B^=Ft(F+O|0,13),K^=Ft(B+F|0,18),C^=Ft(E+O|0,7),T^=Ft(C+E|0,9),O^=Ft(T+C|0,13),E^=Ft(O+T|0,18),A^=Ft(D+R|0,7),F^=Ft(A+D|0,9),R^=Ft(F+A|0,13),D^=Ft(R+F|0,18),B^=Ft(L+j|0,7),z^=Ft(B+L|0,9),j^=Ft(z+B|0,13),L^=Ft(j+z|0,18),$^=Ft(K+H|0,7),U^=Ft($+K|0,9),H^=Ft(U+$|0,13),K^=Ft(H+U|0,18);i[s++]=o+E|0,i[s++]=a+C|0,i[s++]=l+T|0,i[s++]=c+O|0,i[s++]=u+R|0,i[s++]=h+D|0,i[s++]=d+A|0,i[s++]=f+F|0,i[s++]=m+z|0,i[s++]=g+j|0,i[s++]=v+L|0,i[s++]=y+B|0,i[s++]=b+$|0,i[s++]=w+U|0,i[s++]=S+H|0,i[s++]=_+K|0}function gh(n,e,t,r,i){let s=r+0,o=r+16*i;for(let a=0;a<16;a++)t[o+a]=n[e+(2*i-1)*16+a];for(let a=0;a<i;a++,s+=16,e+=16)f3(t,o,n,e,t,s),a>0&&(o+=16),f3(t,s,n,e+=16,t,o)}function UG(n,e,t){const r=mG({dkLen:32,asyncTick:10,maxmem:1073742848},t),{N:i,r:s,p:o,dkLen:a,asyncTick:l,maxmem:c,onProgress:u}=r;if(Ci(i),Ci(s),Ci(o),Ci(a),Ci(l),Ci(c),u!==void 0&&typeof u!="function")throw new Error("progressCb should be function");const h=128*s,d=h/4;if(i<=1||i&i-1||i>=2**(h/8)||i>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>(2**32-1)*32/h)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const f=h*(i+o);if(f>c)throw new Error(`Scrypt: parameters too large, ${f} (128 * r * (N + p)) > ${c} (maxmem)`);const m=DO(Ad,n,e,{c:1,dkLen:h*o}),g=Yv(m),v=Yv(new Uint8Array(h*i)),y=Yv(new Uint8Array(h));let b=()=>{};if(u){const w=2*i*o,S=Math.max(Math.floor(w/1e4),1);let _=0;b=()=>{_++,u&&(!(_%S)||_===w)&&u(_/w)}}return{N:i,r:s,p:o,dkLen:a,blockSize32:d,V:v,B32:g,B:m,tmp:y,blockMixCb:b,asyncTick:l}}function WG(n,e,t,r,i){const s=DO(Ad,n,t,{c:1,dkLen:e});return t.fill(0),r.fill(0),i.fill(0),s}function Rle(n,e,t){const{N:r,r:i,p:s,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:h,blockMixCb:d}=UG(n,e,t);for(let f=0;f<s;f++){const m=a*f;for(let g=0;g<a;g++)l[g]=c[m+g];for(let g=0,v=0;g<r-1;g++)gh(l,v,l,v+=a,i),d();gh(l,(r-1)*a,c,m,i),d();for(let g=0;g<r;g++){const v=c[m+a-16]%r;for(let y=0;y<a;y++)h[y]=c[m+y]^l[v*a+y];gh(h,0,c,m,i),d()}}return WG(n,o,u,l,h)}async function Dle(n,e,t){const{N:r,r:i,p:s,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:h,blockMixCb:d,asyncTick:f}=UG(n,e,t);for(let m=0;m<s;m++){const g=a*m;for(let y=0;y<a;y++)l[y]=c[g+y];let v=0;await a3(r-1,f,()=>{gh(l,v,l,v+=a,i),d()}),gh(l,(r-1)*a,c,g,i),d(),await a3(r,f,()=>{const y=c[g+a-16]%r;for(let b=0;b<a;b++)h[b]=c[g+b]^l[y*a+b];gh(h,0,c,g,i),d()})}return WG(n,o,u,l,h)}let HG=!1,YG=!1;const GG=async function(n,e,t,r,i,s,o){return await Dle(n,e,{N:t,r,p:i,dkLen:s,onProgress:o})},VG=function(n,e,t,r,i,s){return Rle(n,e,{N:t,r,p:i,dkLen:s})};let KG=GG,XG=VG;async function dg(n,e,t,r,i,s,o){const a=Ve(n,"passwd"),l=Ve(e,"salt");return $e(await KG(a,l,t,r,i,s,o))}dg._=GG;dg.lock=function(){YG=!0};dg.register=function(n){if(YG)throw new Error("scrypt is locked");KG=n};Object.freeze(dg);function fg(n,e,t,r,i,s){const o=Ve(n,"passwd"),a=Ve(e,"salt");return $e(XG(o,a,t,r,i,s))}fg._=VG;fg.lock=function(){HG=!0};fg.register=function(n){if(HG)throw new Error("scryptSync is locked");XG=n};Object.freeze(fg);const QG=function(n){return ule("sha256").update(n).digest()};let JG=QG,ZG=!1;function ds(n){const e=Ve(n,"data");return $e(JG(e))}ds._=QG;ds.lock=function(){ZG=!0};ds.register=function(n){if(ZG)throw new Error("sha256 is locked");JG=n};Object.freeze(ds);Object.freeze(ds);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const eV=BigInt(0),tx=BigInt(1),Nle=BigInt(2),nx=n=>n instanceof Uint8Array,Ale=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function cd(n){if(!nx(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=Ale[n[t]];return e}function tV(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function $O(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function ud(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let r=0;r<t.length;r++){const i=r*2,s=n.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function Pc(n){return $O(cd(n))}function BO(n){if(!nx(n))throw new Error("Uint8Array expected");return $O(cd(Uint8Array.from(n).reverse()))}function hd(n,e){return ud(n.toString(16).padStart(e*2,"0"))}function zO(n,e){return hd(n,e).reverse()}function Lle(n){return ud(tV(n))}function Ss(n,e,t){let r;if(typeof e=="string")try{r=ud(e)}catch(s){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${s}`)}else if(nx(e))r=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(`${n} expected ${t} bytes, got ${i}`);return r}function km(...n){const e=new Uint8Array(n.reduce((r,i)=>r+i.length,0));let t=0;return n.forEach(r=>{if(!nx(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}function Fle(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function jle(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function $le(n){let e;for(e=0;n>eV;n>>=tx,e+=1);return e}function Ble(n,e){return n>>BigInt(e)&tx}const zle=(n,e,t)=>n|(t?tx:eV)<<BigInt(e),qO=n=>(Nle<<BigInt(n-1))-tx,o1=n=>new Uint8Array(n),p3=n=>Uint8Array.from(n);function nV(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=o1(n),i=o1(n),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...h)=>t(i,r,...h),l=(h=o1())=>{i=a(p3([0]),h),r=a(),h.length!==0&&(i=a(p3([1]),h),r=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const d=[];for(;h<e;){r=a();const f=r.slice();d.push(f),h+=r.length}return km(...d)};return(h,d)=>{o(),l(h);let f;for(;!(f=d(c()));)l();return o(),f}}const qle={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function pg(n,e,t={}){const r=(i,s,o)=>{const a=qle[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=n[i];if(!(o&&l===void 0)&&!a(l,n))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(t))r(i,s,!0);return n}const Ule=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Ble,bitLen:$le,bitMask:qO,bitSet:zle,bytesToHex:cd,bytesToNumberBE:Pc,bytesToNumberLE:BO,concatBytes:km,createHmacDrbg:nV,ensureBytes:Ss,equalBytes:Fle,hexToBytes:ud,hexToNumber:$O,numberToBytesBE:hd,numberToBytesLE:zO,numberToHexUnpadded:tV,numberToVarBytesBE:Lle,utf8ToBytes:jle,validateObject:pg},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hr=BigInt(0),zn=BigInt(1),ic=BigInt(2),Wle=BigInt(3),nI=BigInt(4),m3=BigInt(5),g3=BigInt(8);BigInt(9);BigInt(16);function ni(n,e){const t=n%e;return t>=hr?t:e+t}function Hle(n,e,t){if(t<=hr||e<hr)throw new Error("Expected power/modulo > 0");if(t===zn)return hr;let r=zn;for(;e>hr;)e&zn&&(r=r*n%t),n=n*n%t,e>>=zn;return r}function Ui(n,e,t){let r=n;for(;e-- >hr;)r*=r,r%=t;return r}function rI(n,e){if(n===hr||e<=hr)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=ni(n,e),r=e,i=hr,s=zn;for(;t!==hr;){const a=r/t,l=r%t,c=i-s*a;r=t,t=l,i=s,s=c}if(r!==zn)throw new Error("invert: does not exist");return ni(i,e)}function Yle(n){const e=(n-zn)/ic;let t,r,i;for(t=n-zn,r=0;t%ic===hr;t/=ic,r++);for(i=ic;i<n&&Hle(i,e,n)!==n-zn;i++);if(r===1){const o=(n+zn)/nI;return function(l,c){const u=l.pow(c,o);if(!l.eql(l.sqr(u),c))throw new Error("Cannot find square root");return u}}const s=(t+zn)/ic;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=r,u=a.pow(a.mul(a.ONE,i),t),h=a.pow(l,s),d=a.pow(l,t);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(d);f<c&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const m=a.pow(u,zn<<BigInt(c-f-1));u=a.sqr(m),h=a.mul(h,m),d=a.mul(d,u),c=f}return h}}function Gle(n){if(n%nI===Wle){const e=(n+zn)/nI;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(n%g3===m3){const e=(n-m3)/g3;return function(r,i){const s=r.mul(i,ic),o=r.pow(s,e),a=r.mul(i,o),l=r.mul(r.mul(a,ic),o),c=r.mul(a,r.sub(l,r.ONE));if(!r.eql(r.sqr(c),i))throw new Error("Cannot find square root");return c}}return Yle(n)}const Vle=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Kle(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=Vle.reduce((r,i)=>(r[i]="function",r),e);return pg(n,t)}function Xle(n,e,t){if(t<hr)throw new Error("Expected power > 0");if(t===hr)return n.ONE;if(t===zn)return e;let r=n.ONE,i=e;for(;t>hr;)t&zn&&(r=n.mul(r,i)),i=n.sqr(i),t>>=zn;return r}function Qle(n,e){const t=new Array(e.length),r=e.reduce((s,o,a)=>n.is0(o)?s:(t[a]=s,n.mul(s,o)),n.ONE),i=n.inv(r);return e.reduceRight((s,o,a)=>n.is0(o)?s:(t[a]=n.mul(s,t[a]),n.mul(s,o)),i),t}function rV(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function Jle(n,e,t=!1,r={}){if(n<=hr)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:i,nByteLength:s}=rV(n,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Gle(n),a=Object.freeze({ORDER:n,BITS:i,BYTES:s,MASK:qO(i),ZERO:hr,ONE:zn,create:l=>ni(l,n),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return hr<=l&&l<n},is0:l=>l===hr,isOdd:l=>(l&zn)===zn,neg:l=>ni(-l,n),eql:(l,c)=>l===c,sqr:l=>ni(l*l,n),add:(l,c)=>ni(l+c,n),sub:(l,c)=>ni(l-c,n),mul:(l,c)=>ni(l*c,n),pow:(l,c)=>Xle(a,l,c),div:(l,c)=>ni(l*rI(c,n),n),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>rI(l,n),sqrt:r.sqrt||(l=>o(a,l)),invertBatch:l=>Qle(a,l),cmov:(l,c,u)=>u?c:l,toBytes:l=>t?zO(l,s):hd(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return t?BO(l):Pc(l)}});return Object.freeze(a)}function iV(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function sV(n){const e=iV(n);return e+Math.ceil(e/2)}function Zle(n,e,t=!1){const r=n.length,i=iV(e),s=sV(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=t?Pc(n):BO(n),a=ni(o,e-zn)+zn;return t?zO(a,i):hd(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ece=BigInt(0),a1=BigInt(1);function tce(n,e){const t=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=n.ZERO,a=i;for(;s>ece;)s&a1&&(o=o.add(a)),a=a.double(),s>>=a1;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=r(s),l=[];let c=i,u=c;for(let h=0;h<o;h++){u=c,l.push(u);for(let d=1;d<a;d++)u=u.add(c),l.push(u);c=u.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=r(i);let c=n.ZERO,u=n.BASE;const h=BigInt(2**i-1),d=2**i,f=BigInt(i);for(let m=0;m<a;m++){const g=m*l;let v=Number(o&h);o>>=f,v>l&&(v-=d,o+=a1);const y=g,b=g+Math.abs(v)-1,w=m%2!==0,S=v<0;v===0?u=u.add(t(w,s[y])):c=c.add(t(S,s[b]))}return{p:c,f:u}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let c=s.get(i);return c||(c=this.precomputeWindow(i,l),l!==1&&s.set(i,a(c))),this.wNAF(l,c,o)}}}function oV(n){return Kle(n.Fp),pg(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...rV(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function nce(n){const e=oV(n);pg(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:i}=e;if(t){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:rce,hexToBytes:ice}=Ule,uc={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=uc;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:rce(r),l:n.subarray(t+2)}},toSig(n){const{Err:e}=uc,t=typeof n=="string"?ice(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=uc._parseInt(t.subarray(2)),{d:o,l:a}=uc._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(n){const e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,t=c=>{const u=c.toString(16);return u.length&1?`0${u}`:u},r=e(t(n.s)),i=e(t(n.r)),s=r.length/2,o=i.length/2,a=t(s),l=t(o);return`30${t(o+s+4)}02${l}${i}02${a}${r}`}},Jo=BigInt(0),ts=BigInt(1);BigInt(2);const v3=BigInt(3);BigInt(4);function sce(n){const e=nce(n),{Fp:t}=e,r=e.toBytes||((m,g,v)=>{const y=g.toAffine();return km(Uint8Array.from([4]),t.toBytes(y.x),t.toBytes(y.y))}),i=e.fromBytes||(m=>{const g=m.subarray(1),v=t.fromBytes(g.subarray(0,t.BYTES)),y=t.fromBytes(g.subarray(t.BYTES,2*t.BYTES));return{x:v,y}});function s(m){const{a:g,b:v}=e,y=t.sqr(m),b=t.mul(y,m);return t.add(t.add(b,t.mul(m,g)),v)}if(!t.eql(t.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(m){return typeof m=="bigint"&&Jo<m&&m<e.n}function a(m){if(!o(m))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(m){const{allowedPrivateKeyLengths:g,nByteLength:v,wrapPrivateKey:y,n:b}=e;if(g&&typeof m!="bigint"){if(m instanceof Uint8Array&&(m=cd(m)),typeof m!="string"||!g.includes(m.length))throw new Error("Invalid key");m=m.padStart(v*2,"0")}let w;try{w=typeof m=="bigint"?m:Pc(Ss("private key",m,v))}catch{throw new Error(`private key must be ${v} bytes, hex or bigint, not ${typeof m}`)}return y&&(w=ni(w,b)),a(w),w}const c=new Map;function u(m){if(!(m instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(g,v,y){if(this.px=g,this.py=v,this.pz=y,g==null||!t.isValid(g))throw new Error("x required");if(v==null||!t.isValid(v))throw new Error("y required");if(y==null||!t.isValid(y))throw new Error("z required")}static fromAffine(g){const{x:v,y}=g||{};if(!g||!t.isValid(v)||!t.isValid(y))throw new Error("invalid affine point");if(g instanceof h)throw new Error("projective point not allowed");const b=w=>t.eql(w,t.ZERO);return b(v)&&b(y)?h.ZERO:new h(v,y,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const v=t.invertBatch(g.map(y=>y.pz));return g.map((y,b)=>y.toAffine(v[b])).map(h.fromAffine)}static fromHex(g){const v=h.fromAffine(i(Ss("pointHex",g)));return v.assertValidity(),v}static fromPrivateKey(g){return h.BASE.multiply(l(g))}_setWindowSize(g){this._WINDOW_SIZE=g,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y:v}=this.toAffine();if(!t.isValid(g)||!t.isValid(v))throw new Error("bad point: x or y not FE");const y=t.sqr(v),b=s(g);if(!t.eql(y,b))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(t.isOdd)return!t.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:v,py:y,pz:b}=this,{px:w,py:S,pz:_}=g,E=t.eql(t.mul(v,_),t.mul(w,b)),C=t.eql(t.mul(y,_),t.mul(S,b));return E&&C}negate(){return new h(this.px,t.neg(this.py),this.pz)}double(){const{a:g,b:v}=e,y=t.mul(v,v3),{px:b,py:w,pz:S}=this;let _=t.ZERO,E=t.ZERO,C=t.ZERO,T=t.mul(b,b),O=t.mul(w,w),R=t.mul(S,S),D=t.mul(b,w);return D=t.add(D,D),C=t.mul(b,S),C=t.add(C,C),_=t.mul(g,C),E=t.mul(y,R),E=t.add(_,E),_=t.sub(O,E),E=t.add(O,E),E=t.mul(_,E),_=t.mul(D,_),C=t.mul(y,C),R=t.mul(g,R),D=t.sub(T,R),D=t.mul(g,D),D=t.add(D,C),C=t.add(T,T),T=t.add(C,T),T=t.add(T,R),T=t.mul(T,D),E=t.add(E,T),R=t.mul(w,S),R=t.add(R,R),T=t.mul(R,D),_=t.sub(_,T),C=t.mul(R,O),C=t.add(C,C),C=t.add(C,C),new h(_,E,C)}add(g){u(g);const{px:v,py:y,pz:b}=this,{px:w,py:S,pz:_}=g;let E=t.ZERO,C=t.ZERO,T=t.ZERO;const O=e.a,R=t.mul(e.b,v3);let D=t.mul(v,w),A=t.mul(y,S),F=t.mul(b,_),z=t.add(v,y),j=t.add(w,S);z=t.mul(z,j),j=t.add(D,A),z=t.sub(z,j),j=t.add(v,b);let L=t.add(w,_);return j=t.mul(j,L),L=t.add(D,F),j=t.sub(j,L),L=t.add(y,b),E=t.add(S,_),L=t.mul(L,E),E=t.add(A,F),L=t.sub(L,E),T=t.mul(O,j),E=t.mul(R,F),T=t.add(E,T),E=t.sub(A,T),T=t.add(A,T),C=t.mul(E,T),A=t.add(D,D),A=t.add(A,D),F=t.mul(O,F),j=t.mul(R,j),A=t.add(A,F),F=t.sub(D,F),F=t.mul(O,F),j=t.add(j,F),D=t.mul(A,j),C=t.add(C,D),D=t.mul(L,j),E=t.mul(z,E),E=t.sub(E,D),D=t.mul(z,A),T=t.mul(L,T),T=t.add(T,D),new h(E,C,T)}subtract(g){return this.add(g.negate())}is0(){return this.equals(h.ZERO)}wNAF(g){return f.wNAFCached(this,c,g,v=>{const y=t.invertBatch(v.map(b=>b.pz));return v.map((b,w)=>b.toAffine(y[w])).map(h.fromAffine)})}multiplyUnsafe(g){const v=h.ZERO;if(g===Jo)return v;if(a(g),g===ts)return this;const{endo:y}=e;if(!y)return f.unsafeLadder(this,g);let{k1neg:b,k1:w,k2neg:S,k2:_}=y.splitScalar(g),E=v,C=v,T=this;for(;w>Jo||_>Jo;)w&ts&&(E=E.add(T)),_&ts&&(C=C.add(T)),T=T.double(),w>>=ts,_>>=ts;return b&&(E=E.negate()),S&&(C=C.negate()),C=new h(t.mul(C.px,y.beta),C.py,C.pz),E.add(C)}multiply(g){a(g);let v=g,y,b;const{endo:w}=e;if(w){const{k1neg:S,k1:_,k2neg:E,k2:C}=w.splitScalar(v);let{p:T,f:O}=this.wNAF(_),{p:R,f:D}=this.wNAF(C);T=f.constTimeNegate(S,T),R=f.constTimeNegate(E,R),R=new h(t.mul(R.px,w.beta),R.py,R.pz),y=T.add(R),b=O.add(D)}else{const{p:S,f:_}=this.wNAF(v);y=S,b=_}return h.normalizeZ([y,b])[0]}multiplyAndAddUnsafe(g,v,y){const b=h.BASE,w=(_,E)=>E===Jo||E===ts||!_.equals(b)?_.multiplyUnsafe(E):_.multiply(E),S=w(this,v).add(w(g,y));return S.is0()?void 0:S}toAffine(g){const{px:v,py:y,pz:b}=this,w=this.is0();g==null&&(g=w?t.ONE:t.inv(b));const S=t.mul(v,g),_=t.mul(y,g),E=t.mul(b,g);if(w)return{x:t.ZERO,y:t.ZERO};if(!t.eql(E,t.ONE))throw new Error("invZ was invalid");return{x:S,y:_}}isTorsionFree(){const{h:g,isTorsionFree:v}=e;if(g===ts)return!0;if(v)return v(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:v}=e;return g===ts?this:v?v(h,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(h,this,g)}toHex(g=!0){return cd(this.toRawBytes(g))}}h.BASE=new h(e.Gx,e.Gy,t.ONE),h.ZERO=new h(t.ZERO,t.ONE,t.ZERO);const d=e.nBitLength,f=tce(h,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function oce(n){const e=oV(n);return pg(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function ace(n){const e=oce(n),{Fp:t,n:r}=e,i=t.BYTES+1,s=2*t.BYTES+1;function o(j){return Jo<j&&j<t.ORDER}function a(j){return ni(j,r)}function l(j){return rI(j,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:h,isWithinCurveOrder:d}=sce({...e,toBytes(j,L,B){const $=L.toAffine(),U=t.toBytes($.x),H=km;return B?H(Uint8Array.from([L.hasEvenY()?2:3]),U):H(Uint8Array.from([4]),U,t.toBytes($.y))},fromBytes(j){const L=j.length,B=j[0],$=j.subarray(1);if(L===i&&(B===2||B===3)){const U=Pc($);if(!o(U))throw new Error("Point is not on curve");const H=h(U);let K=t.sqrt(H);const J=(K&ts)===ts;return(B&1)===1!==J&&(K=t.neg(K)),{x:U,y:K}}else if(L===s&&B===4){const U=t.fromBytes($.subarray(0,t.BYTES)),H=t.fromBytes($.subarray(t.BYTES,2*t.BYTES));return{x:U,y:H}}else throw new Error(`Point of length ${L} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),f=j=>cd(hd(j,e.nByteLength));function m(j){const L=r>>ts;return j>L}function g(j){return m(j)?a(-j):j}const v=(j,L,B)=>Pc(j.slice(L,B));class y{constructor(L,B,$){this.r=L,this.s=B,this.recovery=$,this.assertValidity()}static fromCompact(L){const B=e.nByteLength;return L=Ss("compactSignature",L,B*2),new y(v(L,0,B),v(L,B,2*B))}static fromDER(L){const{r:B,s:$}=uc.toSig(Ss("DER",L));return new y(B,$)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(L){return new y(this.r,this.s,L)}recoverPublicKey(L){const{r:B,s:$,recovery:U}=this,H=C(Ss("msgHash",L));if(U==null||![0,1,2,3].includes(U))throw new Error("recovery id invalid");const K=U===2||U===3?B+e.n:B;if(K>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const J=U&1?"03":"02",Z=c.fromHex(J+f(K)),q=l(K),X=a(-H*q),G=a($*q),ne=c.BASE.multiplyAndAddUnsafe(Z,X,G);if(!ne)throw new Error("point at infinify");return ne.assertValidity(),ne}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return ud(this.toDERHex())}toDERHex(){return uc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ud(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const b={isValidPrivateKey(j){try{return u(j),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const j=sV(e.n);return Zle(e.randomBytes(j),e.n)},precompute(j=8,L=c.BASE){return L._setWindowSize(j),L.multiply(BigInt(3)),L}};function w(j,L=!0){return c.fromPrivateKey(j).toRawBytes(L)}function S(j){const L=j instanceof Uint8Array,B=typeof j=="string",$=(L||B)&&j.length;return L?$===i||$===s:B?$===2*i||$===2*s:j instanceof c}function _(j,L,B=!0){if(S(j))throw new Error("first arg must be private key");if(!S(L))throw new Error("second arg must be public key");return c.fromHex(L).multiply(u(j)).toRawBytes(B)}const E=e.bits2int||function(j){const L=Pc(j),B=j.length*8-e.nBitLength;return B>0?L>>BigInt(B):L},C=e.bits2int_modN||function(j){return a(E(j))},T=qO(e.nBitLength);function O(j){if(typeof j!="bigint")throw new Error("bigint expected");if(!(Jo<=j&&j<T))throw new Error(`bigint expected < 2^${e.nBitLength}`);return hd(j,e.nByteLength)}function R(j,L,B=D){if(["recovered","canonical"].some(be=>be in B))throw new Error("sign() legacy options not supported");const{hash:$,randomBytes:U}=e;let{lowS:H,prehash:K,extraEntropy:J}=B;H==null&&(H=!0),j=Ss("msgHash",j),K&&(j=Ss("prehashed msgHash",$(j)));const Z=C(j),q=u(L),X=[O(q),O(Z)];if(J!=null){const be=J===!0?U(t.BYTES):J;X.push(Ss("extraEntropy",be))}const G=km(...X),ne=Z;function te(be){const Y=E(be);if(!d(Y))return;const ee=l(Y),pe=c.BASE.multiply(Y).toAffine(),ge=a(pe.x);if(ge===Jo)return;const qe=a(ee*a(ne+ge*q));if(qe===Jo)return;let De=(pe.x===ge?0:2)|Number(pe.y&ts),_e=qe;return H&&m(qe)&&(_e=g(qe),De^=1),new y(ge,_e,De)}return{seed:G,k2sig:te}}const D={lowS:e.lowS,prehash:!1},A={lowS:e.lowS,prehash:!1};function F(j,L,B=D){const{seed:$,k2sig:U}=R(j,L,B),H=e;return nV(H.hash.outputLen,H.nByteLength,H.hmac)($,U)}c.BASE._setWindowSize(8);function z(j,L,B,$=A){var pe;const U=j;if(L=Ss("msgHash",L),B=Ss("publicKey",B),"strict"in $)throw new Error("options.strict was renamed to lowS");const{lowS:H,prehash:K}=$;let J,Z;try{if(typeof U=="string"||U instanceof Uint8Array)try{J=y.fromDER(U)}catch(ge){if(!(ge instanceof uc.Err))throw ge;J=y.fromCompact(U)}else if(typeof U=="object"&&typeof U.r=="bigint"&&typeof U.s=="bigint"){const{r:ge,s:qe}=U;J=new y(ge,qe)}else throw new Error("PARSE");Z=c.fromHex(B)}catch(ge){if(ge.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(H&&J.hasHighS())return!1;K&&(L=e.hash(L));const{r:q,s:X}=J,G=C(L),ne=l(X),te=a(G*ne),be=a(q*ne),Y=(pe=c.BASE.multiplyAndAddUnsafe(Z,te,be))==null?void 0:pe.toAffine();return Y?a(Y.x)===q:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:_,sign:F,verify:z,ProjectivePoint:c,Signature:y,utils:b}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function lce(n){return{hash:n,hmac:(e,...t)=>ex(n,e,Nae(...t)),randomBytes:Lae}}function cce(n,e){const t=r=>ace({...n,...lce(r)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const aV=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),y3=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),uce=BigInt(1),iI=BigInt(2),b3=(n,e)=>(n+e/iI)/e;function hce(n){const e=aV,t=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=n*n*n%e,u=c*c*n%e,h=Ui(u,t,e)*u%e,d=Ui(h,t,e)*u%e,f=Ui(d,iI,e)*c%e,m=Ui(f,i,e)*f%e,g=Ui(m,s,e)*m%e,v=Ui(g,a,e)*g%e,y=Ui(v,l,e)*v%e,b=Ui(y,a,e)*g%e,w=Ui(b,t,e)*u%e,S=Ui(w,o,e)*m%e,_=Ui(S,r,e)*c%e,E=Ui(_,iI,e);if(!sI.eql(sI.sqr(E),n))throw new Error("Cannot find square root");return E}const sI=Jle(aV,void 0,void 0,{sqrt:hce}),za=cce({a:BigInt(0),b:BigInt(7),Fp:sI,n:y3,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=y3,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-uce*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=b3(s*n,e),l=b3(-r*n,e);let c=ni(n-a*t-l*i,e),u=ni(-a*r-l*s,e);const h=c>o,d=u>o;if(h&&(c=e-c),d&&(u=e-u),c>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:h,k1:c,k2neg:d,k2:u}}}},Ad);BigInt(0);za.ProjectivePoint;const lV="0x0000000000000000000000000000000000000000",x3="0x0000000000000000000000000000000000000000000000000000000000000000",dce=`Ethereum Signed Message:
`,w3=BigInt(0),_3=BigInt(1),oI=BigInt(2),S3=BigInt(27),k3=BigInt(28),$0=BigInt(35),cV=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),fce=cV/oI,pce=Symbol.for("nodejs.util.inspect.custom"),Ul={};function l1(n){return Tl(qn(n),32)}var Ph,co,Oh,rl;const Xi=class Xi{constructor(e,t,r,i){Te(this,Ph);Te(this,co);Te(this,Oh);Te(this,rl);Xb(e,Ul,"Signature"),he(this,Ph,t),he(this,co,r),he(this,Oh,i),he(this,rl,null)}get r(){return Q(this,Ph)}set r(e){ie(Sp(e)===32,"invalid r","value",e),he(this,Ph,$e(e))}get s(){return ie(parseInt(Q(this,co).substring(0,3))<8,"non-canonical s; use ._s","s",Q(this,co)),Q(this,co)}set s(e){ie(Sp(e)===32,"invalid s","value",e),he(this,co,$e(e))}get _s(){return Q(this,co)}isValid(){return BigInt(Q(this,co))<=fce}get v(){return Q(this,Oh)}set v(e){const t=Di(e,"value");ie(t===27||t===28,"invalid v","v",e),he(this,Oh,t)}get networkV(){return Q(this,rl)}get legacyChainId(){const e=this.networkV;return e==null?null:Xi.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Ve(this.s);return this.yParity&&(e[0]|=128),$e(e)}get compactSerialized(){return Wn([this.r,this.yParityAndS])}get serialized(){return Wn([this.r,this.s,this.yParity?"0x1c":"0x1b"])}getCanonical(){if(this.isValid())return this;const e=cV-BigInt(this._s),t=55-this.v,r=new Xi(Ul,this.r,l1(e),t);return this.networkV&&he(r,rl,this.networkV),r}clone(){const e=new Xi(Ul,this.r,this._s,this.v);return this.networkV&&he(e,rl,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}[pce](){return this.toString()}toString(){return this.isValid()?`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`:`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId(e){const t=nn(e,"v");return t==S3||t==k3?w3:(ie(t>=$0,"invalid EIP-155 v","v",e),(t-$0)/oI)}static getChainIdV(e,t){return nn(e)*oI+BigInt(35+t-27)}static getNormalizedV(e){const t=nn(e);return t===w3||t===S3?27:t===_3||t===k3?28:(ie(t>=$0,"invalid v","v",e),t&_3?27:28)}static from(e){function t(c,u){ie(c,u,"signature",e)}if(e==null)return new Xi(Ul,x3,x3,27);if(typeof e=="string"){const c=Ve(e,"signature");if(c.length===64){const u=$e(c.slice(0,32)),h=c.slice(32,64),d=h[0]&128?28:27;return h[0]&=127,new Xi(Ul,u,$e(h),d)}if(c.length===65){const u=$e(c.slice(0,32)),h=$e(c.slice(32,64)),d=Xi.getNormalizedV(c[64]);return new Xi(Ul,u,h,d)}t(!1,"invalid raw signature length")}if(e instanceof Xi)return e.clone();const r=e.r;t(r!=null,"missing r");const i=l1(r),s=function(c,u){if(c!=null)return l1(c);if(u!=null){t(wo(u,32),"invalid yParityAndS");const h=Ve(u);return h[0]&=127,$e(h)}t(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(c,u,h){if(c!=null){const d=nn(c);return{networkV:d>=$0?d:void 0,v:Xi.getNormalizedV(d)}}if(u!=null)return t(wo(u,32),"invalid yParityAndS"),{v:Ve(u)[0]&128?28:27};if(h!=null){switch(Di(h,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),l=new Xi(Ul,i,s,a);return o&&he(l,rl,o),t(e.yParity==null||Di(e.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};Ph=new WeakMap,co=new WeakMap,Oh=new WeakMap,rl=new WeakMap;let Fs=Xi;var Xo;const sc=class sc{constructor(e){Te(this,Xo);ie(Sp(e)===32,"invalid private key","privateKey","[REDACTED]"),he(this,Xo,$e(e))}get privateKey(){return Q(this,Xo)}get publicKey(){return sc.computePublicKey(Q(this,Xo))}get compressedPublicKey(){return sc.computePublicKey(Q(this,Xo),!0)}sign(e){ie(Sp(e)===32,"invalid digest length","digest",e);const t=za.sign(Bu(e),Bu(Q(this,Xo)),{lowS:!0});return Fs.from({r:od(t.r,32),s:od(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=sc.computePublicKey(e);return $e(za.getSharedSecret(Bu(Q(this,Xo)),Ve(t),!1))}static computePublicKey(e,t){let r=Ve(e,"key");if(r.length===32){const s=za.getPublicKey(r,!!t);return $e(s)}if(r.length===64){const s=new Uint8Array(65);s[0]=4,s.set(r,1),r=s}const i=za.ProjectivePoint.fromHex(r);return $e(i.toRawBytes(t))}static recoverPublicKey(e,t){ie(Sp(e)===32,"invalid digest length","digest",e);const r=Fs.from(t);let i=za.Signature.fromCompact(Bu(Wn([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const s=i.recoverPublicKey(Bu(e));return ie(s!=null,"invalid signature for digest","signature",t),"0x"+s.toHex(!1)}static addPoints(e,t,r){const i=za.ProjectivePoint.fromHex(sc.computePublicKey(e).substring(2)),s=za.ProjectivePoint.fromHex(sc.computePublicKey(t).substring(2));return"0x"+i.add(s).toHex(!!r)}};Xo=new WeakMap;let yo=sc;const mce=BigInt(0),gce=BigInt(36);function C3(n){n=n.toLowerCase();const e=n.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const r=Ve(ur(t));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const UO={};for(let n=0;n<10;n++)UO[String(n)]=String(n);for(let n=0;n<26;n++)UO[String.fromCharCode(65+n)]=String(10+n);const E3=15;function vce(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(r=>UO[r]).join("");for(;e.length>=E3;){let r=e.substring(0,E3);e=parseInt(r,10)%97+e.substring(r.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const yce=function(){const n={};for(let e=0;e<36;e++){const t="0123456789abcdefghijklmnopqrstuvwxyz"[e];n[t]=BigInt(e)}return n}();function bce(n){n=n.toLowerCase();let e=mce;for(let t=0;t<n.length;t++)e=e*gce+yce[n[t]];return e}function fs(n){if(ie(typeof n=="string","invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/)){n.startsWith("0x")||(n="0x"+n);const e=C3(n);return ie(!n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===n,"bad address checksum","address",n),e}if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){ie(n.substring(2,4)===vce(n),"bad icap checksum","address",n);let e=bce(n.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return C3("0x"+e)}ie(!1,"invalid address","address",n)}function xce(n){return n&&typeof n.getAddress=="function"}async function c1(n,e){const t=await e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&(Rt(typeof n!="string","unconfigured name","UNCONFIGURED_NAME",{value:n}),ie(!1,"invalid AddressLike value; did not resolve to a value address","target",n)),fs(t)}function kp(n,e){if(typeof n=="string")return n.match(/^0x[0-9a-f]{40}$/i)?fs(n):(Rt(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),c1(n,e.resolveName(n)));if(xce(n))return c1(n,n.getAddress());if(n&&typeof n.then=="function")return c1(n,n);ie(!1,"unsupported addressable value","target",n)}function u1(n,e){return{address:fs(n),storageKeys:e.map((t,r)=>(ie(wo(t,32),"invalid slot",`storageKeys[${r}]`,t),t.toLowerCase()))}}function rx(n){if(Array.isArray(n))return n.map((t,r)=>Array.isArray(t)?(ie(t.length===2,"invalid slot set",`value[${r}]`,t),u1(t[0],t[1])):(ie(t!=null&&typeof t=="object","invalid address-slot set","value",n),u1(t.address,t.storageKeys)));ie(n!=null&&typeof n=="object","invalid access list","value",n);const e=Object.keys(n).map(t=>{const r=n[t].reduce((i,s)=>(i[s]=!0,i),{});return u1(t,Object.keys(r).sort())});return e.sort((t,r)=>t.address.localeCompare(r.address)),e}function wce(n){return{address:fs(n.address),nonce:nn(n.nonce!=null?n.nonce:0),chainId:nn(n.chainId!=null?n.chainId:0),signature:Fs.from(n.signature)}}function mg(n){let e;return typeof n=="string"?e=yo.computePublicKey(n,!1):e=n.publicKey,fs(ur("0x"+e.substring(4)).substring(26))}function _ce(n,e){return mg(yo.recoverPublicKey(n,e))}const lr=BigInt(0),Sce=BigInt(2),kce=BigInt(27),Cce=BigInt(28),Ece=BigInt(35),Tce=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Mce=Symbol.for("nodejs.util.inspect.custom"),h1=4096*32,Vv=128;function Ice(n){return{blobToKzgCommitment:r=>{if("computeBlobProof"in n){if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return Ve(n.blobToKzgCommitment($e(r)))}else if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return Ve(n.blobToKzgCommitment(r));if("blobToKZGCommitment"in n&&typeof n.blobToKZGCommitment=="function")return Ve(n.blobToKZGCommitment($e(r)));ie(!1,"unsupported KZG library","kzg",n)},computeBlobKzgProof:(r,i)=>{if("computeBlobProof"in n&&typeof n.computeBlobProof=="function")return Ve(n.computeBlobProof($e(r),$e(i)));if("computeBlobKzgProof"in n&&typeof n.computeBlobKzgProof=="function")return n.computeBlobKzgProof(r,i);if("computeBlobKZGProof"in n&&typeof n.computeBlobKZGProof=="function")return Ve(n.computeBlobKZGProof($e(r),$e(i)));ie(!1,"unsupported KZG library","kzg",n)}}}function T3(n,e){let t=n.toString(16);for(;t.length<2;)t="0"+t;return t+=ds(e).substring(4),"0x"+t}function jd(n){return n==="0x"?null:fs(n)}function ix(n,e){try{return rx(n)}catch(t){ie(!1,t.message,e,n)}}function Pce(n,e){try{if(!Array.isArray(n))throw new Error("authorizationList: invalid array");const t=[];for(let r=0;r<n.length;r++){const i=n[r];if(!Array.isArray(i))throw new Error(`authorization[${r}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!i[1])throw new Error(`authorization[${r}]: null address`);t.push({address:jd(i[1]),nonce:Kt(i[2],"nonce"),chainId:Kt(i[0],"chainId"),signature:Fs.from({yParity:cu(i[3],"yParity"),r:Tl(i[4],32),s:Tl(i[5],32)})})}return t}catch(t){ie(!1,t.message,e,n)}}function cu(n,e){return n==="0x"?0:Di(n,e)}function Kt(n,e){if(n==="0x")return lr;const t=nn(n,e);return ie(t<=Tce,"value exceeds uint size",e,t),t}function Et(n,e){const t=nn(n,"value"),r=qn(t);return ie(r.length<=32,"value too large",`tx.${e}`,t),r}function sx(n){return rx(n).map(e=>[e.address,e.storageKeys])}function Oce(n){return n.map(e=>[Et(e.chainId,"chainId"),e.address,Et(e.nonce,"nonce"),Et(e.signature.yParity,"yParity"),qn(e.signature.r),qn(e.signature._s)])}function Rce(n,e){ie(Array.isArray(n),`invalid ${e}`,"value",n);for(let t=0;t<n.length;t++)ie(wo(n[t],32),"invalid ${ param } hash",`value[${t}]`,n[t]);return n}function Dce(n){const e=ug(n);ie(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",n);const t={type:0,nonce:cu(e[0],"nonce"),gasPrice:Kt(e[1],"gasPrice"),gasLimit:Kt(e[2],"gasLimit"),to:jd(e[3]),value:Kt(e[4],"value"),data:$e(e[5]),chainId:lr};if(e.length===6)return t;const r=Kt(e[6],"v"),i=Kt(e[7],"r"),s=Kt(e[8],"s");if(i===lr&&s===lr)t.chainId=r;else{let o=(r-Ece)/Sce;o<lr&&(o=lr),t.chainId=o,ie(o!==lr||r===kce||r===Cce,"non-canonical legacy v","v",e[6]),t.signature=Fs.from({r:Tl(e[7],32),s:Tl(e[8],32),v:r})}return t}function Nce(n,e){const t=[Et(n.nonce,"nonce"),Et(n.gasPrice||0,"gasPrice"),Et(n.gasLimit,"gasLimit"),n.to||"0x",Et(n.value,"value"),n.data];let r=lr;if(n.chainId!=lr)r=nn(n.chainId,"tx.chainId"),ie(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(n.signature){const s=n.signature.legacyChainId;s!=null&&(r=s)}if(!e)return r!==lr&&(t.push(qn(r)),t.push("0x"),t.push("0x")),ia(t);let i=BigInt(27+e.yParity);return r!==lr?i=Fs.getChainIdV(r,e.v):BigInt(e.v)!==i&&ie(!1,"tx.chainId/sig.v mismatch","sig",e),t.push(qn(i)),t.push(qn(e.r)),t.push(qn(e._s)),ia(t)}function ox(n,e){let t;try{if(t=cu(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{ie(!1,"invalid yParity","yParity",e[0])}const r=Tl(e[1],32),i=Tl(e[2],32),s=Fs.from({r,s:i,yParity:t});n.signature=s}function Ace(n){const e=ug(Ve(n).slice(1));ie(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",$e(n));const t={type:2,chainId:Kt(e[0],"chainId"),nonce:cu(e[1],"nonce"),maxPriorityFeePerGas:Kt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Kt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Kt(e[4],"gasLimit"),to:jd(e[5]),value:Kt(e[6],"value"),data:$e(e[7]),accessList:ix(e[8],"accessList")};return e.length===9||ox(t,e.slice(9)),t}function Lce(n,e){const t=[Et(n.chainId,"chainId"),Et(n.nonce,"nonce"),Et(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Et(n.maxFeePerGas||0,"maxFeePerGas"),Et(n.gasLimit,"gasLimit"),n.to||"0x",Et(n.value,"value"),n.data,sx(n.accessList||[])];return e&&(t.push(Et(e.yParity,"yParity")),t.push(qn(e.r)),t.push(qn(e.s))),Wn(["0x02",ia(t)])}function Fce(n){const e=ug(Ve(n).slice(1));ie(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",$e(n));const t={type:1,chainId:Kt(e[0],"chainId"),nonce:cu(e[1],"nonce"),gasPrice:Kt(e[2],"gasPrice"),gasLimit:Kt(e[3],"gasLimit"),to:jd(e[4]),value:Kt(e[5],"value"),data:$e(e[6]),accessList:ix(e[7],"accessList")};return e.length===8||ox(t,e.slice(8)),t}function jce(n,e){const t=[Et(n.chainId,"chainId"),Et(n.nonce,"nonce"),Et(n.gasPrice||0,"gasPrice"),Et(n.gasLimit,"gasLimit"),n.to||"0x",Et(n.value,"value"),n.data,sx(n.accessList||[])];return e&&(t.push(Et(e.yParity,"recoveryParam")),t.push(qn(e.r)),t.push(qn(e.s))),Wn(["0x01",ia(t)])}function $ce(n){let e=ug(Ve(n).slice(1)),t="3",r=null,i=null;if(e.length===4&&Array.isArray(e[0])){t="3 (network format)";const o=e[1],a=e[2],l=e[3];ie(Array.isArray(o),"invalid network format: blobs not an array","fields[1]",o),ie(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),ie(Array.isArray(l),"invalid network format: proofs not an array","fields[3]",l),ie(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),ie(o.length===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),i=[];for(let c=0;c<e[1].length;c++)i.push({data:o[c],commitment:a[c],proof:l[c]});e=e[0]}else if(e.length===5&&Array.isArray(e[0])){t="3 (EIP-7594 network format)",r=Di(e[1]);const o=e[2],a=e[3],l=e[4];ie(r===1,`unsupported EIP-7594 network format version: ${r}`,"fields[1]",r),ie(Array.isArray(o),"invalid EIP-7594 network format: blobs not an array","fields[2]",o),ie(Array.isArray(a),"invalid EIP-7594 network format: commitments not an array","fields[3]",a),ie(Array.isArray(l),"invalid EIP-7594 network format: proofs not an array","fields[4]",l),ie(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),ie(o.length*Vv===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),i=[];for(let c=0;c<o.length;c++){const u=[];for(let h=0;h<Vv;h++)u.push(l[c*Vv+h]);i.push({data:o[c],commitment:a[c],proof:Wn(u)})}e=e[0]}ie(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${t}`,"data",$e(n));const s={type:3,chainId:Kt(e[0],"chainId"),nonce:cu(e[1],"nonce"),maxPriorityFeePerGas:Kt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Kt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Kt(e[4],"gasLimit"),to:jd(e[5]),value:Kt(e[6],"value"),data:$e(e[7]),accessList:ix(e[8],"accessList"),maxFeePerBlobGas:Kt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10],blobWrapperVersion:r};i&&(s.blobs=i),ie(s.to!=null,`invalid address for transaction type: ${t}`,"data",n),ie(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",n);for(let o=0;o<s.blobVersionedHashes.length;o++)ie(wo(s.blobVersionedHashes[o],32),`invalid blobVersionedHash at index ${o}: must be length 32`,"data",n);return e.length===11||ox(s,e.slice(11)),s}function Bce(n,e,t){const r=[Et(n.chainId,"chainId"),Et(n.nonce,"nonce"),Et(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Et(n.maxFeePerGas||0,"maxFeePerGas"),Et(n.gasLimit,"gasLimit"),n.to||lV,Et(n.value,"value"),n.data,sx(n.accessList||[]),Et(n.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Rce(n.blobVersionedHashes||[],"blobVersionedHashes")];if(e&&(r.push(Et(e.yParity,"yParity")),r.push(qn(e.r)),r.push(qn(e.s)),t)){if(n.blobWrapperVersion!=null){const i=qn(n.blobWrapperVersion),s=[];for(const{proof:o}of t){const a=Ve(o),l=a.length/Vv;for(let c=0;c<a.length;c+=l)s.push(a.subarray(c,c+l))}return Wn(["0x03",ia([r,i,t.map(o=>o.data),t.map(o=>o.commitment),s])])}return Wn(["0x03",ia([r,t.map(i=>i.data),t.map(i=>i.commitment),t.map(i=>i.proof)])])}return Wn(["0x03",ia(r)])}function zce(n){const e=ug(Ve(n).slice(1));ie(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",$e(n));const t={type:4,chainId:Kt(e[0],"chainId"),nonce:cu(e[1],"nonce"),maxPriorityFeePerGas:Kt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Kt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Kt(e[4],"gasLimit"),to:jd(e[5]),value:Kt(e[6],"value"),data:$e(e[7]),accessList:ix(e[8],"accessList"),authorizationList:Pce(e[9],"authorizationList")};return e.length===10||ox(t,e.slice(10)),t}function qce(n,e){const t=[Et(n.chainId,"chainId"),Et(n.nonce,"nonce"),Et(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Et(n.maxFeePerGas||0,"maxFeePerGas"),Et(n.gasLimit,"gasLimit"),n.to||"0x",Et(n.value,"value"),n.data,sx(n.accessList||[]),Oce(n.authorizationList||[])];return e&&(t.push(Et(e.yParity,"yParity")),t.push(qn(e.r)),t.push(qn(e.s))),Wn(["0x04",ia(t)])}var Ts,Rh,Dh,Nh,Ah,Lh,Fh,jh,$h,Bh,zh,qh,Sc,il,uo,sl,Uh,Wh,Hh,Kv;const io=class io{constructor(){Te(this,Hh);Te(this,Ts);Te(this,Rh);Te(this,Dh);Te(this,Nh);Te(this,Ah);Te(this,Lh);Te(this,Fh);Te(this,jh);Te(this,$h);Te(this,Bh);Te(this,zh);Te(this,qh);Te(this,Sc);Te(this,il);Te(this,uo);Te(this,sl);Te(this,Uh);Te(this,Wh);he(this,Ts,null),he(this,Rh,null),he(this,Nh,0),he(this,Ah,lr),he(this,Lh,null),he(this,Fh,null),he(this,jh,null),he(this,Dh,"0x"),he(this,$h,lr),he(this,Bh,lr),he(this,zh,null),he(this,qh,null),he(this,Sc,null),he(this,il,null),he(this,uo,null),he(this,sl,null),he(this,Uh,null),he(this,Wh,null)}get type(){return Q(this,Ts)}set type(e){switch(e){case null:he(this,Ts,null);break;case 0:case"legacy":he(this,Ts,0);break;case 1:case"berlin":case"eip-2930":he(this,Ts,1);break;case 2:case"london":case"eip-1559":he(this,Ts,2);break;case 3:case"cancun":case"eip-4844":he(this,Ts,3);break;case 4:case"pectra":case"eip-7702":he(this,Ts,4);break;default:ie(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=Q(this,Rh);return e==null&&this.type===3?lV:e}set to(e){he(this,Rh,e==null?null:fs(e))}get nonce(){return Q(this,Nh)}set nonce(e){he(this,Nh,Di(e,"value"))}get gasLimit(){return Q(this,Ah)}set gasLimit(e){he(this,Ah,nn(e))}get gasPrice(){const e=Q(this,Lh);return e==null&&(this.type===0||this.type===1)?lr:e}set gasPrice(e){he(this,Lh,e==null?null:nn(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=Q(this,Fh);return e??(this.type===2||this.type===3?lr:null)}set maxPriorityFeePerGas(e){he(this,Fh,e==null?null:nn(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=Q(this,jh);return e??(this.type===2||this.type===3?lr:null)}set maxFeePerGas(e){he(this,jh,e==null?null:nn(e,"maxFeePerGas"))}get data(){return Q(this,Dh)}set data(e){he(this,Dh,$e(e))}get value(){return Q(this,$h)}set value(e){he(this,$h,nn(e,"value"))}get chainId(){return Q(this,Bh)}set chainId(e){he(this,Bh,nn(e))}get signature(){return Q(this,zh)||null}set signature(e){he(this,zh,e==null?null:Fs.from(e))}isValid(){const e=this.signature;if(e&&!e.isValid())return!1;const t=this.authorizationList;if(t){for(const r of t)if(!r.signature.isValid())return!1}return!0}get accessList(){const e=Q(this,qh)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){he(this,qh,e==null?null:rx(e))}get authorizationList(){const e=Q(this,Uh)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){he(this,Uh,e==null?null:e.map(t=>wce(t)))}get maxFeePerBlobGas(){const e=Q(this,Sc);return e==null&&this.type===3?lr:e}set maxFeePerBlobGas(e){he(this,Sc,e==null?null:nn(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=Q(this,il);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){ie(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)ie(wo(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}he(this,il,e)}get blobs(){return Q(this,sl)==null?null:Q(this,sl).map(e=>Object.assign({},e))}set blobs(e){if(e==null){he(this,sl,null);return}const t=[],r=[];for(let i=0;i<e.length;i++){const s=e[i];if(Qb(s)){Rt(Q(this,uo),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Ve(s);if(ie(o.length<=h1,"blob is too large",`blobs[${i}]`,s),o.length!==h1){const c=new Uint8Array(h1);c.set(o),o=c}const a=Q(this,uo).blobToKzgCommitment(o),l=$e(Q(this,uo).computeBlobKzgProof(o,a));t.push({data:$e(o),commitment:$e(a),proof:l}),r.push(T3(1,a))}else{const o=$e(s.data),a=$e(s.commitment),l=$e(s.proof);t.push({data:o,commitment:a,proof:l}),r.push(T3(1,a))}}he(this,sl,t),he(this,il,r)}get kzg(){return Q(this,uo)}set kzg(e){e==null?he(this,uo,null):he(this,uo,Ice(e))}get blobWrapperVersion(){return Q(this,Wh)}set blobWrapperVersion(e){he(this,Wh,e)}get hash(){return this.signature==null?null:ur(St(this,Hh,Kv).call(this,!0,!1))}get unsignedHash(){return ur(this.unsignedSerialized)}get from(){return this.signature==null?null:_ce(this.unsignedHash,this.signature.getCanonical())}get fromPublicKey(){return this.signature==null?null:yo.recoverPublicKey(this.unsignedHash,this.signature.getCanonical())}isSigned(){return this.signature!=null}get serialized(){return St(this,Hh,Kv).call(this,!0,!0)}get unsignedSerialized(){return St(this,Hh,Kv).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=Q(this,Sc)!=null||Q(this,il);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&Rt(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),Rt(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),Rt(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return this.type!=null?s.push(this.type):this.authorizationList&&this.authorizationList.length?s.push(4):t?s.push(2):e?(s.push(1),r||s.push(0)):r?(s.push(1),s.push(2)):(i&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return io.from(this)}toJSON(){const e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}[Mce](){return this.toString()}toString(){const e=[],t=i=>{let s=this[i];typeof s=="string"&&(s=JSON.stringify(s)),e.push(`${i}: ${s}`)};this.type&&t("type"),t("to"),t("data"),t("nonce"),t("gasLimit"),t("value"),this.chainId!=null&&t("chainId"),this.signature&&(t("from"),e.push(`signature: ${this.signature.toString()}`));const r=this.authorizationList;if(r){const i=[];for(const s of r){const o=[];o.push(`address: ${JSON.stringify(s.address)}`),s.nonce!=null&&o.push(`nonce: ${s.nonce}`),s.chainId!=null&&o.push(`chainId: ${s.chainId}`),s.signature&&o.push(`signature: ${s.signature.toString()}`),i.push(`Authorization { ${o.join(", ")} }`)}e.push(`authorizations: [ ${i.join(", ")} ]`)}return`Transaction { ${e.join(", ")} }`}static from(e){if(e==null)return new io;if(typeof e=="string"){const r=Ve(e);if(r[0]>=127)return io.from(Dce(r));switch(r[0]){case 1:return io.from(Fce(r));case 2:return io.from(Ace(r));case 3:return io.from($ce(r));case 4:return io.from(zce(r))}Rt(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new io;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=Fs.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.authorizationList!=null&&(t.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobWrapperVersion!=null&&(t.blobWrapperVersion=e.blobWrapperVersion),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&(ie(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),ie(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(ie(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),ie(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}};Ts=new WeakMap,Rh=new WeakMap,Dh=new WeakMap,Nh=new WeakMap,Ah=new WeakMap,Lh=new WeakMap,Fh=new WeakMap,jh=new WeakMap,$h=new WeakMap,Bh=new WeakMap,zh=new WeakMap,qh=new WeakMap,Sc=new WeakMap,il=new WeakMap,uo=new WeakMap,sl=new WeakMap,Uh=new WeakMap,Wh=new WeakMap,Hh=new WeakSet,Kv=function(e,t){Rt(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return Nce(this,r);case 1:return jce(this,r);case 2:return Lce(this,r);case 3:return Bce(this,r,t?this.blobs:null);case 4:return qce(this,r)}Rt(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let $y=io;function Uce(n){return ie(typeof n.address=="string","invalid address for hashAuthorization","auth.address",n),ur(Wn(["0x05",ia([n.chainId!=null?qn(n.chainId):"0x",fs(n.address),n.nonce!=null?qn(n.nonce):"0x"])]))}function WO(n){return ur(Ic(n))}function Wce(n){return typeof n=="string"&&(n=Ic(n)),ur(Wn([Ic(dce),Ic(String(n.length)),n]))}const uV=new Uint8Array(32);uV.fill(0);const Hce=BigInt(-1),hV=BigInt(0),dV=BigInt(1),Yce=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Gce(n){const e=Ve(n),t=e.length%32;return t?Wn([e,uV.slice(t)]):$e(e)}const Vce=od(dV,32),Kce=od(hV,32),M3={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},d1=["name","version","chainId","verifyingContract","salt"];function I3(n){return function(e){return ie(typeof e=="string",`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const Xce={name:I3("name"),version:I3("version"),chainId:function(n){const e=nn(n,"domain.chainId");return ie(e>=0,"invalid chain ID","domain.chainId",n),Number.isSafeInteger(e)?Number(e):kae(e)},verifyingContract:function(n){try{return fs(n).toLowerCase()}catch{}ie(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){const e=Ve(n,"domain.salt");return ie(e.length===32,'invalid domain value "salt"',"domain.salt",n),$e(e)}};function f1(n){{const e=n.match(/^(u?)int(\d+)$/);if(e){const t=e[1]==="",r=parseInt(e[2]);ie(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",n);const i=Sae(Yce,t?r-1:r),s=t?(i+dV)*Hce:hV;return function(o){const a=nn(o,"value");return ie(a>=s&&a<=i,`value out-of-bounds for ${n}`,"value",a),od(t?_ae(a,256):a,32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return ie(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",n),function(r){const i=Ve(r);return ie(i.length===t,`invalid length for ${n}`,"value",r),Gce(r)}}}switch(n){case"address":return function(e){return Tl(fs(e),32)};case"bool":return function(e){return e?Vce:Kce};case"bytes":return function(e){return ur(e)};case"string":return function(e){return WO(e)}}return null}function P3(n,e){return`${n}(${e.map(({name:t,type:r})=>r+" "+t).join(",")})`}function B0(n){const e=n.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:n}}var Zm,Qo,Yh,Ib,fV;const Qi=class Qi{constructor(e){Te(this,Ib);ce(this,"primaryType");Te(this,Zm);Te(this,Qo);Te(this,Yh);he(this,Qo,new Map),he(this,Yh,new Map);const t=new Map,r=new Map,i=new Map,s={};Object.keys(e).forEach(l=>{s[l]=e[l].map(({name:c,type:u})=>{let{base:h,index:d}=B0(u);return h==="int"&&!e.int&&(h="int256"),h==="uint"&&!e.uint&&(h="uint256"),{name:c,type:h+(d||"")}}),t.set(l,new Set),r.set(l,[]),i.set(l,new Set)}),he(this,Zm,JSON.stringify(s));for(const l in s){const c=new Set;for(const u of s[l]){ie(!c.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(l)}`,"types",e),c.add(u.name);const h=B0(u.type).base;ie(h!==l,`circular type reference to ${JSON.stringify(h)}`,"types",e),!f1(h)&&(ie(r.has(h),`unknown type ${JSON.stringify(h)}`,"types",e),r.get(h).push(l),t.get(l).add(h))}}const o=Array.from(r.keys()).filter(l=>r.get(l).length===0);ie(o.length!==0,"missing primary type","types",e),ie(o.length===1,`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),Ri(this,{primaryType:o[0]});function a(l,c){ie(!c.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",e),c.add(l);for(const u of t.get(l))if(r.has(u)){a(u,c);for(const h of c)i.get(h).add(u)}c.delete(l)}a(this.primaryType,new Set);for(const[l,c]of i){const u=Array.from(c);u.sort(),Q(this,Qo).set(l,P3(l,s[l])+u.map(h=>P3(h,s[h])).join(""))}}get types(){return JSON.parse(Q(this,Zm))}getEncoder(e){let t=Q(this,Yh).get(e);return t||(t=St(this,Ib,fV).call(this,e),Q(this,Yh).set(e,t)),t}encodeType(e){const t=Q(this,Qo).get(e);return ie(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return ur(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(f1(e))return r(e,t);const i=B0(e).array;if(i)return ie(i.count===-1||i.count===t.length,`array length mismatch; expected length ${i.count}`,"value",t),t.map(o=>this._visit(i.prefix,o,r));const s=this.types[e];if(s)return s.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,t[a],r),o),{});ie(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Qi(e)}static getPrimaryType(e){return Qi.from(e).primaryType}static hashStruct(e,t,r){return Qi.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){if(e[r]==null)continue;const i=M3[r];ie(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:i})}return t.sort((r,i)=>d1.indexOf(r.name)-d1.indexOf(i.name)),Qi.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return Wn(["0x1901",Qi.hashDomain(e),Qi.from(t).hash(r)])}static hash(e,t,r){return ur(Qi.encode(e,t,r))}static async resolveNames(e,t,r,i){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const s={};e.verifyingContract&&!wo(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=Qi.from(t);o.visit(r,(a,l)=>(a==="address"&&!wo(l,20)&&(s[l]="0x"),l));for(const a in s)s[a]=await i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=o.visit(r,(a,l)=>a==="address"&&s[l]?s[l]:l),{domain:e,value:r}}static getPayload(e,t,r){Qi.hashDomain(e);const i={},s=[];d1.forEach(l=>{const c=e[l];c!=null&&(i[l]=Xce[l](c),s.push({name:l,type:M3[l]}))});const o=Qi.from(t);t=o.types;const a=Object.assign({},t);return ie(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(l,c)=>{if(l.match(/^bytes(\d*)/))return $e(Ve(c));if(l.match(/^u?int/))return nn(c).toString();switch(l){case"address":return c.toLowerCase();case"bool":return!!c;case"string":return ie(typeof c=="string","invalid string","value",c),c}ie(!1,"unsupported type","type",l)})}}};Zm=new WeakMap,Qo=new WeakMap,Yh=new WeakMap,Ib=new WeakSet,fV=function(e){{const i=f1(e);if(i)return i}const t=B0(e).array;if(t){const i=t.prefix,s=this.getEncoder(i);return o=>{ie(t.count===-1||t.count===o.length,`array length mismatch; expected length ${t.count}`,"value",o);let a=o.map(s);return Q(this,Qo).has(i)&&(a=a.map(ur)),ur(Wn(a))}}const r=this.types[e];if(r){const i=WO(Q(this,Qo).get(e));return s=>{const o=r.map(({name:a,type:l})=>{const c=this.getEncoder(l)(s[a]);return Q(this,Qo).has(l)?ur(c):c});return o.unshift(i),Wn(o)}}ie(!1,`unknown type: ${e}`,"type",e)};let By=Qi;BigInt(0);function pV(n){const e={};n.to&&(e.to=n.to),n.from&&(e.from=n.from),n.data&&(e.data=$e(n.data));const t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of t)!(i in n)||n[i]==null||(e[i]=nn(n[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)!(i in n)||n[i]==null||(e[i]=Di(n[i],`request.${i}`));return n.accessList&&(e.accessList=rx(n.accessList)),n.authorizationList&&(e.authorizationList=n.authorizationList.slice()),"blockTag"in n&&(e.blockTag=n.blockTag),"enableCcipRead"in n&&(e.enableCcipRead=!!n.enableCcipRead),"customData"in n&&(e.customData=n.customData),"blobVersionedHashes"in n&&n.blobVersionedHashes&&(e.blobVersionedHashes=n.blobVersionedHashes.slice()),"kzg"in n&&(e.kzg=n.kzg),"blobWrapperVersion"in n&&(e.blobWrapperVersion=n.blobWrapperVersion),"blobs"in n&&n.blobs&&(e.blobs=n.blobs.map(i=>Qb(i)?$e(i):Object.assign({},i))),e}function Wl(n,e){if(n.provider)return n.provider;Rt(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function O3(n,e){let t=pV(e);if(t.to!=null&&(t.to=kp(t.to,n)),t.from!=null){const r=t.from;t.from=Promise.all([n.getAddress(),kp(r,n)]).then(([i,s])=>(ie(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else t.from=n.getAddress();return await MO(t)}class mV{constructor(e){ce(this,"provider");Ri(this,{provider:e||null})}async getNonce(e){return Wl(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await O3(this,e)}async populateTransaction(e){const t=Wl(this,"populateTransaction"),r=await O3(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(r.chainId!=null){const o=nn(r.chainId);ie(o===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=i.chainId;const s=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||s)?ie(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&s&&ie(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await t.getFeeData();Rt(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await t.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(Rt(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):Rt(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await MO(r)}async populateAuthorization(e){const t=Object.assign({},e);return t.chainId==null&&(t.chainId=(await Wl(this,"getNetwork").getNetwork()).chainId),t.nonce==null&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return Wl(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Wl(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Wl(this,"resolveName").resolveName(e)}async sendTransaction(e){const t=Wl(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const i=$y.from(r);return await t.broadcastTransaction(await this.signTransaction(i))}authorize(e){Rt(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}var Gh,Xv;const BD=class BD extends mV{constructor(t,r){super(r);Te(this,Gh);ce(this,"address");Ri(this,{address:t})}async getAddress(){return this.address}connect(t){return new BD(this.address,t)}async signTransaction(t){St(this,Gh,Xv).call(this,"transactions","signTransaction")}async signMessage(t){St(this,Gh,Xv).call(this,"messages","signMessage")}async signTypedData(t,r,i){St(this,Gh,Xv).call(this,"typed-data","signTypedData")}};Gh=new WeakSet,Xv=function(t,r){Rt(!1,`VoidSigner cannot sign ${t}`,"UNSUPPORTED_OPERATION",{operation:r})};let aI=BD;var Vh;const zD=class zD extends mV{constructor(t,r){super(r);ce(this,"address");Te(this,Vh);ie(t&&typeof t.sign=="function","invalid private key","privateKey","[ REDACTED ]"),he(this,Vh,t);const i=mg(this.signingKey.publicKey);Ri(this,{address:i})}get signingKey(){return Q(this,Vh)}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(t){return new zD(Q(this,Vh),t)}async signTransaction(t){t=pV(t);const{to:r,from:i}=await MO({to:t.to?kp(t.to,this):void 0,from:t.from?kp(t.from,this):void 0});r!=null&&(t.to=r),i!=null&&(t.from=i),t.from!=null&&(ie(fs(t.from)===this.address,"transaction from address mismatch","tx.from",t.from),delete t.from);const s=$y.from(t);return s.signature=this.signingKey.sign(s.unsignedHash),s.serialized}async signMessage(t){return this.signMessageSync(t)}signMessageSync(t){return this.signingKey.sign(Wce(t)).serialized}authorizeSync(t){ie(typeof t.address=="string","invalid address for authorizeSync","auth.address",t);const r=this.signingKey.sign(Uce(t));return Object.assign({},{address:fs(t.address),nonce:nn(t.nonce||0),chainId:nn(t.chainId||0)},{signature:r})}async authorize(t){return t=Object.assign({},t,{address:await kp(t.address,this)}),this.authorizeSync(await this.populateAuthorization(t))}async signTypedData(t,r,i){const s=await By.resolveNames(t,r,i,async o=>{Rt(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:o}});const a=await this.provider.resolveName(o);return Rt(a!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:o}),a});return this.signingKey.sign(By.hash(s.domain,r,s.value)).serialized}};Vh=new WeakMap;let lI=zD;const zy=" !#$%&'()*+,-./<=>?@[]^_`{|}~",Qce=/^[a-z]*$/i;function R3(n,e){let t=97;return n.reduce((r,i)=>(i===e?t++:i.match(Qce)?r.push(String.fromCharCode(t)+i):(t=97,r.push(i)),r),[])}function Jce(n,e){for(let i=zy.length-1;i>=0;i--)n=n.split(zy[i]).join(e.substring(2*i,2*i+2));const t=[],r=n.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(i,s,o,a)=>{if(o)for(let l=parseInt(o);l>=0;l--)t.push(";");else t.push(s.toLowerCase());return""});if(r)throw new Error(`leftovers: ${JSON.stringify(r)}`);return R3(R3(t,";"),":")}function Zce(n){return ie(n[0]==="0","unsupported auwl data","data",n),Jce(n.substring(1+2*zy.length),n.substring(1,1+2*zy.length))}class eue{constructor(e){ce(this,"locale");Ri(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}var Kh,eg,kc,tg,cI;class tue extends eue{constructor(t,r,i){super(t);Te(this,tg);Te(this,Kh);Te(this,eg);Te(this,kc);he(this,Kh,r),he(this,eg,i),he(this,kc,null)}get _data(){return Q(this,Kh)}_decodeWords(){return Zce(Q(this,Kh))}getWord(t){const r=St(this,tg,cI).call(this);return ie(t>=0&&t<r.length,`invalid word index: ${t}`,"index",t),r[t]}getWordIndex(t){return St(this,tg,cI).call(this).indexOf(t)}}Kh=new WeakMap,eg=new WeakMap,kc=new WeakMap,tg=new WeakSet,cI=function(){if(Q(this,kc)==null){const t=this._decodeWords();if(WO(t.join(`
`)+`
`)!==Q(this,eg))throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);he(this,kc,t)}return Q(this,kc)};const nue="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",rue="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let p1=null;class Yc extends tue{constructor(){super("en",nue,rue)}static wordlist(){return p1==null&&(p1=new Yc),p1}}function gV(n){return(1<<n)-1<<8-n&255}function iue(n){return(1<<n)-1&255}function m1(n,e){aG("NFKD"),e==null&&(e=Yc.wordlist());const t=e.split(n);ie(t.length%3===0&&t.length>=12&&t.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const r=new Uint8Array(Math.ceil(11*t.length/8));let i=0;for(let c=0;c<t.length;c++){let u=e.getWordIndex(t[c].normalize("NFKD"));ie(u>=0,`invalid mnemonic word at index ${c}`,"mnemonic","[ REDACTED ]");for(let h=0;h<11;h++)u&1<<10-h&&(r[i>>3]|=1<<7-i%8),i++}const s=32*t.length/3,o=t.length/3,a=gV(o),l=Ve(ds(r.slice(0,s/8)))[0]&a;return ie(l===(r[r.length-1]&a),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),$e(r.slice(0,s/8))}function g1(n,e){ie(n.length%4===0&&n.length>=16&&n.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),e==null&&(e=Yc.wordlist());const t=[0];let r=11;for(let o=0;o<n.length;o++)r>8?(t[t.length-1]<<=8,t[t.length-1]|=n[o],r-=8):(t[t.length-1]<<=r,t[t.length-1]|=n[o]>>8-r,t.push(n[o]&iue(8-r)),r+=3);const i=n.length/4,s=parseInt(ds(n).substring(2,4),16)&gV(i);return t[t.length-1]<<=i,t[t.length-1]|=s>>8-i,e.join(t.map(o=>e.getWord(o)))}const v1={};class Cm{constructor(e,t,r,i,s){ce(this,"phrase");ce(this,"password");ce(this,"wordlist");ce(this,"entropy");i==null&&(i=""),s==null&&(s=Yc.wordlist()),Xb(e,v1,"Mnemonic"),Ri(this,{phrase:r,password:i,wordlist:s,entropy:t})}computeSeed(){const e=Ic("mnemonic"+this.password,"NFKD");return hg(Ic(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,t,r){const i=m1(e,r);return e=g1(Ve(i),r),new Cm(v1,i,e,t,r)}static fromEntropy(e,t,r){const i=Ve(e,"entropy"),s=g1(i,r);return new Cm(v1,$e(i),s,t,r)}static entropyToPhrase(e,t){const r=Ve(e,"entropy");return g1(r,t)}static phraseToEntropy(e,t){return m1(e,t)}static isValidMnemonic(e,t){try{return m1(e,t),!0}catch{}return!1}}/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var vr=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},y1=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},Qv,Gi,eo;const sue={16:10,24:12,32:14},oue=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],Wi=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],z0=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],aue=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],lue=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],cue=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],uue=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],hue=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],due=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],fue=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],pue=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],mue=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],gue=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],vue=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],yue=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function b1(n){const e=[];for(let t=0;t<n.length;t+=4)e.push(n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3]);return e}class HO{get key(){return vr(this,Qv,"f").slice()}constructor(e){if(Qv.set(this,void 0),Gi.set(this,void 0),eo.set(this,void 0),!(this instanceof HO))throw Error("AES must be instanitated with `new`");y1(this,Qv,new Uint8Array(e),"f");const t=sue[this.key.length];if(t==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");y1(this,eo,[],"f"),y1(this,Gi,[],"f");for(let u=0;u<=t;u++)vr(this,eo,"f").push([0,0,0,0]),vr(this,Gi,"f").push([0,0,0,0]);const r=(t+1)*4,i=this.key.length/4,s=b1(this.key);let o;for(let u=0;u<i;u++)o=u>>2,vr(this,eo,"f")[o][u%4]=s[u],vr(this,Gi,"f")[t-o][u%4]=s[u];let a=0,l=i,c;for(;l<r;){if(c=s[i-1],s[0]^=Wi[c>>16&255]<<24^Wi[c>>8&255]<<16^Wi[c&255]<<8^Wi[c>>24&255]^oue[a]<<24,a+=1,i!=8)for(let f=1;f<i;f++)s[f]^=s[f-1];else{for(let f=1;f<i/2;f++)s[f]^=s[f-1];c=s[i/2-1],s[i/2]^=Wi[c&255]^Wi[c>>8&255]<<8^Wi[c>>16&255]<<16^Wi[c>>24&255]<<24;for(let f=i/2+1;f<i;f++)s[f]^=s[f-1]}let u=0,h,d;for(;u<i&&l<r;)h=l>>2,d=l%4,vr(this,eo,"f")[h][d]=s[u],vr(this,Gi,"f")[t-h][d]=s[u++],l++}for(let u=1;u<t;u++)for(let h=0;h<4;h++)c=vr(this,Gi,"f")[u][h],vr(this,Gi,"f")[u][h]=mue[c>>24&255]^gue[c>>16&255]^vue[c>>8&255]^yue[c&255]}encrypt(e){if(e.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");const t=vr(this,eo,"f").length-1,r=[0,0,0,0];let i=b1(e);for(let a=0;a<4;a++)i[a]^=vr(this,eo,"f")[0][a];for(let a=1;a<t;a++){for(let l=0;l<4;l++)r[l]=aue[i[l]>>24&255]^lue[i[(l+1)%4]>>16&255]^cue[i[(l+2)%4]>>8&255]^uue[i[(l+3)%4]&255]^vr(this,eo,"f")[a][l];i=r.slice()}const s=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=vr(this,eo,"f")[t][a],s[4*a]=(Wi[i[a]>>24&255]^o>>24)&255,s[4*a+1]=(Wi[i[(a+1)%4]>>16&255]^o>>16)&255,s[4*a+2]=(Wi[i[(a+2)%4]>>8&255]^o>>8)&255,s[4*a+3]=(Wi[i[(a+3)%4]&255]^o)&255;return s}decrypt(e){if(e.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const t=vr(this,Gi,"f").length-1,r=[0,0,0,0];let i=b1(e);for(let a=0;a<4;a++)i[a]^=vr(this,Gi,"f")[0][a];for(let a=1;a<t;a++){for(let l=0;l<4;l++)r[l]=hue[i[l]>>24&255]^due[i[(l+3)%4]>>16&255]^fue[i[(l+2)%4]>>8&255]^pue[i[(l+1)%4]&255]^vr(this,Gi,"f")[a][l];i=r.slice()}const s=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=vr(this,Gi,"f")[t][a],s[4*a]=(z0[i[a]>>24&255]^o>>24)&255,s[4*a+1]=(z0[i[(a+3)%4]>>16&255]^o>>16)&255,s[4*a+2]=(z0[i[(a+2)%4]>>8&255]^o>>8)&255,s[4*a+3]=(z0[i[(a+1)%4]&255]^o)&255;return s}}Qv=new WeakMap,Gi=new WeakMap,eo=new WeakMap;class bue{constructor(e,t,r){if(r&&!(this instanceof r))throw new Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new HO(t)},name:{enumerable:!0,value:e}})}}var Pu=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},Hi=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Zf,Jl,Vi;class qy extends bue{constructor(e,t){super("CTR",e,qy),Zf.set(this,void 0),Jl.set(this,void 0),Vi.set(this,void 0),Pu(this,Vi,new Uint8Array(16),"f"),Hi(this,Vi,"f").fill(0),Pu(this,Zf,Hi(this,Vi,"f"),"f"),Pu(this,Jl,16,"f"),t==null&&(t=1),typeof t=="number"?this.setCounterValue(t):this.setCounterBytes(t)}get counter(){return new Uint8Array(Hi(this,Vi,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let t=15;t>=0;--t)Hi(this,Vi,"f")[t]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(e.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");Hi(this,Vi,"f").set(e)}increment(){for(let e=15;e>=0;e--)if(Hi(this,Vi,"f")[e]===255)Hi(this,Vi,"f")[e]=0;else{Hi(this,Vi,"f")[e]++;break}}encrypt(e){var t,r;const i=new Uint8Array(e);for(let s=0;s<i.length;s++)Hi(this,Jl,"f")===16&&(Pu(this,Zf,this.aes.encrypt(Hi(this,Vi,"f")),"f"),Pu(this,Jl,0,"f"),this.increment()),i[s]^=Hi(this,Zf,"f")[Pu(this,Jl,(r=Hi(this,Jl,"f"),t=r++,r),"f"),t];return i}decrypt(e){return this.encrypt(e)}}Zf=new WeakMap,Jl=new WeakMap,Vi=new WeakMap;function Ef(n,e){for(n=String(n);n.length<e;)n="0"+n;return n}function vV(n){return typeof n=="string"?Ic(n,"NFKC"):Bu(n)}const xue="m/44'/60'/0'/0/0";function yV(n){const e=n.salt!=null?Ve(n.salt,"options.salt"):sa(32);let t=1<<17,r=8,i=1;return n.scrypt&&(n.scrypt.N&&(t=n.scrypt.N),n.scrypt.r&&(r=n.scrypt.r),n.scrypt.p&&(i=n.scrypt.p)),ie(typeof t=="number"&&t>0&&Number.isSafeInteger(t)&&(BigInt(t)&BigInt(t-1))===BigInt(0),"invalid scrypt N parameter","options.N",t),ie(typeof r=="number"&&r>0&&Number.isSafeInteger(r),"invalid scrypt r parameter","options.r",r),ie(typeof i=="number"&&i>0&&Number.isSafeInteger(i),"invalid scrypt p parameter","options.p",i),{name:"scrypt",dkLen:32,salt:e,N:t,r,p:i}}function bV(n,e,t,r){const i=Ve(t.privateKey,"privateKey"),s=r.iv!=null?Ve(r.iv,"options.iv"):sa(16);ie(s.length===16,"invalid options.iv length","options.iv",r.iv);const o=r.uuid!=null?Ve(r.uuid,"options.uuid"):sa(16);ie(o.length===16,"invalid options.uuid length","options.uuid",r.iv);const a=n.slice(0,16),l=n.slice(16,32),c=new qy(a,s),u=Ve(c.encrypt(i)),h=ur(Wn([l,u])),d={address:t.address.substring(2).toLowerCase(),id:Pae(o),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:$e(s).substring(2)},ciphertext:$e(u).substring(2),kdf:"scrypt",kdfparams:{salt:$e(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:h.substring(2)}};if(t.mnemonic){const f=r.client!=null?r.client:`ethers/${oG}`,m=t.mnemonic.path||xue,g=t.mnemonic.locale||"en",v=n.slice(32,64),y=Ve(t.mnemonic.entropy,"account.mnemonic.entropy"),b=sa(16),w=new qy(v,b),S=Ve(w.encrypt(y)),_=new Date,C="UTC--"+(_.getUTCFullYear()+"-"+Ef(_.getUTCMonth()+1,2)+"-"+Ef(_.getUTCDate(),2)+"T"+Ef(_.getUTCHours(),2)+"-"+Ef(_.getUTCMinutes(),2)+"-"+Ef(_.getUTCSeconds(),2)+".0Z")+"--"+d.address;d["x-ethers"]={client:f,gethFilename:C,path:m,locale:g,mnemonicCounter:$e(b).substring(2),mnemonicCiphertext:$e(S).substring(2),version:"0.1"}}return JSON.stringify(d)}function wue(n,e,t){t==null&&(t={});const r=vV(e),i=yV(t),s=fg(r,i.salt,i.N,i.r,i.p,64);return bV(Ve(s),i,n,t)}async function _ue(n,e,t){t==null&&(t={});const r=vV(e),i=yV(t),s=await dg(r,i.salt,i.N,i.r,i.p,64,t.progressCallback);return bV(Ve(s),i,n,t)}const x1="m/44'/60'/0'/0/0",Sue=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),wl=2147483648,kue=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Cue="0123456789abcdef";function Uy(n,e){let t="";for(;n;)t=Cue[n%16]+t,n=Math.trunc(n/16);for(;t.length<e*2;)t="0"+t;return"0x"+t}function uI(n){const e=Ve(n),t=IO(ds(ds(e)),0,4),r=Wn([e,t]);return Tae(r)}const so={};function xV(n,e,t,r){const i=new Uint8Array(37);n&wl?(Rt(r!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),i.set(Ve(r),1)):i.set(Ve(t));for(let o=24;o>=0;o-=8)i[33+(o>>3)]=n>>24-o&255;const s=Ve(Ld("sha512",e,i));return{IL:s.slice(0,32),IR:s.slice(32)}}function wV(n,e){const t=e.split("/");ie(t.length>0,"invalid path","path",e),t[0]==="m"&&(ie(n.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${n.depth}`,"path",e),t.shift());let r=n;for(let i=0;i<t.length;i++){const s=t[i];if(s.match(/^[0-9]+'$/)){const o=parseInt(s.substring(0,s.length-1));ie(o<wl,"invalid path index",`path[${i}]`,s),r=r.deriveChild(wl+o)}else if(s.match(/^[0-9]+$/)){const o=parseInt(s);ie(o<wl,"invalid path index",`path[${i}]`,s),r=r.deriveChild(o)}else ie(!1,"invalid path component",`path[${i}]`,s)}return r}var ng,hI,Cc,ep;const ws=class ws extends lI{constructor(t,r,i,s,o,a,l,c,u){super(r,u);Te(this,ng);ce(this,"publicKey");ce(this,"fingerprint");ce(this,"parentFingerprint");ce(this,"mnemonic");ce(this,"chainCode");ce(this,"path");ce(this,"index");ce(this,"depth");Xb(t,so,"HDNodeWallet"),Ri(this,{publicKey:r.compressedPublicKey});const h=IO(Fd(ds(this.publicKey)),0,4);Ri(this,{parentFingerprint:i,fingerprint:h,chainCode:s,path:o,index:a,depth:l}),Ri(this,{mnemonic:c})}connect(t){return new ws(so,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,t)}async encrypt(t,r){return await _ue(St(this,ng,hI).call(this),t,{progressCallback:r})}encryptSync(t){return wue(St(this,ng,hI).call(this),t)}get extendedKey(){return Rt(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),uI(Wn(["0x0488ADE4",Uy(this.depth,1),this.parentFingerprint,Uy(this.index,4),this.chainCode,Wn(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new Tm(so,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(t){const r=Di(t,"index");ie(r<=4294967295,"invalid index","index",r);let i=this.path;i&&(i+="/"+(r&~wl),r&wl&&(i+="'"));const{IR:s,IL:o}=xV(r,this.chainCode,this.publicKey,this.privateKey),a=new yo(od((cG(o)+BigInt(this.privateKey))%kue,32));return new ws(so,a,this.fingerprint,$e(s),i,r,this.depth+1,this.mnemonic,this.provider)}derivePath(t){return wV(this,t)}static fromExtendedKey(t){const r=qn(Mae(t));ie(r.length===82||uI(r.slice(0,78))===t,"invalid extended key","extendedKey","[ REDACTED ]");const i=r[4],s=$e(r.slice(5,9)),o=parseInt($e(r.slice(9,13)).substring(2),16),a=$e(r.slice(13,45)),l=r.slice(45,78);switch($e(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const c=$e(l);return new Tm(so,mg(c),c,s,a,null,o,i,null)}case"0x0488ade4":case"0x04358394 ":if(l[0]!==0)break;return new ws(so,new yo(l.slice(1)),s,a,null,o,i,null,null)}ie(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(t,r,i){var o;t==null&&(t=""),r==null&&(r=x1),i==null&&(i=Yc.wordlist());const s=Cm.fromEntropy(sa(16),t,i);return St(o=ws,Cc,ep).call(o,s.computeSeed(),s).derivePath(r)}static fromMnemonic(t,r){var i;return r||(r=x1),St(i=ws,Cc,ep).call(i,t.computeSeed(),t).derivePath(r)}static fromPhrase(t,r,i,s){var a;r==null&&(r=""),i==null&&(i=x1),s==null&&(s=Yc.wordlist());const o=Cm.fromPhrase(t,r,s);return St(a=ws,Cc,ep).call(a,o.computeSeed(),o).derivePath(i)}static fromSeed(t){var r;return St(r=ws,Cc,ep).call(r,t,null)}};ng=new WeakSet,hI=function(){const t={address:this.address,privateKey:this.privateKey},r=this.mnemonic;return this.path&&r&&r.wordlist.locale==="en"&&r.password===""&&(t.mnemonic={path:this.path,locale:"en",entropy:r.entropy}),t},Cc=new WeakSet,ep=function(t,r){ie(Qb(t),"invalid seed","seed","[REDACTED]");const i=Ve(t,"seed");ie(i.length>=16&&i.length<=64,"invalid seed","seed","[REDACTED]");const s=Ve(Ld("sha512",Sue,i)),o=new yo($e(s.slice(0,32)));return new ws(so,o,"0x00000000",$e(s.slice(32)),"m",0,0,r,null)},Te(ws,Cc);let Em=ws;class Tm extends aI{constructor(t,r,i,s,o,a,l,c,u){super(r,u);ce(this,"publicKey");ce(this,"fingerprint");ce(this,"parentFingerprint");ce(this,"chainCode");ce(this,"path");ce(this,"index");ce(this,"depth");Xb(t,so,"HDNodeVoidWallet"),Ri(this,{publicKey:i});const h=IO(Fd(ds(i)),0,4);Ri(this,{publicKey:i,fingerprint:h,parentFingerprint:s,chainCode:o,path:a,index:l,depth:c})}connect(t){return new Tm(so,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,t)}get extendedKey(){return Rt(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),uI(Wn(["0x0488B21E",Uy(this.depth,1),this.parentFingerprint,Uy(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(t){const r=Di(t,"index");ie(r<=4294967295,"invalid index","index",r);let i=this.path;i&&(i+="/"+(r&~wl),r&wl&&(i+="'"));const{IR:s,IL:o}=xV(r,this.chainCode,this.publicKey,null),a=yo.addPoints(o,this.publicKey,!0),l=mg(a);return new Tm(so,l,a,this.fingerprint,$e(s),i,r,this.depth+1,this.provider)}derivePath(t){return wV(this,t)}}class D3{constructor(e){ce(this,"mnemonic");ce(this,"walletAddress");ce(this,"chainID");ce(this,"cachedPrivateKeyHex",null);this.mnemonic=e.mnemonic,this.walletAddress=e.walletAddress,this.chainID=e.chainID||10900}generateTxID(){const e=Date.now(),t=Math.floor(Math.random()*1e6);return`tx-${e}-${t}`}async getPrivateKeyHex(){if(this.cachedPrivateKeyHex!==null)return this.cachedPrivateKeyHex;const e=Em.fromPhrase(this.mnemonic.trim(),"","m/44'/60'/0'/0/0");if(e.address.toLowerCase()!==this.walletAddress.toLowerCase())throw new Error(`Address mismatch: derived ${e.address} does not match ${this.walletAddress}`);const t=BigInt(e.privateKey),r=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(t===0n||t>=r)throw new Error("Invalid private key: must be between 1 and secp256k1 order - 1");const s=t.toString(16).toLowerCase().padStart(64,"0");if(!/^[0-9a-f]{64}$/.test(s))throw new Error("Invalid private key format: must be 64 lowercase hex characters (0-9, a-f) without 0x prefix");return this.cachedPrivateKeyHex=s,s}async signPayload(e){const t=await this.getPrivateKeyHex(),r=Math.floor(Date.now()/1e3);let i;e.deadline&&(i=parseInt(e.deadline,10));const s={txId:"",sigType:"ECDSA_LEGACY",threshold:1,timestamp:r,payload:e};i!==void 0&&(s.deadline=i);const o=await Oi.generateSingleSignature(JSON.stringify(s),t,this.walletAddress.toLowerCase());if(!o.success||!o.signature)throw new Error(o.error||"Failed to generate signature");return o.signature}async buildCompleteMessage(e,t,r=3600){const s=Math.floor(Date.now()/1e3)+r,o=await t.getNextNonce();return{...e,owner:this.walletAddress,nonce:o,deadline:s.toString()}}buildEIP712Tx(e,t,r){const i=Math.floor(Date.now()/1e3);let s;e.deadline&&(s=parseInt(e.deadline,10));const a={txhash:r||this.generateTxID(),sigType:1,threshold:1,timestamp:i,payload:e,signatures:[{signer:this.walletAddress,signature:t}]};return s!==void 0&&(a.deadline=s),a}getWalletAddress(){return this.walletAddress}getChainID(){return this.chainID}}class Eue{constructor(e){ce(this,"httpClient");ce(this,"infoClient");ce(this,"nonceManager");ce(this,"mnemonic");ce(this,"chainID");ce(this,"walletAddress");ce(this,"signatureBuilder");this.httpClient=new TO(e.baseURL,e.maxRetries??3),this.infoClient=new Ls({baseURL:e.baseURL,sessionToken:e.sessionToken}),this.chainID=e.chainID??10900,this.mnemonic=e.mnemonic,e.mnemonic&&(this.nonceManager=new sG(this.infoClient))}getSignatureBuilder(){if(!this.signatureBuilder){if(!this.walletAddress)throw new Error(this.getNotInitializedMessage());if(!this.mnemonic)throw new Error("Mnemonic is required for write operations");this.signatureBuilder=new D3({mnemonic:this.mnemonic,walletAddress:this.walletAddress,chainID:this.chainID})}return this.signatureBuilder}getNotInitializedMessage(){return"Client not initialized. Call initialize() first."}getNonceManager(){if(!this.nonceManager)throw new Error("NonceManager not initialized. Mnemonic required.");return this.nonceManager}getNonceProvider(){return{getNextNonce:()=>this.getNextNonce()}}async initialize(){if(!this.mnemonic)throw new Error("Mnemonic is required for write operations");await Oi.initialize();const e=await Oi.generateAddress(this.mnemonic,0);if(!e.success||!e.address)throw new Error(`Failed to generate wallet address: ${e.error}`);this.walletAddress=e.address,this.signatureBuilder=new D3({mnemonic:this.mnemonic,walletAddress:this.walletAddress,chainID:this.chainID})}getWalletAddress(){if(!this.walletAddress)throw new Error(this.getNotInitializedMessage());return this.walletAddress}async refreshNonceFromServer(){const e=this.getWalletAddress(),t=await this.infoClient.getNonceStatus(e,!1);console.log("[BaseSignedClient] Refreshed nonce from server",{walletAddress:e,serverNextNonce:t.nextNonce})}async getNextNonce(){const e=this.getWalletAddress(),r=(await this.infoClient.getNonceStatus(e,!0)).nextNonce;return console.log("[BaseSignedClient] Server assigned nonce",{walletAddress:e,nextNonce:r}),r.toString()}hexSignatureToBase64(e){const t=e.replace(/^0x/i,"");if(/^[0-9a-fA-F]+$/.test(t)&&(t.length===128||t.length===130)){const r=t.length/2,i=new Uint8Array(r);for(let s=0;s<r;s++)i[s]=parseInt(t.slice(s*2,s*2+2),16);return btoa(String.fromCharCode(...i))}return e}}function Tue(n){var a,l,c;if(!n)return!1;const e=String(n).toLowerCase(),t=((a=n==null?void 0:n.message)==null?void 0:a.toLowerCase())||e,r=(n==null?void 0:n.responseBody)||(n==null?void 0:n.onboardResult),i=((l=r==null?void 0:r.error)==null?void 0:l.toLowerCase())||((c=r==null?void 0:r.message)==null?void 0:c.toLowerCase())||"",s=["nonce too low","nonce too high","nonce already used","nonce already pending","nonce invalid","nonce expired","nonce mismatch","invalid nonce","nonce out of order"],o=`${t} ${e} ${i}`.toLowerCase();return s.some(u=>o.includes(u))}function Mue(n){var a,l,c;if(!n)return!1;const e=String(n).toLowerCase(),t=((a=n==null?void 0:n.message)==null?void 0:a.toLowerCase())||e,r=(n==null?void 0:n.responseBody)||(n==null?void 0:n.onboardResult),i=((l=r==null?void 0:r.error)==null?void 0:l.toLowerCase())||((c=r==null?void 0:r.message)==null?void 0:c.toLowerCase())||"",s=["signature verification failed","invalid signature","unauthenticated","signature mismatch","signature invalid"],o=`${t} ${e} ${i}`.toLowerCase();return s.some(u=>o.includes(u))}function Iue(n){if(!n)return[!1,!1];const e=Tue(n),t=Mue(n);return[e,t]}function dI(n){const[e,t]=Iue(n);return e||t}function Hl(n){if(n==null||typeof n!="string")return!1;const e=n.toLowerCase();return e.includes("duplicate transaction")||e.includes("duplicate tranaction")}function fI(n,e=Date.now()){if(!n)return e;if(typeof n=="object"&&n!==null&&typeof n.seconds=="number"){const r=n.seconds,i=n.nanos||0;return r*1e3+Math.floor(i/1e6)}const t=typeof n=="string"?Number(n):n;return typeof t=="number"&&!isNaN(t)&&t>0?t<9466848e5?t*1e3:t:e}function ks(n){if(!n)return Date.now();const e=typeof n=="string"?Number(n):n;return isNaN(e)||e<=0?Date.now():e<9466848e5?e*1e3:e}function N3(n){if(!n)return"";if(typeof n=="string")return n;if(typeof n=="object"&&"seconds"in n&&"nanos"in n){const e=n.seconds,t=n.nanos||0,r=e*1e3+Math.floor(t/1e6),s=new Date(r).toISOString();if(t>0){const o=t.toString().padStart(9,"0");return s.replace(/\.\d{3}Z$/,`.${o}Z`)}return s}return""}function tn(n){const t=new Date().toISOString(),r=t.match(/\.(\d{3})Z$/);if(r){const s=(parseInt(r[1])*1e6).toString().padStart(9,"0");return t.replace(/\.\d{3}Z$/,`.${s}Z`)}return t.replace(/Z$/,".000000000Z")}const _V="sys::onboard",Pue="market::change_marginRatio",A3="clob::submit_order",Oue="clob::cancel_order",L3="bucket::close_position",Rue="bucket::update_position_leverage",Due="clob::modify_order",Nue="clob::inter_transfer",Aue="bucket::create_margin_bucket",Lue="clob::swap",Fue="bank::mint",jue="bank::transfer_to_bucket",$ue="bank::withdraw_from_bucket",Bue="bank::bucket_transfer",zue="bank::transfer";var cn=(n=>(n.Disconnected="disconnected",n.Connecting="connecting",n.Connected="connected",n.Reconnecting="reconnecting",n))(cn||{});const $d="https://router.morpheum.io",que="wss://router.morpheum.io/websocket",Uue="300px",Wue="300px",Hue="270px",SV="630px",YO=5e3,Yue="1",Gue=100,kV=20,pI="legal winner thank year wave sausage worth useful legal winner thank yellow",w1=1,F3=100,Vue=1,q0=0,_1=100,S1=1,Kue=.01,j3=0,Xue="BINANCE:BTCUSDT",Que="5",Jue="https://s3.tradingview.com/tv.js",Na=2,Zue=2,ll="asc",vh="desc",mI="market",k1="limit",Mm="CROSS",ehe="ISOLATED",the="ONE_WAY",Im="LONG",gI="SHORT",$3="symbol",B3="leverage",z3="size",q3="liquidationPrice",U3="unrealizedPnL",W3="entryPrice",H3="margin",C1="all",U0="byBucket",Y3="1.5fr 1.2fr 1fr 1fr 1fr 1.2fr 1.2fr 1fr",nhe="#51cf66",rhe="#ff6b6b",ihe="Loading positions...",she="No open positions",ohe="POSITIONS",ahe="All",lhe="By Bucket",E1="--",G3="symbol",V3="side",K3="quantity",X3="price",Q3="filledQuantity",J3="status",Aa="pending",Z3="history",che="ORDER_STATUS_PENDING",uhe="ORDER_STATUS_OPEN",hhe="ORDER_STATUS_PARTIAL",dhe="PARTIALLY_FILLED",e5=[che,uhe,hhe,"PENDING","OPEN","NEW","PARTIAL",dhe],t5="#ffc107",fhe="#17a2b8",phe="#28a745",mhe="#dc3545",ghe="#6c757d",vhe="#51cf66",yhe="#ff6b6b",n5="1.5fr 1fr 1fr 1.2fr 1.2fr 1.2fr 1fr 1fr",bhe="Loading pending orders...",xhe="No pending orders",whe="No historical orders",_he="OPEN ORDERS",She="ORDER HISTORY",khe="Wallet address required to view pending orders",Che="Pending",Ehe="History",The="--",Mhe="Unknown",Ihe={1:"USDC",2:"USDT"};function r5(n){return!n||!Array.isArray(n)||n.length===0?[]:[...n].sort((t,r)=>{const i=ks(t.timestamp);return ks(r.timestamp)-i}).map(t=>{const r=ks(t.timestamp),i=st(t.quantity),s=st(t.price);return{time:r,size:i,price:s,isBuyerMaker:!1}})}function i5(n){let e;"positionId"in n&&n.positionId?e=n.positionId:e=`${n.marketIndex}-${n.bucketId||"default"}-${n.address}`;const t="averageEntryPrice"in n?n.averageEntryPrice:n.entryPrice;let r;"positionSide"in n&&n.positionSide?r=n.positionSide:"side"in n&&n.side?r=n.side==="SIDE_BUY"||n.side.toUpperCase().includes("BUY")?Im:gI:r=st(n.size)>=0?Im:gI;const i=st(n.size),s=st(t),o=st(n.markPrice),a=n.leverage?st(n.leverage):0;let l=0;if(n.unrealizedProfit!==void 0||n.unrealizedLoss!==void 0){const d=Fy(n.unrealizedProfit),f=Fy(n.unrealizedLoss),m=d-f;l=st(m.toString())}else"unrealizedPnl"in n&&n.unrealizedPnl!==void 0&&(l=st(n.unrealizedPnl));const u=st(n.marginBalance)||(a&&s&&i!==0?Math.abs(Math.abs(i)*s/a):0),h="marginMode"in n&&n.marginMode||"marginType"in n&&n.marginType||Mm;return{positionId:e,marketId:String(n.marketIndex),symbol:n.symbol||`m-${n.marketIndex}`,size:Math.abs(i),entryPrice:s,markPrice:o,liquidationPrice:n.liquidationPrice?st(n.liquidationPrice):0,unrealizedPnL:l,leverage:a,margin:u,side:r,marginMode:h,bucketId:n.bucketId?String(n.bucketId):"",raw:n}}function s5(n){const e=n.side==="SIDE_BUY"?"BUY":"SELL";let t=n.status||"ORDER_STATUS_PENDING";t.includes("ORDER_STATUS_")&&(t=t.replace("ORDER_STATUS_",""));const r=n.timeInForce;let i=r;r&&r.includes("TIME_IN_FORCE_")&&(i=r.replace("TIME_IN_FORCE_",""));const s=f=>st(f),o=s(n.quantity),a=s(n.price),l=s(n.filledQuantity),c=o-l,u=n.orderId??"",h=n.marketIndex??"",d=fI(n.timestamp,Date.now());return{id:u,orderId:u,marketId:h,side:e,type:n.type,quantity:o,price:a,filledQuantity:l,remainingQuantity:c,status:t,timeInForce:i??"",createdAt:d,updatedAt:d,raw:n}}function Phe(n){const e=new Date().toISOString();return{bucketId:n.bucketId,address:n.address,bucketType:n.marginType,collateralAssetIndex:"1",depositedMargin:"0",totalEquity:n.totalEquity,availableMargin:n.availableMargin,usedMargin:n.usedMargin,unrealizedProfit:n.unrealizedProfit,unrealizedLoss:n.unrealizedLoss,realizedProfit:"0",realizedLoss:"0",marginRatio:"0",imr:"0",totalNotionalValue:"0",riskLevel:"low",maxLeverage:"0",correlationOffset:0,status:"active",createdAt:e,updatedAt:e,sequenceId:"0"}}function o5(n){const e=n.bucketId??"---",t=Fy(n.unrealizedProfit??"0"),r=Fy(n.unrealizedLoss??"0"),i=t-r,s=ar(i.toString()),o=st(n.unrealizedProfit??"0"),a=st(n.unrealizedLoss??"0"),l=vae(n.maxLeverage),c=n.bucketType??"cross",u=n.collateralAssetIndex??"1",h=Ihe[u]??"USDC";return{bucketId:e,address:n.address||"",marginType:c.toLowerCase().includes("isolated")?"isolated":"cross",collateralAssetIndex:u,collateralAsset:h,depositedMargin:st(n.depositedMargin??"0"),totalEquity:st(n.totalEquity??"0"),availableMargin:st(n.availableMargin??"0"),usedMargin:st(n.usedMargin??"0"),unrealizedProfit:o,unrealizedLoss:a,realizedProfit:st(n.realizedProfit??"0"),realizedLoss:st(n.realizedLoss??"0"),unrealizedPnL:s,marginRatio:st(n.marginRatio??"0"),imr:st(n.imr??"0"),totalNotionalValue:st(n.totalNotionalValue??"0"),riskLevel:n.riskLevel||"",maxLeverage:l,correlationOffset:n.correlationOffset??0,status:n.status||"",createdAt:N3(n.createdAt),updatedAt:N3(n.updatedAt),leverage:l,marginMode:c,raw:n}}function T1(n){return n.totalEquity>0?Math.min(Math.max(n.usedMargin/n.totalEquity,0),1):0}function Cp(n){const e=n.marginMode||n.marginType||"cross";return e==="ISOLATED"||e==="isolated"?"ISOLATED":"CROSS"}function Ohe(n){return"collateralAssetIndex"in n}function Rhe(n){return n!==null&&typeof n=="object"&&typeof n.price=="number"&&typeof n.marketIndex=="string"&&typeof n.quantity=="number"&&typeof n.timestamp=="number"&&typeof n.isBuyerMaker=="boolean"&&typeof n.tradeId=="string"}function Dhe(n){return n!==null&&typeof n=="object"&&typeof n.symbol=="string"&&typeof n.markPrice=="number"&&typeof n.timestamp=="number"}class Nhe extends Eue{constructor(e){super(e)}getNotInitializedMessage(){return"FiClient not initialized. Call initialize() first."}async refreshNonceFromServer(){await super.refreshNonceFromServer(),console.log("[FiClient] Refreshed nonce from server",{walletAddress:this.getWalletAddress()})}buildOrderPayload(e){const t=jn(e.price),r=jn(e.quantity),i={action:A3,marketId:e.marketId,bucketId:e.bucketId,side:e.side.toUpperCase(),orderType:e.orderType.toUpperCase(),price:t,quantity:r};return e.leverage&&(i.leverage=e.leverage),e.takeProfit&&(i.takeProfit=e.takeProfit),e.stopLoss&&(i.stopLoss=e.stopLoss),i}buildOrderPayloadForTx(e){const r=e.orderType.toUpperCase()==="MARKET"?"0":jn(e.price),i=jn(e.quantity),s=(e.timeInForce||"GTC").toUpperCase(),o=e.bucketId?"isolated":"cross",a=[];e.stopLoss&&a.push(`sl:${e.stopLoss}`),e.takeProfit&&a.push(`tp:${e.takeProfit}`);const l=a.length?a.join(","):"",c=e.leverage||"0",u=e.side.toLowerCase(),h=this.normalizeOrderType(e.orderType),d=this.deriveFillType(h,e.postOnly);return{action:A3,address:this.getWalletAddress(),marketIndex:e.marketId,side:u,orderType:h,price:r,stopPrice:"0",quantity:i,leverage:c,fillType:d,marginMode:o,bucketId:e.bucketId,metadata:"",sltp:l,timeInForce:s}}normalizeOrderType(e){switch(e.toUpperCase()){case"LIMIT":return"limit";case"MARKET":return"market";case"STOP_MARKET":return"stop_market";case"STOP_LIMIT":return"stop_limit";case"TAKE_PROFIT":return"take_profit";case"TRAILING_STOP":return"trailing_stop";default:return e.toLowerCase()}}deriveFillType(e,t){return t?"maker":e==="market"?"taker":"any"}toTimeInForceProto(e){switch((e||"GTC").toUpperCase()){case"IOC":return"TIME_IN_FORCE_IOC";case"FOK":return"TIME_IN_FORCE_FOK";case"DAY":return"TIME_IN_FORCE_DAY";case"GTT":case"GTD":return"TIME_IN_FORCE_GTT";default:return"TIME_IN_FORCE_GTC"}}async placeOrderWithNonce(e,t){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(!e.bucketId||e.bucketId.trim()==="")throw new Error("bucketId cannot be empty");if(!e.side||e.side.toUpperCase()!=="BUY"&&e.side.toUpperCase()!=="SELL")throw new Error("side must be BUY or SELL");if(!e.orderType||e.orderType.toUpperCase()!=="LIMIT"&&e.orderType.toUpperCase()!=="MARKET")throw new Error("orderType must be LIMIT or MARKET");if(!e.price||e.price<=0)throw new Error("price must be positive");if(!e.quantity||e.quantity<=0)throw new Error("quantity must be positive");return this.walletAddress||await this.initialize(),this.placeOrderViaTxWithNonce(e,t)}async placeOrderViaTxWithNonce(e,t){const r=performance.now(),i=this.getWalletAddress(),s=this.buildOrderPayloadForTx(e),o=this.getSignatureBuilder(),l=Math.floor(Date.now()/1e3)+3600,c={...s,owner:i,nonce:String(t),deadline:String(l)},u=performance.now(),h=await o.signPayload(c),d=performance.now(),f=l,m=new Date(f*1e3).toISOString().replace(/\.\d{3}Z$/,"Z"),g=tn(),v=c.price,y=c.quantity,b=e.orderType.toUpperCase()==="MARKET"?"ORDER_TYPE_MARKET":"ORDER_TYPE_LIMIT",w=e.side.toUpperCase()==="BUY"?"SIDE_BUY":"SIDE_SELL",S=this.toTimeInForceProto(e.timeInForce),_={"@type":"/clob.v1.MsgPlaceOrderRequest",type:2,fromAddress:i,address:i,marketIndex:parseInt(e.marketId,10)||e.marketId,symbol:e.marketId,price:v,quantity:y,size:y,side:w,orderType:b,bucketId:e.bucketId,timeInForce:S,is_buy:e.side.toUpperCase()==="BUY",timestamp:g};e.leverage&&(_.leverage=e.leverage),e.takeProfit&&(_.takeProfit=e.takeProfit),e.stopLoss&&(_.stopLoss=e.stopLoss),e.postOnly&&(_.postOnly=!0),e.hidden&&(_.hidden=!0),e.displayQuantity&&(_.displayQuantity=e.displayQuantity);const E=this.hexSignatureToBase64(h),C={tx:{body:{messages:[_],memo:`place_order_${Math.floor(Date.now()/1e3)}_${t}`,timeoutTimestamp:m},auth_info:{signer_infos:[{nonce:t,deadline:f,timestamp:g}]},signatures:[E]}},T=performance.now(),O=await this.httpClient.post("/tx/v1/submit",C),R=performance.now();console.log(`[FiClient][PERF] placeOrderWithNonce nonce=${t} | sign: ${(d-u).toFixed(1)}ms | http: ${(R-T).toFixed(1)}ms | total: ${(R-r).toFixed(1)}ms`);const D=O.body??{},A=D.tx_hash??D.txhash??void 0,F=D.orderId??void 0,z=D.accepted===!0,j=D.errorMessage??"";return{success:z,orderId:F??"",errorMessage:z?"":j,...A!=null&&{txHash:A}}}async buildSignedOrderRequest(e,t){this.walletAddress||await this.initialize();const r=this.getWalletAddress(),i=this.buildOrderPayloadForTx(e),s=this.getSignatureBuilder(),a=Math.floor(Date.now()/1e3)+3600,l={...i,owner:r,nonce:String(t),deadline:String(a)},c=await s.signPayload(l),u=new Date(a*1e3).toISOString().replace(/\.\d{3}Z$/,"Z"),h=tn(),d=l.price,f=l.quantity,m=e.orderType.toUpperCase()==="MARKET"?"ORDER_TYPE_MARKET":"ORDER_TYPE_LIMIT",g=e.side.toUpperCase()==="BUY"?"SIDE_BUY":"SIDE_SELL",v=this.toTimeInForceProto(e.timeInForce),y={"@type":"/clob.v1.MsgPlaceOrderRequest",type:2,fromAddress:r,address:r,marketIndex:parseInt(e.marketId,10)||e.marketId,symbol:e.marketId,price:d,quantity:f,size:f,side:g,orderType:m,bucketId:e.bucketId,timeInForce:v,is_buy:e.side.toUpperCase()==="BUY",timestamp:h};e.leverage&&(y.leverage=e.leverage),e.takeProfit&&(y.takeProfit=e.takeProfit),e.stopLoss&&(y.stopLoss=e.stopLoss),e.postOnly&&(y.postOnly=!0),e.hidden&&(y.hidden=!0),e.displayQuantity&&(y.displayQuantity=e.displayQuantity);const b=this.hexSignatureToBase64(c);return{tx:{body:{messages:[y],memo:`place_order_${Math.floor(Date.now()/1e3)}_${t}`,timeoutTimestamp:u},auth_info:{signer_infos:[{nonce:t,deadline:a,timestamp:h}]},signatures:[b]}}}async submitSignedOrderRequest(e){const r=(await this.httpClient.post("/tx/v1/submit",e)).body??{},i=r.tx_hash??r.txhash??void 0,s=r.orderId??void 0,o=r.accepted===!0,a=r.errorMessage??"";return{success:o,orderId:s??"",errorMessage:o?"":a,...i!=null&&{txHash:i}}}async submitBatchSignedOrderRequests(e){const r={txs:e.map(c=>c.tx)},i=await this.httpClient.post("/tx/v1/submit/batch",r),s=i.body??{},o=s.results??[],a=s.success===!0,l=s.errorMessage??"";return console.log(`[FiClient][submitBatch] HTTP ${i.statusCode} | success=${a} | results=${o.length} | batchError=${l||"(none)"}`),!a&&o.length>0&&console.log("[FiClient][submitBatch] first result:",JSON.stringify(o[0])),o.length===0?e.map(()=>({success:a,orderId:"",errorMessage:a?"":l||"batch rejected with no per-tx details"})):o.map(c=>{const u=c.accepted===!0,h=c.txHash??c.txhash??void 0,d=c.orderId??void 0,f=c.errorMessage||(u?"":l)||"";return{success:u,orderId:d??"",errorMessage:u?"":f,...h!=null&&{txHash:h}}})}async placeOrderViaTx(e,t=!1){const r=performance.now(),i=this.getWalletAddress(),s=this.buildOrderPayloadForTx(e);console.log("[FiClient] EIP-712 signing payload (canonical values):",{side:s.side,orderType:s.orderType,fillType:s.fillType,marginMode:s.marginMode,leverage:s.leverage,timeInForce:s.timeInForce,owner:s.owner??"(added by buildCompleteMessage)"});const o=this.getSignatureBuilder(),a=performance.now(),l=await o.buildCompleteMessage(s,this.getNonceProvider()),c=performance.now(),u=await o.signPayload(l),h=performance.now();console.log(`[FiClient][PERF] buildPayload: ${(a-r).toFixed(1)}ms | nonceFetch: ${(c-a).toFixed(1)}ms | sign: ${(h-c).toFixed(1)}ms`);const d=parseInt(String(l.deadline),10),f=new Date(d*1e3).toISOString().replace(/\.\d{3}Z$/,"Z"),m=tn(),g=l.price,v=l.quantity,y=e.orderType.toUpperCase()==="MARKET"?"ORDER_TYPE_MARKET":"ORDER_TYPE_LIMIT",b=e.side.toUpperCase()==="BUY"?"SIDE_BUY":"SIDE_SELL",w=this.toTimeInForceProto(e.timeInForce),S={"@type":"/clob.v1.MsgPlaceOrderRequest",type:2,fromAddress:i,address:i,marketIndex:parseInt(e.marketId,10)||e.marketId,symbol:e.marketId,price:g,quantity:v,size:v,side:b,orderType:y,bucketId:e.bucketId,timeInForce:w,is_buy:e.side.toUpperCase()==="BUY",timestamp:m};e.leverage&&(S.leverage=e.leverage),e.takeProfit&&(S.takeProfit=e.takeProfit),e.stopLoss&&(S.stopLoss=e.stopLoss),e.postOnly&&(S.postOnly=!0),e.reduceOnly&&(S.reduceOnly=!0),e.hidden&&(S.hidden=!0),e.displayQuantity&&(S.displayQuantity=e.displayQuantity);const _=this.hexSignatureToBase64(u),E={tx:{body:{messages:[S],memo:`place_order_${Math.floor(Date.now()/1e3)}_${l.nonce}`,timeoutTimestamp:f},auth_info:{signer_infos:[{nonce:parseInt(String(l.nonce),10),deadline:d,timestamp:m}]},signatures:[_]}},C=performance.now(),T=await this.httpClient.post("/tx/v1/submit",E),O=performance.now();console.log(`[FiClient][PERF] httpPost(/tx/v1/submit): ${(O-C).toFixed(1)}ms | total: ${(O-r).toFixed(1)}ms`);const R=T.body??{},D=R.tx_hash??R.txhash??void 0,A=R.orderId??void 0,F=R.accepted===!0,z=R.errorMessage??"";return!t&&!F&&Hl(z)&&this.walletAddress?(console.log("[FiClient] Duplicate transaction detected, retrying with fresh nonce",s),this.placeOrderViaTx(e,!0)):(console.log("[FiClient] placeOrderViaTx result",{accepted:F,nonce:l.nonce,txHash:D,errorMessage:z||void 0}),{success:F,orderId:A??"",errorMessage:F?"":z,...D!=null&&{txHash:D}})}async placeOrderLegacy(e){const t=this.buildOrderPayload(e);console.log("placeOrderLegacy payload",t);const r=this.getSignatureBuilder(),i=await r.buildCompleteMessage(t,this.getNonceProvider()),s=await r.signPayload(i),o=Math.floor(Date.now()/1e3)-5,a=e.side.toUpperCase()==="BUY",l=e.orderType.toUpperCase(),c=l==="MARKET"?"ORDER_TYPE_MARKET":"ORDER_TYPE_LIMIT",u={address:this.getWalletAddress(),market_index:e.marketId,bucket_id:e.bucketId,price:i.price,quantity:i.quantity,type:c,signature:s,nonce:i.nonce,deadline:i.deadline,timestamp:o,asset_pair:e.marketId,market_id:e.marketId,size:i.quantity,is_buy:a,order_type:l,client_order_id:`order-${Date.now()}-${Math.floor(Math.random()*1e6)}`,time_in_force:e.timeInForce||"GTC"};e.leverage&&(u.leverage=e.leverage),e.takeProfit&&(u.take_profit=e.takeProfit),e.stopLoss&&(u.stop_loss=e.stopLoss),e.postOnly&&(u.post_only=!0),e.hidden&&(u.hidden=!0),e.displayQuantity&&(u.display_quantity=e.displayQuantity),e.reduceOnly&&(u.reduce_only=!0);const d=(await this.httpClient.post("/clob/v1/order",u)).body,f=d.orderId,m=d.txhash!=null?String(d.txhash):d.txHash;return{...d,orderId:f??d.orderId,...m!=null&&{txHash:m}}}async placeOrder(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(!e.bucketId||e.bucketId.trim()==="")throw new Error("bucketId cannot be empty");if(!e.side||e.side.toUpperCase()!=="BUY"&&e.side.toUpperCase()!=="SELL")throw new Error("side must be BUY or SELL");if(!e.orderType||e.orderType.toUpperCase()!=="LIMIT"&&e.orderType.toUpperCase()!=="MARKET")throw new Error("orderType must be LIMIT or MARKET");if(!(e.orderType.toUpperCase()==="MARKET")&&(!e.price||e.price<=0))throw new Error("price must be positive for non-market orders");if(!e.quantity||e.quantity<=0)throw new Error("quantity must be positive");return this.walletAddress||await this.initialize(),e.useLegacyClobOrder?this.placeOrderLegacy(e):this.placeOrderViaTx(e)}async placeBatchOrders(e){if(!e.orders||!Array.isArray(e.orders))throw new Error("orders must be a non-empty array");if(e.orders.length===0)throw new Error("At least one order is required");if(e.orders.length>100)throw new Error("Maximum 100 orders per batch");this.walletAddress||await this.initialize();const t=this.getWalletAddress(),r=Math.floor(Date.now()/1e3)-5,i=await Promise.all(e.orders.map(async(o,a)=>{if(!o.marketId||o.marketId.trim()==="")throw new Error(`Order ${a}: marketId cannot be empty`);if(!o.bucketId||o.bucketId.trim()==="")throw new Error(`Order ${a}: bucketId cannot be empty`);if(!o.side||o.side.toUpperCase()!=="BUY"&&o.side.toUpperCase()!=="SELL")throw new Error(`Order ${a}: side must be BUY or SELL`);if(!o.orderType||o.orderType.toUpperCase()!=="LIMIT"&&o.orderType.toUpperCase()!=="MARKET")throw new Error(`Order ${a}: orderType must be LIMIT or MARKET`);if(!o.price||o.price<=0)throw new Error(`Order ${a}: price must be positive`);if(!o.quantity||o.quantity<=0)throw new Error(`Order ${a}: quantity must be positive`);const l=this.buildOrderPayload(o),c=this.getSignatureBuilder(),u=await c.buildCompleteMessage(l,this.getNonceProvider()),h=await c.signPayload(u),d=o.side.toUpperCase()==="BUY",f=o.orderType.toUpperCase(),m=f==="MARKET"?"ORDER_TYPE_MARKET":"ORDER_TYPE_LIMIT",g=`batch-${Date.now()}-${a}-${Math.floor(Math.random()*1e6)}`,v=u.quantity,y=d?"BUY":"SELL",b={address:t,symbol:o.marketId,bucketId:o.bucketId,price:u.price,size:v,quantity:v,is_buy:d,side:y,orderType:f,type:m,signature:h,nonce:u.nonce,deadline:u.deadline,timestamp:r,client_order_id:g};return o.leverage&&(b.leverage=o.leverage),o.takeProfit&&(b.take_profit=o.takeProfit),o.stopLoss&&(b.stop_loss=o.stopLoss),o.postOnly&&(b.post_only=!0,b.postOnly=!0),o.hidden&&(b.hidden=!0),o.displayQuantity&&(b.display_quantity=o.displayQuantity,b.displayQuantity=o.displayQuantity),o.reduceOnly&&(b.reduce_only=!0),b}));return(await this.httpClient.post("/clob/v1/orders/batch",{orders:i})).body}async cancelOrderRESTful(e,t){if(!e||e==="")throw new Error("orderId cannot be empty");!this.walletAddress&&!t&&await this.initialize();const r=t||this.getWalletAddress();return(await this.httpClient.delete(`/clob/v1/order/${encodeURIComponent(e)}?address=${encodeURIComponent(r)}`)).body}async cancelOrder(e){if(!e.orderId||e.orderId==="")throw new Error("orderId cannot be empty");if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");this.walletAddress||await this.initialize();const t=this.getWalletAddress(),r={action:Oue,owner:t,address:t,orderId:e.orderId,marketIndex:e.marketId},i=this.getSignatureBuilder(),s=await i.buildCompleteMessage(r,this.getNonceProvider()),o=await i.signPayload(s),a=tn(),l=parseInt(String(s.deadline),10),c=new Date(l*1e3).toISOString().replace(/\.\d{3}Z$/,"Z"),u={"@type":"/clob.v1.MsgCancelOrderRequest",type:43,fromAddress:t,address:t,orderId:e.orderId,symbol:e.marketId,timestamp:a},h=this.hexSignatureToBase64(o),d={tx:{body:{messages:[u],memo:`cancel_order_${e.orderId}_${Math.floor(Date.now()/1e3)}`,timeoutTimestamp:c},auth_info:{signer_infos:[{nonce:parseInt(String(s.nonce),10),deadline:l,timestamp:a}]},signatures:[h]}};try{const m=(await this.httpClient.post("/tx/v1/submit",d)).body??{},g=this.mapSubmitTxToCancelOrderResponse(m,e.orderId);if(!g.success&&Hl(g.errorMessage)&&this.walletAddress){console.log("[FiClient] Duplicate cancel detected, retrying with fresh nonce");const v=await i.buildCompleteMessage(r,this.getNonceProvider()),y=await i.signPayload(v),b=parseInt(String(v.deadline),10),w=new Date(b*1e3).toISOString().replace(/\.\d{3}Z$/,"Z"),_={tx:{body:{messages:[{"@type":"/clob.v1.MsgCancelOrderRequest",type:43,fromAddress:t,address:t,orderId:e.orderId,symbol:e.marketId,timestamp:tn()}],memo:`cancel_order_${e.orderId}_${Math.floor(Date.now()/1e3)}`,timeoutTimestamp:w},auth_info:{signer_infos:[{nonce:parseInt(String(v.nonce),10),deadline:b,timestamp:tn()}]},signatures:[this.hexSignatureToBase64(y)]}},C=(await this.httpClient.post("/tx/v1/submit",_)).body??{};return this.mapSubmitTxToCancelOrderResponse(C,e.orderId)}return g}catch(f){if(dI(f)){console.log("[FiClient] Nonce error on cancelOrder, retrying with fresh nonce");const m=await i.buildCompleteMessage(r,this.getNonceProvider()),g=await i.signPayload(m),v=parseInt(String(m.deadline),10),y=new Date(v*1e3).toISOString().replace(/\.\d{3}Z$/,"Z"),w={tx:{body:{messages:[{"@type":"/clob.v1.MsgCancelOrderRequest",type:43,fromAddress:t,address:t,orderId:e.orderId,symbol:e.marketId,timestamp:tn()}],memo:`cancel_order_${e.orderId}_${Math.floor(Date.now()/1e3)}`,timeoutTimestamp:y},auth_info:{signer_infos:[{nonce:parseInt(String(m.nonce),10),deadline:v,timestamp:tn()}]},signatures:[this.hexSignatureToBase64(g)]}},_=(await this.httpClient.post("/tx/v1/submit",w)).body??{};return this.mapSubmitTxToCancelOrderResponse(_,e.orderId)}throw f}}mapSubmitTxToCancelOrderResponse(e,t){const r=e.accepted===!0,i=e.txhash!=null?String(e.txhash):e.tx_hash!=null?String(e.tx_hash):e.Txhash!=null?String(e.Txhash):"",s=Date.now(),o={seconds:Math.floor(s/1e3),nanos:s%1e3*1e6};return{...e,success:r,txhash:i,result:{orderId:t,success:r,timestamp:o},timestamp:o,...e.errorMessage!=null&&{errorMessage:String(e.errorMessage)}}}async modifyOrder(e){if(!e.orderId||e.orderId==="")throw new Error("orderId cannot be empty");if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(!e.newPrice||e.newPrice<=0)throw new Error("newPrice must be positive");if(!e.newQuantity||e.newQuantity<=0)throw new Error("newQuantity must be positive");this.walletAddress||await this.initialize();const t={action:Due,orderId:e.orderId,marketIndex:e.marketId,newPrice:jn(e.newPrice),newQuantity:jn(e.newQuantity)},r=this.getSignatureBuilder(),i=await r.buildCompleteMessage(t,this.getNonceProvider()),s=await r.signPayload(i),o=r.buildEIP712Tx(i,s);return(await this.httpClient.post("/router/v1/tx",o)).body}async changeLeverage(e){if(e.newLeverage===void 0)throw new Error("newLeverage must be provided");if(!(e.marketIndex!==void 0||e.marketId!=null&&e.marketId.trim()!==""))throw new Error("marketIndex or marketId must be provided");if(!e.bucketId||e.bucketId.trim()==="")throw new Error("bucketId cannot be empty");this.walletAddress||await this.initialize();const r=this.getWalletAddress(),i=e.marketIndex!==void 0?String(e.marketIndex):String(parseInt(e.marketId.trim(),10)),s={action:Rue,address:r,positionId:e.positionId??"",bucketId:e.bucketId,marketIndex:i,newLeverage:jn(e.newLeverage)},o=this.getSignatureBuilder(),a=await o.buildCompleteMessage(s,this.getNonceProvider()),l=await o.signPayload(a),c=o.buildEIP712Tx(a,l);return(await this.httpClient.post("/router/v1/tx",c)).body}async closePosition(e){if(!e.positionId||e.positionId.trim()==="")throw new Error("positionId cannot be empty");if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");this.walletAddress||await this.initialize();const t=this.getWalletAddress();let r;if(e.marketPrice&&e.marketPrice>0)r=e.marketPrice;else try{const m=await this.infoClient.getMarketStats(e.marketId);if(!m||!m.lastPrice)throw new Error("marketPrice is required and could not be fetched from ticker");r=ar(m.lastPrice)}catch(m){throw new Error(`Failed to fetch market price: ${m instanceof Error?m.message:String(m)}`)}const i=jn(r).toString(),s=e.quantity&&e.quantity>0?jn(e.quantity).toString():"0",o={action:L3,address:t,positionId:e.positionId,marketIndex:parseInt(e.marketId,10),closeSize:s,marketPrice:i},a=this.getSignatureBuilder(),l=300,c=await a.buildCompleteMessage(o,this.getNonceProvider(),l),u=await a.signPayload(c),h=parseInt(String(c.deadline),10),d={"@type":"/bucket.v1.MsgClosePositionRequest",type:0,operation:"close_position",fromAddress:t,address:t,positionId:e.positionId,marketIndex:parseInt(e.marketId,10),timestamp:tn(),closeSize:s,marketPrice:i},f=async(m,g,v,y)=>{const b={tx:{body:{messages:[m],memo:`close_position_${Math.floor(Date.now()/1e3)}_${v}`,timeoutTimestamp:new Date(y*1e3).toISOString().replace(/\.\d{3}Z$/,"Z")},auth_info:{signer_infos:[{nonce:parseInt(v,10),deadline:y,timestamp:tn()}]},signatures:[this.hexSignatureToBase64(g)]}},w=await this.httpClient.post("/tx/v1/submit",b);return this.mapSubmitTxToClosePositionResponse(w.body??{})};try{const m=await f(d,u,String(c.nonce),h);if(!m.success&&Hl(m.errorMessage)&&this.walletAddress){console.log("[FiClient] Duplicate closePosition detected, retrying with fresh nonce");const g=await a.buildCompleteMessage(o,this.getNonceProvider(),l),v=await a.signPayload(g),y={"@type":"/bucket.v1.MsgClosePositionRequest",type:0,operation:"close_position",fromAddress:t,address:t,positionId:e.positionId,marketIndex:parseInt(e.marketId,10),timestamp:tn(),closeSize:s,marketPrice:i};return f(y,v,String(g.nonce),parseInt(String(g.deadline),10))}return m}catch(m){if(dI(m)){console.log("[FiClient] Nonce error on closePosition, retrying with fresh nonce");const g=await a.buildCompleteMessage(o,this.getNonceProvider(),l),v=await a.signPayload(g),y={"@type":"/bucket.v1.MsgClosePositionRequest",type:0,operation:"close_position",fromAddress:t,address:t,positionId:e.positionId,marketIndex:parseInt(e.marketId,10),timestamp:tn(),closeSize:s,marketPrice:i};return f(y,v,String(g.nonce),parseInt(String(g.deadline),10))}throw m}}mapSubmitTxToClosePositionResponse(e){const t=e.accepted===!0,r=e.txhash!=null?String(e.txhash):e.tx_hash!=null?String(e.tx_hash):"",i=e.errorMessage!=null?String(e.errorMessage):void 0;return{success:t,...r&&{txhash:r},...i!=null&&{errorMessage:i},...e}}async closePositionEIP712Tx(e){if(!e.positionId||e.positionId.trim()==="")throw new Error("positionId cannot be empty");if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");this.walletAddress||await this.initialize();const t=parseInt(e.marketId,10);if(Number.isNaN(t)||t<0)throw new Error("marketId must be a non-negative numeric string");const r=e.quantity!=null&&e.quantity>0?e.quantity:0;let i;if(e.marketPrice!=null&&e.marketPrice>0)i=e.marketPrice;else try{const v=await this.infoClient.getMarketStats(e.marketId);if(!(v!=null&&v.lastPrice))throw new Error("marketPrice is required and could not be fetched from ticker");i=ar(v.lastPrice)}catch(v){throw new Error(`Failed to resolve market price: ${v instanceof Error?v.message:String(v)}`)}const s=Math.floor(Date.now()/1e3),o={action:L3,address:this.getWalletAddress(),positionId:e.positionId,marketIndex:t,closeSize:r,marketPrice:i,timestamp:s},a=this.getSignatureBuilder(),l=await a.buildCompleteMessage(o,this.getNonceProvider()),c=await a.signPayload(l),u=a.buildEIP712Tx(l,c),d=(await this.httpClient.post("/router/v1/tx",u)).body,f=(d==null?void 0:d.accepted)===!0,m=(d==null?void 0:d.txhash)??(d==null?void 0:d.tx_hash)??"",g=(d==null?void 0:d.errorMessage)??(d==null?void 0:d.error_message)??"";return{...d,success:f,txhash:m,errorMessage:g||void 0}}async swap(e){if(!e.fromToken||e.fromToken==="")throw new Error("fromToken cannot be empty");if(!e.toToken||e.toToken==="")throw new Error("toToken cannot be empty");if(!e.amountIn||e.amountIn<=0)throw new Error("amountIn must be positive");if(!e.minAmountOut||e.minAmountOut<=0)throw new Error("minAmountOut must be positive");this.walletAddress||await this.initialize();const t={action:Lue,fromToken:e.fromToken,toToken:e.toToken,amountIn:jn(e.amountIn),minAmountOut:jn(e.minAmountOut)};e.path&&e.path.length>0&&(t.path=e.path);const r=this.getSignatureBuilder(),i=await r.buildCompleteMessage(t,this.getNonceProvider()),s=await r.signPayload(i),o=r.buildEIP712Tx(i,s);return(await this.httpClient.post("/router/v1/tx",o)).body}async changeMarginRatioEIP712Tx(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(e.reason===void 0||e.reason.trim()==="")throw new Error("reason cannot be empty");const t=typeof e.newInitialMarginRatio=="number"?e.newInitialMarginRatio:parseFloat(String(e.newInitialMarginRatio)),r=typeof e.newMaintenanceMarginRatio=="number"?e.newMaintenanceMarginRatio:parseFloat(String(e.newMaintenanceMarginRatio));if(Number.isNaN(t)||t<0)throw new Error("newInitialMarginRatio must be a non-negative number");if(Number.isNaN(r)||r<0)throw new Error("newMaintenanceMarginRatio must be a non-negative number");this.walletAddress||await this.initialize();const i={action:Pue,marketIndex:e.marketId,newInitialMarginRatio:jn(t),newMaintenanceMarginRatio:jn(r),reason:e.reason},s=this.getSignatureBuilder(),o=await s.buildCompleteMessage(i,this.getNonceProvider()),a=await s.signPayload(o),l=s.buildEIP712Tx(o,a);return(await this.httpClient.post("/router/v1/tx",l)).body}async internTransferEIP712Tx(e){if(!e.fromAccount||e.fromAccount==="")throw new Error("fromAccount cannot be empty");if(!e.toAccount||e.toAccount==="")throw new Error("toAccount cannot be empty");if(!e.tokenAddress||e.tokenAddress==="")throw new Error("tokenAddress cannot be empty");if(!e.amount||e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const t={action:Nue,fromAccount:e.fromAccount,toAccount:e.toAccount,amount:jn(e.amount),tokenAddress:e.tokenAddress,address:this.getWalletAddress()},r=this.getSignatureBuilder(),i=await r.buildCompleteMessage(t,this.getNonceProvider()),s=await r.signPayload(i),o=r.buildEIP712Tx(i,s);return(await this.httpClient.post("/router/v1/tx",o)).body}async bucketTransfer(e){if(!e.fromBucketId||e.fromBucketId.trim()==="")throw new Error("fromBucketId cannot be empty");if(!e.toBucketId||e.toBucketId.trim()==="")throw new Error("toBucketId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const t=this.getWalletAddress(),r=jn(e.amount),i={action:Bue,sourceBucketId:e.fromBucketId,targetBucketId:e.toBucketId,amount:r},s=this.getSignatureBuilder(),o=300,a=await s.buildCompleteMessage(i,this.getNonceProvider(),o),l=await s.signPayload(a),c=tn(),u=parseInt(String(a.deadline),10),h={"@type":"/bucket.v1.MsgTransferBetweenBucketsRequest",type:0,operation:"bucket_transfer",fromAddress:t,address:t,sourceBucketId:e.fromBucketId,targetBucketId:e.toBucketId,amount:r,timestamp:c},d=this.hexSignatureToBase64(l),f={tx:{body:{messages:[h],memo:`bucket_transfer_${Date.now()}`,timeoutTimestamp:new Date(u*1e3).toISOString().replace(/\.\d{3}Z$/,"Z")},auth_info:{signer_infos:[{nonce:parseInt(String(a.nonce),10),deadline:u,timestamp:c}]},signatures:[d]}},g=(await this.httpClient.post("/tx/v1/submit",f)).body??{},v=this.mapSubmitTxToBucketTransferResponse(g);if(!v.success&&Hl(v.errorMessage)&&this.walletAddress){console.log("[FiClient] Duplicate bucketTransfer detected, retrying with fresh nonce");const y=await s.buildCompleteMessage(i,this.getNonceProvider(),o),b=await s.signPayload(y),w=parseInt(String(y.deadline),10),S={tx:{body:{messages:[{"@type":"/bucket.v1.MsgTransferBetweenBucketsRequest",type:0,operation:"bucket_transfer",fromAddress:t,address:t,sourceBucketId:e.fromBucketId,targetBucketId:e.toBucketId,amount:r,timestamp:tn()}],memo:`bucket_transfer_${Date.now()}`,timeoutTimestamp:new Date(w*1e3).toISOString().replace(/\.\d{3}Z$/,"Z")},auth_info:{signer_infos:[{nonce:parseInt(String(y.nonce),10),deadline:w,timestamp:tn()}]},signatures:[this.hexSignatureToBase64(b)]}},E=(await this.httpClient.post("/tx/v1/submit",S)).body??{};return this.mapSubmitTxToBucketTransferResponse(E)}return v}mapSubmitTxToCreateBucketResponse(e,t){const r=e.accepted===!0,i=e.errorMessage!=null?String(e.errorMessage):void 0;return{success:r,bucketId:t,message:r?`${t} margin bucket created successfully`:i??"Bucket creation failed",...e.txhash!=null&&{txhash:String(e.txhash)},...i!=null&&{errorMessage:i},...e}}mapSubmitTxToBucketTransferResponse(e){const t=e.accepted===!0,r=e.txhash!=null?String(e.txhash):void 0;return{...e,success:t,...r!=null&&{txHash:r},...e.errorMessage!=null&&{errorMessage:String(e.errorMessage)}}}async extractToBucket(e){var b;if(!e.bucketId||e.bucketId.trim()==="")throw new Error("bucketId cannot be empty");const t=e.assetIndex??(((b=e.assetId)==null?void 0:b.toUpperCase())==="USDC"?1:void 0);if(t==null||t<1)throw new Error("Provide assetIndex (e.g. 1 for USDC) or assetId 'USDC'");if(!e.amount||e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const r=this.getWalletAddress(),i=jn(e.amount),s={action:jue,bucketId:e.bucketId,assetIndex:Number(t),amount:i},o=this.getSignatureBuilder(),a=300,l=await o.buildCompleteMessage(s,this.getNonceProvider(),a),c=await o.signPayload(l),u=tn(),h=parseInt(String(l.deadline),10),d={"@type":"/bank.v1.MsgTransferToBucketRequest",type:0,operation:"transfer_to_bucket",fromAddress:r,address:r,bucketId:e.bucketId,assetIndex:Number(t),amount:i,timestamp:u},f=this.hexSignatureToBase64(c),m={tx:{body:{messages:[d],memo:`transfer_to_bucket_${Math.floor(Date.now()/1e3)}_${l.nonce}`,timeoutTimestamp:new Date(h*1e3).toISOString().replace(/\.\d{3}Z$/,"Z")},auth_info:{signer_infos:[{nonce:parseInt(String(l.nonce),10),deadline:h,timestamp:u}]},signatures:[f]}},v=(await this.httpClient.post("/tx/v1/submit",m)).body??{},y=this.mapSubmitTxToExtractToBucketResponse(v);if(!y.success&&Hl(y.errorMessage)&&this.walletAddress){console.log("[FiClient] Duplicate extractToBucket detected, retrying with fresh nonce");const w=await o.buildCompleteMessage(s,this.getNonceProvider(),a),S=await o.signPayload(w),_=parseInt(String(w.deadline),10),E={tx:{body:{messages:[{"@type":"/bank.v1.MsgTransferToBucketRequest",type:0,operation:"transfer_to_bucket",fromAddress:r,address:r,bucketId:e.bucketId,assetIndex:Number(t),amount:i,timestamp:tn()}],memo:`transfer_to_bucket_${Math.floor(Date.now()/1e3)}_${w.nonce}`,timeoutTimestamp:new Date(_*1e3).toISOString().replace(/\.\d{3}Z$/,"Z")},auth_info:{signer_infos:[{nonce:parseInt(String(w.nonce),10),deadline:_,timestamp:tn()}]},signatures:[this.hexSignatureToBase64(S)]}},T=(await this.httpClient.post("/tx/v1/submit",E)).body??{};return this.mapSubmitTxToExtractToBucketResponse(T)}return y}mapSubmitTxToExtractToBucketResponse(e){const t=e.accepted===!0,r=e.txhash!=null?String(e.txhash):void 0,i=tn();return{success:t,...r!=null&&{txHash:r},...e.errorMessage!=null&&{errorMessage:String(e.errorMessage)},timestamp:i,...e}}async createBucket(e){if(e.collateralAssetIndex===void 0||typeof e.collateralAssetIndex!="number"||e.collateralAssetIndex<0)throw new Error("collateralAssetIndex must be a non-negative number");if(!e.marginType||e.marginType.trim()==="")throw new Error("marginType cannot be empty");const t=e.marginType.toLowerCase();if(t!=="cross"&&t!=="isolated")throw new Error("marginType must be 'cross' or 'isolated'");this.walletAddress||await this.initialize();const r=this.getWalletAddress(),i=e.initialMargin??"0",s=Math.floor(Date.now()/1e3),o=tn(),a=r.replace(/^0x/i,"").slice(0,8),l=e.bucketId&&e.bucketId.trim()!==""?e.bucketId:`bucket-${a}-${s}`,c=t==="isolated"?"BUCKET_TYPE_ISOLATED":"BUCKET_TYPE_CROSS",u={action:Aue,owner:r,collateralAssetIndex:String(e.collateralAssetIndex),initialMargin:i,marginType:t},h=this.getSignatureBuilder(),d=await h.buildCompleteMessage(u,this.getNonceProvider(),300),f=await h.signPayload(d),m=parseInt(String(d.deadline),10),g={"@type":"/bucket.v1.MsgCreateBucketRequest",type:0,operation:"create_bucket",fromAddress:r,address:r,bucketId:l,bucketType:c,collateralAssetIndex:e.collateralAssetIndex,initialMargin:i,marginType:t,timestamp:o},v=this.hexSignatureToBase64(f),y={tx:{body:{messages:[g],memo:`bucket_create_${Date.now()}_${d.nonce}`,timeoutTimestamp:new Date(m*1e3).toISOString().replace(/\.\d{3}Z$/,"Z")},auth_info:{signer_infos:[{nonce:parseInt(String(d.nonce),10),deadline:m,timestamp:o}]},signatures:[v]}},w=(await this.httpClient.post("/tx/v1/submit",y)).body??{};return this.mapSubmitTxToCreateBucketResponse(w,l)}async withdrawFromBucket(e){var b;if(!e.bucketId||e.bucketId.trim()==="")throw new Error("bucketId cannot be empty");const t=e.assetIndex??(((b=e.assetId)==null?void 0:b.toUpperCase())==="USDC"?1:void 0);if(t==null||t<1)throw new Error("Provide assetIndex (e.g. 1 for USDC) or assetId 'USDC'");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const r=this.getWalletAddress(),i=jn(e.amount),s={action:$ue,bucketId:e.bucketId,assetIndex:Number(t),amount:i},o=this.getSignatureBuilder(),a=300,l=await o.buildCompleteMessage(s,this.getNonceProvider(),a),c=await o.signPayload(l),u=tn(),h=parseInt(String(l.deadline),10),d={"@type":"/bucket.v1.MsgTransferToBankRequest",type:0,operation:"transfer_to_bank",fromAddress:r,address:r,bucketId:e.bucketId,assetIndex:Number(t),amount:i,timestamp:u},f=this.hexSignatureToBase64(c),m={tx:{body:{messages:[d],memo:`transfer_to_bank_${Math.floor(Date.now()/1e3)}_${l.nonce}`,timeoutTimestamp:new Date(h*1e3).toISOString().replace(/\.\d{3}Z$/,"Z")},auth_info:{signer_infos:[{nonce:parseInt(String(l.nonce),10),deadline:h,timestamp:u}]},signatures:[f]}},v=(await this.httpClient.post("/tx/v1/submit",m)).body??{},y=this.mapSubmitTxToWithdrawFromBucketResponse(v);if(!y.success&&Hl(y.errorMessage)&&this.walletAddress){console.log("[FiClient] Duplicate withdrawFromBucket detected, retrying with fresh nonce");const w=await o.buildCompleteMessage(s,this.getNonceProvider(),a),S=await o.signPayload(w),_=parseInt(String(w.deadline),10),E={tx:{body:{messages:[{"@type":"/bucket.v1.MsgTransferToBankRequest",type:0,operation:"transfer_to_bank",fromAddress:r,address:r,bucketId:e.bucketId,assetIndex:Number(t),amount:i,timestamp:tn()}],memo:`transfer_to_bank_${Math.floor(Date.now()/1e3)}_${w.nonce}`,timeoutTimestamp:new Date(_*1e3).toISOString().replace(/\.\d{3}Z$/,"Z")},auth_info:{signer_infos:[{nonce:parseInt(String(w.nonce),10),deadline:_,timestamp:tn()}]},signatures:[this.hexSignatureToBase64(S)]}},T=(await this.httpClient.post("/tx/v1/submit",E)).body??{};return this.mapSubmitTxToWithdrawFromBucketResponse(T)}return y}mapSubmitTxToWithdrawFromBucketResponse(e){const t=e.accepted===!0,r=e.txhash!=null?String(e.txhash):void 0;return{...e,success:t,...r!=null&&{txHash:r},...e.errorMessage!=null&&{errorMessage:String(e.errorMessage)}}}async bankMint(e){if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const t=jn(e.amount),r={action:Fue,address:this.getWalletAddress(),asset:e.assetId,amount:t},i=this.getSignatureBuilder(),s=await i.buildCompleteMessage(r,this.getNonceProvider()),o=await i.signPayload(s),a=i.buildEIP712Tx(s,o);return(await this.httpClient.post("/router/v1/tx",a)).body}async bankTransfer(e){if(!e.to||e.to.trim()==="")throw new Error("to address cannot be empty");const t=this.resolveBankTransferAssetIndex(e);if(t==null||t<0)throw new Error("Provide assetIndex (e.g. 0 for MORM, 1 for USDC) or assetId (MORM, USDC, BTC)");if(!e.amount||e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const r=this.getWalletAddress(),i=jn(e.amount),s={action:zue,owner:r,toAddress:e.to,assetIndex:Number(t),amount:i},o=this.getSignatureBuilder(),a=300,l=await o.buildCompleteMessage(s,this.getNonceProvider(),a),c=await o.signPayload(l),u=tn(),h=parseInt(String(l.deadline),10),d={"@type":"/bank.v1.MsgTransferRequest",type:16,fromAddress:r,toAddress:e.to,assetIndex:Number(t),amount:i,timestamp:u};e.memo&&(d.memo=e.memo);const f=this.hexSignatureToBase64(c),m={tx:{body:{messages:[d],memo:`transfer_${e.to.slice(0,8)}_${Date.now()}`,timeoutTimestamp:new Date(h*1e3).toISOString().replace(/\.\d{3}Z$/,"Z")},auth_info:{signer_infos:[{nonce:parseInt(String(l.nonce),10),deadline:h,timestamp:u}]},signatures:[f]}},v=(await this.httpClient.post("/tx/v1/submit",m)).body??{},y=this.mapSubmitTxToBankTransferResponse(v);if(!y.success&&Hl(y.errorMessage)&&this.walletAddress){console.log("[FiClient] Duplicate bankTransfer detected, retrying with fresh nonce");const b=await o.buildCompleteMessage(s,this.getNonceProvider(),a),w=await o.signPayload(b),S=parseInt(String(b.deadline),10),_={tx:{body:{messages:[{"@type":"/bank.v1.MsgTransferRequest",type:16,fromAddress:r,toAddress:e.to,assetIndex:Number(t),amount:i,timestamp:tn(),...e.memo&&{memo:e.memo}}],memo:`transfer_${e.to.slice(0,8)}_${Date.now()}`,timeoutTimestamp:new Date(S*1e3).toISOString().replace(/\.\d{3}Z$/,"Z")},auth_info:{signer_infos:[{nonce:parseInt(String(b.nonce),10),deadline:S,timestamp:tn()}]},signatures:[this.hexSignatureToBase64(w)]}},C=(await this.httpClient.post("/tx/v1/submit",_)).body??{};return this.mapSubmitTxToBankTransferResponse(C)}return y}resolveBankTransferAssetIndex(e){var r;if(e.assetIndex!=null&&e.assetIndex>=0)return e.assetIndex;const t=(r=e.assetId)==null?void 0:r.toUpperCase();return t==="MORM"?0:t==="USDC"?1:t==="BTC"?2:null}mapSubmitTxToBankTransferResponse(e){const t=e.accepted===!0,r=e.txhash!=null?String(e.txhash):void 0;return{success:t,...r!=null&&{txHash:r},...e.errorMessage!=null&&{errorMessage:String(e.errorMessage)},...e}}async checkPositionRisk(e){if(!e.address||e.address.trim()==="")throw new Error("address cannot be empty");if(!e.market_index||e.market_index.trim()==="")throw new Error("market_index cannot be empty");if(!e.side||e.side.toUpperCase()!=="LONG"&&e.side.toUpperCase()!=="SHORT")throw new Error("side must be LONG or SHORT");if(!e.size||e.size.trim()==="")throw new Error("size cannot be empty");if(!e.leverage||e.leverage.trim()==="")throw new Error("leverage cannot be empty");return(await this.httpClient.post("/bucket/v1/position/check-risk",{address:e.address,market_index:e.market_index,side:e.side.toUpperCase(),size:e.size,leverage:e.leverage})).body}}class Ahe{constructor(e){ce(this,"ws",null);ce(this,"state",cn.Disconnected);ce(this,"handlers",new Map);ce(this,"reconnectTimer",null);ce(this,"reconnectAttempts",0);ce(this,"config");ce(this,"originalConfig");ce(this,"pingInterval",null);ce(this,"stateChangeHandlers",new Set);ce(this,"authState","not_required");ce(this,"pendingSubscriptions",new Map);this.originalConfig=e;const t=this.convertHTTPToWebSocketURL(e.url);this.config={url:t,authToken:e.authToken||"",walletAddress:e.walletAddress||"",deviceID:e.deviceID||"",reconnectInterval:e.reconnectInterval||5e3,maxReconnectAttempts:e.maxReconnectAttempts||10}}convertHTTPToWebSocketURL(e){if(e.startsWith("ws://")||e.startsWith("wss://")){if(e.includes("router.morpheum.io")){const t=new URL(e);if(!t.pathname||t.pathname==="/")return t.pathname="/websocket",t.toString()}return e}if(e.includes("localhost")||e.includes("127.0.0.1")){const t=e.match(/:(\d+)/);return`ws://localhost:${t?t[1]:"8080"}/websocket`}if(e.startsWith("http://")){const t=e.replace("http://","ws://");return t.includes("/websocket")?t:t.endsWith("/")?`${t}websocket`:`${t}/websocket`}if(e.startsWith("https://")){const t=e.replace("https://","wss://");return t.includes("/websocket")?t:t.endsWith("/")?`${t}websocket`:`${t}/websocket`}if(!e||e.trim()===""||e.includes("router.morpheum.io"))return"wss://router.morpheum.io/websocket";try{const t=new URL(e.startsWith("http")?e:`https://${e}`),r=t.protocol==="https:"?"wss:":"ws:",i=t.pathname&&t.pathname!=="/"?t.pathname:"",s=i.endsWith("/websocket")?i:`${i}/websocket`;return`${r}//${t.host}${s}`}catch{return console.warn(`Failed to parse URL ${e}, defaulting to router.morpheum.io/websocket`),"wss://router.morpheum.io/websocket"}}getConnectionURL(){const e=[];this.config.authToken&&e.push(`token=${encodeURIComponent(this.config.authToken)}`),"walletAddress"in this.originalConfig&&this.originalConfig.walletAddress!==void 0&&e.push(`wallet=${encodeURIComponent(this.originalConfig.walletAddress||"")}`),this.config.deviceID&&e.push(`device_id=${encodeURIComponent(this.config.deviceID)}`);const t=this.config.url.includes("?")?"&":"?";return e.length>0?`${this.config.url}${t}${e.join("&")}`:this.config.url}async connect(){if(!(this.state===cn.Connected||this.state===cn.Connecting))return this.setState(cn.Connecting),new Promise((e,t)=>{let r=!1,i=!1,s=null;const o=a=>{i||(i=!0,s!==null&&(clearTimeout(s),s=null),this.setState(cn.Disconnected),t(a))};try{const a=this.getConnectionURL();console.log("Connecting to WebSocket:",a);const l=new WebSocket(a);s=window.setTimeout(()=>{!r&&!i&&(l.close(),o(new Error(`WebSocket connection timeout after 10 seconds. Unable to connect to ${a}. Check if the server is running and accessible.`)))},1e4),l.onopen=async()=>{s!==null&&(clearTimeout(s),s=null),r=!0,this.ws=l,this.setState(cn.Connected),this.reconnectAttempts=0,this.config.authToken?(this.authState="authenticated",console.log("[WebSocketClient] Authentication via URL token")):this.authState="not_required",this.startPing(),e()},l.onmessage=c=>{try{const u=JSON.parse(c.data);this.handleMessage(u)}catch(u){console.error("Failed to parse WebSocket message:",u)}},l.onerror=c=>{console.error("WebSocket error event:",c)},l.onclose=c=>{if(s!==null&&(clearTimeout(s),s=null),this.ws=null,this.stopPing(),this.authState="not_required",!r&&!i){const u=c.code,h=c.reason||"Unknown reason",d=c.wasClean;let f=`WebSocket connection failed. Close code: ${u}`;u===1006?f=`WebSocket connection failed (abnormal closure, code ${u}). Unable to connect to ${a}. Possible causes: Server is not running, network issue, firewall blocking connection, or incorrect URL.`:u===1002?f=`WebSocket protocol error (code ${u}). The server may not support WebSocket protocol or there's a protocol mismatch.`:u===1003?f=`WebSocket unsupported data type (code ${u}).`:u===1008?f=`WebSocket connection closed due to policy violation (code ${u}): ${h}`:u===1011?f=`WebSocket server error (code ${u}): ${h}`:u===1e3?f=`WebSocket connection closed normally (code ${u}) but before opening.`:h&&h!=="Unknown reason"&&(f+=` Reason: ${h}`),!d&&u===1006&&(f+=" This usually indicates the connection was refused or the server is unreachable."),o(new Error(f))}else r&&(this.setState(cn.Disconnected),this.scheduleReconnect())}}catch(a){s!==null&&(clearTimeout(s),s=null);const l=a instanceof Error?a.message:String(a);o(new Error(`Failed to create WebSocket connection: ${l}`))}})}disconnect(){this.cancelReconnect(),this.stopPing(),this.ws&&(this.ws.close(),this.ws=null),this.handlers.clear(),this.stateChangeHandlers.clear(),this.setState(cn.Disconnected)}send(e){var t;if(this.state!==cn.Connected||!this.ws)throw new Error("WebSocket not connected");if(this.ws.readyState!==WebSocket.OPEN){const r=this.ws.readyState===WebSocket.CONNECTING?"CONNECTING":this.ws.readyState===WebSocket.CLOSING?"CLOSING":this.ws.readyState===WebSocket.CLOSED?"CLOSED":"UNKNOWN";throw console.warn(`[WebSocketClient] WebSocket not in OPEN state (${r}), updating connection state`),this.setState(cn.Disconnected),new Error(`WebSocket not open (state: ${r})`)}try{e.params&&typeof e.params!="object"&&(console.warn("[WebSocketClient] params must be an object, converting:",e.params),e.params={});const r=JSON.stringify(e);this.ws.send(r)}catch(r){throw console.error("[WebSocketClient] Failed to send message:",r),((t=this.ws)==null?void 0:t.readyState)!==WebSocket.OPEN&&(console.warn("[WebSocketClient] WebSocket not open after send error, scheduling reconnect"),this.setState(cn.Disconnected),this.scheduleReconnect()),r}}on(e,t){this.handlers.has(e)||this.handlers.set(e,[]),this.handlers.get(e).push(t)}off(e,t){if(!t){this.handlers.delete(e);return}const r=this.handlers.get(e);if(r){const i=r.indexOf(t);i>-1&&r.splice(i,1)}}getState(){return this.state}isConnected(){const e=this.state===cn.Connected,t=this.ws!==null&&this.ws.readyState===WebSocket.OPEN;return e&&!t?(console.warn("[WebSocketClient] State is Connected but WebSocket is not OPEN, updating state"),this.setState(cn.Disconnected),!1):e&&t}setState(e){const t=this.state;this.state=e,t!==e&&this.stateChangeHandlers.forEach(r=>{try{r(e)}catch(i){console.error("Error in state change handler:",i)}})}onStateChange(e){return this.stateChangeHandlers.add(e),()=>{this.stateChangeHandlers.delete(e)}}handleMessage(e){if(e.type==="ping"){try{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const s={type:"pong"};e.id&&(s.id=e.id),this.send(s)}}catch(s){console.error("[WebSocketClient] Failed to send pong:",s),this.ws&&this.ws.readyState!==WebSocket.OPEN&&(this.setState(cn.Disconnected),this.scheduleReconnect())}return}if(e.type==="ack"&&typeof e.channel=="string"){const s=this.pendingSubscriptions.get(e.channel);s&&(clearTimeout(s.timeout),s.resolve(),this.pendingSubscriptions.delete(e.channel))}if(e.action==="subscribed"&&typeof e.channel=="string"){const s=this.pendingSubscriptions.get(e.channel);s&&(clearTimeout(s.timeout),s.resolve(),this.pendingSubscriptions.delete(e.channel))}e.is_stale===!0&&(console.warn("[WebSocketClient] Received stale data:",e),(this.handlers.get("stale")||[]).forEach(o=>{try{o(e)}catch(a){console.error("[WebSocketClient] Error in stale data handler:",a)}}));let t;if(typeof e.action=="string")if(e.action==="subscribed")typeof e.channel=="string"?t=e.channel:t="subscribed";else if(e.action==="error")t="error",e.error?console.error("[WebSocketClient] Server error:",{code:e.error.code,message:e.error.message,details:e.error.details}):e.message&&console.error("[WebSocketClient] Server error:",e.message);else if(e.action==="pong")t="pong";else if(e.action==="data"||e.action==="update")if(typeof e.channel=="string")t=e.channel;else{console.error("[WebSocketClient] Missing channel in data message");return}else t=e.action;else typeof e.type=="string"?e.type==="data"?typeof e.channel=="string"?t=e.channel:t="message":e.type==="error"?(t="error",e.error?console.error("[WebSocketClient] Server error:",{code:e.error.code,message:e.error.message,details:e.error.details}):e.message&&console.error("[WebSocketClient] Server error:",e.message)):e.type==="ack"?typeof e.channel=="string"?t=e.channel:t="ack":e.type==="pong"?t="pong":t=e.type:typeof e.event=="string"?t=e.event:typeof e.channel=="string"?t=e.channel:t="message";const r=this.handlers.get(t)||[],i=this.handlers.get("*")||[];r.forEach(s=>{try{s(e)}catch(o){console.error(`[WebSocketClient] Error in handler for ${t}:`,o)}}),t!=="error"&&i.forEach(s=>{try{s(e)}catch(o){console.error("[WebSocketClient] Error in wildcard handler:",o)}})}scheduleReconnect(){if(this.reconnectAttempts>=this.config.maxReconnectAttempts){console.error("[WebSocketClient] Max reconnection attempts reached"),this.setState(cn.Disconnected);return}this.reconnectAttempts++,this.setState(cn.Reconnecting),this.reconnectTimer=window.setTimeout(()=>{this.connect().catch(e=>{console.error("[WebSocketClient] Reconnection failed:",e)})},this.config.reconnectInterval)}cancelReconnect(){this.reconnectTimer!==null&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.reconnectAttempts=0}startPing(){this.stopPing(),this.pingInterval=window.setInterval(()=>{if(this.ws&&this.state===cn.Connected)if(this.ws.readyState===WebSocket.OPEN)try{const e=`ping_${Date.now()}`;this.send({type:"ping",id:e})}catch(e){console.error("[WebSocketClient] Failed to send ping:",e),this.ws.readyState!==WebSocket.OPEN&&(console.warn("[WebSocketClient] WebSocket not open, scheduling reconnect"),this.setState(cn.Disconnected),this.scheduleReconnect())}else console.warn("[WebSocketClient] WebSocket not in OPEN state during ping, state:",this.ws.readyState),this.setState(cn.Disconnected),this.scheduleReconnect()},2e4)}stopPing(){this.pingInterval!==null&&(clearInterval(this.pingInterval),this.pingInterval=null)}setAuthToken(e,t,r){this.config.authToken=e,this.config.walletAddress=t,this.config.deviceID=r,this.originalConfig.authToken=e,this.originalConfig.walletAddress=t,this.originalConfig.deviceID=r,console.log(`Auth set: address=${t}, device=${r}`)}async updateAuth(e,t,r){e!==void 0&&(this.config.authToken=e,this.originalConfig.authToken=e),t!==void 0&&(this.config.walletAddress=t,this.originalConfig.walletAddress=t),r!==void 0&&(this.config.deviceID=r,this.originalConfig.deviceID=r),this.isConnected()&&(this.disconnect(),await this.connect())}waitForSubscription(e,t=5e3){return new Promise((r,i)=>{if(!this.pendingSubscriptions.has(e)){r();return}const s=window.setTimeout(()=>{this.pendingSubscriptions.delete(e),i(new Error(`Subscription acknowledgment timeout for channel: ${e}`))},t),o=this.pendingSubscriptions.get(e);o?(o.timeout=s,o.resolve=r,o.reject=i):(clearTimeout(s),r())})}registerPendingSubscription(e){this.pendingSubscriptions.has(e)||this.pendingSubscriptions.set(e,{resolve:()=>{},reject:()=>{},timeout:0})}isReadyForSubscriptions(){const e=this.state===cn.Connected,r=!this.config.authToken||this.authState==="authenticated";return e&&r}getAuthState(){return this.authState}getAuthToken(){return this.config.authToken}}function Lhe(n){const e=atob(n),t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function Fhe(n){try{const e=new TextDecoder("utf-8",{fatal:!1}).decode(n);return JSON.parse(e)}catch{return null}}function jhe(n){if(n==null||typeof n!="object")return n;const e=n,t=e.payload,r=t==null?void 0:t.value;if(typeof r!="string")return n;let i,s;try{const a=Lhe(r);s=a;const l=Fhe(a);l!==null&&typeof l=="object"&&(i=sd(l))}catch(a){console.warn("[streamPayload] decode failed:",a)}const o={...e,version:e.version??void 0,messageType:e.message_type??e.messageType,timestamp:e.timestamp??void 0,firstSequenceId:e.first_sequence_id??e.firstSequenceId,lastSequenceId:e.last_sequence_id??e.lastSequenceId,typeUrl:(t==null?void 0:t.type_url)??(t==null?void 0:t.typeUrl)};return i!==void 0&&(o.decodedPayload=i),s!==void 0&&(o.decodedPayloadRaw=s),o}const M1="multiplex";const $he="init-multiplex";class Bhe{constructor(e){ce(this,"wsClient");ce(this,"dataCallbacks",new Map);ce(this,"pendingById",new Map);ce(this,"pingPendingById",new Map);ce(this,"wildcardHandler",null);ce(this,"channelSubscribed",!1);this.wsClient=e}async subscribeToChannel(e=5e3){if(!this.wsClient.isConnected())throw new Error("WebSocket not connected. Call connect() first.");this.channelSubscribed||(this.wsClient.registerPendingSubscription(M1),this.wsClient.send({type:"subscribe",channel:M1,id:$he}),await this.wsClient.waitForSubscription(M1,e),this.channelSubscribed=!0,this.attachMessageHandler())}async subscribeStreams(e,t=5e3){await this.ensureChannelAndHandler();const r=`sub-${Date.now()}-${Math.random().toString(36).slice(2,9)}`;return new Promise((i,s)=>{const o=setTimeout(()=>{const u=this.pendingById.get(r);u&&this.pendingById.delete(r)&&u.reject(new Error(`Multiplex subscribe timeout (id: ${r})`))},t),a=()=>{clearTimeout(o),this.pendingById.delete(r)&&i()},l=u=>{clearTimeout(o),this.pendingById.delete(r)&&s(u)};this.pendingById.set(r,{resolve:a,reject:l});const c=e.map(u=>({streamType:u.stream_type,filter:u.filter}));this.wsClient.send({action:"subscribe",id:r,subscriptions:c})})}unsubscribeStreams(e){if(!this.channelSubscribed||!this.wsClient.isConnected())return;const t=`unsub-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,r=e.map(i=>({streamType:i.stream_type,filter:i.filter}));this.wsClient.send({action:"unsubscribe",id:t,subscriptions:r})}onStreamData(e,t){return this.dataCallbacks.has(e)||this.dataCallbacks.set(e,[]),this.dataCallbacks.get(e).push(t),()=>{const r=this.dataCallbacks.get(e);if(r){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}}async ping(e=5e3){await this.ensureChannelAndHandler();const t=`ping-${Date.now()}-${Math.random().toString(36).slice(2,9)}`;return new Promise((r,i)=>{const s=setTimeout(()=>{this.pingPendingById.delete(t)&&i(new Error(`Multiplex pong timeout (id: ${t})`))},e);this.pingPendingById.set(t,{resolve:()=>{clearTimeout(s),this.pingPendingById.delete(t),r()},reject:o=>{clearTimeout(s),this.pingPendingById.delete(t),i(o)}}),this.wsClient.send({action:"ping",id:t})})}detach(){this.wildcardHandler&&(this.wsClient.off("*",this.wildcardHandler),this.wildcardHandler=null),this.channelSubscribed=!1,this.dataCallbacks.clear(),this.pendingById.clear(),this.pingPendingById.clear()}async ensureChannelAndHandler(){this.channelSubscribed||await this.subscribeToChannel()}attachMessageHandler(){this.wildcardHandler||(this.wildcardHandler=e=>{const t=e.type,r=e.id,i=e.stream_type??e.streamType??e.subChannel,s=i?i:void 0;if(t==="data"&&s){const o=this.dataCallbacks.get(s);if(o!=null&&o.length){const a=e.data;let l=a!=null&&typeof a=="object"?jhe(a):a;const c=l;(c==null?void 0:c.decodedPayload)!=null?l=c.decodedPayload:l!=null&&typeof l=="object"&&!("decodedPayload"in l)&&!("payload"in l)&&(l=sd(l));const u={type:"data",id:e.id,stream_type:s,symbol:e.symbol,marketIndex:e.marketIndex,data:l,error:e.error,U:e.U,u:e.u,ts:e.ts};o.forEach(h=>{try{h(u)}catch(d){console.error(`[MultiplexStreamClient] callback error for ${s}:`,d)}})}return}if(t==="ack"&&r){const o=this.pendingById.get(r);o&&o.resolve();return}if(t==="error"&&r){const o=this.pendingById.get(r);if(o){const a=e.error;let l="Multiplex error";if(a!=null&&typeof a=="object"){const c=a;typeof c.message=="string"?l=c.message:typeof c.code=="string"&&(l=c.code)}o.reject(new Error(l))}return}if(t==="pong"&&r){const o=this.pingPendingById.get(r);o&&o.resolve()}},this.wsClient.on("*",this.wildcardHandler))}}class a5{constructor(e){ce(this,"wsClient");ce(this,"subscriptions",new Map);ce(this,"lastPriceWrappedCallbacks",new Map);ce(this,"wrappedCallbacks",new Map);ce(this,"multiplexStreamClient");ce(this,"multiFeedSubscriptions",new Map);ce(this,"multiFeedWrappedCallbacks",new Map);this.wsClient=new Ahe({url:e.url,authToken:e.authToken,walletAddress:e.walletAddress,deviceID:e.deviceID}),this.multiplexStreamClient=new Bhe(this.wsClient)}async connect(){await this.wsClient.connect()}disconnect(){this.wsClient.disconnect(),this.subscriptions.clear(),this.lastPriceWrappedCallbacks.clear(),this.wrappedCallbacks.clear(),this.multiFeedSubscriptions.clear(),this.multiFeedWrappedCallbacks.clear(),this.multiplexStreamClient.detach()}isConnected(){return this.wsClient.isConnected()}getState(){return this.wsClient.getState()}onStateChange(e){return this.wsClient.onStateChange(e)}setAuthToken(e,t,r){this.wsClient.setAuthToken(e,t,r)}async updateAuth(e,t,r){return this.wsClient.updateAuth(e,t,r)}isReadyForSubscriptions(){return this.wsClient.isReadyForSubscriptions()}getAuthState(){return this.wsClient.getAuthState()}async waitForSubscription(e,t=5e3){return this.wsClient.waitForSubscription(e,t)}getWebSocketClient(){return this.wsClient}parseRouterData(e){if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.error("Failed to parse router data field:",t),null}return e}extractRouterData(e){if(e==null||typeof e!="object")return null;const t=e;if(typeof t.action=="string"){if((t.action==="data"||t.action==="update")&&t.data!==void 0){const r=this.parseRouterData(t.data);return r==null&&console.warn("[SubscriptionClient] Failed to parse action-based data:",t.data),r??null}if(t.action==="data"||t.action==="update"){const{action:r,channel:i,...s}=t;return Object.keys(s).length>0?s:null}if(t.action==="error")return t.error!==void 0?console.error("WebSocket error response:",t.error):typeof t.message=="string"&&console.error("WebSocket error response:",t.message),null;if(t.action==="subscribed")return null}if(t.type==="data"&&t.data!==void 0){const r=this.parseRouterData(t.data);return r==null&&console.warn("[SubscriptionClient] Failed to parse router data:",t.data),r??null}if(t.type==="error")return t.error!==void 0?console.error("WebSocket error response:",t.error):typeof t.message=="string"&&console.error("WebSocket error response:",t.message),null;if(t.type==="ack")return null;if(t.channel!==void 0&&t.action===void 0&&t.type===void 0){const{channel:r,...i}=t;return Object.keys(i).length>0?i:null}return typeof t.action=="string"&&t.action!=="data"&&t.action!=="update"&&t.action!=="subscribed"&&t.action!=="error"?console.debug("[SubscriptionClient] Unexpected action:",t.action,"Full message:",e):typeof t.type=="string"&&t.type!=="data"&&t.type!=="ack"&&t.type!=="error"?console.debug("[SubscriptionClient] Unexpected message type:",t.type,"Full message:",e):(t.action==="data"||t.action==="update"||t.type==="data")&&t.data===void 0&&t.channel===void 0&&console.warn("[SubscriptionClient] Message is data/update but missing data/channel field:",e),null}validateMarketId(e){return e==null?!1:String(e).trim()!==""}validateKlineInterval(e){return["1m","5m","15m","1h","4h","1d"].includes(e)}validateTWAPWindowSize(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}validatePrivateChannelAuth(){if(!this.isReadyForSubscriptions()){const e=this.getAuthState();if(e==="pending")throw new Error("Authentication is pending. Please wait for authentication to complete before subscribing to private channels.");if(e==="failed")throw new Error("Authentication failed. Please re-authenticate before subscribing to private channels.");if(!this.wsClient.getAuthToken())throw new Error("Authentication token is required for private channels. Please provide authToken in SubscriptionClient config.")}}getMultiplexStreamClient(){return this.multiplexStreamClient}subscribeMultiFeedSubChannel(e,t,r,i){var c;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateMarketId(t))throw new Error(`Invalid market ID: ${t}. Market ID must be a non-empty string.`);const s=["buckets","orders","positions"];s.includes(e)&&this.validatePrivateChannelAuth(),this.multiFeedSubscriptions.set(e,[...this.multiFeedSubscriptions.get(e)||[],r]);const o=u=>{const h=this.extractRouterData(u);h!=null&&r(h)};this.multiFeedWrappedCallbacks.has(e)||this.multiFeedWrappedCallbacks.set(e,new Map),this.multiFeedWrappedCallbacks.get(e).set(r,o),this.wsClient.on(e,o);const a=this.wsClient.getAuthToken(),l={market_id:t,...i};s.includes(e)&&a&&!l.auth_token&&(l.auth_token=a);try{this.wsClient.send({type:"subscribe",channel:e,params:l})}catch(u){(c=this.multiFeedWrappedCallbacks.get(e))==null||c.delete(r);const h=this.multiFeedSubscriptions.get(e)||[],d=h.indexOf(r);throw d>-1&&(h.splice(d,1),this.multiFeedSubscriptions.set(e,h)),u}}unsubscribeMultiFeedSubChannel(e,t){var i,s;const r=this.multiFeedSubscriptions.get(e)||[];if(t){const o=r.indexOf(t);if(o>-1){r.splice(o,1),this.multiFeedSubscriptions.set(e,r);const a=(i=this.multiFeedWrappedCallbacks.get(e))==null?void 0:i.get(t);a&&(this.wsClient.off(e,a),this.multiFeedWrappedCallbacks.get(e).delete(t))}}else{const o=this.multiFeedWrappedCallbacks.get(e);o&&(o.forEach(a=>{this.wsClient.off(e,a)}),this.multiFeedWrappedCallbacks.delete(e)),this.multiFeedSubscriptions.delete(e)}if((((s=this.multiFeedSubscriptions.get(e))==null?void 0:s.length)??0)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:e})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeTicker(e,t){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateMarketId(e))throw new Error(`Invalid market ID: ${e}. Market ID must be a non-empty string.`);const r="moniker",i="ticker";this.subscriptions.set(i,[...this.subscriptions.get(i)||[],t]);const s=a=>{const l=this.extractRouterData(a);l!=null&&t(l)};this.wrappedCallbacks.has(i)||this.wrappedCallbacks.set(i,new Map),this.wrappedCallbacks.get(i).set(t,s),this.wsClient.on(r,s);try{this.wsClient.send({type:"subscribe",channel:r,params:{market_id:e}})}catch(a){(o=this.wrappedCallbacks.get(i))==null||o.delete(t);const l=this.subscriptions.get(i)||[],c=l.indexOf(t);throw c>-1&&(l.splice(c,1),this.subscriptions.set(i,l)),a}}unsubscribeTicker(e,t){var o,a;const r="ticker",i="moniker",s=this.subscriptions.get(r)||[];if(t){const l=s.indexOf(t);if(l>-1){s.splice(l,1),this.subscriptions.set(r,s);const c=(o=this.wrappedCallbacks.get(r))==null?void 0:o.get(t);c&&(this.wsClient.off(i,c),this.wrappedCallbacks.get(r).delete(t))}}else{const l=this.wrappedCallbacks.get(r);l&&(l.forEach(c=>{this.wsClient.off(i,c)}),this.wrappedCallbacks.delete(r)),this.subscriptions.delete(r)}if(((a=this.subscriptions.get(r))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:i})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeLastPrice(e,t,r=!0){if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateMarketId(e))throw new Error(`Invalid market ID: ${e}. Market ID must be a non-empty string.`);const i="lastPrice";this.subscriptions.set(i,[...this.subscriptions.get(i)||[],t]);const s=o=>{const a=this.extractRouterData(o);if(a==null||typeof a!="object"){console.warn("[SubscriptionClient] Failed to extract trade data from message:",o);return}const l=a;if(l.price===void 0||l.price===null){console.warn("[SubscriptionClient] Trade data missing price field:",l);return}r&&(l.price!=null&&(l.price=ar(typeof l.price=="string"?l.price:String(l.price))),l.quantity!=null&&(l.quantity=ar(typeof l.quantity=="string"?l.quantity:String(l.quantity)))),t(l)};this.lastPriceWrappedCallbacks.set(t,s),this.wsClient.on(i,s);try{this.wsClient.send({type:"subscribe",channel:"lastPrice",params:{market_id:e}})}catch(o){this.lastPriceWrappedCallbacks.delete(t);const a=this.subscriptions.get(i)||[],l=a.indexOf(t);throw l>-1&&(a.splice(l,1),this.subscriptions.set(i,a)),o}}unsubscribeLastPrice(e,t){var s;const r="lastPrice",i=this.subscriptions.get(r)||[];if(t){const o=i.indexOf(t);if(o>-1){i.splice(o,1),this.subscriptions.set(r,i);const a=this.lastPriceWrappedCallbacks.get(t);a&&(this.wsClient.off(r,a),this.lastPriceWrappedCallbacks.delete(t))}}else i.forEach(o=>{const a=this.lastPriceWrappedCallbacks.get(o);a&&(this.wsClient.off(r,a),this.lastPriceWrappedCallbacks.delete(o))}),this.subscriptions.delete(r);if(((s=this.subscriptions.get(r))==null?void 0:s.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"lastPrice"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeBuckets(e){var s;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");this.validatePrivateChannelAuth();const t="buckets";this.subscriptions.set(t,[...this.subscriptions.get(t)||[],e]);const r=o=>{const a=this.extractRouterData(o);a!=null&&e(a)};this.wrappedCallbacks.has(t)||this.wrappedCallbacks.set(t,new Map),this.wrappedCallbacks.get(t).set(e,r),this.wsClient.on(t,r),this.wsClient.registerPendingSubscription(t);const i=this.wsClient.getAuthToken();try{const o={};i&&(o.auth_token=i),this.wsClient.send({type:"subscribe",channel:"buckets",params:o})}catch(o){(s=this.wrappedCallbacks.get(t))==null||s.delete(e);const a=this.subscriptions.get(t)||[],l=a.indexOf(e);throw l>-1&&(a.splice(l,1),this.subscriptions.set(t,a)),o}}unsubscribeBuckets(e){var i,s;const t="buckets",r=this.subscriptions.get(t)||[];if(e){const o=r.indexOf(e);if(o>-1){r.splice(o,1),this.subscriptions.set(t,r);const a=(i=this.wrappedCallbacks.get(t))==null?void 0:i.get(e);a&&(this.wsClient.off(t,a),this.wrappedCallbacks.get(t).delete(e))}}else{const o=this.wrappedCallbacks.get(t);o&&(o.forEach(a=>{this.wsClient.off(t,a)}),this.wrappedCallbacks.delete(t)),this.subscriptions.delete(t)}if(((s=this.subscriptions.get(t))==null?void 0:s.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"buckets"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeKline(e,t,r){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateMarketId(e))throw new Error(`Invalid market ID: ${e}. Market ID must be a non-empty string.`);if(!this.validateKlineInterval(t))throw new Error(`Invalid interval: ${t}. Interval must be one of: "1m", "5m", "15m", "1h", "4h", "1d".`);const i="kline";this.subscriptions.set(i,[...this.subscriptions.get(i)||[],r]);const s=a=>{const l=this.extractRouterData(a);l&&r(l)};this.wrappedCallbacks.has(i)||this.wrappedCallbacks.set(i,new Map),this.wrappedCallbacks.get(i).set(r,s),this.wsClient.on(i,s);try{this.wsClient.send({type:"subscribe",channel:"kline",params:{market_id:e,interval:t}})}catch(a){(o=this.wrappedCallbacks.get(i))==null||o.delete(r);const l=this.subscriptions.get(i)||[],c=l.indexOf(r);throw c>-1&&(l.splice(c,1),this.subscriptions.set(i,l)),a}}unsubscribeKline(e,t,r){var o,a;const i="kline",s=this.subscriptions.get(i)||[];if(r){const l=s.indexOf(r);if(l>-1){s.splice(l,1),this.subscriptions.set(i,s);const c=(o=this.wrappedCallbacks.get(i))==null?void 0:o.get(r);c&&(this.wsClient.off(i,c),this.wrappedCallbacks.get(i).delete(r))}}else{const l=this.wrappedCallbacks.get(i);l&&(l.forEach(c=>{this.wsClient.off(i,c)}),this.wrappedCallbacks.delete(i)),this.subscriptions.delete(i)}if(((a=this.subscriptions.get(i))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"kline"})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeTWAP(e,t,r){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateMarketId(e))throw new Error(`Invalid market ID: ${e}. Market ID must be a non-empty string.`);if(!this.validateTWAPWindowSize(t))throw new Error(`Invalid window size: ${t}. Window size must be a positive number.`);const i="twap";this.subscriptions.set(i,[...this.subscriptions.get(i)||[],r]);const s=a=>{const l=this.extractRouterData(a);l&&r(l)};this.wrappedCallbacks.has(i)||this.wrappedCallbacks.set(i,new Map),this.wrappedCallbacks.get(i).set(r,s),this.wsClient.on(i,s);try{this.wsClient.send({type:"subscribe",channel:"twap",params:{market_id:e,window_size:t}})}catch(a){(o=this.wrappedCallbacks.get(i))==null||o.delete(r);const l=this.subscriptions.get(i)||[],c=l.indexOf(r);throw c>-1&&(l.splice(c,1),this.subscriptions.set(i,l)),a}}unsubscribeTWAP(e,t,r){var o,a;const i="twap",s=this.subscriptions.get(i)||[];if(r){const l=s.indexOf(r);if(l>-1){s.splice(l,1),this.subscriptions.set(i,s);const c=(o=this.wrappedCallbacks.get(i))==null?void 0:o.get(r);c&&(this.wsClient.off(i,c),this.wrappedCallbacks.get(i).delete(r))}}else{const l=this.wrappedCallbacks.get(i);l&&(l.forEach(c=>{this.wsClient.off(i,c)}),this.wrappedCallbacks.delete(i)),this.subscriptions.delete(i)}if(((a=this.subscriptions.get(i))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"twap"})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeBalances(e){var s;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");this.validatePrivateChannelAuth();const t="balances";this.subscriptions.set(t,[...this.subscriptions.get(t)||[],e]);const r=o=>{const a=this.extractRouterData(o);a&&e(a)};this.wrappedCallbacks.has(t)||this.wrappedCallbacks.set(t,new Map),this.wrappedCallbacks.get(t).set(e,r),this.wsClient.on(t,r),this.wsClient.registerPendingSubscription(t);const i=this.wsClient.getAuthToken();try{const o={};i&&(o.auth_token=i),this.wsClient.send({type:"subscribe",channel:"balances",params:o})}catch(o){(s=this.wrappedCallbacks.get(t))==null||s.delete(e);const a=this.subscriptions.get(t)||[],l=a.indexOf(e);throw l>-1&&(a.splice(l,1),this.subscriptions.set(t,a)),o}}unsubscribeBalances(e){var i,s;const t="balances",r=this.subscriptions.get(t)||[];if(e){const o=r.indexOf(e);if(o>-1){r.splice(o,1),this.subscriptions.set(t,r);const a=(i=this.wrappedCallbacks.get(t))==null?void 0:i.get(e);a&&(this.wsClient.off(t,a),this.wrappedCallbacks.get(t).delete(e))}}else{const o=this.wrappedCallbacks.get(t);o&&(o.forEach(a=>{this.wsClient.off(t,a)}),this.wrappedCallbacks.delete(t)),this.subscriptions.delete(t)}if(((s=this.subscriptions.get(t))==null?void 0:s.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"balances"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}subscribeOrders(e){var s;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");this.validatePrivateChannelAuth();const t="orders";this.subscriptions.set(t,[...this.subscriptions.get(t)||[],e]);const r=o=>{const a=this.extractRouterData(o);a&&e(a)};this.wrappedCallbacks.has(t)||this.wrappedCallbacks.set(t,new Map),this.wrappedCallbacks.get(t).set(e,r),this.wsClient.on(t,r),this.wsClient.registerPendingSubscription(t);const i=this.wsClient.getAuthToken();try{const o={};i&&(o.auth_token=i),this.wsClient.send({type:"subscribe",channel:"orders",params:o})}catch(o){(s=this.wrappedCallbacks.get(t))==null||s.delete(e);const a=this.subscriptions.get(t)||[],l=a.indexOf(e);throw l>-1&&(a.splice(l,1),this.subscriptions.set(t,a)),o}}unsubscribeOrders(e){var i,s;const t="orders",r=this.subscriptions.get(t)||[];if(e){const o=r.indexOf(e);if(o>-1){r.splice(o,1),this.subscriptions.set(t,r);const a=(i=this.wrappedCallbacks.get(t))==null?void 0:i.get(e);a&&(this.wsClient.off(t,a),this.wrappedCallbacks.get(t).delete(e))}}else{const o=this.wrappedCallbacks.get(t);o&&(o.forEach(a=>{this.wsClient.off(t,a)}),this.wrappedCallbacks.delete(t)),this.subscriptions.delete(t)}if(((s=this.subscriptions.get(t))==null?void 0:s.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"orders"})}catch(o){console.error("Failed to send unsubscribe message:",o)}}}async function zhe(n,e,t,r,i){const s=Em.fromPhrase(n.trim(),"","m/44'/60'/0'/0/0");if(s.address.toLowerCase()!==e.toLowerCase())throw new Error(`Address mismatch: derived ${s.address} does not match provided ${e}`);let o;try{o=new yo(s.privateKey)}catch(S){throw new Error(`Invalid private key: cannot create signing key - ${S.message}`)}const a=mg(o.publicKey);if(a.toLowerCase()!==e.toLowerCase())throw new Error(`Private key validation failed: derived address ${a} does not match ${e}`);const l=BigInt(s.privateKey),c=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(l===0n||l>=c)throw new Error("Invalid private key: must be between 1 and secp256k1 order - 1");const h=l.toString(16).toLowerCase().padStart(64,"0"),d=Ve("0x"+h);if(d.length!==32)throw new Error(`Invalid private key: expected 32 bytes, got ${d.length}`);if(d.every(S=>S===0))throw new Error("Invalid private key: cannot be zero");const m=BigInt("0x"+h);if(m!==l)throw new Error(`Private key encoding error: bytes do not match BigInt value. Original: ${l.toString(16)}, Reconstructed: ${m.toString(16)}`);const g=h;if(g.length!==64)throw new Error(`Invalid private key format: expected exactly 64 hex chars, got ${g.length}. This should never happen with a valid 32-byte private key.`);if(!/^[0-9a-f]{64}$/.test(g))throw new Error("Invalid private key format: must be 64 lowercase hex characters (0-9, a-f) without 0x prefix");const v=g,y={action:_V,owner:e.toLowerCase(),nonce:t,timestamp:r,deadline:i},b={txId:"",sigType:"ECDSA_LEGACY",threshold:1,timestamp:r,payload:y,deadline:parseInt(i,16)};console.log("[Onboard] Signing EIP-712 typed data with generateSingleSignature:",b),console.log("[Onboard] Private key format validated:",{length:v.length,format:"64 lowercase hex chars (no 0x prefix) - matches Go's hex.EncodeToString",preview:`${v.substring(0,8)}...${v.substring(56)}`,isValidSecp256k1:!0,withinCurveOrder:l<c,notZero:l!==0n,bytesLength:d.length,fullHex:v,firstByte:v.substring(0,2),lastByte:v.substring(62,64)}),console.log("[Onboard] Calling WASM GenerateSingleSignature with:",{txJSONLength:JSON.stringify(b).length,privateKeyHexLength:v.length,privateKeyHexPreview:v,signerAddress:e.toLowerCase()});const w=await Oi.generateSingleSignature(JSON.stringify(b),v,e.toLowerCase());if(console.log(w),!w.success||!w.signature)throw new Error(w.error||"Failed to generate signature");return console.log("[Onboard] signature:",w.signature),w.signature}async function qhe(n){var e,t;try{const r=await zhe(n.mnemonic,n.walletAddress,n.message.nonce,n.message.timestamp,n.message.deadline);console.log("[Onboard] Signature generated successfully, length:",r.length);const i={address:n.walletAddress,signature:r,nonce:n.message.nonce,timestamp:n.timestamp,deadline:n.message.deadline};console.log("[Onboard] Request body:",{...i,signature:r.substring(0,20)+"..."});const o=await new TO(n.baseURL).post("/auth/v1/onboard",i);if(o.statusCode===200&&o.body){const a=o.body.access_token||o.body.authToken||o.body.token||o.body.accessToken,l=o.body.refresh_token||o.body.refreshToken,c=o.body.expires_at||o.body.expiresAt||(o.body.expires_in?n.timestamp+o.body.expires_in:void 0);return a?{success:!0,authToken:a,refreshToken:l,expiresAt:c}:{success:!1,error:"Response missing authToken field"}}else{const a=((e=o.body)==null?void 0:e.message)||((t=o.body)==null?void 0:t.error)||`HTTP ${o.statusCode}: ${o.body}`,l=new Error(a);throw l.responseBody=o.body,l.statusCode=o.statusCode,l}}catch(r){throw r}}const GO={auth:{maxRetries:4,baseDelay:500,maxDelay:3e3,jitter:!0,multiplier:2},http:{maxRetries:3,baseDelay:100,maxDelay:5e3,jitter:!0,multiplier:2},nonce:{maxRetries:5,baseDelay:200,maxDelay:2e3,jitter:!0,multiplier:1.5}};function Uhe(n,e){let t=n.baseDelay*Math.pow(n.multiplier,e);if(t>n.maxDelay&&(t=n.maxDelay),n.jitter){const r=t*.25*Math.random();t+=r}return Math.floor(t)}function Whe(n){return new Promise(e=>setTimeout(e,n))}async function VO(n,e,t=()=>!0){let r;for(let i=0;i<=n.maxRetries;i++)try{return await e()}catch(s){if(r=s,!await Promise.resolve(t(s)))throw s;if(i>=n.maxRetries)break;const a=Uhe(n,i);await Whe(a)}throw new Error(`Operation failed after ${n.maxRetries+1} attempts: ${(r==null?void 0:r.message)||r}`)}async function Hhe(n,e,t,r){try{Oi.isReady()||await Oi.initialize();const i=await Oi.generateAddress(n,0);if(!i.success||!i.address)return{success:!1,error:`Failed to generate address: ${i.error}`};const s=i.address.toLowerCase(),o=new Ls({baseURL:e}),a=new sG(o);let l=null;try{return await VO(GO.auth,async()=>{console.log(`[Onboard] Attempt starting - currentNonce: ${l}`),l===null?(l=(await a.getExpectedNextNonce(s,!1)).next_nonce,console.log(`[Onboard] First attempt: queried server, using next nonce: ${l}`)):console.log(`[Onboard] Retry attempt: using incremented nonce ${l} from previous failure`);let u=0;const h=10;for(;u<h;)try{await a.validateNonce(s,l,!0);break}catch(v){if(u++,v.message.includes("already pending")||v.message.includes("already used")){if(l=l+1,console.log(`[Onboard] Nonce ${l-1} already pending, incrementing to ${l}`),u>=h)throw new Error(`Failed to find available nonce after ${h} attempts`)}else throw v}const d=Math.floor(Date.now()/1e3),f=d+3600,m={action:_V,owner:s,nonce:e3(l),timestamp:d,deadline:e3(f)};let g;try{g=await qhe({mnemonic:n,walletAddress:s,message:m,baseURL:e,username:t,referralCode:r,timestamp:d})}catch(v){if(l!==null){const y=l;try{await a.rejectNonce(s,l,!0),l=l+1,console.log(`[Onboard] Rejected nonce ${y}, incremented to nonce ${l} (will use on retry)`)}catch(b){console.warn("[Onboard] Failed to reject nonce after thrown error:",b),l=l+1,console.log(`[Onboard] Incremented nonce to ${l} (reject failed but incrementing anyway)`)}}else console.warn("[Onboard] Error thrown but currentNonce is null, cannot reject/increment");throw v.currentNonce=l,v}if(!g.success){if(l!==null){const y=l;await a.rejectNonce(s,l,!0),l=l+1,console.log(`[Onboard] Request failed with nonce ${y}, rejected and incremented to ${l} (will keep incrementing until it works)`)}const v=new Error(g.error||"Onboarding failed");throw v.onboardResult=g,v}return l!==null&&await a.commitNonce(s,l,!0),g},async u=>{var y,b,w;const h=String(u).toLowerCase(),d=((y=u==null?void 0:u.message)==null?void 0:y.toLowerCase())||h,f=(u==null?void 0:u.responseBody)||(u==null?void 0:u.onboardResult),m=((b=f==null?void 0:f.error)==null?void 0:b.toLowerCase())||((w=f==null?void 0:f.message)==null?void 0:w.toLowerCase())||"";if(`${d} ${h} ${m}`.toLowerCase().includes("nonce already pending")){if(l!==null){const S=l;l=l+1,console.log(`[Onboard] Off-chain operation: nonce ${S} already pending/used, incrementing to ${l} (server will validate)`)}else try{l=(await a.getExpectedNextNonce(s,!1)).next_nonce,console.log(`[Onboard] currentNonce was null, queried server for starting nonce: ${l}`)}catch(S){console.warn("[Onboard] Failed to query server nonce:",S),l=1}return!0}return dI(u)?(console.log('[Onboard] Nonce-consuming error detected (not "already pending"), clearing currentNonce to force re-query'),l=null,!0):!["failed to generate address","address mismatch","invalid mnemonic"].some(S=>h.includes(S))})}catch(c){if(l!==null)try{await a.rejectNonce(s,l,!0)}catch(u){console.warn("[Onboard] Failed to reject nonce during cleanup:",u)}return{success:!1,error:(c==null?void 0:c.message)||"Unknown error during onboarding"}}}catch(i){return{success:!1,error:(i==null?void 0:i.message)||"Unknown error during onboarding"}}}const l5=n=>{let e;const t=new Set,r=(c,u)=>{const h=typeof c=="function"?c(e):c;if(!Object.is(h,e)){const d=e;e=u??(typeof h!="object"||h===null)?h:Object.assign({},e,h),t.forEach(f=>f(e,d))}},i=()=>e,a={setState:r,getState:i,getInitialState:()=>l,subscribe:c=>(t.add(c),()=>t.delete(c))},l=e=n(r,i,a);return a},Yhe=n=>n?l5(n):l5,Ghe=n=>n;function Vhe(n,e=Ghe){const t=de.useSyncExternalStore(n.subscribe,de.useCallback(()=>e(n.getState()),[n,e]),de.useCallback(()=>e(n.getInitialState()),[n,e]));return de.useDebugValue(t),t}const c5=n=>{const e=Yhe(n),t=r=>Vhe(e,r);return Object.assign(t,e),t},CV=n=>n?c5(n):c5,Jt=CV((n,e)=>({markets:[],marketsById:new Map,marketsBySymbol:new Map,orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map,selectedMarketId:null,loadingMarkets:!1,loadingOrderbooks:new Set,loadingTickers:new Set,loadingTrades:new Set,errors:new Map,setMarkets:t=>{const r=new Map,i=new Map;t.forEach(a=>{r.set(a.index,a),a.moniker&&i.set(a.moniker,a),a.symbol&&i.set(a.symbol,a),a.name&&i.set(a.name,a)});let o=e().selectedMarketId;if(!o&&t.length>0){const c=(t.find(u=>u.active)||t[0]).index;c&&(o=c)}n({markets:t,marketsById:r,marketsBySymbol:i,selectedMarketId:o,lastUpdated:new Map(e().lastUpdated).set("markets",Date.now())})},setMarket:t=>{const r=e(),i=new Map(r.marketsById),s=new Map(r.marketsBySymbol);i.set(t.index,t),t.moniker&&s.set(t.moniker,t),t.symbol&&s.set(t.symbol,t),t.name&&s.set(t.name,t);const o=r.markets.find(a=>a.index===t.index)?r.markets.map(a=>a.index===t.index?t:a):[...r.markets,t];n({markets:o,marketsById:i,marketsBySymbol:s})},getMarket:t=>e().marketsById.get(t),getMarketBySymbol:t=>e().marketsBySymbol.get(t),setSelectedMarketId:t=>{n({selectedMarketId:t})},setOrderbook:(t,r)=>{const i=e(),s=new Map(i.orderbooks);s.set(t,{...r,timestamp:Date.now()}),n({orderbooks:s,lastUpdated:new Map(i.lastUpdated).set(t,Date.now())})},getOrderbook:t=>e().orderbooks.get(t),updateOrderbook:(t,r)=>{const i=e(),s=i.orderbooks.get(t);if(s){const o={...s,...r,timestamp:Date.now()};i.setOrderbook(t,o)}else i.setOrderbook(t,{bids:r.bids||[],asks:r.asks||[],timestamp:Date.now()})},setTicker:(t,r)=>{const i=e(),s=new Map(i.tickers);s.set(t,{...r,marketId:t,timestamp:Date.now()}),n({tickers:s,lastUpdated:new Map(i.lastUpdated).set(`ticker_${t}`,Date.now())})},getTicker:t=>e().tickers.get(t),setRecentTrades:(t,r)=>{const i=e(),s=new Map(i.recentTrades);s.set(t,r),n({recentTrades:s,lastUpdated:new Map(i.lastUpdated).set(`trades_${t}`,Date.now())})},getRecentTrades:t=>e().recentTrades.get(t),setLoading:(t,r)=>{const i=e();if(t==="markets")n({loadingMarkets:r});else if(t.startsWith("orderbook_")){const s=t.split("_").slice(1).join("_"),o=new Set(i.loadingOrderbooks);r?o.add(s):o.delete(s),n({loadingOrderbooks:o})}else if(t.startsWith("ticker_")){const s=t.split("_").slice(1).join("_"),o=new Set(i.loadingTickers);r?o.add(s):o.delete(s),n({loadingTickers:o})}else if(t.startsWith("trades_")){const s=t.split("_").slice(1).join("_"),o=new Set(i.loadingTrades);r?o.add(s):o.delete(s),n({loadingTrades:o})}},setError:(t,r)=>{const i=e(),s=new Map(i.errors);r?s.set(t,r):s.delete(t),n({errors:s})},clearError:t=>{e().setError(t,null)},clearCache:t=>{const r=e();if(t){const i=new Map(r.orderbooks),s=new Map(r.tickers),o=new Map(r.recentTrades),a=new Map(r.lastUpdated);i.delete(t),s.delete(t),o.delete(t),a.delete(t),a.delete(`ticker_${t}`),a.delete(`trades_${t}`),n({orderbooks:i,tickers:s,recentTrades:o,lastUpdated:a})}else n({orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map})},clearAllCache:()=>{n({markets:[],marketsById:new Map,marketsBySymbol:new Map,orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map,errors:new Map,selectedMarketId:null})}})),EV="mormlayer-nonce-store";function I1(n){return n.toLowerCase()}function Khe(){if(typeof window>"u"||!window.localStorage)return{};try{const n=window.localStorage.getItem(EV);if(!n)return{};const e=JSON.parse(n);if(typeof e!="object"||e===null)return{};const t={};for(const[r,i]of Object.entries(e))i&&typeof i.confirmed=="number"&&Array.isArray(i.pending)&&typeof i.lastSync=="number"&&(t[r]={confirmed:i.confirmed,pending:i.pending,lastSync:i.lastSync});return t}catch{return{}}}function P1(n){if(!(typeof window>"u"||!window.localStorage))try{window.localStorage.setItem(EV,JSON.stringify(n))}catch{}}CV((n,e)=>({byOwner:Khe(),getNonceState:t=>e().byOwner[I1(t)],setNonceState:(t,r)=>{const i=I1(t);n(s=>{const o={...s.byOwner,[i]:r};return P1(o),{byOwner:o}})},clearOwner:t=>{const r=I1(t);n(i=>{const{[r]:s,...o}=i.byOwner,a=o;return P1(a),{byOwner:a}})},clearAll:()=>{P1({}),n({byOwner:{}})},getSnapshot:()=>e().byOwner}));function Xhe(){var n,e,t,r,i;return typeof window>"u"?null:(n=window.phantom)!=null&&n.ethereum||(e=window.ethereum)!=null&&e.isPhantom?"phantom":(t=window.$onekey)!=null&&t.ethereum||(r=window.ethereum)!=null&&r.isOneKey?"onekey":(i=window.ethereum)!=null&&i.isMetaMask||window.ethereum?"metamask":null}function O1(n){const e=n.status==="MARKET_STATUS_ACTIVE";return{...n,index:n.marketIndex,active:e,maxSizeLimit:n.maxSizeLimit??0,minSizeLimit:n.minSizeLimit??0,moniker:n.moniker??n.symbol??"",baseAsset:n.baseAsset??"",quoteAsset:n.quoteAsset??""}}function Qhe(n,e){var i,s;const t=typeof n.timestamp=="string"?parseInt(n.timestamp,10)||Date.now():typeof n.timestamp=="number"?n.timestamp:Date.now(),r=(i=n.tradeType)!=null&&i.toLowerCase().includes("buy")||n.buyOrderId?"buy":(s=n.tradeType)!=null&&s.toLowerCase().includes("sell")||n.sellOrderId?"sell":"buy";return{...n,id:n.tradeId,marketId:n.marketIndex||e,price:n.price,size:n.quantity,side:r,timestamp:t}}function u5(n){return n.map(([e,t])=>[typeof e=="string"?parseFloat(e):e,typeof t=="string"?parseFloat(t):t])}function h5(n,e="-"){return n.moniker?n.moniker:n.symbol?n.symbol:n.baseAsset&&n.quoteAsset?`${n.baseAsset}${e}${n.quoteAsset}`:null}function R1(n,e){return n.startsWith(e)&&n.slice(e.length)||null}function Bd(n){const e=I.useRef(null),t=Jt(q=>q.markets),r=Jt(q=>q.marketsById),i=Jt(q=>q.orderbooks),s=Jt(q=>q.tickers),o=Jt(q=>q.recentTrades),a=Jt(q=>q.selectedMarketId),l=Jt(q=>q.loadingMarkets),c=Jt(q=>q.loadingOrderbooks),u=Jt(q=>q.loadingTickers),h=Jt(q=>q.loadingTrades),d=Jt(q=>q.errors),f=Jt(q=>q.setMarkets),m=Jt(q=>q.setMarket),g=Jt(q=>q.getMarket),v=Jt(q=>q.getMarketBySymbol),y=Jt(q=>q.setSelectedMarketId),b=Jt(q=>q.setOrderbook),w=Jt(q=>q.getOrderbook),S=Jt(q=>q.updateOrderbook),_=Jt(q=>q.setTicker),E=Jt(q=>q.getTicker),C=Jt(q=>q.setRecentTrades),T=Jt(q=>q.getRecentTrades),O=Jt(q=>q.setLoading),R=Jt(q=>q.setError),D=Jt(q=>q.clearError),A=Jt(q=>q.clearCache),F=I.useCallback(()=>{const q=e.current;if(!q)throw new Error("InfoClient not initialized");return q},[]);async function z(q,X,G){O(q,!0),R(q,null);try{return await G()}catch(ne){const te=ne instanceof Error?ne.message:X;throw R(q,te),ne}finally{O(q,!1)}}I.useEffect(()=>{e.current?n.sessionToken&&e.current.setSessionToken(n.sessionToken):e.current=new Ls({baseURL:n.baseURL,sessionToken:n.sessionToken})},[n.baseURL,n.sessionToken]);const j=I.useCallback(async()=>{const q=F();return z("markets","Failed to fetch markets",async()=>{const G=((await q.getMarkets()).markets??[]).map(O1);return f(G),G})},[F,f]),L=I.useCallback(async q=>{const X=g(q);if(X)return X;const G=F();try{const ne=await G.getMarketByID(q);if(ne){const te=O1(ne);return m(te),te}return null}catch(ne){const te=ne instanceof Error?ne.message:`Failed to fetch market ${q}`;throw R(`market_${q}`,te),ne}},[g,F,m,R]),B=I.useCallback(async q=>{const X=v(q);if(X)return X;const G=F();try{let ne;try{ne=await G.getMarketByTicker(q)}catch{ne=await G.getMarketByMoniker(q)}if(ne){const te=O1(ne);return m(te),te}return null}catch(ne){const te=ne instanceof Error?ne.message:`Failed to fetch market ${q}`;throw R(`market_${q}`,te),ne}},[v,F,m,R]),$=I.useCallback(async(q,X=!0,G=20)=>{const ne=F(),te=`orderbook_${q}`;return z(te,`Failed to fetch orderbook for market ${q}`,async()=>{const be=await ne.getOrderbook(q,X,G);if(be&&(be.bids||be.asks)){const Y={bids:u5(be.bids||[]),asks:u5(be.asks||[]),timestamp:Date.now()};return b(q,Y),Y}return null})},[F,b]),U=I.useCallback(async q=>{const X=F(),G=`ticker_${q}`;return z(G,`Failed to fetch ticker for market ${q}`,async()=>{const ne=await X.getMarketStats(q);if(ne){const te={marketId:q,...ne,timestamp:Date.now()};return _(q,te),te}return null})},[F,_]),H=I.useCallback(async(q,X=100)=>{const G=F(),ne=`trades_${q}`;return z(ne,`Failed to fetch trades for market ${q}`,async()=>{const te=await G.getMarketTrades(q,X);if(te){const Y=(Array.isArray(te)?te:[]).map(ee=>Qhe(ee,q));return C(q,Y),Y}return null})},[F,C]);I.useEffect(()=>{n.autoFetchMarkets&&t.length===0&&!l&&j().catch(console.error)},[n.autoFetchMarkets,t.length,l,j]);const K=a?t.find(q=>q.index===a||q.marketIndex===a):null,J=K?h5(K,"-"):null,Z=I.useCallback(q=>{const X=t.find(G=>G.index===q||G.marketIndex===q);return X?h5(X,"/"):null},[t]);return{markets:t,marketsById:r,orderbooks:i,tickers:s,recentTrades:o,selectedMarketId:a,selectedMarket:K,selectedMarketSymbol:J,loadingMarkets:l,loadingOrderbooks:c,loadingTickers:u,loadingTrades:h,isLoading:q=>{if(q==="markets")return l;const X=R1(q,"orderbook_");if(X!=null)return c.has(X);const G=R1(q,"ticker_");if(G!=null)return u.has(G);const ne=R1(q,"trades_");return ne!=null?h.has(ne):!1},errors:d,getError:q=>d.get(q),getMarket:g,getMarketBySymbol:v,getSymbolByMarketId:Z,getOrderbook:w,getTicker:E,getRecentTrades:T,fetchMarkets:j,fetchMarket:L,fetchMarketBySymbol:B,fetchOrderbook:$,fetchTicker:U,fetchRecentTrades:H,updateOrderbook:S,clearCache:A,clearError:D,setSelectedMarketId:y,getInfoClient:F}}function ax(n){const{baseURL:e,mnemonic:t,chainID:r,maxRetries:i}=n,[s,o]=I.useState(null),[a,l]=I.useState(!1),[c,u]=I.useState(null),h=I.useRef(0);return I.useEffect(()=>{if(!e||!t||t.trim()===""){o(null),l(!1),u(null);return}const d={baseURL:e,mnemonic:t.trim()};r!==void 0&&(d.chainID=r),i!==void 0&&(d.maxRetries=i);const f=new Nhe(d),m=++h.current;return o(null),l(!1),u(null),f.initialize().then(()=>{m===h.current&&(o(f),l(!0),u(null))}).catch(g=>{m===h.current&&(u(g instanceof Error?g:new Error(String(g))),o(null),l(!1))}),()=>{h.current=m+1}},[e,t,r,i]),{client:s,isReady:a,error:c}}function Jhe(n){const{client:e,isReady:t,error:r}=ax({baseURL:n.baseURL,mnemonic:n.mnemonic}),[i,s]=I.useState(null),[o,a]=I.useState(!1),[l,c]=I.useState(null);I.useEffect(()=>{s(new Ls({baseURL:n.baseURL}))},[n.baseURL]),I.useEffect(()=>{r&&c({success:!1,error:`Initialization failed: ${r.message}`})},[r]);const[u,h]=I.useState(mI),[d,f]=I.useState(0),[m,g]=I.useState(0),[v,y]=I.useState(0),[b,w]=I.useState(Vue),[S,_]=I.useState(the),[E,C]=I.useState(Mm),[T,O]=I.useState(0),[R,D]=I.useState(0),[A,F]=I.useState(n.marketId?String(n.marketId):"1");I.useEffect(()=>{n.marketId?F(String(n.marketId)):F("1")},[n.marketId]);const{markets:z}=Bd({baseURL:n.baseURL,autoFetchMarkets:!0}),{maxSizeLimit:j,minSizeLimit:L}=I.useMemo(()=>{if(!A)return{maxSizeLimit:void 0,minSizeLimit:void 0};const Y=z.find(ee=>ee.marketIndex===A);return Y?{maxSizeLimit:Y.maxSizeLimit||40,minSizeLimit:Y.minSizeLimit||.001}:{maxSizeLimit:void 0,minSizeLimit:void 0}},[A,z]);I.useEffect(()=>{n.selectedBucketBalance!==void 0&&O(n.selectedBucketBalance)},[n.selectedBucketBalance]);const B=I.useCallback(async()=>{if(!(!i||!e||!t)&&n.selectedBucketBalance===void 0)try{const Y=e.getWalletAddress(),ee=await i.getBalanceDecimal(Y,"MORM");ee&&ee.availableBalance!==void 0&&O(st(ee.availableBalance))}catch(Y){console.error("Failed to load balance:",Y)}},[i,e,t,n.selectedBucketBalance]);I.useEffect(()=>{t&&i&&e&&n.selectedBucketBalance===void 0&&B()},[t,i,e,n.selectedBucketBalance,B]);const $=I.useCallback(async()=>{if(i)try{const Y=await i.getMarketStats(A);if(Y&&Y.lastPrice){const ee=st(Y.lastPrice);D(ee)}}catch(Y){console.error("Failed to load market price:",Y)}},[i,A]);I.useEffect(()=>{t&&i&&$()},[t,i,$]);const U=I.useCallback(()=>u==="market"?n.tradePrice&&n.tradePrice>0?n.tradePrice:R:v||0,[u,v,R,n.tradePrice]),H=I.useCallback(()=>T*b,[T,b]),K=I.useCallback(()=>{let Y;if(m>0)Y=m;else{const pe=H()*d/100,ge=U();if(ge<=0)return 0;Y=pe/ge}return L!==void 0&&L>0&&Y<L?0:j!==void 0&&j>0&&Y>j?j:Y},[m,d,H,U,j,L]),J=I.useCallback(()=>{const Y=K(),ee=U();return Y*ee},[K,U]),Z=I.useCallback(()=>{const Y=K(),ee=U(),pe=Y*ee;return gae(pe)},[K,U]),q=I.useCallback(()=>{const Y=Z();return b<=0?0:Math.floor(Y/b)},[Z,b]),X=I.useCallback(async()=>{if(!e||!t){c({success:!1,error:"Exchange client not ready"});return}const Y=K();if(Y<=0){c({success:!1,error:"Invalid order size"});return}const ee=U();if(ee<=0){c({success:!1,error:u==="limit"?"Invalid price for limit order":"Market price not available. Please wait for price data to load."});return}if(u==="limit"&&!v){c({success:!1,error:"Price is required for limit orders"});return}if(!n.selectedBucketId||n.selectedBucketId.trim()===""){c({success:!1,error:"Bucket ID is required for order placement"});return}a(!0),c(null);try{const pe=jn(b.toString()),ge=await e.placeOrder({marketId:A,bucketId:n.selectedBucketId,side:"BUY",orderType:u,price:ee,quantity:Y,leverage:pe});c({success:!0,orderId:ge.orderId,message:"Buy order placed successfully"}),await B()}catch(pe){c({success:!1,error:pe instanceof Error?pe.message:"Unknown error"})}finally{a(!1)}},[e,t,K,U,u,v,b,A,n.selectedBucketId,B]),G=I.useCallback(async()=>{if(!e||!t){c({success:!1,error:"Exchange client not ready"});return}const Y=K();if(Y<=0){c({success:!1,error:"Invalid order size"});return}const ee=U();if(ee<=0){c({success:!1,error:u==="limit"?"Invalid price for limit order":"Market price not available. Please wait for price data to load."});return}if(u==="limit"&&!v){c({success:!1,error:"Price is required for limit orders"});return}if(!n.selectedBucketId||n.selectedBucketId.trim()===""){c({success:!1,error:"Bucket ID is required for order placement"});return}a(!0),c(null);try{const pe=jn(b.toString()),ge=await e.placeOrder({marketId:A,bucketId:n.selectedBucketId,side:"SELL",orderType:u,price:ee,quantity:Y,leverage:pe});c({success:!0,orderId:ge.orderId,message:"Sell order placed successfully"}),await B()}catch(pe){c({success:!1,error:pe instanceof Error?pe.message:"Unknown error"})}finally{a(!1)}},[e,t,K,U,u,v,b,A,n.selectedBucketId,B]),ne=I.useCallback(async(Y,ee)=>{if(!e||!t){c({success:!1,error:"Exchange client not ready"});return}if(!A||A.trim()===""){c({success:!1,error:"Market ID is required"});return}if(Y<=0){c({success:!1,error:"Leverage must be greater than 0"});return}if(!ee.bucketId||ee.bucketId.trim()===""){c({success:!1,error:"Bucket ID is required"});return}a(!0),c(null);try{const pe=await e.changeLeverage({marketId:A,newLeverage:Y,bucketId:ee.bucketId,leverageType:ee.leverageType,reason:ee.reason});w(Y),c({success:!0,message:"Leverage changed successfully",orderId:pe.txhash}),await B()}catch(pe){c({success:!1,error:pe instanceof Error?pe.message:"Unknown error"})}finally{a(!1)}},[e,t,A,B]),te=I.useCallback(Y=>{const ee=H(),pe=ee*Y/100,ge=U();let De=ge>0?pe/ge:0;if(L!==void 0&&L>0&&De<L&&(De=0),j!==void 0&&j>0&&De>j)if(De=j,De>0&&ee>0&&ge>0){const Ae=De*ge/ee*100;f(Math.min(100,Math.max(0,Ae)))}else f(Y);else f(Y);g(De)},[H,U,j,L]),be=I.useCallback(Y=>{let ee=isNaN(Y)||Y<0?0:Y;j!==void 0&&j>0&&ee>j&&(ee=j),g(ee);const pe=H(),ge=U();if(ee>0&&pe>0&&ge>0){const De=ee*ge/pe*100;f(Math.min(100,Math.max(0,De)))}else f(0)},[H,U,j]);return{orderType:u,setOrderType:h,fundPercent:d,sizeInput:m,price:v,leverage:b,positionMode:S,marginMode:E,availableBalance:T,currentPrice:R,marketId:A,isReady:t,loading:o,result:l,setFundPercent:te,setSizeInput:be,setPrice:y,setLeverage:w,setPositionMode:_,setMarginMode:C,setMarketId:F,placeBuyOrder:X,placeSellOrder:G,changeLeverage:ne,loadBalance:B,loadMarketPrice:$,calculateSize:K,calculateSizeUSD:J,calculateValue:Z,calculateMargin:q,getOrderPrice:U,getAvailableTradeAmount:H}}const Zhe=["lastPrice","priceFeed","markPrice","orderbook","trades"],ede=["positions","orders","funding_rate","deviation","twap","kline"];function tde(n){if(!n||typeof n!="string")return null;const e=n.trim();if(!e)return null;if(e==="buckets")return{type:"buckets"};const t=e.split(":");if(t.length===2){const[r,i]=t;if(Zhe.includes(r))return{type:"multiplex",streamType:r,marketId:i};if(ede.includes(r))return{type:"multiFeed",subChannel:r,marketId:i}}return t.length===3&&t[0]==="kline"?{type:"multiFeed",subChannel:"kline",marketId:t[1],interval:t[2]}:null}const TV=I.createContext(null),nde={lastPrice:null,markPrice:null,displayPrice:null,displayTimestamp:null,recentTrades:[],loading:!0,error:null,isConnected:!1,priceChange:null},rde=({children:n,defaultWsURL:e=que,defaultBaseURL:t,defaultAuthToken:r,defaultWalletAddress:i,defaultDeviceID:s})=>{const[o,a]=I.useState(!1),[l,c]=I.useState(!1),[u,h]=I.useState(cn.Disconnected),[d,f]=I.useState(null),[m,g]=I.useState(e),[v,y]=I.useState(t),[b,w]=I.useState(r),[S,_]=I.useState(i),[E,C]=I.useState(s),[T,O]=I.useState(null),[R,D]=I.useState(null),A=I.useCallback(fe=>{y(fe)},[]),F=I.useRef(new a5({url:e,authToken:r,walletAddress:i,deviceID:s})),z=I.useRef(e),j=I.useRef(null),L=I.useRef(new Map),B=I.useRef(new Map),$=I.useRef(new Map),U=I.useRef(new Map),H=I.useRef(new Map),K=I.useRef(new Map),J=I.useRef(!1);I.useEffect(()=>{if(z.current!==m){j.current&&(j.current(),j.current=null),F.current.disconnect(),L.current.clear();const se=new a5({url:m,authToken:b,walletAddress:S,deviceID:E});F.current=se,z.current=m}if(o){if(!j.current){const se=F.current.onStateChange(Pe=>{h(Pe),c(Pe===cn.Connected),Pe===cn.Connected&&(f(null),J.current=!0)});j.current=se}F.current.isConnected()||F.current.connect().then(()=>{console.debug("[SubscriptionContext] Connected to WebSocket"),f(null)}).catch(se=>{const Pe=se instanceof Error?se:new Error(String(se));console.error("[SubscriptionContext] Failed to connect:",Pe),f(Pe)})}else j.current&&(j.current(),j.current=null),F.current.isConnected()&&F.current.disconnect(),L.current.clear(),$.current.clear(),h(cn.Disconnected),c(!1),f(null);return()=>{j.current&&(j.current(),j.current=null),F.current.isConnected()&&F.current.disconnect()}},[o,m,b,S,E]),I.useEffect(()=>{F.current&&o&&b&&S&&E&&F.current.setAuthToken(b,S,E)},[o,b,S,E]);const Z=I.useCallback(fe=>{const ae=F.current;if(!ae||!ae.isConnected()||!ae.isReadyForSubscriptions())return;const se=tde(fe);if(!se){console.warn("[SubscriptionContext] Invalid subscription key:",fe);return}const Pe=K.current.get(fe);if(!Pe||Pe.refCount<1)return;const Ge=me=>{B.current.set(fe,me),Pe.callbacks.forEach(ve=>{try{ve(me)}catch(oe){console.error("[SubscriptionContext] Callback error for key",fe,oe)}})};if(se.type==="multiplex"&&se.streamType&&se.marketId!=null){const me=Number(se.marketId),ve=Number.isNaN(me)?0:me,oe=se.streamType,ke={stream_type:oe,filter:oe==="orderbook"?{marketIndices:[ve],includeSnapshot:!0}:{marketIndices:[ve]}},Oe=ae.getMultiplexStreamClient();Oe.subscribeToChannel().then(()=>Oe.subscribeStreams([ke])).then(()=>{const ye=Oe.onStreamData(oe,Le=>{Le.data!=null&&Ge(Le.data)});Pe.unsubFns.push(ye)}).catch(ye=>{const Le=ye instanceof Error?ye:new Error(String(ye));console.error("[SubscriptionContext] Multiplex subscribe error:",fe,Le),f(Le)});return}if(se.type==="buckets"){try{const me=()=>{ae.unsubscribeBuckets(ve)},ve=oe=>Ge(oe);ae.subscribeBuckets(ve),Pe.unsubFns.push(me)}catch(me){const ve=me instanceof Error?me:new Error(String(me));console.error("[SubscriptionContext] Buckets subscribe error:",ve),f(ve)}return}if(se.type==="multiFeed"&&se.subChannel&&se.marketId!=null)try{const me={};se.subChannel==="kline"&&se.interval&&(me.interval=se.interval,me.symbol="BTC/USDC");const ve=ke=>Ge(ke);ae.subscribeMultiFeedSubChannel(se.subChannel,se.marketId,ve,Object.keys(me).length>0?me:void 0);const oe=()=>{ae.unsubscribeMultiFeedSubChannel(se.subChannel,ve)};Pe.unsubFns.push(oe)}catch(me){const ve=me instanceof Error?me:new Error(String(me));console.error("[SubscriptionContext] MultiFeed subscribe error:",fe,ve),f(ve)}},[]),q=I.useCallback((fe,ae)=>{var Ge,me;if(!fe||typeof ae!="function")return;let se=K.current.get(fe);se||(se={refCount:0,callbacks:new Set,unsubFns:[]},K.current.set(fe,se));const Pe=se.refCount===0;se.refCount+=1,se.callbacks.add(ae),Pe&&((Ge=F.current)!=null&&Ge.isConnected())&&((me=F.current)!=null&&me.isReadyForSubscriptions())&&Z(fe)},[Z]),X=I.useCallback((fe,ae)=>{const se=K.current.get(fe);se&&(se.callbacks.delete(ae),se.refCount-=1,se.refCount<=0&&(se.unsubFns.forEach(Pe=>{try{Pe()}catch(Ge){console.warn("[SubscriptionContext] Unsubscribe fn error:",Ge)}}),se.unsubFns.length=0,K.current.delete(fe),B.current.delete(fe)))},[]),G=I.useCallback(fe=>B.current.get(fe)??null,[]),ne=I.useCallback(()=>{var ae,se;if(!((ae=F.current)!=null&&ae.isConnected())||!((se=F.current)!=null&&se.isReadyForSubscriptions())){J.current=!0;return}J.current=!1,Array.from(K.current.keys()).forEach(Pe=>{const Ge=K.current.get(Pe);Ge&&Ge.refCount>0&&(Ge.unsubFns.forEach(me=>{try{me()}catch(ve){console.warn("[SubscriptionContext] Resubscribe cleanup:",ve)}}),Ge.unsubFns.length=0,Z(Pe))})},[Z]);I.useEffect(()=>{if(l&&o&&J.current){const fe=setTimeout(()=>{ne()},100);return()=>clearTimeout(fe)}},[l,o,ne]);const te=I.useCallback((fe,ae,se,Pe)=>{if(!F.current){console.warn("[SubscriptionContext] Cannot subscribe: client not initialized");return}if(!fe||typeof fe!="string"){console.warn("[SubscriptionContext] Invalid marketId:",fe);return}if(U.current.has(fe))return;const Ge=Number(fe),me=Number.isNaN(Ge)?0:Ge,ve=[{stream_type:"priceFeed",filter:{marketIndices:[me]}},{stream_type:"markPrice",filter:{marketIndices:[me]}},{stream_type:"orderbook",filter:{marketIndices:[me],includeSnapshot:!0}},{stream_type:"trades",filter:{marketIndices:[me]}}],oe=F.current.getMultiplexStreamClient(),ke=[],Oe=(ye,Le)=>{const ot={type:"data",channel:"multiplex",subChannel:ye,data:Le};L.current.set(ye,ot);const en=U.current.get(fe);en==null||en.callback(ot)};U.current.set(fe,{subs:ve,unsubFns:ke,callback:se}),oe.subscribeToChannel().then(()=>oe.subscribeStreams(ve)).then(()=>{ke.push(oe.onStreamData("priceFeed",ye=>{ye.data!=null&&Oe("priceFeed",ye.data)})),ke.push(oe.onStreamData("markPrice",ye=>{ye.data!=null&&Oe("markPrice",ye.data)})),ke.push(oe.onStreamData("orderbook",ye=>{ye.data!=null&&Oe("orderbook",ye.data)})),ke.push(oe.onStreamData("trades",ye=>{ye.data!=null&&Oe("trades",ye.data)}))}).catch(ye=>{const Le=ye instanceof Error?ye:new Error(String(ye));console.error("[SubscriptionContext] Multiplex subscription error:",Le),f(Le),U.current.delete(fe)})},[]),be=I.useCallback((fe,ae,se,Pe,Ge)=>{if(!F.current){console.warn("[SubscriptionContext] Cannot subscribe: client not initialized");return}if(!fe||typeof fe!="string"){console.warn("[SubscriptionContext] Invalid marketId:",fe);return}if(ae!=null&&ae!==""&&(typeof ae!="string"||!ae.includes("/"))){console.warn("[SubscriptionContext] Invalid symbol (must be empty or BASE/QUOTE):",ae);return}if(!se||typeof se!="string"){console.warn("[SubscriptionContext] Invalid subChannel:",se);return}const me=`subChannel:${fe}:${se}`;if(H.current.has(me))return;const ve=Number(fe),oe=Number.isNaN(ve)?0:ve,ke={stream_type:se,filter:se==="orderbook"?{marketIndices:[oe],includeSnapshot:!0}:{marketIndices:[oe]}},Oe=F.current.getMultiplexStreamClient();Oe.subscribeToChannel().then(()=>Oe.subscribeStreams([ke])).then(()=>{const ye=Oe.onStreamData(se,Le=>{if(Le.data==null)return;const ot={type:"data",channel:"multiplex",subChannel:se,data:Le.data};L.current.set(me,ot),L.current.set(se,ot),Pe(Le.data)});H.current.set(me,{unsubFn:ye,sub:ke})}).catch(ye=>{const Le=ye instanceof Error?ye:new Error(String(ye));console.error("[SubscriptionContext] Sub-channel subscription error:",Le),f(Le)})},[]),Y=I.useCallback((fe,ae,se)=>{if(!F.current)return;const Pe=U.current.get(fe);if(Pe)try{Pe.unsubFns.forEach(Ge=>Ge()),Pe.subs.length>0&&F.current.getMultiplexStreamClient().unsubscribeStreams(Pe.subs),U.current.delete(fe)}catch(Ge){const me=Ge instanceof Error?Ge:new Error(String(Ge));console.error("[SubscriptionContext] Unsubscribe error:",me),f(me),U.current.delete(fe)}},[]),ee=I.useCallback((fe,ae,se)=>{if(!F.current)return;const Pe=`subChannel:${fe}:${ae}`,Ge=H.current.get(Pe);if(Ge)try{Ge.unsubFn(),F.current.getMultiplexStreamClient().unsubscribeStreams([Ge.sub]),H.current.delete(Pe)}catch(me){const ve=me instanceof Error?me:new Error(String(me));console.error("[SubscriptionContext] Unsubscribe error:",ve),f(ve)}},[]),pe=I.useCallback(()=>{a(fe=>!fe)},[]),ge=I.useCallback(fe=>{a(fe)},[]),qe=I.useCallback(fe=>L.current.get(fe)||null,[]),De=I.useCallback(()=>new Map(L.current),[]),_e=I.useCallback(fe=>{fe?L.current.delete(fe):L.current.clear()},[]),Ae=I.useCallback(()=>{f(null)},[]),et=I.useCallback(fe=>{O(fe)},[]),Ee=I.useRef(null),Re=I.useRef(null);Re.current=T;const Xe=I.useRef(null),Ue=I.useRef(null),ct=I.useCallback(async()=>{const fe=Re.current;if(!(!fe||!v))try{const se=await new Ls({baseURL:v}).getMarketTrades(fe,100);if(se&&Array.isArray(se)&&se.length>0){const Pe=r5(se),me=[...se].sort((ve,oe)=>ks(oe.timestamp)-ks(ve.timestamp))[0];D(ve=>{if(!ve)return ve;const oe=st(me.price);return{...ve,recentTrades:Pe,lastPrice:{marketIndex:fe,price:oe,quantity:st(me.quantity),timestamp:ks(me.timestamp),isBuyerMaker:!1,tradeId:me.tradeId||""},displayPrice:oe,displayTimestamp:ks(me.timestamp),loading:!1}})}}catch(ae){D(se=>se?{...se,error:ae instanceof Error?ae.message:"Failed to refresh",loading:!1}:null)}},[v]);I.useEffect(()=>{const fe=T;if(!fe){if(Ee.current){const ve=Ee.current,oe=Xe.current,ke=Ue.current;oe&&X(`lastPrice:${ve}`,oe),ke&&X(`markPrice:${ve}`,ke),Xe.current=null,Ue.current=null}D(null),Ee.current=null;return}const ae=Ee.current;if(ae&&ae!==fe){const ve=Xe.current,oe=Ue.current;ve&&X(`lastPrice:${ae}`,ve),oe&&X(`markPrice:${ae}`,oe),Xe.current=null,Ue.current=null}D(ve=>({...nde,loading:!0,error:null,isConnected:l}));const se=`lastPrice:${fe}`,Pe=`markPrice:${fe}`,Ge=ve=>{const oe=ve;if(!(oe!=null&&oe.price))return;const ke=st(oe.price),Oe=st(oe.quantity??"0"),ye=fI(oe.timestamp);D(Le=>{if(!Le)return Le;const ot={marketIndex:fe,price:ke,quantity:Oe,timestamp:ye,isBuyerMaker:oe.isBuyerMaker??!1,tradeId:oe.tradeId??""};let en=null;Le.lastPrice&&typeof Le.lastPrice.price=="number"&&(ke>Le.lastPrice.price?en="up":ke<Le.lastPrice.price&&(en="down"));const $t=oe.derived?Le.recentTrades:[{time:ye,size:Oe,price:ke,isBuyerMaker:oe.isBuyerMaker??!1},...Le.recentTrades].slice(0,100),dn=ot.price;return{...Le,lastPrice:ot,recentTrades:$t,displayPrice:dn,displayTimestamp:ye,priceChange:en,loading:!1}})},me=ve=>{const oe=ve;if((oe==null?void 0:oe.markPrice)==null)return;const ke=st(oe.markPrice),Oe=fI(oe.timestamp);D(ye=>{var $t,dn;if(!ye)return ye;const Le={symbol:oe.symbol||"",markPrice:ke,timestamp:Oe},ot=($t=ye.lastPrice)!=null&&$t.timestamp&&ye.lastPrice.timestamp>=Oe?ye.displayPrice:ke,en=(dn=ye.lastPrice)!=null&&dn.timestamp&&ye.lastPrice.timestamp>=Oe?ye.displayTimestamp??0:Oe;return{...ye,markPrice:Le,displayPrice:ot??ke,displayTimestamp:en??Oe,loading:!1}})};return Xe.current=Ge,Ue.current=me,q(se,Ge),q(Pe,me),v?new Ls({baseURL:v}).getMarketTrades(fe,100).then(oe=>{if(oe&&Array.isArray(oe)&&oe.length>0){const ke=r5(oe),ye=[...oe].sort((Le,ot)=>ks(ot.timestamp)-ks(Le.timestamp))[0];D(Le=>{if(!Le)return Le;const ot=st(ye.price);return{...Le,recentTrades:ke,lastPrice:{marketIndex:fe,price:ot,quantity:st(ye.quantity),timestamp:ks(ye.timestamp),isBuyerMaker:!1,tradeId:ye.tradeId||""},displayPrice:ot,displayTimestamp:ks(ye.timestamp),loading:!1}})}else D(ke=>ke?{...ke,loading:!1}:null)}).catch(oe=>{D(ke=>ke?{...ke,error:oe instanceof Error?oe.message:"Failed to load trades",loading:!1}:null)}):D(ve=>ve?{...ve,loading:!1}:null),Ee.current=fe,()=>{X(se,Ge),X(Pe,me),Xe.current=null,Ue.current=null,Ee.current===fe&&(Ee.current=null)}},[T,v,l,q,X]);const Ht=I.useMemo(()=>({client:F.current,isEnabled:o,isConnected:l,connectionState:u,error:d,toggleEnabled:pe,setEnabled:ge,clearError:Ae,subscribe:q,unsubscribe:X,getRetainedDataByKey:G,tradePriceMarketId:T,tradePriceData:R,setTradePriceMarketId:et,refreshTradePrice:ct,baseURL:v,setBaseURL:A,getRetainedData:qe,getAllRetainedData:De,clearRetainedData:_e,wsURL:m,setWsURL:g,authToken:b,setAuthToken:w,walletAddress:S,setWalletAddress:_,deviceID:E,setDeviceID:C,subscribeMultiFeedWithRetention:te,subscribeSubChannelWithRetention:be,unsubscribeMultiFeed:Y,unsubscribeSubChannel:ee}),[o,l,u,d,pe,ge,Ae,q,X,G,T,R,et,ct,v,A,qe,De,_e,m,b,S,E,te,be,Y,ee]);return k.jsx(TV.Provider,{value:Ht,children:n})},pi=()=>{const n=I.useContext(TV);if(!n)throw new Error("useSubscription must be used within SubscriptionProvider");return n};function d5(n,e){return{asks:[],bids:[],spread:0,midPrice:0,marketIndex:n.marketIndex||e||"",sequenceId:n.sequenceId||"",firstUpdateId:n.firstUpdateId||0,lastUpdateId:n.lastUpdateId||0,checksum:n.checksum||"",timestamp:n.timestamp||""}}function W0(n){return n.map(([e,t])=>[typeof e=="string"?parseFloat(e):e,typeof t=="string"?parseFloat(t):t])}function Ou(n){const e=[...n].sort((r,i)=>i[0]-r[0]);let t=0;return e.map(([r,i])=>(t+=i,{price:r,size:i,cumulative:t,flash:null}))}function MV(n){const e=n.useWebSocket!==!1,[t,r]=I.useState([]),[i,s]=I.useState([]),[o,a]=I.useState(0),[l,c]=I.useState(0),[u,h]=I.useState(""),[d,f]=I.useState(""),[m,g]=I.useState(0),[v,y]=I.useState(0),[b,w]=I.useState(""),[S,_]=I.useState(""),[E,C]=I.useState(!0),[T,O]=I.useState(null),[R,D]=I.useState(!1),[A,F]=I.useState(null),z=I.useRef(null),j=I.useRef(null),L=I.useRef(null),B=I.useRef(new Map),$=I.useRef(null),U=I.useRef({asks:[],bids:[],spread:0,midPrice:0,marketIndex:"",sequenceId:"",firstUpdateId:0,lastUpdateId:0,checksum:"",timestamp:""});I.useEffect(()=>{U.current={asks:t,bids:i,spread:o,midPrice:l,marketIndex:u,sequenceId:d,firstUpdateId:m,lastUpdateId:v,checksum:b,timestamp:S}},[t,i,o,l,u,d,m,v,b,S]);const H=I.useCallback((Y,ee)=>{const pe=new Map,ge=new Map,qe=new Map,De=new Map;Y.asks.forEach(ae=>{ae.size>0&&pe.set(ae.price,ae.size)}),Y.bids.forEach(ae=>{ae.size>0&&ge.set(ae.price,ae.size)}),ee.asks&&ee.asks.forEach(([ae,se])=>{if(typeof ae!="number"||typeof se!="number"||isNaN(ae)||isNaN(se)||ae<=0||se<0){console.warn("[useOrderbook] Invalid delta entry skipped:",{price:ae,size:se});return}const Pe=pe.get(ae)??0,Ge=pe.has(ae);se===0?Ge&&pe.delete(ae):Ge?Pe!==se&&(pe.set(ae,se),qe.set(ae,se>Pe?"up":"down")):(pe.set(ae,se),qe.set(ae,"up"))}),ee.bids&&ee.bids.forEach(([ae,se])=>{if(typeof ae!="number"||typeof se!="number"||isNaN(ae)||isNaN(se)||ae<=0||se<0){console.warn("[useOrderbook] Invalid delta entry skipped:",{price:ae,size:se});return}const Pe=ge.get(ae)??0,Ge=ge.has(ae);se===0?Ge&&ge.delete(ae):Ge?Pe!==se&&(ge.set(ae,se),De.set(ae,se>Pe?"up":"down")):(ge.set(ae,se),De.set(ae,"up"))});const _e=Array.from(pe.entries()),Ae=Array.from(ge.entries()),et=Ou(_e),Ee=Ou(Ae),Re=Date.now();if(et.forEach(ae=>{const se=qe.get(ae.price);se?(ae.flash=se,B.current.set(`ask-${ae.price}`,Re)):ae.flash=null}),Ee.forEach(ae=>{const se=De.get(ae.price);se?(ae.flash=se,B.current.set(`bid-${ae.price}`,Re)):ae.flash=null}),qe.size>0||De.size>0){const ae=et.filter(Pe=>Pe.flash!==null).length,se=Ee.filter(Pe=>Pe.flash!==null).length;(ae!==qe.size||se!==De.size)&&console.warn("[useOrderbook] Flash indicator mismatch:",{askChangesCount:qe.size,appliedAskFlashes:ae,bidChangesCount:De.size,appliedBidFlashes:se})}const Xe=n.maxDepth||100,Ue=et.slice(0,Xe),ct=Ee.slice(0,Xe);let Ht=0,fe=0;if(Ue.length>0&&ct.length>0){const ae=Ue[Ue.length-1].price,se=ct[0].price;Ht=ae-se,fe=(ae+se)/2}return{asks:Ue,bids:ct,spread:Ht,midPrice:fe,marketIndex:Y.marketIndex,sequenceId:Y.sequenceId,firstUpdateId:Y.firstUpdateId,lastUpdateId:Y.lastUpdateId,checksum:Y.checksum,timestamp:Y.timestamp}},[n.maxDepth]),K=I.useCallback(async(Y,ee={})=>{if(!z.current){ee.errorMessage&&console.error(ee.errorMessage);return}const{setLoadingState:pe=!1,updateMarketIdRef:ge=!1}=ee;pe&&(C(!0),O(null));try{const qe=await z.current.getOrderbook(Y,!0);if(qe&&(qe.bids||qe.asks)){const De=W0(qe.asks||[]),_e=W0(qe.bids||[]),Ae=Ou(De),et=Ou(_e),Ee=n.maxDepth||100,Re=Ae.slice(0,Ee),Xe=et.slice(0,Ee);let Ue=0,ct=0;if(Re.length>0&&Xe.length>0){const ae=Re[Re.length-1].price,se=Xe[0].price;Ue=ae-se,ct=(ae+se)/2}ge&&(j.current=Y);const Ht=U.current,fe={asks:Re,bids:Xe,spread:Ue,midPrice:ct,marketIndex:Y,sequenceId:Ht.sequenceId||"",firstUpdateId:Ht.firstUpdateId||0,lastUpdateId:Ht.lastUpdateId||0,checksum:Ht.checksum||"",timestamp:Ht.timestamp||new Date().toISOString()};return r(Re),s(Xe),a(Ue),c(ct),h(Y),f(fe.sequenceId),g(fe.firstUpdateId),y(fe.lastUpdateId),w(fe.checksum),_(fe.timestamp),fe}}catch(qe){const De=ee.errorMessage||(qe instanceof Error?qe.message:"Failed to load orderbook");pe?O(De):console.error(De)}finally{pe&&C(!1)}},[n.maxDepth]),J=I.useCallback(async()=>{const Y=U.current,ee=d5(Y);r(ee.asks),s(ee.bids),a(ee.spread),c(ee.midPrice),await K(n.marketId,{setLoadingState:!1,updateMarketIdRef:!1})},[n.marketId,K]),Z=I.useCallback(async()=>{const Y=U.current,ee=d5(Y,n.marketId);r(ee.asks),s(ee.bids),a(ee.spread),c(ee.midPrice),h(ee.marketIndex),await K(n.marketId,{setLoadingState:!0,updateMarketIdRef:!1,errorMessage:"Failed to load orderbook"})},[n.marketId,K]),q=I.useCallback(async Y=>{const ee=await K(Y,{setLoadingState:!1,updateMarketIdRef:!0,errorMessage:`Failed to fetch snapshot for market ${Y}`});return ee&&console.log(`[useOrderbook] Fetched snapshot for market ${Y} and updated orderbook`),ee},[K]),X=I.useCallback((Y,ee)=>{if(Y.snapshot===!0||Y.type==="snapshot"){const ge=W0(Y.asks||[]),qe=W0(Y.bids||[]),De=Ou(ge),_e=Ou(qe),Ae=n.maxDepth||100,et=De.slice(0,Ae),Ee=_e.slice(0,Ae);let Re=0,Xe=0;if(et.length>0&&Ee.length>0){const Ue=et[et.length-1].price,ct=Ee[0].price;Re=Ue-ct,Xe=(Ue+ct)/2}return{asks:et,bids:Ee,spread:Re,midPrice:Xe,marketIndex:Y.marketIndex??ee.marketIndex,sequenceId:Y.sequenceId||ee.sequenceId,firstUpdateId:Y.firstUpdateId??ee.firstUpdateId,lastUpdateId:Y.lastUpdateId??ee.lastUpdateId,checksum:Y.checksum||ee.checksum,timestamp:Y.timestamp||ee.timestamp,snapshot:Y.snapshot}}else{const ge=H(ee,{bids:Y.bids,asks:Y.asks});return{...ge,marketIndex:Y.marketIndex??ge.marketIndex,sequenceId:Y.sequenceId||ge.sequenceId,firstUpdateId:Y.firstUpdateId??ge.firstUpdateId,lastUpdateId:Y.lastUpdateId??ge.lastUpdateId,checksum:Y.checksum||ge.checksum,timestamp:Y.timestamp||ge.timestamp}}},[H,n.maxDepth]),G=I.useCallback(async Y=>{if(!Y||!Y.bids&&!Y.asks){console.log("[useOrderbook] Invalid data: missing bids and asks");return}const ee=Y.sequenceId??Y.sequence_id;if(!Y.marketIndex||ee===void 0){console.log("[useOrderbook] Rejected: not multi-feed format (missing marketIndex or sequenceId)",{hasMarketId:!!Y.marketIndex,hasSequenceId:ee!==void 0});return}const pe=j.current||n.marketId;let ge=U.current;if(Y.marketIndex!==pe){console.log(`[useOrderbook] Received update for market ${Y.marketIndex}, current market is ${pe}. Fetching snapshot...`);const Ae=await q(Y.marketIndex);Ae&&(ge=Ae)}const qe=Y,De={marketIndex:Y.marketIndex??"",sequenceId:Y.sequenceId??qe.sequence_id??"",firstUpdateId:Y.firstUpdateId??qe.first_update_id??0,lastUpdateId:Y.lastUpdateId??qe.last_update_id??0,checksum:Y.checksum??"",timestamp:Y.timestamp??"",bids:(Y.bids??[]).map(([Ae,et])=>[st(Ae),st(et)]),asks:(Y.asks??[]).map(([Ae,et])=>[st(Ae),st(et)]),spread:0,midPrice:0,snapshot:Y.snapshot===!0};console.log("[useOrderbook] Processing orderbook update",{marketId:De.marketIndex,sequenceId:De.sequenceId,bidsCount:De.bids.length,asksCount:De.asks.length,isSnapshot:De.snapshot});const _e=X(De,ge);console.log("[useOrderbook] Orderbook updated successfully",{sequenceId:De.sequenceId,bidsCount:_e.bids.length,asksCount:_e.asks.length,spread:_e.spread,midPrice:_e.midPrice,bestBid:_e.bids.length>0?_e.bids[0].price:null,bestAsk:_e.asks.length>0?_e.asks[_e.asks.length-1].price:null}),r(_e.asks),s(_e.bids),a(_e.spread),c(_e.midPrice),h(_e.marketIndex),f(_e.sequenceId),g(_e.firstUpdateId),y(_e.lastUpdateId),w(_e.checksum),_(_e.timestamp)},[X,q,n.marketId]);$.current=G;const{subscribe:ne,unsubscribe:te,isConnected:be}=pi();return I.useEffect(()=>{const Y=new Ls({baseURL:n.baseURL});if(z.current=Y,j.current===null&&(j.current=n.marketId),e){D(be),F(be?null:"WebSocket not connected. Using HTTP polling.");const ee=`orderbook:${n.marketId}`,pe=ge=>{var qe;(qe=$.current)==null||qe.call($,ge)};return ne(ee,pe),!be&&z.current&&L.current===null&&(J(),L.current=window.setInterval(()=>J(),5e3)),()=>{L.current!==null&&(clearInterval(L.current),L.current=null),j.current=null,te(ee,pe)}}else return D(!1),F(null),z.current&&L.current===null&&(J(),L.current=window.setInterval(()=>J(),5e3)),()=>{L.current!==null&&(clearInterval(L.current),L.current=null),j.current=null}},[n.baseURL,n.marketId,e,be,ne,te]),I.useEffect(()=>{z.current&&(r([]),s([]),a(0),c(0),h(n.marketId),f(""),g(0),y(0),w(""),_(""),C(!0),O(null),F(null),Z(),j.current=n.marketId)},[n.marketId,e,Z]),I.useEffect(()=>(L.current!==null&&(clearInterval(L.current),L.current=null),(!e||!R&&e)&&z.current&&!n.disablePolling&&(J(),L.current=window.setInterval(()=>{J()},3e4)),()=>{L.current!==null&&(clearInterval(L.current),L.current=null)}),[R,e,n.marketId,n.disablePolling,J]),I.useEffect(()=>{const Y=setInterval(()=>{const ee=Date.now(),pe=500;let ge=!1;const qe=t.map(_e=>{const Ae=`ask-${_e.price}`,et=B.current.get(Ae);return _e.flash&&et&&ee-et>=pe?(ge=!0,B.current.delete(Ae),{..._e,flash:null}):_e}),De=i.map(_e=>{const Ae=`bid-${_e.price}`,et=B.current.get(Ae);return _e.flash&&et&&ee-et>=pe?(ge=!0,B.current.delete(Ae),{..._e,flash:null}):_e});ge&&(r(qe),s(De))},100);return()=>clearInterval(Y)},[t,i]),{asks:t,bids:i,spread:o,midPrice:l,market_id:u,sequence_id:d,first_update_id:m,last_update_id:v,checksum:b,timestamp:S,loading:E,error:T,isConnected:R,wsError:A,refresh:Z}}const IV={amountPct:.411,intervalMs:100,amountChangeThresholdPct:1.304,defaultMidPrice:7e4,defaultLevelsCount:20};function ide(n,e=5){const t=Math.max(n*.001,1e-4),r=.1,i=[],s=[];for(let u=0;u<e;u++){const h=n+(e-u)*t,d=n-(u+1)*t;i.push({price:h,size:r*(1+u*.2),cumulative:0,flash:null}),s.push({price:d,size:r*(1+u*.2),cumulative:0,flash:null})}i.sort((u,h)=>h.price-u.price),s.sort((u,h)=>h.price-u.price);let o=0,a=0;const l=i.map(u=>(o+=u.size,{...u,cumulative:o})),c=s.map(u=>(a+=u.size,{...u,cumulative:a}));return{asks:l,bids:c}}const sde={maxFakeLevelsPerSide:3,minLifetimeMs:2e3,maxLifetimeMs:8e3,volumeScalePct:.8,minAddDelayMs:1500,maxAddDelayMs:5e3},D1={enabled:!1,jitter:IV,fakePending:sde},ode=1e-6;function PV(n,e,t){if(n===0||e<=0)return n;const r=n*e,s=((Math.sin(t*1e3)+1)/2-.5)*2*r;return Math.max(0,n+s)}function ade(n,e,t,r,i){const s=PV(n,e,t);if(r===void 0||i===void 0||i<=0)return s;const o=Math.max(i*ode,.01);return r==="ask"?Math.max(s,i+o):Math.min(s,i-o)}function H0(n,e,t,r){if(n.length===0)return[];const i=e.amountPct,s=r==null?void 0:r.side,o=r==null?void 0:r.midPrice,a=n.map((c,u)=>{const h=t+c.price*1e6+u,d=t+c.size*1e3+u*7;return{...c,price:ade(c.price,i,h,s,o),size:PV(c.size,i,d),cumulative:0}});a.sort((c,u)=>u.price-c.price);let l=0;return a.map(c=>(l+=c.size,{...c,cumulative:l}))}const N1=5e-4,A1=.0025;function f5(n,e,t,r,i){const s=Date.now(),o=r.minLifetimeMs+Math.random()*(r.maxLifetimeMs-r.minLifetimeMs),a=N1+Math.pow(Math.random(),1.6)*(A1-N1),l=e*a*(n==="ask"?1:-1),c=e+l,u=t*r.volumeScalePct*(.7+Math.random()*.6),d=1+.5*((A1-a)/(A1-N1)),f=Math.max(.01,u*d);return{price:c,size:f,cumulative:f,flash:null,isPending:!0,id:i,createdAt:s,expiresAt:s+o}}function p5(n,e,t){const r=[...n,...e];r.sort((o,a)=>a.price-o.price);const i=r.slice(0,t);let s=0;return i.map(o=>(s+=o.size,{...o,cumulative:s}))}function lde(n,e=D1,t=100){const r=e.enabled===!0,i=e.jitter??D1.jitter,s=e.fakePending??D1.fakePending,[o,a]=I.useState(n.asks),[l,c]=I.useState(n.bids),[u,h]=I.useState([]),[d,f]=I.useState([]),m=I.useRef(0),g=I.useRef(null),v=I.useRef(0),y=I.useRef(n),b=I.useRef(s),w=I.useRef(null);y.current=n,b.current=s;const S=(i==null?void 0:i.defaultMidPrice)??1,_=(i==null?void 0:i.defaultLevelsCount)??5,E=I.useMemo(()=>ide(S,_),[S,_]),C=I.useMemo(()=>{const R=n.asks.length>0?n.asks:E.asks,D=n.bids.length>0?n.bids:E.bids;if(R.length===0||D.length===0)return S;const A=Math.min(...R.map(z=>z.price)),F=Math.max(...D.map(z=>z.price));return(A+F)/2},[n.asks,n.bids,E,S]);I.useEffect(()=>{if(!r||!i)return;const R=n.asks.length>0?n.asks:E.asks,D=n.bids.length>0?n.bids:E.bids,A=R.reduce((J,Z)=>J+Z.size,0),F=D.reduce((J,Z)=>J+Z.size,0),z=w.current,j=i.amountChangeThresholdPct??0;if(z!==null&&j>0){const J=z.askTotal>0?Math.abs(A-z.askTotal)/z.askTotal:1,Z=z.bidTotal>0?Math.abs(F-z.bidTotal)/z.bidTotal:1;if(J<j&&Z<j)return}w.current={askTotal:A,bidTotal:F};const L=m.current,B={midPrice:C},$=H0(R,i,L,{...B,side:"ask"}),U=H0(D,i,L,{...B,side:"bid"}),H=$.length?Math.min(...$.map(J=>J.price)):1/0,K=U.length?Math.max(...U.map(J=>J.price)):-1/0;H<=K?(console.warn("useEnhancedOrderbook: crossed order book detected after jitter; falling back to raw data."),a(R.map(J=>({...J}))),c(D.map(J=>({...J})))):(a($),c(U))},[r,i,n.asks,n.bids,E,C]),I.useEffect(()=>{if(!r||!i)return;const R=i.intervalMs??500,D=setInterval(()=>{m.current+=1;const A=m.current,F=n.asks.length>0?n.asks:E.asks,z=n.bids.length>0?n.bids:E.bids,j={midPrice:C},L=H0(F,i,A,{...j,side:"ask"}),B=H0(z,i,A,{...j,side:"bid"}),$=L.length?Math.min(...L.map(H=>H.price)):1/0,U=B.length?Math.max(...B.map(H=>H.price)):-1/0;$<=U?(console.warn("useEnhancedOrderbook: crossed order book detected after jitter; falling back to raw data."),a(F.map(H=>({...H}))),c(z.map(H=>({...H})))):(a(L),c(B))},R);return()=>clearInterval(D)},[r,i,n.asks,n.bids,E,C]);const T=I.useRef(()=>{const R=b.current;if(!R)return;const D=R.minAddDelayMs+Math.random()*(R.maxAddDelayMs-R.minAddDelayMs);g.current=setTimeout(()=>{var $,U;g.current=null;const A=y.current,F=A.asks.length>0&&A.bids.length>0?(A.asks[A.asks.length-1].price+A.bids[0].price)/2:0,z=((($=A.asks[A.asks.length-1])==null?void 0:$.size)??0)||(((U=A.bids[0])==null?void 0:U.size)??0)||1;if(F<=0){T.current();return}const j=b.current;if(!j)return;v.current+=1;const L=`fake-ask-${v.current}`,B=`fake-bid-${v.current}`;h(H=>[...H,f5("ask",F,z,j,L)].slice(-j.maxFakeLevelsPerSide)),f(H=>[...H,f5("bid",F,z,j,B)].slice(-j.maxFakeLevelsPerSide)),T.current()},D)});return I.useEffect(()=>{if(!(!r||!s))return T.current(),()=>{g.current&&(clearTimeout(g.current),g.current=null)}},[r]),I.useEffect(()=>{if(!r)return;const R=setInterval(()=>{const D=Date.now();h(A=>A.filter(F=>F.expiresAt>D)),f(A=>A.filter(F=>F.expiresAt>D))},500);return()=>clearInterval(R)},[r]),I.useEffect(()=>{r||(w.current=null,h([]),f([]),a(n.asks.map(R=>({...R}))),c(n.bids.map(R=>({...R}))))},[r,n.asks,n.bids]),I.useMemo(()=>{const R=n.isConnected?!1:n.loading??!1;if(!r)return{...n,loading:R,asks:n.asks.map(z=>({...z})),bids:n.bids.map(z=>({...z}))};const D=p5(o,u,t),A=p5(l,d,t);let F=n.spread;if(D.length>0&&A.length>0){const z=D[D.length-1].price,j=A[0].price;F=z-j}return{...n,loading:R,asks:D,bids:A,spread:F}},[r,n,o,l,u,d,t])}const cde={lastPrice:null,markPrice:null,displayPrice:null,displayTimestamp:null,recentTrades:[],loading:!0,error:null,isConnected:!1,priceChange:null};function OV(n){const{setTradePriceMarketId:e,tradePriceData:t,refreshTradePrice:r,setBaseURL:i,isConnected:s}=pi();I.useEffect(()=>{n.baseURL&&i(n.baseURL)},[n.baseURL,i]),I.useEffect(()=>{n.marketId&&n.marketId.trim()!==""&&e(n.marketId)},[n.marketId,e]);const o=t??cde,a=o.lastPrice,l=o.markPrice,c=o.loading,u=o.error,h=o.isConnected??s,d=o.priceChange,f=o.recentTrades,m=o.displayPrice,g=o.displayTimestamp,v=I.useMemo(()=>r,[r]);return{lastPrice:a,markPrice:l,displayPrice:m,displayTimestamp:g,recentTrades:f,loading:c,error:u,isConnected:h,priceChange:d,refresh:v,infoClient:null,isLastPriceData:Rhe,isMarkPriceData:Dhe}}const L1=n=>{if(n)return Array.isArray(n)?n[0]:n};function ude(n){const e=n.historyDepth??10,t=n.marketId,[r,i]=I.useState(void 0),[s,o]=I.useState(void 0),[a,l]=I.useState(void 0),[c,u]=I.useState(!0),[h,d]=I.useState(null),[f,m]=I.useState(!1),{subscribe:g,unsubscribe:v,isConnected:y}=pi();I.useEffect(()=>{if(u(!1),m(y),!t)return;i(void 0),o(void 0),l(void 0),d(null);const _=D=>{i(A=>e===1?D:[D,...Array.isArray(A)?A:A?[A]:[]].slice(0,e))},E=D=>{o(A=>e===1?D:[D,...Array.isArray(A)?A:A?[A]:[]].slice(0,e))},C=D=>{l(A=>e===1?D:[D,...Array.isArray(A)?A:A?[A]:[]].slice(0,e))},T=`funding_rate:${t}`,O=`deviation:${t}`,R=`twap:${t}`;return g(T,_),g(O,E),g(R,C),()=>{v(T,_),v(O,E),v(R,C)}},[t,e,y,g,v]);const b=I.useMemo(()=>L1(r),[r]),w=I.useMemo(()=>L1(s),[s]),S=I.useMemo(()=>L1(a),[a]);return{fundingRate:r,deviation:s,twap:a,latestFundingRate:b,latestDeviation:w,latestTWAP:S,loading:c,error:h,isConnected:f}}function hde(n){const e=n.useWebSocket!==!1,[t,r]=I.useState([]),[i,s]=I.useState(!0),[o,a]=I.useState(""),[l,c]=I.useState(!1),u=I.useRef(null),h=I.useRef(0),d=I.useRef(n);d.current=n;const f=I.useCallback(async()=>{if(!u.current)return;const b=d.current;if(!b.walletAddress||b.walletAddress.trim()===""){a(""),r([]),s(!1);return}a("");try{const w=await VO(GO.http,()=>u.current.getPositions(b.walletAddress));if(Array.isArray(w)){const S=w.map(i5);r(_=>{if(_.length!==S.length)return S;const E=JSON.stringify(_),C=JSON.stringify(S);return E===C?_:S})}else r(S=>S.length===0?S:[])}catch(w){a(w instanceof Error?w.message:"Failed to load positions"),console.error("Failed to fetch positions after retries:",w)}finally{s(!1)}},[]),m=I.useCallback(b=>{const w=b;if(w.marketIndex){const S=i5(w);r(_=>{const E=_.findIndex(C=>C.positionId===S.positionId);if(E>=0){const C=[..._];C[E]=S;const T=JSON.stringify(_),O=JSON.stringify(C);return T===O?_:C}else return[..._,S]})}},[]),{subscribe:g,unsubscribe:v,isConnected:y}=pi();return I.useEffect(()=>{const b=new Ls({baseURL:n.baseURL,sessionToken:n.authToken});u.current=b,f(),c(y);const S=`positions:${n.marketId??"0"}`,_=E=>m(E);return e?(g(S,_),!y&&n.refreshInterval&&n.refreshInterval>0&&(h.current=window.setInterval(()=>f(),n.refreshInterval)),()=>{h.current!==null&&h.current!==0&&(clearInterval(h.current),h.current=0),v(S,_)}):(n.refreshInterval&&n.refreshInterval>0&&(h.current=window.setInterval(()=>f(),n.refreshInterval)),()=>{h.current!==null&&h.current!==0&&(clearInterval(h.current),h.current=0)})},[n.baseURL,n.authToken,n.walletAddress,n.refreshInterval,n.marketId,e,y,g,v,f,m]),{positions:t,loading:i,error:o,isConnected:l,refresh:f}}function dde(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}const fde=n=>{switch(n){case"success":return gde;case"info":return yde;case"warning":return vde;case"error":return bde;default:return null}},pde=Array(12).fill(0),mde=({visible:n,className:e})=>de.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},de.createElement("div",{className:"sonner-spinner"},pde.map((t,r)=>de.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),gde=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),vde=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),yde=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),bde=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),xde=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},de.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),de.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),wde=()=>{const[n,e]=de.useState(document.hidden);return de.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n};let vI=1;class _de{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:r,...i}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:vI++,o=this.toasts.find(l=>l.id===s),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:r}),{...l,...e,id:s,dismissible:a,title:r}):l):this.addToast({title:r,...i,dismissible:a,id:s}),s},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let s=r!==void 0,o;const a=i.then(async c=>{if(o=["resolve",c],de.isValidElement(c))s=!1,this.create({id:r,type:"default",message:c});else if(kde(c)&&!c.ok){s=!1;const h=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description,m=typeof h=="object"&&!de.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:d,...m})}else if(c instanceof Error){s=!1;const h=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description,m=typeof h=="object"&&!de.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:d,...m})}else if(t.success!==void 0){s=!1;const h=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description,m=typeof h=="object"&&!de.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:d,...m})}}).catch(async c=>{if(o=["reject",c],t.error!==void 0){s=!1;const u=typeof t.error=="function"?await t.error(c):t.error,h=typeof t.description=="function"?await t.description(c):t.description,f=typeof u=="object"&&!de.isValidElement(u)?u:{message:u};this.create({id:r,type:"error",description:h,...f})}}).finally(()=>{s&&(this.dismiss(r),r=void 0),t.finally==null||t.finally.call(t)}),l=()=>new Promise((c,u)=>a.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{const r=(t==null?void 0:t.id)||vI++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ti=new _de,Sde=(n,e)=>{const t=(e==null?void 0:e.id)||vI++;return ti.addToast({title:n,...e,id:t}),t},kde=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",Cde=Sde,Ede=()=>ti.toasts,Tde=()=>ti.getActiveToasts(),Ke=Object.assign(Cde,{success:ti.success,info:ti.info,warning:ti.warning,error:ti.error,custom:ti.custom,message:ti.message,promise:ti.promise,dismiss:ti.dismiss,loading:ti.loading},{getHistory:Ede,getToasts:Tde});dde("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Y0(n){return n.label!==void 0}const Mde=3,Ide="24px",Pde="16px",m5=4e3,Ode=356,Rde=14,Dde=45,Nde=200;function Qs(...n){return n.filter(Boolean).join(" ")}function Ade(n){const[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}const Lde=n=>{var e,t,r,i,s,o,a,l,c;const{invert:u,toast:h,unstyled:d,interacting:f,setHeights:m,visibleToasts:g,heights:v,index:y,toasts:b,expanded:w,removeToast:S,defaultRichColors:_,closeButton:E,style:C,cancelButtonStyle:T,actionButtonStyle:O,className:R="",descriptionClassName:D="",duration:A,position:F,gap:z,expandByDefault:j,classNames:L,icons:B,closeButtonAriaLabel:$="Close toast"}=n,[U,H]=de.useState(null),[K,J]=de.useState(null),[Z,q]=de.useState(!1),[X,G]=de.useState(!1),[ne,te]=de.useState(!1),[be,Y]=de.useState(!1),[ee,pe]=de.useState(!1),[ge,qe]=de.useState(0),[De,_e]=de.useState(0),Ae=de.useRef(h.duration||A||m5),et=de.useRef(null),Ee=de.useRef(null),Re=y===0,Xe=y+1<=g,Ue=h.type,ct=h.dismissible!==!1,Ht=h.className||"",fe=h.descriptionClassName||"",ae=de.useMemo(()=>v.findIndex(Me=>Me.toastId===h.id)||0,[v,h.id]),se=de.useMemo(()=>{var Me;return(Me=h.closeButton)!=null?Me:E},[h.closeButton,E]),Pe=de.useMemo(()=>h.duration||A||m5,[h.duration,A]),Ge=de.useRef(0),me=de.useRef(0),ve=de.useRef(0),oe=de.useRef(null),[ke,Oe]=F.split("-"),ye=de.useMemo(()=>v.reduce((Me,le,lt)=>lt>=ae?Me:Me+le.height,0),[v,ae]),Le=wde(),ot=h.invert||u,en=Ue==="loading";me.current=de.useMemo(()=>ae*z+ye,[ae,ye]),de.useEffect(()=>{Ae.current=Pe},[Pe]),de.useEffect(()=>{q(!0)},[]),de.useEffect(()=>{const Me=Ee.current;if(Me){const le=Me.getBoundingClientRect().height;return _e(le),m(lt=>[{toastId:h.id,height:le,position:h.position},...lt]),()=>m(lt=>lt.filter(mt=>mt.toastId!==h.id))}},[m,h.id]),de.useLayoutEffect(()=>{if(!Z)return;const Me=Ee.current,le=Me.style.height;Me.style.height="auto";const lt=Me.getBoundingClientRect().height;Me.style.height=le,_e(lt),m(mt=>mt.find(Fe=>Fe.toastId===h.id)?mt.map(Fe=>Fe.toastId===h.id?{...Fe,height:lt}:Fe):[{toastId:h.id,height:lt,position:h.position},...mt])},[Z,h.title,h.description,m,h.id,h.jsx,h.action,h.cancel]);const $t=de.useCallback(()=>{G(!0),qe(me.current),m(Me=>Me.filter(le=>le.toastId!==h.id)),setTimeout(()=>{S(h)},Nde)},[h,S,m,me]);de.useEffect(()=>{if(h.promise&&Ue==="loading"||h.duration===1/0||h.type==="loading")return;let Me;return w||f||Le?(()=>{if(ve.current<Ge.current){const mt=new Date().getTime()-Ge.current;Ae.current=Ae.current-mt}ve.current=new Date().getTime()})():(()=>{Ae.current!==1/0&&(Ge.current=new Date().getTime(),Me=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),$t()},Ae.current))})(),()=>clearTimeout(Me)},[w,f,h,Ue,Le,$t]),de.useEffect(()=>{h.delete&&($t(),h.onDismiss==null||h.onDismiss.call(h,h))},[$t,h.delete]);function dn(){var Me;if(B!=null&&B.loading){var le;return de.createElement("div",{className:Qs(L==null?void 0:L.loader,h==null||(le=h.classNames)==null?void 0:le.loader,"sonner-loader"),"data-visible":Ue==="loading"},B.loading)}return de.createElement(mde,{className:Qs(L==null?void 0:L.loader,h==null||(Me=h.classNames)==null?void 0:Me.loader),visible:Ue==="loading"})}const Pn=h.icon||(B==null?void 0:B[Ue])||fde(Ue);var He,ht;return de.createElement("li",{tabIndex:0,ref:Ee,className:Qs(R,Ht,L==null?void 0:L.toast,h==null||(e=h.classNames)==null?void 0:e.toast,L==null?void 0:L.default,L==null?void 0:L[Ue],h==null||(t=h.classNames)==null?void 0:t[Ue]),"data-sonner-toast":"","data-rich-colors":(He=h.richColors)!=null?He:_,"data-styled":!(h.jsx||h.unstyled||d),"data-mounted":Z,"data-promise":!!h.promise,"data-swiped":ee,"data-removed":X,"data-visible":Xe,"data-y-position":ke,"data-x-position":Oe,"data-index":y,"data-front":Re,"data-swiping":ne,"data-dismissible":ct,"data-type":Ue,"data-invert":ot,"data-swipe-out":be,"data-swipe-direction":K,"data-expanded":!!(w||j&&Z),"data-testid":h.testId,style:{"--index":y,"--toasts-before":y,"--z-index":b.length-y,"--offset":`${X?ge:me.current}px`,"--initial-height":j?"auto":`${De}px`,...C,...h.style},onDragEnd:()=>{te(!1),H(null),oe.current=null},onPointerDown:Me=>{Me.button!==2&&(en||!ct||(et.current=new Date,qe(me.current),Me.target.setPointerCapture(Me.pointerId),Me.target.tagName!=="BUTTON"&&(te(!0),oe.current={x:Me.clientX,y:Me.clientY})))},onPointerUp:()=>{var Me,le,lt;if(be||!ct)return;oe.current=null;const mt=Number(((Me=Ee.current)==null?void 0:Me.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ie=Number(((le=Ee.current)==null?void 0:le.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Fe=new Date().getTime()-((lt=et.current)==null?void 0:lt.getTime()),Ce=U==="x"?mt:Ie,Bt=Math.abs(Ce)/Fe;if(Math.abs(Ce)>=Dde||Bt>.11){qe(me.current),h.onDismiss==null||h.onDismiss.call(h,h),J(U==="x"?mt>0?"right":"left":Ie>0?"down":"up"),$t(),Y(!0);return}else{var Qe,Yt;(Qe=Ee.current)==null||Qe.style.setProperty("--swipe-amount-x","0px"),(Yt=Ee.current)==null||Yt.style.setProperty("--swipe-amount-y","0px")}pe(!1),te(!1),H(null)},onPointerMove:Me=>{var le,lt,mt;if(!oe.current||!ct||((le=window.getSelection())==null?void 0:le.toString().length)>0)return;const Fe=Me.clientY-oe.current.y,Ce=Me.clientX-oe.current.x;var Bt;const Qe=(Bt=n.swipeDirections)!=null?Bt:Ade(F);!U&&(Math.abs(Ce)>1||Math.abs(Fe)>1)&&H(Math.abs(Ce)>Math.abs(Fe)?"x":"y");let Yt={x:0,y:0};const We=Ze=>1/(1.5+Math.abs(Ze)/20);if(U==="y"){if(Qe.includes("top")||Qe.includes("bottom"))if(Qe.includes("top")&&Fe<0||Qe.includes("bottom")&&Fe>0)Yt.y=Fe;else{const Ze=Fe*We(Fe);Yt.y=Math.abs(Ze)<Math.abs(Fe)?Ze:Fe}}else if(U==="x"&&(Qe.includes("left")||Qe.includes("right")))if(Qe.includes("left")&&Ce<0||Qe.includes("right")&&Ce>0)Yt.x=Ce;else{const Ze=Ce*We(Ce);Yt.x=Math.abs(Ze)<Math.abs(Ce)?Ze:Ce}(Math.abs(Yt.x)>0||Math.abs(Yt.y)>0)&&pe(!0),(lt=Ee.current)==null||lt.style.setProperty("--swipe-amount-x",`${Yt.x}px`),(mt=Ee.current)==null||mt.style.setProperty("--swipe-amount-y",`${Yt.y}px`)}},se&&!h.jsx&&Ue!=="loading"?de.createElement("button",{"aria-label":$,"data-disabled":en,"data-close-button":!0,onClick:en||!ct?()=>{}:()=>{$t(),h.onDismiss==null||h.onDismiss.call(h,h)},className:Qs(L==null?void 0:L.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(ht=B==null?void 0:B.close)!=null?ht:xde):null,(Ue||h.icon||h.promise)&&h.icon!==null&&((B==null?void 0:B[Ue])!==null||h.icon)?de.createElement("div",{"data-icon":"",className:Qs(L==null?void 0:L.icon,h==null||(i=h.classNames)==null?void 0:i.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||dn():null,h.type!=="loading"?Pn:null):null,de.createElement("div",{"data-content":"",className:Qs(L==null?void 0:L.content,h==null||(s=h.classNames)==null?void 0:s.content)},de.createElement("div",{"data-title":"",className:Qs(L==null?void 0:L.title,h==null||(o=h.classNames)==null?void 0:o.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?de.createElement("div",{"data-description":"",className:Qs(D,fe,L==null?void 0:L.description,h==null||(a=h.classNames)==null?void 0:a.description)},typeof h.description=="function"?h.description():h.description):null),de.isValidElement(h.cancel)?h.cancel:h.cancel&&Y0(h.cancel)?de.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||T,onClick:Me=>{Y0(h.cancel)&&ct&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,Me),$t())},className:Qs(L==null?void 0:L.cancelButton,h==null||(l=h.classNames)==null?void 0:l.cancelButton)},h.cancel.label):null,de.isValidElement(h.action)?h.action:h.action&&Y0(h.action)?de.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||O,onClick:Me=>{Y0(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,Me),!Me.defaultPrevented&&$t())},className:Qs(L==null?void 0:L.actionButton,h==null||(c=h.classNames)==null?void 0:c.actionButton)},h.action.label):null)};function g5(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function Fde(n,e){const t={};return[n,e].forEach((r,i)=>{const s=i===1,o=s?"--mobile-offset":"--offset",a=s?Pde:Ide;function l(c){["top","right","bottom","left"].forEach(u=>{t[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?t[`${o}-${c}`]=a:t[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),t}const jde=de.forwardRef(function(e,t){const{id:r,invert:i,position:s="bottom-right",hotkey:o=["altKey","KeyT"],expand:a,closeButton:l,className:c,offset:u,mobileOffset:h,theme:d="light",richColors:f,duration:m,style:g,visibleToasts:v=Mde,toastOptions:y,dir:b=g5(),gap:w=Rde,icons:S,containerAriaLabel:_="Notifications"}=e,[E,C]=de.useState([]),T=de.useMemo(()=>r?E.filter(Z=>Z.toasterId===r):E.filter(Z=>!Z.toasterId),[E,r]),O=de.useMemo(()=>Array.from(new Set([s].concat(T.filter(Z=>Z.position).map(Z=>Z.position)))),[T,s]),[R,D]=de.useState([]),[A,F]=de.useState(!1),[z,j]=de.useState(!1),[L,B]=de.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),$=de.useRef(null),U=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),H=de.useRef(null),K=de.useRef(!1),J=de.useCallback(Z=>{C(q=>{var X;return(X=q.find(G=>G.id===Z.id))!=null&&X.delete||ti.dismiss(Z.id),q.filter(({id:G})=>G!==Z.id)})},[]);return de.useEffect(()=>ti.subscribe(Z=>{if(Z.dismiss){requestAnimationFrame(()=>{C(q=>q.map(X=>X.id===Z.id?{...X,delete:!0}:X))});return}setTimeout(()=>{Vie.flushSync(()=>{C(q=>{const X=q.findIndex(G=>G.id===Z.id);return X!==-1?[...q.slice(0,X),{...q[X],...Z},...q.slice(X+1)]:[Z,...q]})})})}),[E]),de.useEffect(()=>{if(d!=="system"){B(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?B("dark"):B("light")),typeof window>"u")return;const Z=window.matchMedia("(prefers-color-scheme: dark)");try{Z.addEventListener("change",({matches:q})=>{B(q?"dark":"light")})}catch{Z.addListener(({matches:X})=>{try{B(X?"dark":"light")}catch(G){console.error(G)}})}},[d]),de.useEffect(()=>{E.length<=1&&F(!1)},[E]),de.useEffect(()=>{const Z=q=>{var X;if(o.every(te=>q[te]||q.code===te)){var ne;F(!0),(ne=$.current)==null||ne.focus()}q.code==="Escape"&&(document.activeElement===$.current||(X=$.current)!=null&&X.contains(document.activeElement))&&F(!1)};return document.addEventListener("keydown",Z),()=>document.removeEventListener("keydown",Z)},[o]),de.useEffect(()=>{if($.current)return()=>{H.current&&(H.current.focus({preventScroll:!0}),H.current=null,K.current=!1)}},[$.current]),de.createElement("section",{ref:t,"aria-label":`${_} ${U}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},O.map((Z,q)=>{var X;const[G,ne]=Z.split("-");return T.length?de.createElement("ol",{key:Z,dir:b==="auto"?g5():b,tabIndex:-1,ref:$,className:c,"data-sonner-toaster":!0,"data-sonner-theme":L,"data-y-position":G,"data-x-position":ne,style:{"--front-toast-height":`${((X=R[0])==null?void 0:X.height)||0}px`,"--width":`${Ode}px`,"--gap":`${w}px`,...g,...Fde(u,h)},onBlur:te=>{K.current&&!te.currentTarget.contains(te.relatedTarget)&&(K.current=!1,H.current&&(H.current.focus({preventScroll:!0}),H.current=null))},onFocus:te=>{te.target instanceof HTMLElement&&te.target.dataset.dismissible==="false"||K.current||(K.current=!0,H.current=te.relatedTarget)},onMouseEnter:()=>F(!0),onMouseMove:()=>F(!0),onMouseLeave:()=>{z||F(!1)},onDragEnd:()=>F(!1),onPointerDown:te=>{te.target instanceof HTMLElement&&te.target.dataset.dismissible==="false"||j(!0)},onPointerUp:()=>j(!1)},T.filter(te=>!te.position&&q===0||te.position===Z).map((te,be)=>{var Y,ee;return de.createElement(Lde,{key:te.id,icons:S,index:be,toast:te,defaultRichColors:f,duration:(Y=y==null?void 0:y.duration)!=null?Y:m,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:i,visibleToasts:v,closeButton:(ee=y==null?void 0:y.closeButton)!=null?ee:l,interacting:z,position:Z,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,closeButtonAriaLabel:y==null?void 0:y.closeButtonAriaLabel,removeToast:J,toasts:T.filter(pe=>pe.position==te.position),heights:R.filter(pe=>pe.position==te.position),setHeights:D,expandByDefault:a,gap:w,expanded:A,swipeDirections:e.swipeDirections})})):null}))}),Tf="onboard_mnemonic",Ru="onboard_wallet_address",Mf="onboard_auth_token",If="onboard_refresh_token",Pf="onboard_expires_at";function $de(n){const[e,t]=I.useState(""),[r,i]=I.useState(""),[s,o]=I.useState(!1),[a,l]=I.useState(""),[c,u]=I.useState(void 0),[h,d]=I.useState(void 0),[f,m]=I.useState(!1),[g,v]=I.useState(null);I.useEffect(()=>{const R=localStorage.getItem(Tf),D=localStorage.getItem(Ru),A=localStorage.getItem(Mf),F=localStorage.getItem(If),z=localStorage.getItem(Pf);if(t(R||""),i(D||""),A&&l(A),F&&u(F),z){const j=parseInt(z,10);isNaN(j)||d(j)}},[]);const y=I.useCallback(async R=>{if(!R||R.trim()==="")return null;o(!0);try{Oi.isReady()||await Oi.initialize();const D=await Oi.generateAddress(R.trim(),0);return D.success&&D.address?D.address:(console.error("Failed to generate address:",D.error),null)}catch(D){return console.error("Error generating address:",D),null}finally{o(!1)}},[]),b=I.useCallback(async R=>{const D=R.trim();if(D===""){t(""),i(""),localStorage.removeItem(Tf),localStorage.removeItem(Ru);return}t(D),localStorage.setItem(Tf,D);const A=await y(D);A?(i(A),localStorage.setItem(Ru,A)):(i(""),localStorage.removeItem(Ru))},[y]),w=I.useCallback((R,D)=>{const A=R.trim(),F=D.trim().toLowerCase();t(A),i(F),localStorage.setItem(Tf,A),localStorage.setItem(Ru,F)},[]),S=I.useCallback(()=>{t(""),i(""),localStorage.removeItem(Tf),localStorage.removeItem(Ru)},[]),_=I.useMemo(()=>{if(e==="")return"";const R=e.trim();if(R==="")return"";try{const D=Em.fromPhrase(R,"","m/44'/60'/0'/0/0");if(r&&D.address.toLowerCase()!==r.toLowerCase())return console.warn("Address mismatch: derived address does not match stored address"),"";const A=BigInt(D.privateKey),F=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(A===0n||A>=F)return console.error("Invalid private key: out of secp256k1 curve order"),"";const j=A.toString(16).toLowerCase().padStart(64,"0");return/^[0-9a-f]{64}$/.test(j)?j:(console.error("Invalid private key format"),"")}catch(D){return console.error("Error computing private key:",D),""}},[e,r]),E=I.useCallback(async(R,D,A,F)=>{m(!0),v(null);try{await b(R);const z=await Hhe(R,D,A,F);if(z.success&&z.authToken)l(z.authToken),u(z.refreshToken),d(z.expiresAt),localStorage.setItem(Mf,z.authToken),z.refreshToken&&localStorage.setItem(If,z.refreshToken),z.expiresAt&&localStorage.setItem(Pf,z.expiresAt.toString()),Ke.success("Onboarding successful",{description:"Wallet authenticated and auth token generated.",duration:5e3});else{const j=z.error||"Onboarding failed";throw v(j),l(""),u(void 0),d(void 0),localStorage.removeItem(Mf),localStorage.removeItem(If),localStorage.removeItem(Pf),Ke.error("Onboarding failed",{description:j,duration:6e3}),new Error(j)}}catch(z){const j=(z==null?void 0:z.message)||"Unknown error during onboarding";throw v(j),l(""),u(void 0),d(void 0),localStorage.removeItem(Mf),localStorage.removeItem(If),localStorage.removeItem(Pf),Ke.error("Onboarding error",{description:j,duration:6e3}),z instanceof Error?z:new Error(j)}finally{m(!1)}},[b]),C=I.useCallback(()=>{v(null)},[]),T=I.useCallback(()=>{l(""),u(void 0),d(void 0),v(null),m(!1),localStorage.removeItem(Mf),localStorage.removeItem(If),localStorage.removeItem(Pf)},[]),O=I.useCallback(()=>{S(),T()},[S,T]);return{mnemonic:e,walletAddress:r,privateKey:_,authToken:a,refreshToken:c,expiresAt:h,loading:f,error:g,addressLoading:s,onboard:E,setMnemonic:b,setAccountData:w,clearAccountData:S,clearError:C,reset:T,resetAll:O}}function uu(n,e=2,t=2,r="0.00"){return n==null||isNaN(n)?r:n.toLocaleString("en-US",{minimumFractionDigits:e,maximumFractionDigits:t})}function Wy(n){return n==null||isNaN(n)?"--":uu(n,2,2,"--")}function hc(n){return n==null||isNaN(n)?"--":uu(n,2,8,"--")}function Hy(n){return n==null||isNaN(n)?"0.000":uu(n,3,3,"0.000")}function Bde(n){return n==null||isNaN(n)?"0":uu(n,3,8,"0")}function zde(n){return n==null||isNaN(n)?"0.00":uu(n,2,2,"0.00")}function qde(n){return n==null||isNaN(n)?"0.00":uu(n,2,2,"0.00")}function zt(n){return n==null||isNaN(n)?"0.00":uu(n,2,2,"0.00")}function tp(n){return n==null||isNaN(n)?"0%":`${(n*100).toFixed(2)}%`}function Ude(n,e="--"){if(n==null)return e;try{return(typeof n=="string"||typeof n=="number"?ar(typeof n=="string"?n:String(n)):0).toFixed(2).replace(/\.?0+$/,"")}catch{return e}}function v5(n){return isNaN(n)?"0":n>=1e6?`${(n/1e6).toFixed(1)}M`:n>=1e3?`${(n/1e3).toFixed(1)}K`:n.toFixed(2)}function Wde(n,e=6,t=4,r="--"){return!n||typeof n!="string"?r:n.length<=e+t?n:`${n.slice(0,e)}...${n.slice(-t)}`}function KO(n){const e=n.useWebSocket!==!1,[t,r]=I.useState([]),[i,s]=I.useState(!0),[o,a]=I.useState(""),[l,c]=I.useState(0),[u,h]=I.useState(!1),d=I.useRef(null),f=I.useRef(0),m=I.useRef(!0),g=I.useRef(n);g.current=n;const{subscribe:v,unsubscribe:y,isConnected:b}=pi(),w=I.useCallback(C=>{const T=Ohe(C)?C:Phe(C);return o5(T)},[]),S=I.useCallback(async()=>{if(!d.current)return;const C=g.current;if(!C.walletAddress||C.walletAddress.trim()===""){c(0);return}try{const T=await d.current.getBalanceDecimal(C.walletAddress,"USDC"),O=typeof T.available=="number"?T.available:T.availableBalance?st(T.availableBalance):0;c(O)}catch(T){console.warn("Failed to fetch spot wallet balance (USDC):",T),c(0)}},[]),_=I.useCallback(async()=>{if(!d.current)return;const C=g.current;if(!C.walletAddress||C.walletAddress.trim()===""){a("Wallet address is required"),r([]),s(!1),m.current=!1;return}a(""),m.current&&s(!0);try{console.log("[useBucketCollections] [fetchCollections] Starting fetch...",{walletAddress:C.walletAddress,useWebSocket:e}),S(),console.log("[useBucketCollections] [fetchCollections] Calling getBuckets API...");const T=await d.current.getBuckets(C.walletAddress);console.log("[useBucketCollections] [fetchCollections] Raw API response:",{response:T,responseType:typeof T,isArray:Array.isArray(T),responseLength:Array.isArray(T)?T.length:"N/A"});const O=Array.isArray(T)?T:[];console.log("[useBucketCollections] [fetchCollections] Buckets data after normalization:",{bucketsData:O,bucketsDataLength:O.length,bucketsDataTypes:O.map((D,A)=>({index:A,type:typeof D,hasBucketId:!!(D!=null&&D.bucketId),bucketId:D.bucketId??""}))}),console.log(`[useBucketCollections] [fetchCollections] About to transform ${O.length} buckets:`,O);const R=O.map(o5);r(R),e||(m.current=!1,s(!1))}catch(T){const O=T instanceof Error?T.message:"Failed to load bucket collections";a(O),console.error("[useBucketCollections] [fetchCollections] Failed to fetch bucket collections:",{error:T,errorMessage:O,walletAddress:C.walletAddress,stack:T instanceof Error?T.stack:void 0}),e||(m.current=!1,s(!1))}},[S,e]),E=I.useCallback(C=>{const T=C;if(!T||!T.buckets||!Array.isArray(T.buckets))return;console.log("[useBucketCollections] [handleBucketsUpdate] WebSocket data received:",{data:T,hasBuckets:!!T.buckets,bucketsIsArray:Array.isArray(T.buckets),bucketsLength:T.buckets.length}),console.log("[useBucketCollections] [handleBucketsUpdate] Transforming WebSocket buckets:",T.buckets);const O=T.buckets.map(w);console.log("[useBucketCollections] [handleBucketsUpdate] Transformed collections:",O);const R=O.filter(D=>D.bucketId&&D.bucketId.trim()!==""&&D.status!=="dormant");if(R.length!==O.length){const D=O.length-R.length,A=O.filter(z=>!z.bucketId||z.bucketId.trim()===""),F=O.filter(z=>z.bucketId&&z.bucketId.trim()!==""&&z.status==="dormant");console.warn(`[useBucketCollections] [handleBucketsUpdate] WebSocket: Filtered out ${D} collections (${A.length} with empty bucketId, ${F.length} with status "dormant")`,{filteredByBucketId:A,filteredByStatus:F})}console.log("[useBucketCollections] [handleBucketsUpdate] Setting collections from WebSocket:",{validCollectionsCount:R.length,validCollections:R}),r(D=>{if(console.log("[useBucketCollections] [handleBucketsUpdate] Previous collections:",{prevCount:D.length,prev:D}),D.length!==R.length)return R;const A=JSON.stringify(D),F=JSON.stringify(R);return A===F?D:R}),m.current&&(m.current=!1,s(!1))},[w]);return I.useEffect(()=>{if(!n.walletAddress||n.walletAddress.trim()===""){s(!1),a("Wallet address is required"),r([]),f.current!==0&&(clearInterval(f.current),f.current=0);return}const C=new Ls({baseURL:n.baseURL,sessionToken:n.authToken});d.current=C,m.current=!0,_(),h(b);const T=O=>E(O);return e?(v("buckets",T),!b&&n.refreshInterval&&n.refreshInterval>0&&(f.current=window.setInterval(()=>_(),n.refreshInterval)),()=>{f.current!==0&&(clearInterval(f.current),f.current=0),y("buckets",T)}):(n.refreshInterval&&n.refreshInterval>0&&(f.current=window.setInterval(()=>_(),n.refreshInterval)),()=>{f.current!==0&&(clearInterval(f.current),f.current=0)})},[n.baseURL,n.authToken,n.walletAddress,n.refreshInterval,n.marketId,n.symbol,e,b,v,y,_,E]),I.useEffect(()=>{console.log("[useBucketCollections] [useEffect] Hook state changed, returning:",{collectionsCount:t.length,collections:t,loading:i,error:o,spotWalletBalance:l})},[t,i,o,l]),{collections:t,loading:i,error:o,refreshBucketBalance:_,refreshSpotWalletBalance:S,spotWalletBalance:l,isConnected:u}}function Hde(n,e,t){return e!==n?k.jsx("span",{style:{fontSize:"0.7rem",opacity:.5,marginLeft:"0.25rem"},children:""}):k.jsx("span",{style:{fontSize:"0.7rem",marginLeft:"0.25rem"},children:t==="asc"?"":""})}function zd({message:n="Loading..."}){return k.jsx("div",{className:"message loading",children:n})}function qd({error:n}){return k.jsxs("div",{className:"message error",children:["Error: ",n]})}function oa({message:n}){return k.jsx("div",{className:"message empty",children:n})}function RV({message:n}){return k.jsx("div",{className:"message warning",children:n})}function XO({isConnected:n,connectedText:e=" LIVE",disconnectedText:t=" OFFLINE"}){return k.jsx("div",{className:"status-indicator",children:k.jsx("span",{className:`status-dot ${n?"connected":"disconnected"}`,children:n?e:t})})}function Ud({title:n,children:e}){return k.jsxs("div",{className:"layout-header",children:[k.jsx("div",{className:"layout-header-title",children:n}),e&&k.jsx("div",{className:"layout-header-actions",children:e})]})}function Yde({tabs:n,activeTabId:e,onTabChange:t,children:r}){return k.jsxs("div",{className:"layout-header",children:[k.jsx("div",{className:"layout-header-title",children:k.jsx("div",{className:"tab-section-tabs",children:n.map(i=>k.jsx("button",{type:"button",className:`btn-tab ${e===i.id?"active":""}`,onClick:()=>t(i.id),children:i.label},i.id))})}),r&&k.jsx("div",{className:"layout-header-actions",children:r})]})}function cr({field:n,currentSortField:e,sortDirection:t,onSort:r,children:i,center:s=!1}){return k.jsxs("div",{className:`table-header-cell ${s?"left":"right"}`,onClick:()=>r(n),children:[i,Hde(n,e,t)]})}function yI({children:n,center:e=!1}){return k.jsx("div",{className:`table-header-cell ${e?"left":"right"}`,children:n})}function Gde({onClick:n,disabled:e}){return console.log("[CancelButton] Rendering",{disabled:e,hasOnClick:!!n}),k.jsx("button",{onClick:t=>{console.log("[CancelButton] Button clicked",{disabled:e,event:t}),!e&&n?n(t):console.warn("[CancelButton] Click ignored - button is disabled",{disabled:e})},onMouseDown:t=>{console.log("[CancelButton] Mouse down",{disabled:e,event:t})},className:"btn btn-danger",disabled:e,style:{pointerEvents:e?"none":"auto",cursor:e?"not-allowed":"pointer"},children:"Cancel"})}function Vde({onClick:n}){return k.jsx("button",{onClick:n,className:"btn btn-success",children:"Close"})}function DV({onConfirm:n,label:e="Slide to confirm",confirmThreshold:t=90,disabled:r=!1,icon:i}){const[s,o]=I.useState(0),[a,l]=I.useState(!1),c=I.useRef(null),u=I.useRef(null),h=f=>{r||(f.preventDefault(),l(!0))};I.useEffect(()=>{if(!a)return;const f=g=>{if(!c.current||r)return;const v=c.current.getBoundingClientRect(),y=g.clientX-v.left,b=v.width,w=Math.max(0,Math.min(100,y/b*100));o(w)},m=()=>{r||(s>=t?(n(),setTimeout(()=>{o(0)},200)):o(0),l(!1))};return document.addEventListener("mousemove",f),document.addEventListener("mouseup",m),()=>{document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",m)}},[a,s,t,n,r]);const d=s>=t;return k.jsxs("div",{ref:c,className:`slider-confirm-bar ${r?"disabled":""} ${a?"dragging":""}`,children:[k.jsx("div",{className:`slider-confirm-bar-progress ${d?"confirmed":"default"} ${a?"no-transition":""}`,style:{width:`${s}%`}}),k.jsx("div",{className:"slider-confirm-bar-label",children:d?"Release to confirm":e}),k.jsx("div",{ref:u,onMouseDown:h,className:`slider-confirm-bar-thumb ${r?"disabled":""} ${a?"dragging":""} ${d?"confirmed":""}`,style:{left:`${s}%`},children:i?k.jsx("span",{className:`slider-confirm-bar-thumb-icon ${d?"confirmed":""}`,children:i}):k.jsx("span",{className:`slider-confirm-bar-thumb-arrow ${d?"confirmed":""}`,children:""})})]})}function QO({isOpen:n,value:e,min:t,max:r,onConfirm:i,onCancel:s}){const[o,a]=I.useState("");if(I.useEffect(()=>{n&&a(e.toString())},[n,e]),!n)return null;const l=v=>{const y=o==="0"?v:o+v;parseFloat(y)<=r&&a(y)},c=()=>{o.includes(".")||a(o+".")},u=()=>{o.length>1?a(o.slice(0,-1)):a("0")},h=()=>{a("0")},d=()=>{const v=parseFloat(o)||0,y=Math.max(t,Math.min(r,v));i(y)},f=parseFloat(o)||0,m=f>=t&&f<=r,g=k.jsx("div",{className:"modal-overlay",onClick:s,style:{zIndex:1e4},children:k.jsxs("div",{className:"modal-content number-pad-content",onClick:v=>v.stopPropagation(),children:[k.jsx("div",{className:"modal-header",children:k.jsx("h3",{children:"Enter Amount"})}),k.jsxs("div",{className:"modal-body",children:[k.jsxs("div",{className:"number-pad-display",children:[k.jsx("div",{className:"number-pad-display-value",children:zt(f)}),k.jsxs("div",{className:"number-pad-display-range",children:["Min: ",zt(t)," | Max: ",zt(r)]}),!m&&f>0&&k.jsxs("div",{className:"number-pad-display-error",children:["Value must be between ",zt(t)," and"," ",zt(r)]})]}),k.jsxs("div",{className:"number-pad-grid",children:[k.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"1"),children:"1"}),k.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"2"),children:"2"}),k.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"3"),children:"3"}),k.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"4"),children:"4"}),k.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"5"),children:"5"}),k.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"6"),children:"6"}),k.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"7"),children:"7"}),k.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"8"),children:"8"}),k.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"9"),children:"9"}),k.jsx("button",{type:"button",className:"number-pad-button",onClick:c,children:"."}),k.jsx("button",{type:"button",className:"number-pad-button",onClick:l.bind(null,"0"),children:"0"}),k.jsx("button",{type:"button",className:"number-pad-button number-pad-button-action",onClick:u,children:""})]}),k.jsxs("div",{className:"number-pad-actions",children:[k.jsx("button",{type:"button",className:"number-pad-action-button",onClick:h,children:"Clear"}),k.jsx("button",{type:"button",className:"number-pad-action-button number-pad-action-button-max",onClick:()=>{a(r.toString())},children:"Max"})]})]}),k.jsxs("div",{className:"modal-footer",children:[k.jsx("button",{onClick:s,className:"btn btn-secondary",children:"Cancel"}),k.jsx("button",{onClick:d,className:"btn btn-primary",disabled:!m,children:"Confirm"})]})]})});return typeof document<"u"?Bs.createPortal(g,document.body):null}function Kde({baseURL:n=$d,subscriptionClient:e,authToken:t,walletAddress:r,mnemonic:i,height:s=Uue,refreshInterval:o=YO,onBucketSelect:a,hide_header:l=!1,onRequestHeaderActions:c,onRequestOpenTransferModal:u,onRequestOpenWalletTransferModal:h}){const{collections:d,loading:f,error:m,isConnected:g,refreshBucketBalance:v}=KO({...e!=null&&{subscriptionClient:e},baseURL:n,authToken:t,walletAddress:r,refreshInterval:o}),[y,b]=I.useState(null),[w,S]=I.useState("desc"),[_,E]=I.useState(""),[C,T]=I.useState("non-zero"),O=I.useMemo(()=>{let z=d.filter(j=>j&&j.bucketId&&typeof j.bucketId=="string"&&j.bucketId.trim()!=="");return C==="non-zero"?z=z.filter(j=>(j.totalEquity||0)>0):C==="dormant"?z=z.filter(j=>{var L;return((L=j.status)==null?void 0:L.toLowerCase())==="dormant"}):C==="active"&&(z=z.filter(j=>{var L;return((L=j.status)==null?void 0:L.toLowerCase())==="active"})),y?[...z].sort((j,L)=>{let B=0,$=0;switch(y){case"marginType":B=Cp(j),$=Cp(L);break;case"usedMargin":B=j.usedMargin||0,$=L.usedMargin||0;break;case"totalEquity":B=j.totalEquity||0,$=L.totalEquity||0;break;case"riskRatio":B=T1(j),$=T1(L);break;case"bucketId":B=j.bucketId||"",$=L.bucketId||"";break}if(typeof B=="string"&&typeof $=="string")return w==="asc"?B.localeCompare($):$.localeCompare(B);const U=Number(B),H=Number($);return w==="asc"?U-H:H-U}):z},[d,y,w,C]),R=z=>{y===z?S(w==="asc"?"desc":"asc"):(b(z),S("desc"))},D=(z,j)=>{a&&a(z,j),E(z)},A=()=>{T(z=>{switch(z){case"non-zero":return"active";case"active":return"dormant";case"dormant":return"all";case"all":return"non-zero";default:return"non-zero"}})},F=I.useMemo(()=>k.jsxs(k.Fragment,{children:[k.jsx("div",{onClick:A,className:"btn-tab",title:C==="non-zero"?"Click to show active buckets":C==="active"?"Click to show dormant buckets":C==="dormant"?"Click to show all buckets":"Click to show non-zero balance buckets",children:k.jsx("span",{children:C==="all"?"All":C==="non-zero"?"Non-Zero":C==="dormant"?"Dormant":"Active"})}),k.jsxs("div",{onClick:()=>u==null?void 0:u(),className:"btn-tab",style:{cursor:u?"pointer":void 0},children:[k.jsx("img",{src:"/transfer-repu.svg"}),k.jsx("span",{children:"Transfer"})]}),h&&k.jsx("div",{onClick:()=>h(),className:"btn-tab",style:{cursor:"pointer"},children:k.jsx("span",{children:"Send to Address"})}),!g&&k.jsxs("div",{onClick:async()=>{v&&await v()},className:"btn-tab",style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},title:"WebSocket disconnected - Click to refresh bucket collections",children:[k.jsx("img",{src:"/caution-icy.svg",alt:"Warning",style:{width:"1rem",height:"1rem"}}),k.jsx("span",{children:"Refresh"})]})]}),[C,A,u,h,g,v]);return I.useEffect(()=>{if(c){if(l&&!f&&!m)return c(F),()=>c(null);c(null)}},[l,c,f,m,F]),!r||r.trim()===""?k.jsx(RV,{message:"Wallet address required to view bucket collections"}):f&&d.length===0?k.jsx(zd,{message:"Loading bucket collections..."}):m?k.jsx(qd,{error:m}):k.jsxs("div",{className:"layout-container",style:{height:s,...l?{borderRadius:0,background:"transparent"}:{}},children:[!l&&k.jsx(Ud,{title:"BUCKET COLLECTIONS",children:F}),k.jsxs("div",{className:"table-container shrinkable",children:[k.jsxs("div",{className:"table-header",style:{gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr"},children:[k.jsx(cr,{field:"bucketId",currentSortField:y,sortDirection:w,onSort:R,left:!0,children:"Bucket ID"}),k.jsx(cr,{field:"marginType",currentSortField:y,sortDirection:w,onSort:R,children:"Margin Type"}),k.jsx(cr,{field:"usedMargin",currentSortField:y,sortDirection:w,onSort:R,children:"Used Margin"}),k.jsx(cr,{field:"totalEquity",currentSortField:y,sortDirection:w,onSort:R,children:"Total Equity"}),k.jsx(cr,{field:"riskRatio",currentSortField:y,sortDirection:w,onSort:R,left:!1,children:"Risk Ratio"})]}),O.length===0?k.jsx(oa,{message:d.length===0?"No bucket collections found. Make sure your wallet address is correct and has buckets.":`Filtered out all ${d.length} collections (invalid data structure)`}):O.map((z,j)=>{const L=T1(z),B=Cp(z);return k.jsxs("div",{onClick:()=>D(z.bucketId,z.availableMargin),className:`table-row clickable ${j%2===0?"even":""} ${_===z.bucketId?"selected":""}`,style:{gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr"},children:[k.jsx("div",{className:"table-cell primary",children:z.bucketId||"---"}),k.jsx("div",{className:"table-cell",children:B.toUpperCase()}),k.jsx("div",{className:"table-cell right monospace",children:zt(z.usedMargin||0)}),k.jsx("div",{className:"table-cell right monospace",children:zt(z.totalEquity||0)}),k.jsx("div",{className:"table-cell right monospace",style:{color:L>.5?"#ff6b6b":"#51cf66",fontWeight:500},children:tp(L)})]},`collection-${z.bucketId}-${j}`)})]})]})}const Xde=de.memo(Kde);function Qde({title:n="Dummy Component",message:e="This is a dummy component",height:t}){const[r,i]=I.useState(0);return k.jsxs("div",{className:"layout-container",style:{height:t},children:[k.jsx("div",{className:"layout-header",children:k.jsx("div",{className:"layout-header-title",children:n})}),k.jsxs("div",{style:{padding:"1rem",flex:1},children:[k.jsx("p",{className:"color-text-secondary",children:e}),k.jsxs("div",{style:{marginTop:"1rem"},children:[k.jsxs("p",{className:"color-text-primary",children:["Count: ",r]}),k.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[k.jsx("button",{className:"btn btn-success",onClick:()=>i(r+1),children:"Increment"}),k.jsx("button",{className:"btn btn-danger",onClick:()=>i(0),children:"Reset"})]})]})]})]})}de.memo(Qde);const Jde=({...n})=>k.jsx(jde,{...n,className:"toaster",expand:!0,richColors:!1,closeButton:!1,toastOptions:{duration:4e3,classNames:{toast:"toast",title:"toast-title",description:"toast-description",actionButton:"toast-action-button",cancelButton:"toast-cancel-button",closeButton:"toast-close-button"}}}),Zde=async n=>{try{return await navigator.clipboard.writeText(n),!0}catch{try{const t=document.createElement("textarea");return t.value=n,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),!0}catch(t){return console.error("Failed to copy to clipboard:",t),!1}}},yn=n=>({label:"Copy",onClick:async()=>{await Zde(n)?Ke.success("Error message copied to clipboard"):Ke.error("Failed to copy error message")}});function F1(n){return n.orderId}function efe(n){const e=n.useWebSocket!==!1,[t,r]=I.useState([]),[i,s]=I.useState(!0),[o,a]=I.useState(null),[l,c]=I.useState(!1),u=I.useRef(null),h=I.useRef(!1),d=I.useRef(n.walletAddress),f=I.useRef(n);f.current=n;const{subscribe:m,unsubscribe:g,isConnected:v}=pi(),y=I.useCallback(async()=>{if(!u.current)return;const w=f.current;if(!w.walletAddress||w.walletAddress.trim()===""){a(null),r([]),s(!1);return}a(null);try{const _=(await VO(GO.http,()=>u.current.getOrders(w.walletAddress))).orders||[];if(_.length>0){const E=_.map(s5);r(C=>{if(C.length!==E.length)return E;const T=JSON.stringify(C),O=JSON.stringify(E);return T===O?C:E})}else r(E=>E.length===0?E:[])}catch(S){const _=S instanceof Error?S.message:"Failed to load orders";a(_),console.error("Failed to fetch orders after retries:",S)}finally{s(!1)}},[]),b=I.useCallback(w=>{let S=[];if(typeof w=="object"&&w!==null&&"orders"in w&&Array.isArray(w.orders))S=w.orders;else if(typeof w=="object"&&w!==null&&("order_id"in w||"orderId"in w))S=[w];else{console.warn("Received invalid order data, skipping:",w);return}r(_=>{const E=new Map;_.forEach(R=>{const D=F1(R);D&&E.set(D,R)});for(const R of S){if(!R||typeof R!="object"||!("orderId"in R)||typeof R.orderId!="string"||R.orderId.length===0){console.warn("Received invalid order data, skipping:",R);continue}const D=s5(R),A=F1(D);if(!A){console.warn("Received order without ID, skipping:",D);continue}const F=D.status.toUpperCase();F==="FILLED"||F==="CANCELLED"||F==="REJECTED"||F==="EXPIRED"||F==="CLOSED"||F==="DONE"?E.delete(A):E.set(A,D)}const C=Array.from(E.values()).filter(R=>F1(R)!==void 0);if(_.length!==C.length)return C;const T=JSON.stringify(_),O=JSON.stringify(C);return T===O?_:C})},[]);return I.useEffect(()=>{if(n.walletAddress!==d.current&&(h.current=!1,d.current=n.walletAddress),!n.walletAddress||n.walletAddress.trim()===""){s(!1),a(null),r([]),h.current=!1;return}const w=new Ls({baseURL:n.baseURL,sessionToken:n.authToken});if(u.current=w,h.current||y().finally(()=>{h.current=!0}),c(v),e){const _=`orders:${n.marketId??"0"}`,E=C=>b(C);return m(_,E),()=>g(_,E)}return()=>{}},[n.baseURL,n.authToken,n.walletAddress,n.marketId,e,v,m,g,y,b]),{orders:t,loading:i,error:o,isConnected:l,refresh:y}}function tfe({baseURL:n=$d,subscriptionClient:e,authToken:t,walletAddress:r,mnemonic:i,height:s=Hue,refreshInterval:o=YO,hide_header:a=!1,onRequestHeaderActions:l}){const{client:c}=pi(),u=e??c,{orders:h,loading:d,error:f,isConnected:m,refresh:g}=efe({...u!=null&&{subscriptionClient:u},baseURL:n,authToken:t,walletAddress:r,refreshInterval:o}),{client:v,isReady:y}=ax({baseURL:n,mnemonic:i??""}),b=I.useRef(0),[w,S]=I.useState(null),{getSymbolByMarketId:_}=Bd({baseURL:n,sessionToken:t,autoFetchMarkets:!1}),[E,C]=I.useState(Aa),[T,O]=I.useState(null),[R,D]=I.useState(vh),A=I.useMemo(()=>h.filter(K=>{const J=K.status.toUpperCase(),Z=J.startsWith("ORDER_STATUS_")?J:`ORDER_STATUS_${J}`;return E===Aa?e5.some(q=>J===q.toUpperCase()||Z===q.toUpperCase()):!e5.some(q=>J===q.toUpperCase()||Z===q.toUpperCase())}),[h,E]),F=I.useMemo(()=>T?[...A].sort((K,J)=>{let Z=0,q=0;switch(T){case G3:Z=_(K.marketId)||`m-${K.marketId}`,q=_(J.marketId)||`m-${J.marketId}`;break;case V3:Z=K.side,q=J.side;break;case K3:Z=K.quantity,q=J.quantity;break;case X3:Z=K.price,q=J.price;break;case Q3:Z=K.filledQuantity||0,q=J.filledQuantity||0;break;case J3:Z=K.status,q=J.status;break}if(typeof Z=="string"&&typeof q=="string")return R===ll?Z.localeCompare(q):q.localeCompare(Z);const X=Number(Z),G=Number(q);return isNaN(X)||isNaN(G)?0:R===ll?X-G:G-X}):A,[A,T,R]),z=K=>{T===K?D(R===ll?vh:ll):(O(K),D(vh))},j=K=>K.side,L=K=>{const J=(K||"").toUpperCase(),Z={PENDING:{short:"P",full:"Pending",color:t5},OPEN:{short:"O",full:"Open",color:fhe},FILLED:{short:"F",full:"Filled",color:phe},CANCELLED:{short:"C",full:"Canceled",color:mhe},PARTIAL:{short:"PF",full:"Partially Filled",color:t5}};return Z[J]?Z[J]:{short:"?",full:K||Mhe,color:ghe}},B=K=>K===Im||K==="BUY"?vhe:yhe,$=K=>!K||typeof K!="string"?The:K.replace("ORDER_TYPE_",""),U=async K=>{var X;const J=K.orderId,Z=K.marketId;if(!J){const G="Cannot cancel order without a valid order ID.";Ke.error("Order ID is missing",{description:G,action:yn(G)});return}if(!Z){const G="Cannot cancel order without a valid market ID.";Ke.error("Market ID is missing",{description:G,action:yn(G)});return}if(!i){const G=`Please provide the 'mnemonic' prop to the PendingOrders component. Order ID: ${J}`;Ke.error("Mnemonic required",{description:G,duration:5e3,action:yn(G)});return}if(typeof i!="string"||i.trim()===""){const G=`The mnemonic prop is empty or invalid. Please provide a valid mnemonic. Order ID: ${J}`;Ke.error("Invalid mnemonic",{description:G,duration:5e3,action:yn(G)});return}if(w){Ke.info("Cancellation in progress",{description:"Please wait for the current cancellation to complete."});return}S(J);const q=Ke.loading("Canceling order...",{description:`Canceling order ${J}`});b.current=typeof q=="number"?q:0;try{if(!v||!y){Ke.error("Exchange client not ready",{description:"Please wait for the exchange client to initialize.",action:yn("Exchange client not ready")});return}const G=await v.cancelOrder({orderId:J,marketId:Z}),ne=G.success===!0||G.result.success===!0||G&&!G.error&&!G.message;b.current!==0&&(Ke.dismiss(b.current),b.current=0);const te=G.txhash;if(ne)Ke.success("Order canceled successfully",{description:`Order ${J} has been canceled. TX: ${te}`}),g&&await g();else{const be=(G==null?void 0:G.error)||(G==null?void 0:G.message)||((X=G==null?void 0:G.response)==null?void 0:X.error)||"Failed to cancel order";throw new Error(be)}}catch(G){b.current!==0&&(Ke.dismiss(b.current),b.current=0);const te=`${G instanceof Error?G.message:"Unknown error occurred"}. Order ID: ${J}`;Ke.error("Failed to cancel order",{description:te,duration:6e3,action:yn(te)})}finally{S(null)}},H=I.useMemo(()=>k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"btn-tab",children:[k.jsx("span",{style:{fontSize:"0.7rem"},children:""}),k.jsx("span",{children:"Current Symbol"})]}),k.jsxs("div",{onClick:()=>C(E===Aa?Z3:Aa),className:`btn-tab ${E===Z3?"active":""}`,children:[k.jsx("img",{src:"/transfer-net.svg"}),k.jsx("span",{children:E===Aa?Ehe:Che})]}),!m&&k.jsxs("div",{onClick:async()=>{g&&await g()},className:"btn-tab",style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},title:"WebSocket disconnected - Click to refresh orders",children:[k.jsx("img",{src:"/caution-icy.svg",alt:"Warning",style:{width:"1rem",height:"1rem"}}),k.jsx("span",{children:"Refresh"})]})]}),[E,m,g]);return I.useEffect(()=>{if(l){if(a&&!d&&!f)return l(H),()=>l(null);l(null)}},[a,l,d,f,H]),!r||r.trim()===""?k.jsx(RV,{message:khe}):d?k.jsx(zd,{message:bhe}):f?k.jsx(qd,{error:f}):k.jsxs("div",{className:"layout-container",style:{height:s,...a?{borderRadius:0,background:"transparent"}:{}},children:[!a&&k.jsx(Ud,{title:E===Aa?_he:She,children:H}),k.jsxs("div",{className:"table-container shrinkable",children:[k.jsxs("div",{className:"table-header",style:{gridTemplateColumns:n5},children:[k.jsx(cr,{field:G3,currentSortField:T,sortDirection:R,onSort:z,children:"Symbol"}),k.jsx(cr,{field:V3,currentSortField:T,sortDirection:R,onSort:z,children:"Side"}),k.jsx(yI,{center:!0,children:"Type"}),k.jsx(cr,{field:K3,currentSortField:T,sortDirection:R,onSort:z,children:"Quantity"}),k.jsx(cr,{field:X3,currentSortField:T,sortDirection:R,onSort:z,children:"Price"}),k.jsx(cr,{field:Q3,currentSortField:T,sortDirection:R,onSort:z,children:"Filled"}),k.jsx(cr,{field:J3,currentSortField:T,sortDirection:R,onSort:z,children:"Status"}),k.jsx(yI,{center:!0,children:"Actions"})]}),F.length===0?k.jsx(oa,{message:E===Aa?xhe:whe}):F.map((K,J)=>{const Z=j(K),q=B(Z),{short:X,full:G,color:ne}=L(K.status),te=_(K.marketId)||`m-${K.marketId}`;return k.jsxs("div",{className:`table-row ${J%2===0?"even":""}`,style:{gridTemplateColumns:n5},children:[k.jsx("div",{className:"table-cell primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:k.jsx("span",{children:te})}),k.jsx("div",{className:"table-cell center",style:{color:q,fontWeight:500},children:Z}),k.jsx("div",{className:"table-cell center",children:$(K.type)}),k.jsx("div",{className:"table-cell right monospace",children:K.quantity}),k.jsx("div",{className:"table-cell right monospace",children:K.price}),k.jsxs("div",{className:"table-cell right monospace",children:[K.filledQuantity," / ",K.quantity]}),k.jsx("div",{className:"table-cell center",style:{color:ne,fontWeight:600,cursor:"help",fontSize:"0.9rem"},title:G,children:X}),k.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"0.5rem"},children:E===Aa?k.jsxs(k.Fragment,{children:[(!i||i.trim()==="")&&k.jsx("span",{style:{fontSize:"0.7rem",color:"#ffc107",cursor:"help"},title:"Mnemonic required to cancel orders",children:""}),k.jsx(Gde,{onClick:be=>{be.preventDefault(),be.stopPropagation(),!i||i.trim()===""||w===K.orderId||!!w||U(K)},disabled:!i||i.trim()===""||w===K.orderId||!!w})]}):k.jsx("span",{className:"color-text-dim",children:""})})]},`order-${K.orderId}`)})]})]})}const nfe=de.memo(tfe);function rfe({baseURL:n=$d,subscriptionClient:e,authToken:t,walletAddress:r,mnemonic:i,height:s=Wue,refreshInterval:o=YO,selectedBucketId:a=null,hide_header:l=!1,onRequestHeaderActions:c}){const{client:u}=pi(),h=e??u,{positions:d,loading:f,error:m,isConnected:g,refresh:v}=hde({...h!=null&&{subscriptionClient:h},baseURL:n,authToken:t,walletAddress:r,refreshInterval:o}),{getSymbolByMarketId:y}=Bd({baseURL:n,sessionToken:t??"",autoFetchMarkets:!0}),{client:b,isReady:w,error:S}=ax({baseURL:n,mnemonic:i??""});I.useEffect(()=>{if(S){const L=S.message;console.error("Failed to initialize FiClient:",S),Ke.error("Exchange client initialization failed",{description:L,action:yn(L)})}},[S]);const[_,E]=I.useState(C1),[C,T]=I.useState(null),[O,R]=I.useState(vh),D=I.useMemo(()=>{let L=[...d];return _===U0&&a&&(L=L.filter(B=>{const $=B.bucketId.toString(),U=a.toString();return $===U})),C?L.sort((B,$)=>{let U=0,H=0;switch(C){case $3:U=y(B.marketId)??B.symbol??"",H=y($.marketId)??$.symbol??"";break;case B3:try{U=B.leverage??0,H=$.leverage??0}catch{U=0,H=0}break;case z3:U=B.size||0,H=$.size||0;break;case q3:U=B.liquidationPrice||0,H=$.liquidationPrice||0;break;case U3:U=B.unrealizedPnL||0,H=$.unrealizedPnL||0;break;case W3:U=B.entryPrice||0,H=$.entryPrice||0;break;case H3:U=B.margin||0,H=$.margin||0;break}if(typeof U=="string"&&typeof H=="string")return O===ll?U.localeCompare(H):H.localeCompare(U);const K=Number(U),J=Number(H);return O===ll?K-J:J-K}):L},[d,C,O,a,_,y]),A=L=>{C===L?R(O===ll?vh:ll):(T(L),R(vh))},F=I.useRef(0),z=async L=>{if(!i){const U="Please provide the 'mnemonic' prop to enable position closing.";Ke.error("Mnemonic required",{description:U,action:yn(U)});return}if(!b||!w){const U="Please wait for the exchange client to initialize.";Ke.error("Exchange client not ready",{description:U,action:yn(U)});return}const B=y(L.marketId)??L.symbol,$=Ke.loading("Closing position...",{description:`Closing ${L.side} position for ${B} (Size: ${Hy(L.size)})`});F.current=typeof $=="number"?$:0;try{const U=await b.closePosition({positionId:L.positionId,marketId:L.marketId,marketPrice:L.markPrice,quantity:L.size});F.current!==0&&(Ke.dismiss(F.current),F.current=0),Ke.success("Position closed successfully",{description:`${L.side} position for ${B} has been closed. tx: ${U.txhash}`,duration:5e3}),v&&await v()}catch(U){F.current!==0&&(Ke.dismiss(F.current),F.current=0);const H=U instanceof Error?U.message:"Unknown error occurred";Ke.error("Failed to close position",{description:H,duration:6e3,action:yn(H)}),console.error("Failed to close position:",U)}},j=I.useMemo(()=>k.jsxs(k.Fragment,{children:[k.jsx("div",{onClick:()=>{E(C1),T(null)},className:`btn-tab ${_===C1?"active":""}`,children:ahe}),k.jsxs("div",{onClick:()=>{E(U0),T(null)},className:`btn-tab ${_===U0?"active":""}`,children:[k.jsx("img",{src:"/bucket-g.svg"}),k.jsx("span",{children:lhe})]}),!g&&k.jsxs("div",{onClick:async()=>{v&&await v()},className:"btn-tab",style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},title:"WebSocket disconnected - Click to refresh positions",children:[k.jsx("img",{src:"/caution-icy.svg",alt:"Warning",style:{width:"1rem",height:"1rem"}}),k.jsx("span",{children:"Refresh"})]})]}),[_,g,v]);return I.useEffect(()=>{if(c){if(l&&!f&&!m)return c(j),()=>c(null);c(null)}},[l,c,f,m,j]),f?k.jsx(zd,{message:ihe}):m?k.jsx(qd,{error:m}):k.jsxs("div",{className:"layout-container",style:{height:s,...l?{borderRadius:0,background:"transparent"}:{}},children:[!l&&k.jsx(Ud,{title:`${ohe} ${_===U0&&a?`(Bucket ${a})`:""}`,children:j}),k.jsxs("div",{className:"table-container",children:[k.jsxs("div",{className:"table-header",style:{gridTemplateColumns:Y3},children:[k.jsx(cr,{field:$3,currentSortField:C,sortDirection:O,onSort:A,left:!0,children:"Symbol"}),k.jsx(cr,{field:B3,currentSortField:C,sortDirection:O,onSort:A,children:"Leverage"}),k.jsx(cr,{field:z3,currentSortField:C,sortDirection:O,onSort:A,children:"Size"}),k.jsx(cr,{field:q3,currentSortField:C,sortDirection:O,onSort:A,children:"Liq. Price"}),k.jsx(cr,{field:U3,currentSortField:C,sortDirection:O,onSort:A,children:"P/L"}),k.jsx(cr,{field:W3,currentSortField:C,sortDirection:O,onSort:A,children:"Entry Price"}),k.jsx(cr,{field:H3,currentSortField:C,sortDirection:O,onSort:A,children:"Margin"}),k.jsx(yI,{center:!0,children:"Actions"})]}),D.length===0?k.jsx(oa,{message:she}):D.map((L,B)=>{const $=L.side===Im,U=(L.unrealizedPnL||0)>=0?nhe:rhe,H=Ude(L.leverage,E1);return k.jsxs("div",{className:`table-row ${B%2===0?"even":""}`,style:{gridTemplateColumns:Y3},children:[k.jsx("div",{className:"table-cell primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:k.jsx("span",{children:y(L.marketId)??L.symbol})}),k.jsx("div",{className:"color-buy",style:{fontWeight:500},children:` ${$?Im:gI}  ${H===E1?E1:H}x @ ${L.marginMode||Mm}`}),k.jsx("div",{className:"color-buy right monospace",children:Hy(L.size)}),k.jsx("div",{className:"table-cell right monospace",children:Wy(L.liquidationPrice)}),k.jsx("div",{className:"table-cell right monospace",style:{color:U,fontWeight:500},children:qde(L.unrealizedPnL)}),k.jsx("div",{className:"table-cell right monospace",children:Wy(L.entryPrice)}),k.jsx("div",{className:"table-cell right monospace",children:zde(L.margin)}),k.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:k.jsx(Vde,{onClick:()=>z(L)})})]},`position-${L.marketId}-${B}`)})]})]})}const ife=de.memo(rfe),y5={orders:"Orders",positions:"Positions",buckets:"Buckets"};function sfe({baseURL:n,subscriptionClient:e,authToken:t,walletAddress:r,mnemonic:i,height:s="400px",refreshInterval:o,selectedBucketId:a=null,onBucketSelect:l,onRequestOpenTransferModal:c,onRequestOpenWalletTransferModal:u,activeTab:h,onTabChange:d}){const{client:f}=pi(),m=e??f,[g,v]=I.useState("orders"),y=h!=null&&d!=null,b=y?h:g,w=y?d:v,[S,_]=I.useState(null),E=Object.keys(y5).map(C=>({id:C,label:y5[C]}));return k.jsxs("div",{className:"layout-container tab-section-root",style:{height:s},children:[k.jsx(Yde,{tabs:E,activeTabId:b,onTabChange:C=>w(C),children:S}),k.jsxs("div",{className:"tab-section-content",children:[b==="orders"&&k.jsx(nfe,{baseURL:n,subscriptionClient:m,authToken:t,walletAddress:r,mnemonic:i,height:"100%",refreshInterval:o,hide_header:!0,onRequestHeaderActions:_}),b==="positions"&&k.jsx(ife,{baseURL:n,subscriptionClient:m,authToken:t,walletAddress:r,mnemonic:i,height:"100%",refreshInterval:o,selectedBucketId:a,hide_header:!0,onRequestHeaderActions:_}),b==="buckets"&&k.jsx(Xde,{baseURL:n,subscriptionClient:m,walletAddress:r,mnemonic:i??"",authToken:t,height:"100%",refreshInterval:o,onBucketSelect:l,onRequestOpenTransferModal:c,onRequestOpenWalletTransferModal:u,hide_header:!0,onRequestHeaderActions:_})]})]})}const ofe=de.memo(sfe);function afe({baseURL:n=$d,selectedMarketId:e,height:t,onMarketSelect:r,favorites:i=[],onFavoriteToggle:s}){const{markets:o,tickers:a,selectedMarketId:l,setSelectedMarketId:c}=Bd({baseURL:n,autoFetchMarkets:!0}),{subscribe:u,unsubscribe:h,isConnected:d,getRetainedDataByKey:f}=pi(),[m,g]=I.useState(new Set(i)),[v,y]=I.useState("1H"),[b,w]=I.useState(null),S=I.useRef(null),_=I.useRef(null),E=e||l||null,{latestFundingRate:C}=ude({marketId:E||"",historyDepth:1}),T=I.useMemo(()=>{if(!(C!=null&&C.fundingRate))return null;try{return st(C.fundingRate)}catch(G){return console.error("[TickerBar] Error converting funding rate:",G),null}},[C]),O=I.useMemo(()=>{if(!(C!=null&&C.indexPrice))return null;try{return st(C.indexPrice)}catch(G){return console.error("[TickerBar] Error converting index price:",G),null}},[C]),R=I.useMemo(()=>{if(!(C!=null&&C.openInterestLong))return null;try{return st(C.openInterestLong)}catch(G){return console.error("[TickerBar] Error converting open interest long:",G),null}},[C]),D=I.useMemo(()=>{if(!(C!=null&&C.openInterestShort))return null;try{return st(C.openInterestShort)}catch(G){return console.error("[TickerBar] Error converting open interest short:",G),null}},[C]),A=I.useMemo(()=>{const G=(C==null?void 0:C.longPercentage)!=null?st(C.longPercentage):null,ne=(C==null?void 0:C.shortPercentage)!=null?st(C.shortPercentage):null;return G!=null&&ne!=null?`${tp(G)} / ${tp(ne)}`:null},[C]),F=I.useMemo(()=>{if(!(C!=null&&C.markPrice))return null;try{return st(C.markPrice)}catch(G){return console.error("[TickerBar] Error converting mark_price:",G),null}},[C]),z=I.useMemo(()=>b!==null?b:F,[b,F]),j=I.useMemo(()=>{const G=new Set(m);return i.forEach(ne=>G.add(ne)),G},[i,m]),L=I.useMemo(()=>o.map(G=>{const ne=G.index??G.marketIndex??"",te=a.get(ne),be=G.moniker||G.symbol||(G.baseAsset&&G.quoteAsset?`${G.baseAsset}/${G.quoteAsset}`:"Unknown"),Y=!G.active||!(te!=null&&te.lastPrice)||typeof te.lastPrice=="string"&&te.lastPrice==="0";let ee=null;te!=null&&te.lastPrice&&(typeof te.lastPrice=="string"?ee=parseFloat(te.lastPrice):ee=te.lastPrice);let pe=null;return te!=null&&te.priceChangePercent24h&&(typeof te.priceChangePercent24h=="string"?pe=parseFloat(te.priceChangePercent24h):pe=te.priceChangePercent24h),{marketId:ne,symbol:be,price:ee,priceChangePercent:pe,isClosed:Y,isFavorite:j.has(ne)}}).filter(G=>G.marketId),[o,a,j]),B=I.useMemo(()=>E?o.find(G=>G.index===E||G.marketIndex===E):null,[o,E]),$=I.useMemo(()=>E?a.get(E):null,[a,E]),U=I.useMemo(()=>B?B.moniker||B.symbol||(B.baseAsset&&B.quoteAsset?`${B.baseAsset}/${B.quoteAsset}`:"Unknown"):"Select Market",[B]),H=I.useMemo(()=>{if(!B)return"";const G=B.baseAsset||"",ne=B.quoteAsset||"";return G&&ne?`${G} to ${ne}`:B.moniker||B.symbol||""},[B]),K=I.useMemo(()=>$!=null&&$.lastPrice?typeof $.lastPrice=="string"?parseFloat($.lastPrice):$.lastPrice:null,[$]),J=I.useMemo(()=>$!=null&&$.priceChangePercent24h?typeof $.priceChangePercent24h=="string"?parseFloat($.priceChangePercent24h):$.priceChangePercent24h:null,[$]);I.useEffect(()=>{if(!E||!d){w(null);return}const ne=`priceFeed:${E}`,te=f==null?void 0:f(ne);if(te&&typeof te=="object"&&"price"in te)try{const Y=st(te.price);w(Y)}catch(Y){console.error("[TickerBar] Error processing retained priceFeed:",Y)}const be=Y=>{try{if(Y&&typeof Y=="object"&&Y!==null&&"price"in Y){const ee=st(Y.price);w(ee)}}catch(ee){console.error("[TickerBar] Error processing priceFeed update:",ee)}};return _.current=be,u(ne,be),()=>{_.current&&(h(ne,_.current),_.current=null)}},[E,d,u,h,f]);const Z=G=>{r?r(G):c(G)},q=(G,ne)=>{ne.stopPropagation();const te=new Set(j);te.has(G)?te.delete(G):te.add(G),g(te),s&&s(G)},X=G=>{var be;const ne=((be=G.split("/")[0])==null?void 0:be.toUpperCase())||"";return{BTC:"",ETH:"",EUR:"",USD:"$",USDC:"$",USDT:"$"}[ne]||ne.charAt(0)||"?"};return k.jsxs("div",{className:"ticker-bar-container",style:t?{height:t}:void 0,children:[k.jsx("div",{className:"ticker-bar-top",ref:S,children:k.jsx("div",{className:"ticker-bar-scroll",children:L.map((G,ne)=>k.jsxs(de.Fragment,{children:[k.jsxs("div",{className:`ticker-item ${G.marketId===E?"active":""}`,onClick:()=>Z(G.marketId),children:[k.jsx("span",{className:"ticker-favorite-star",onClick:te=>q(G.marketId,te),style:{cursor:"pointer",opacity:G.isFavorite?1:.3},children:""}),k.jsx("span",{className:"ticker-asset-icon",children:X(G.symbol)}),k.jsx("span",{className:"ticker-symbol",children:G.symbol}),k.jsx("span",{className:"ticker-value",children:G.isClosed?k.jsx("span",{className:"ticker-closed",children:"CLOSED"}):G.price!==null?hc(G.price):"--"})]}),ne<L.length-1&&k.jsx("div",{className:"ticker-separator"})]},G.marketId))})}),k.jsxs("div",{className:"ticker-bar-bottom",children:[k.jsxs("div",{className:"ticker-detail-left",children:[k.jsx("div",{className:"ticker-detail-icon-large",children:B?X(U):"?"}),k.jsxs("div",{className:"ticker-detail-symbol-group",children:[k.jsx("div",{className:"ticker-detail-symbol-row",children:k.jsx("span",{className:"ticker-detail-symbol",children:U})}),k.jsx("div",{className:"ticker-detail-description",children:H})]}),k.jsxs("div",{className:"ticker-detail-price-group",children:[k.jsx("div",{className:"ticker-detail-price",children:K!==null?hc(K):"--"}),J!==null&&k.jsxs("div",{className:`ticker-detail-change ${J>=0?"positive":"negative"}`,children:[J>=0?"+":"",tp(J/100)]})]})]}),k.jsxs("div",{className:"ticker-detail-metrics",children:[k.jsxs("div",{className:"ticker-metric",children:[k.jsx("label",{className:"ticker-metric-label",title:"Index Price",children:"Index Price"}),k.jsx("span",{className:"ticker-metric-value",children:O!==null?hc(O):"--"})]}),k.jsxs("div",{className:"ticker-metric",children:[k.jsx("label",{className:"ticker-metric-label",title:"Oracle Price",children:"Oracle Price"}),k.jsx("span",{className:"ticker-metric-value",children:z!==null?hc(z):"--"})]}),k.jsxs("div",{className:"ticker-metric",children:[k.jsx("label",{className:"ticker-metric-label",title:"Open Interest (Long)",children:"Open Interest (L)"}),k.jsx("span",{className:"ticker-metric-value",children:R!==null?v5(R):"--"})]}),k.jsxs("div",{className:"ticker-metric",children:[k.jsx("label",{className:"ticker-metric-label",title:"Open Interest (Short)",children:"Open Interest (S)"}),k.jsx("span",{className:"ticker-metric-value",children:D!==null?v5(D):"--"})]}),k.jsxs("div",{className:"ticker-metric",children:[k.jsx("label",{className:"ticker-metric-label",title:"Skew",children:"Skew"}),k.jsx("span",{className:"ticker-metric-value",children:A??"--"})]}),k.jsxs("div",{className:"ticker-metric",children:[k.jsx("label",{className:"ticker-metric-label",title:"Funding Rate",children:"Funding Rate"}),k.jsx("span",{className:`ticker-metric-value ${T!==null&&T<0?"negative":T!==null&&T>0?"positive":""}`,children:T!==null?tp(T):"--"})]})]}),k.jsxs("div",{className:"ticker-detail-right",children:[k.jsxs("div",{className:"ticker-metric",children:[k.jsx("label",{className:"ticker-metric-label",title:"Holding (Long)",children:"Holding (L)"}),k.jsx("span",{className:"ticker-metric-value positive",children:"0.0012%"})]}),k.jsxs("div",{className:"ticker-metric",children:[k.jsx("label",{className:"ticker-metric-label",title:"Holding (Short)",children:"Holding (S)"}),k.jsx("span",{className:"ticker-metric-value negative",children:"0.0021%"})]})]}),k.jsx("div",{className:"ticker-timeframe-selector",children:k.jsxs("select",{className:"ticker-timeframe-select",value:v,onChange:G=>y(G.target.value),children:[k.jsx("option",{value:"1H",children:"1H"}),k.jsx("option",{value:"4H",children:"4H"}),k.jsx("option",{value:"1D",children:"1D"}),k.jsx("option",{value:"1W",children:"1W"}),k.jsx("option",{value:"1M",children:"1M"})]})})]})]})}const lfe=de.memo(afe),cfe=I.forwardRef(function({baseURL:e=$d,mnemonic:t=pI,marketId:r,marketSymbol:i,selectedBucketBalance:s,selectedBucketId:o,onLeverageClick:a,onNumberCalculatorClick:l,authToken:c,walletAddress:u},h){const{client:d}=pi(),{selectedMarketId:f,selectedMarketSymbol:m}=Bd({baseURL:e,autoFetchMarkets:!0}),g=r||f||"",v=i||m||"",{lastPrice:y}=OV({baseURL:e,marketId:g}),b=(y==null?void 0:y.price)||0,w=I.useRef(0),S=I.useRef(0),_=I.useRef(!1),{collections:E,spotWalletBalance:C}=KO({subscriptionClient:d,baseURL:e,walletAddress:u||"",authToken:c||"",useWebSocket:!!u&&!!c}),T=I.useMemo(()=>!o||!E.length?null:E.find(Ie=>Ie.bucketId===o)||null,[E,o]),{orderType:O,setOrderType:R,fundPercent:D,sizeInput:A,price:F,leverage:z,marginMode:j,availableBalance:L,currentPrice:B,isReady:$,loading:U,result:H,setFundPercent:K,setSizeInput:J,setPrice:Z,setMarginMode:q,setLeverage:X,placeBuyOrder:G,placeSellOrder:ne,changeLeverage:te,calculateValue:be,calculateMargin:Y,calculateSizeUSD:ee,getOrderPrice:pe,getAvailableTradeAmount:ge}=Jhe({baseURL:e,mnemonic:t,marketId:g,marketSymbol:v,selectedBucketBalance:s,selectedBucketId:o||void 0,tradePrice:b}),qe=I.useMemo(()=>pe(),[pe,O,F,B]),De=I.useMemo(()=>ge(),[ge,L,z]),_e=I.useMemo(()=>be(),[be,A,D,L,qe,z]),Ae=I.useMemo(()=>Y(),[Y,z,_e]),et=I.useMemo(()=>ar(String(_e)),[_e]),Ee=I.useMemo(()=>ar(String(Ae)),[Ae]),Re=I.useMemo(()=>({minimumFractionDigits:Na,maximumFractionDigits:Zue}),[]),Xe=I.useMemo(()=>B.toFixed(Na),[B]),Ue=I.useMemo(()=>{const Ie=E.reduce((Fe,Ce)=>Fe+Ce.totalEquity,0);return C+Ie},[E,C]),ct=I.useMemo(()=>Ue.toLocaleString("en-US",Re),[Ue,Re]),Ht=I.useMemo(()=>C.toLocaleString("en-US",Re),[C,Re]),fe=I.useMemo(()=>T?T.totalEquity.toLocaleString("en-US",Re):"--",[T,Re]),ae=I.useMemo(()=>T?T.totalEquity.toLocaleString("en-US",Re):"--",[T,Re]),se=I.useMemo(()=>T?T.unrealizedPnL.toLocaleString("en-US",Re):"--",[T,Re]),Pe=I.useMemo(()=>T?(T.marginRatio*100).toFixed(Na)+"%":"--",[T]),Ge=I.useMemo(()=>T?T.usedMargin.toLocaleString("en-US",Re):"--",[T,Re]),me=I.useMemo(()=>T?`${T.leverage.toFixed(Na)}x`:"--",[T]),ve=I.useMemo(()=>Wde(o||null),[o]);I.useEffect(()=>{if(T){const Ie=Cp(T);(Ie===Mm||Ie===ehe)&&q(Ie)}},[T,q]);const oe=I.useCallback(()=>{R(mI)},[R]),ke=I.useCallback(()=>{R(k1)},[R]),Oe=I.useCallback(()=>{K(Math.min(_1,D+S1))},[D,K]),ye=I.useCallback(()=>{K(Math.max(q0,D-S1))},[D,K]),Le=I.useCallback(Ie=>{const Fe=parseInt(Ie.target.value);K(Fe)},[K]),ot=I.useCallback(Ie=>{Z(parseFloat(Ie.target.value))},[Z]),[en,$t]=I.useState(!1),[dn,Pn]=I.useState(""),He=I.useCallback(Ie=>{const Fe=Ie.target.value;Pn(Fe);const Ce=parseFloat(Fe),Bt=isNaN(Ce)?0:Math.round(Ce*1e6)/1e6;J(Bt)},[J]),ht=I.useCallback(()=>{$t(!0),Pn(yae(A))},[A]),Me=I.useCallback(()=>{$t(!1);const Ie=parseFloat(dn);J(Ie),Pn("")},[dn,J]),le=I.useCallback(()=>{const Ie=Ke.loading("Submit transaction...",{description:"Placing buy order"});w.current=typeof Ie=="number"?Ie:0,G()},[G]),lt=I.useCallback(()=>{const Ie=Ke.loading("Submit transaction...",{description:"Placing sell order"});w.current=typeof Ie=="number"?Ie:0,ne()},[ne]),mt=I.useCallback(async(Ie,Fe)=>{_.current=!0;const Ce=Ke.loading("Changing leverage...",{description:`Updating leverage to ${Ie}x`});S.current=typeof Ce=="number"?Ce:0;try{const Bt=(Fe==null?void 0:Fe.leverageType)||(j===Mm?"cross":"isolated"),Qe=(Fe==null?void 0:Fe.bucketId)||o||"";await te(Ie,{...Fe,bucketId:Qe,leverageType:Bt})}catch(Bt){_.current=!1,S.current!==0&&(Ke.dismiss(S.current),S.current=0);const Qe=Bt instanceof Error?Bt.message:"Unknown error";Ke.error("Leverage Change Failed",{description:Qe,action:yn(Qe)})}},[te,j,o]);return I.useImperativeHandle(h,()=>({leverage:z,setLeverage:X,calculateMaxRatio:Ie=>{const Ce=ee();return L>0&&Ce>0?(Ce/L).toFixed(Na):Ie.toFixed(Na)},changeLeverage:mt,setPrice:Ie=>{const Fe=typeof Ie=="number"?Ie:parseFloat(Ie);isNaN(Fe)||Z(Fe)},setSizeInput:Ie=>{J(Ie)},getSizeInput:()=>A,getAvailableTradeAmount:()=>De}),[z,X,ee,pe,L,mt,Z,J,A,De]),I.useEffect(()=>{if(H)if(_.current)if(_.current=!1,S.current!==0&&(Ke.dismiss(S.current),S.current=0),H.success){const Ie=H.orderId?`Transaction: ${H.orderId}`:H.message||"Leverage changed successfully";Ke.success("Leverage Changed Successfully",{description:Ie})}else H.error&&Ke.error("Leverage Change Failed",{description:H.error,action:yn(H.error||"")});else if(w.current!==0&&(Ke.dismiss(w.current),w.current=0),H.success){const Ie=H.orderId?`Order ID: ${H.orderId}`:H.message||"Order placed successfully";Ke.success("Order Placed Successfully",{description:Ie})}else H.error&&Ke.error("Order Failed",{description:H.error,action:yn(H.error||"")})},[H]),k.jsxs("div",{className:"component",children:[k.jsx("h2",{children:v}),k.jsxs("div",{className:"trade-op-config",children:[k.jsxs("div",{className:"trade-op-badge",children:[k.jsx("span",{className:"trade-op-badge-label",children:j}),k.jsx("span",{className:"trade-op-info-icon",children:"i"})]}),k.jsxs("div",{className:"trade-op-badge",onClick:a,style:{cursor:"pointer"},children:[k.jsxs("span",{className:"trade-op-badge-label",children:[z,"x"]}),k.jsx("span",{className:"trade-op-info-icon",children:"i"})]})]}),k.jsxs("div",{className:"trade-op-order-type-selector",children:[k.jsx("button",{onClick:oe,className:`btn-toggle ${O===mI?"active":""}`,children:"MARKET"}),k.jsx("button",{onClick:ke,className:`btn-toggle ${O===k1?"active":""}`,children:"LIMIT"})]}),O===k1&&k.jsx("div",{className:"trade-op-form-group",children:k.jsxs("div",{className:"trade-op-form-row",children:[k.jsx("label",{htmlFor:"price",className:"trade-op-label",children:"Price:"}),k.jsx("input",{id:"price",type:"number",value:F,onChange:ot,placeholder:Xe,step:Kue,min:j3})]})}),k.jsxs("div",{className:"trade-op-form-group",children:[k.jsxs("div",{className:"trade-op-form-row",style:{marginBottom:"0.5rem"},children:[k.jsx("label",{htmlFor:"size",className:"trade-op-label",children:"Size:"}),k.jsx("span",{className:"trade-op-icon",onClick:l,children:k.jsx("img",{src:"cal.svg"})}),k.jsxs("div",{className:"trade-op-size-controls",children:[k.jsx("input",{id:"size",type:"number",step:"0.000001",value:en?dn:A,onChange:He,onFocus:ht,onBlur:Me,placeholder:"0",min:j3,max:De,className:"trade-op-input"}),k.jsxs("div",{className:"trade-op-size-buttons",children:[k.jsx("button",{onClick:Oe,className:"btn-small",children:""}),k.jsx("button",{onClick:ye,className:"btn-small",children:""})]})]})]}),k.jsx("input",{type:"range",min:q0,max:_1,value:D,onChange:Le,step:S1,style:{width:"100%","--slider-progress":`${(D-q0)/(_1-q0)*100}%`},className:"filled-slider"}),k.jsxs("div",{className:"trade-op-slider-labels",children:[k.jsx("span",{children:"0"}),k.jsx("span",{children:"20"}),k.jsx("span",{children:"40"}),k.jsx("span",{children:"60"}),k.jsx("span",{children:"80"}),k.jsx("span",{children:"100"})]})]}),k.jsxs("div",{className:"trade-op-action-panel",children:[k.jsxs("div",{children:[k.jsx("div",{className:"trade-op-panel-title buy",children:"LONG"}),k.jsxs("div",{className:"trade-op-panel-size",children:[A.toFixed(3),"/100.000"]}),k.jsx("button",{onClick:le,disabled:U||!$||_e<=0,className:"btn-buy",children:U?"PLACING...":"BUY LONG"}),k.jsxs("div",{className:"trade-op-panel-details",children:[k.jsxs("div",{children:["Value ",et.toFixed(2)]}),k.jsxs("div",{children:["Margin ",Ee.toFixed(2)]})]})]}),k.jsxs("div",{children:[k.jsx("div",{className:"trade-op-panel-title sell",children:"SHORT"}),k.jsxs("div",{className:"trade-op-panel-size",children:[A.toFixed(3),"/100.000"]}),k.jsx("button",{onClick:lt,disabled:U||!$||_e<=0,className:"btn-sell",children:U?"PLACING...":"SELL SHORT"}),k.jsxs("div",{className:"trade-op-panel-details",children:[k.jsxs("div",{children:["Value ",et.toFixed(Na)]}),k.jsxs("div",{children:["Margin ",Ee.toFixed(Na)]})]})]})]}),k.jsxs("div",{className:"trade-op-info-panel",children:[k.jsxs("div",{className:"trade-op-info-row",children:[k.jsx("span",{className:"trade-op-info-label",children:"Account Equity:"}),k.jsxs("span",{className:"trade-op-info-value",children:[ct," USDC"]})]}),k.jsxs("div",{className:"trade-op-info-row",children:[k.jsx("span",{className:"trade-op-info-label",children:"Spot:"}),k.jsxs("span",{className:"trade-op-info-value",children:[Ht," USDC"]})]}),k.jsxs("div",{className:"trade-op-info-row",children:[k.jsxs("span",{className:"trade-op-info-label",children:[o||"Bucket",":"]}),k.jsxs("span",{className:"trade-op-info-value",children:[fe," USDC"]})]}),k.jsx("div",{className:"trade-op-info-row",children:k.jsxs("span",{className:"trade-op-info-label",children:["Bucket Overview: ",ve]})}),k.jsxs("div",{className:"trade-op-info-row",children:[k.jsx("span",{className:"trade-op-info-label",children:"Balance:"}),k.jsxs("span",{className:"trade-op-info-value",children:[ae," USDC"]})]}),k.jsxs("div",{className:"trade-op-info-row",children:[k.jsx("span",{className:"trade-op-info-label",children:"Unrealized PNL:"}),k.jsxs("span",{className:"trade-op-info-value",children:[se," USDC"]})]}),k.jsxs("div",{className:"trade-op-info-row",children:[k.jsx("span",{className:"trade-op-info-label",children:"Cross Margin Ratio:"}),k.jsx("span",{className:"trade-op-info-value",children:Pe})]}),k.jsxs("div",{className:"trade-op-info-row",children:[k.jsx("span",{className:"trade-op-info-label",children:"Maintenance Margin:"}),k.jsxs("span",{className:"trade-op-info-value",children:[Ge," USDC"]})]}),k.jsxs("div",{className:"trade-op-info-row",children:[k.jsx("span",{className:"trade-op-info-label",children:"Cross Account Leverage:"}),k.jsx("span",{className:"trade-op-info-value",children:me})]})]})]})});function ufe({baseURL:n=$d,marketId:e=Yue,limit:t=Gue}){const{lastPrice:r,displayPrice:i,recentTrades:s,loading:o,error:a,isConnected:l,priceChange:c}=OV({baseURL:n,marketId:e}),u=I.useRef(null),h=I.useRef(""),d=I.useRef(null),f=I.useCallback(()=>{const C=u.current;if(!C)return;const T=C.parentElement;if(!T)return;const O=C.textContent||"";if(!O)return;const R=window.getComputedStyle(T),D=parseFloat(R.paddingLeft)+parseFloat(R.paddingRight),A=T.clientWidth-D;let F=12,z=48,j=F;const L=document.createElement("div");for(L.style.position="absolute",L.style.visibility="hidden",L.style.whiteSpace="nowrap",L.style.fontFamily=window.getComputedStyle(C).fontFamily,L.style.fontWeight=window.getComputedStyle(C).fontWeight,document.body.appendChild(L);F<=z;){const $=Math.floor((F+z)/2);L.style.fontSize=`${$}px`,L.textContent=O,L.offsetWidth<=A?(j=$,F=$+1):z=$-1}document.body.removeChild(L);const B=parseFloat(window.getComputedStyle(C).fontSize);Math.abs(B-j)>.5&&(C.style.fontSize=`${j}px`)},[]);I.useEffect(()=>{if(i==null)return;const C=hc(i);if(C===h.current)return;h.current=C,d.current!==null&&clearTimeout(d.current),d.current=window.setTimeout(()=>{f()},150);let T;const O=()=>{clearTimeout(T),T=window.setTimeout(()=>{d.current!==null&&clearTimeout(d.current),d.current=window.setTimeout(()=>{f()},150)},100)};return window.addEventListener("resize",O),()=>{d.current!==null&&clearTimeout(d.current),T!==void 0&&clearTimeout(T),window.removeEventListener("resize",O)}},[i,f]);const m=I.useCallback(C=>{if(!C||isNaN(C)||C<=0)return"Invalid";let T=C;T<9466848e5&&(T=T*1e3);const O=new Date(T);return isNaN(O.getTime())?"Invalid":O.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})},[]),g=I.useCallback(C=>C?"#51cf66":"#ff6b6b",[]),v=I.useCallback(C=>C?"BUY":"SELL",[]),y=I.useCallback(C=>C?"":"",[]);if(o)return k.jsx(zd,{message:"Loading trade price..."});if(a)return k.jsx(qd,{error:a});if(i==null)return k.jsx(oa,{message:"No trade data available"});const b=r&&r.isBuyerMaker!==void 0,w=b?g(r.isBuyerMaker):"#888",S=b?v(r.isBuyerMaker):"N/A",_=b?y(r.isBuyerMaker):"",E=c==="up"?"flash-price-up":c==="down"?"flash-price-down":"";return k.jsxs("div",{className:"layout-container trade-price-container",children:[k.jsx(Ud,{title:k.jsx(XO,{isConnected:l}),children:k.jsx("div",{children:"Last Trade Price"})}),k.jsxs("div",{className:`trade-price-main ${E}`,children:[k.jsx("div",{ref:u,className:"trade-price-value",style:{color:w},children:hc(i)}),k.jsxs("div",{className:"trade-price-side",style:{color:w},children:[k.jsx("span",{children:_}),k.jsx("span",{children:S})]})]}),k.jsx("div",{className:"trade-price-trades-table",children:s.length===0?k.jsx("div",{className:"message",children:"No trades available"}):k.jsxs("table",{children:[k.jsx("thead",{children:k.jsxs("tr",{children:[k.jsx("th",{children:"Time"}),k.jsx("th",{className:"right",children:"Size"}),k.jsx("th",{className:"right",children:"Price"})]})}),k.jsx("tbody",{children:s.map((C,T)=>{const O=C.isBuyerMaker?"#51cf66":"#ff6b6b";return k.jsxs("tr",{children:[k.jsx("td",{children:m(C.time)}),k.jsx("td",{className:"right",children:Bde(C.size)}),k.jsx("td",{className:"right price",style:{color:O},children:hc(C.price)})]},`${T}-${C.time}-${C.price}-${C.size}`)})})]})})]})}const hfe=de.memo(ufe),NV=({level:n,index:e,isLast:t,depthPercent:r,formatPrice:i,formatSize:s,onPriceClick:o})=>{const a=n.flash==="up"?"flash-up":n.flash==="down"?"flash-down-ask":"",l=n.isPending?" pending":"",c=()=>{o&&o(n.price)};return k.jsxs("div",{className:`orderbook-level ask${l} ${a}`,style:{borderBottom:t?"none":void 0},children:[k.jsx("div",{className:"orderbook-depth-bar ask",style:{width:`${r}%`}}),k.jsx("div",{className:"orderbook-level-content ask",onClick:c,style:{cursor:o?"pointer":"default"},title:o?"Click to set price":void 0,children:i(n.price)}),k.jsx("div",{className:"orderbook-level-content right",children:s(n.size)}),k.jsx("div",{className:"orderbook-depth-indicator",children:k.jsx("div",{className:"orderbook-depth-line ask"})})]})},AV=({level:n,index:e,isLast:t,depthPercent:r,formatPrice:i,formatSize:s,onPriceClick:o})=>{const a=n.flash==="up"?"flash-up":n.flash==="down"?"flash-down-bid":"",l=n.isPending?" pending":"",c=()=>{o&&o(n.price)};return k.jsxs("div",{className:`orderbook-level bid${l} ${a}`,style:{borderBottom:t?"none":void 0},children:[k.jsx("div",{className:"orderbook-depth-bar bid",style:{width:`${r}%`}}),k.jsx("div",{className:"orderbook-level-content bid",onClick:c,style:{cursor:o?"pointer":"default"},title:o?"Click to set price":void 0,children:i(n.price)}),k.jsx("div",{className:"orderbook-level-content right",children:s(n.size)}),k.jsx("div",{className:"orderbook-depth-indicator",children:k.jsx("div",{className:"orderbook-depth-line bid"})})]})};function dfe({baseURL:n,subscriptionClient:e,marketId:t,maxDepth:r=kV,height:i=SV,onPriceClick:s}){var O,R;const{asks:o,bids:a,spread:l,midPrice:c,loading:u,error:h,isConnected:d,wsError:f}=MV({baseURL:n,subscriptionClient:e,marketId:t,maxDepth:r}),m=I.useRef(null),g=I.useRef(null),v=I.useRef(null),y=I.useRef(0),b=I.useRef(0);I.useEffect(()=>{const D=o.length!==y.current,A=a.length!==b.current;if(!(!D&&!A))return y.current=o.length,b.current=a.length,v.current!==null&&cancelAnimationFrame(v.current),v.current=requestAnimationFrame(()=>{if(m.current&&D){const F=m.current;F.scrollTop=F.scrollHeight}if(g.current&&A){const F=g.current;F.scrollTop=0}v.current=null}),()=>{v.current!==null&&(cancelAnimationFrame(v.current),v.current=null)}},[o.length,a.length]);const w=o.length>0?((O=o[o.length-1])==null?void 0:O.cumulative)??0:0,S=a.length>0?((R=a[a.length-1])==null?void 0:R.cumulative)??0:0,_=I.useMemo(()=>Math.max(w,S),[w,S]),E=Wy,C=Hy,T=I.useCallback(D=>_===0?0:D/_*100,[_]);return u?k.jsx(zd,{message:"Loading orderbook..."}):h?k.jsx(qd,{error:h}):k.jsxs("div",{className:"layout-container",style:{height:i},children:[f&&(o.length>0||a.length>0)&&k.jsxs("div",{className:"orderbook-ws-warning",children:[k.jsx("img",{src:"/caution-icon.svg",alt:"Caution",className:"orderbook-ws-warning-icon"}),k.jsx("span",{className:"orderbook-ws-warning-text",children:f})]}),k.jsx(Ud,{title:k.jsx(XO,{isConnected:d}),children:k.jsxs("div",{children:["Depth: ",r]})}),c&&k.jsxs("div",{className:"orderbook-mid-price",children:[k.jsx("div",{className:"orderbook-mid-price-value",children:E(c)}),l!==void 0&&k.jsxs("div",{className:"orderbook-mid-price-spread",children:["Spread: ",E(l)]})]}),k.jsxs("div",{className:"orderbook-content",children:[k.jsxs("div",{className:"orderbook-section",ref:m,children:[o.map((D,A)=>{const F=w-D.cumulative+D.size,z=T(F);return k.jsx(NV,{level:D,index:A,isLast:A===o.length-1,depthPercent:z,formatPrice:E,formatSize:C,onPriceClick:s},`ask-${D.price}-${A}`)}),o.length===0&&k.jsx(oa,{message:"No ask orders"})]}),k.jsxs("div",{className:"orderbook-section bids",ref:g,children:[a.map((D,A)=>{const F=T(D.cumulative);return k.jsx(AV,{level:D,index:A,isLast:A===a.length-1,depthPercent:F,formatPrice:E,formatSize:C,onPriceClick:s},`bid-${D.price}-${A}`)}),a.length===0&&k.jsx(oa,{message:"No bid orders"})]})]}),k.jsx(LV,{totalBids:S,totalAsks:w})]})}const LV=de.memo(({totalBids:n,totalAsks:e})=>{const t=n+e,r=t>0?`${(n/t*100).toFixed(0)}%`:"0%",i=t>0?`${(e/t*100).toFixed(0)}%`:"0%";return k.jsxs("div",{className:"orderbook-footer",children:[k.jsxs("div",{className:"orderbook-footer-legend",children:[k.jsx("div",{className:"orderbook-footer-bar bid"}),k.jsx("span",{className:"color-text-muted",children:r})]}),k.jsxs("div",{className:"orderbook-footer-legend",children:[k.jsx("div",{className:"orderbook-footer-bar ask"}),k.jsx("span",{className:"color-text-muted",children:i})]})]})});LV.displayName="FooterSummary";de.memo(dfe);function ffe(n,e,t,r){const i=o=>{const a=1-o;return 3*a*a*o*n+3*a*o*o*t+o*o*o},s=o=>{const a=1-o;return 3*a*a*o*e+3*a*o*o*r+o*o*o};return o=>{if(o<=0)return 0;if(o>=1)return 1;let a=0,l=1,c=.5;for(let u=0;u<12;u++){const h=i(c);if(Math.abs(h-o)<1e-4)break;h<o?a=c:l=c,c=(a+l)/2}return s(c)}}function pfe({baseURL:n,subscriptionClient:e,marketId:t,maxDepth:r=kV,height:i=SV,onPriceClick:s,enhancementConfig:o}){var Z,q;const{client:a}=pi(),l=e??a,c=MV({baseURL:n,...l!=null&&{subscriptionClient:l},marketId:t,maxDepth:r}),{asks:u,bids:h,spread:d,loading:f,error:m,isConnected:g,wsError:v}=lde({asks:c.asks,bids:c.bids,spread:c.spread,loading:c.loading,error:c.error,isConnected:c.isConnected,wsError:c.wsError},o??{enabled:!1},r),y=I.useRef(null),b=I.useRef(null),w=I.useRef(null),S=I.useRef(null),_=I.useRef(!1),E=I.useRef(null),C=I.useRef(null),T=I.useRef(!1),O=I.useRef(0),R=u.length>0?((Z=u[u.length-1])==null?void 0:Z.cumulative)??0:0,D=h.length>0?((q=h[h.length-1])==null?void 0:q.cumulative)??0:0,A=I.useMemo(()=>Math.max(R,D),[R,D]),F=Wy,z=Hy,j=I.useCallback(X=>A===0?0:X/A*100,[A]),L=I.useCallback((X,G,ne)=>{if(_.current)return;_.current=!0;const te=ne,be=G-te,Y=300,ee=performance.now(),pe=ee+Y,ge=ffe(.57,.4,.55,1.17),qe=De=>{if(De>=pe){X.scrollTop=Math.max(0,G),_.current=!1,O.current=performance.now(),S.current&&(cancelAnimationFrame(S.current),S.current=null);return}const _e=De-ee,Ae=Math.min(_e/Y,1),et=ge(Ae),Ee=te+be*et;X.scrollTop=Math.max(0,Ee),S.current=requestAnimationFrame(qe)};S.current=requestAnimationFrame(qe)},[]),B=I.useCallback((X=0)=>{if(_.current||performance.now()-O.current<500||!y.current||!b.current)return;const te=y.current,Y=b.current.clientHeight;if(Y===0)return;const ee=Y/2,pe=20.83333;if(u.length*pe<=ee||d<=0||u.length===0||h.length===0)return;if(!w.current){if(X<3){C.current&&clearTimeout(C.current);const Ue=50*(X+1);C.current=window.setTimeout(()=>{C.current=null,B(X+1)},Ue)}return}const qe=w.current,De=qe.offsetTop,_e=qe.offsetHeight;if(_e===0){if(X<3){C.current&&clearTimeout(C.current);const Ue=50*(X+1);C.current=window.setTimeout(()=>{C.current=null,B(X+1)},Ue)}return}const Ae=De+_e/2,et=Y/2,Ee=Ae-et-pe,Re=te.scrollTop;Math.abs(Ee-Re)>1&&L(te,Math.max(0,Ee),Re)},[u.length,d,L]);I.useEffect(()=>{const X=()=>{T.current&&(T.current=!1,B())};return window.addEventListener("mouseup",X),()=>{window.removeEventListener("mouseup",X)}},[B]),I.useEffect(()=>{if(!y.current||!b.current)return;const X=requestAnimationFrame(()=>{requestAnimationFrame(()=>{B()})});return()=>{cancelAnimationFrame(X),S.current&&(cancelAnimationFrame(S.current),S.current=null),E.current&&(clearTimeout(E.current),E.current=null),C.current&&(clearTimeout(C.current),C.current=null),_.current=!1}},[u.length,h.length,d,A,B]);const $=I.useCallback(()=>{_.current&&S.current&&(cancelAnimationFrame(S.current),S.current=null,_.current=!1),E.current&&(clearTimeout(E.current),E.current=null)},[]),U=I.useCallback(X=>{const G=X.currentTarget,ne=G.offsetWidth-G.clientWidth;if(ne>0){const te=G.getBoundingClientRect();X.clientX-te.left>G.clientWidth-ne-5&&(T.current=!0,$())}},[$]),H=I.useCallback(()=>{T.current&&$()},[$]),K=I.useCallback(()=>{T.current&&(T.current=!1,B())},[B]),J=I.useCallback(()=>{$(),E.current&&clearTimeout(E.current),T.current||(E.current=window.setTimeout(()=>{E.current=null,B()},150))},[B,$]);return f?k.jsx(zd,{message:"Loading orderbook..."}):m?k.jsx(qd,{error:m}):k.jsxs("div",{className:"layout-container",style:{height:i},children:[v&&(u.length>0||h.length>0)&&k.jsxs("div",{className:"orderbook-ws-warning",children:[k.jsx("img",{src:"/caution-icon.svg",alt:"Caution",className:"orderbook-ws-warning-icon"}),k.jsx("span",{className:"orderbook-ws-warning-text",children:v})]}),k.jsx(Ud,{title:k.jsx(XO,{isConnected:g??!1}),children:k.jsxs("div",{children:["Depth: ",r]})}),k.jsx("div",{className:"orderbook-content",ref:b,children:k.jsxs("div",{className:"orderbook-section",ref:y,onScroll:J,onMouseDown:U,onMouseMove:H,onMouseUp:K,onMouseLeave:K,children:[u.map((X,G)=>{const ne=R-X.cumulative+X.size,te=j(ne);return k.jsx(NV,{level:X,index:G,isLast:G===u.length-1&&h.length===0,depthPercent:te,formatPrice:F,formatSize:z,onPriceClick:s},`ask-${X.price}-${G}`)}),d>0&&u.length>0&&h.length>0&&k.jsxs("div",{className:"orderbook-mid-price-spread",ref:w,children:["Spread: ",F(d)]}),h.map((X,G)=>{const ne=j(X.cumulative);return k.jsx(AV,{level:X,index:G,isLast:G===h.length-1,depthPercent:ne,formatPrice:F,formatSize:z,onPriceClick:s},`bid-${X.price}-${G}`)}),u.length===0&&h.length===0&&k.jsx(oa,{message:"No orders"}),u.length===0&&h.length>0&&k.jsx(oa,{message:"No ask orders"}),h.length===0&&u.length>0&&k.jsx(oa,{message:"No bid orders"})]})}),k.jsx(FV,{totalBids:D,totalAsks:R})]})}const FV=de.memo(({totalBids:n,totalAsks:e})=>{const t=n+e,r=t>0?`${(n/t*100).toFixed(0)}%`:"0%",i=t>0?`${(e/t*100).toFixed(0)}%`:"0%";return k.jsxs("div",{className:"orderbook-footer",children:[k.jsxs("div",{className:"orderbook-footer-legend",children:[k.jsx("div",{className:"orderbook-footer-bar bid"}),k.jsx("span",{className:"color-text-muted",children:r})]}),k.jsxs("div",{className:"orderbook-footer-legend",children:[k.jsx("div",{className:"orderbook-footer-bar ask"}),k.jsx("span",{className:"color-text-muted",children:i})]})]})});FV.displayName="FooterSummary";const mfe=de.memo(pfe);function Wd(n){const{margin:e,containerPadding:t,containerWidth:r,cols:i}=n;return(r-e[0]*(i-1)-t[0]*2)/i}function dd(n,e,t){return Number.isFinite(n)?Math.round(e*n+Math.max(0,n-1)*t):n}function Of(n,e,t,r,i,s,o){const{margin:a,containerPadding:l,rowHeight:c}=n,u=Wd(n);let h,d,f,m;if(o?(h=Math.round(o.width),d=Math.round(o.height)):(h=dd(r,u,a[0]),d=dd(i,c,a[1])),s?(f=Math.round(s.top),m=Math.round(s.left)):o?(f=Math.round(o.top),m=Math.round(o.left)):(f=Math.round((c+a[1])*t+l[1]),m=Math.round((u+a[0])*e+l[0])),!s&&!o){if(Number.isFinite(r)){const v=Math.round((u+a[0])*(e+r)+l[0])-m-h;v!==a[0]&&(h+=v-a[0])}if(Number.isFinite(i)){const v=Math.round((c+a[1])*(t+i)+l[1])-f-d;v!==a[1]&&(d+=v-a[1])}}return{top:f,left:m,width:h,height:d}}function gfe(n,e,t,r,i){const{margin:s,containerPadding:o,cols:a,rowHeight:l,maxRows:c}=n,u=Wd(n);let h=Math.round((t-o[0])/(u+s[0])),d=Math.round((e-o[1])/(l+s[1]));return h=Yy(h,0,a-r),d=Yy(d,0,c-i),{x:h,y:d}}function G0(n,e,t){const{margin:r,containerPadding:i,rowHeight:s}=n,o=Wd(n),a=Math.round((t-i[0])/(o+r[0])),l=Math.round((e-i[1])/(s+r[1]));return{x:a,y:l}}function vfe(n,e,t){const{margin:r,rowHeight:i}=n,s=Wd(n),o=Math.max(1,Math.round((e+r[0])/(s+r[0]))),a=Math.max(1,Math.round((t+r[1])/(i+r[1])));return{w:o,h:a}}function Yy(n,e,t){return Math.max(Math.min(n,t),e)}function JO(n,e){return!(n.i===e.i||n.x+n.w<=e.x||n.x>=e.x+e.w||n.y+n.h<=e.y||n.y>=e.y+e.h)}function Oc(n,e){for(let t=0;t<n.length;t++){const r=n[t];if(r!==void 0&&JO(r,e))return r}}function jV(n,e){return n.filter(t=>JO(t,e))}function yfe(n,e){return e==="horizontal"?$V(n):e==="vertical"||e==="wrap"?bI(n):[...n]}function bI(n){return[...n].sort((e,t)=>e.y!==t.y?e.y-t.y:e.x-t.x)}function $V(n){return[...n].sort((e,t)=>e.x!==t.x?e.x-t.x:e.y-t.y)}function lx(n){let e=0;for(let t=0;t<n.length;t++){const r=n[t];if(r!==void 0){const i=r.y+r.h;i>e&&(e=i)}}return e}function Zl(n,e){for(let t=0;t<n.length;t++){const r=n[t];if(r!==void 0&&r.i===e)return r}}function cx(n){return n.filter(e=>e.static===!0)}function Gc(n){return{i:n.i,x:n.x,y:n.y,w:n.w,h:n.h,minW:n.minW,maxW:n.maxW,minH:n.minH,maxH:n.maxH,moved:!!n.moved,static:!!n.static,isDraggable:n.isDraggable,isResizable:n.isResizable,resizeHandles:n.resizeHandles,constraints:n.constraints,isBounded:n.isBounded}}function Ml(n){const e=new Array(n.length);for(let t=0;t<n.length;t++){const r=n[t];r!==void 0&&(e[t]=Gc(r))}return e}function bfe(n,e){const t=new Array(n.length);for(let r=0;r<n.length;r++){const i=n[r];i!==void 0&&(e.i===i.i?t[r]=e:t[r]=i)}return t}function xfe(n,e,t){let r=Zl(n,e);return r?(r=t(Gc(r)),[bfe(n,r),r]):[[...n],null]}function ZO(n,e){const t=cx(n);for(let r=0;r<n.length;r++){const i=n[r];if(i!==void 0)if(i.x+i.w>e.cols&&(i.x=e.cols-i.w),i.x<0&&(i.x=0,i.w=e.cols),!i.static)t.push(i);else for(;Oc(t,i);)i.y++}return n}function dc(n,e,t,r,i,s,o,a,l){if(e.static&&e.isDraggable!==!0)return[...n];if(e.y===r&&e.x===t)return[...n];const c=e.x,u=e.y;typeof t=="number"&&(e.x=t),typeof r=="number"&&(e.y=r),e.moved=!0;let h=yfe(n,o);(o==="vertical"&&typeof r=="number"?u>=r:o==="horizontal"&&typeof t=="number"?c>=t:!1)&&(h=h.reverse());const f=jV(h,e),m=f.length>0;if(m&&l)return Ml(n);if(m&&s)return e.x=c,e.y=u,e.moved=!1,n;let g=[...n];for(let v=0;v<f.length;v++){const y=f[v];y!==void 0&&(y.moved||(y.static?g=b5(g,y,e,i,o):g=b5(g,e,y,i,o)))}return g}function b5(n,e,t,r,i,s){const o=i==="horizontal",a=i==="vertical",l=e.static;if(r){r=!1;const h={x:o?Math.max(e.x-t.w,0):t.x,y:a?Math.max(e.y-t.h,0):t.y,w:t.w,h:t.h,i:"-1"},d=Oc(n,h),f=d!==void 0&&d.y+d.h>e.y,m=d!==void 0&&e.x+e.w>d.x;if(!d)return dc(n,t,o?h.x:void 0,a?h.y:void 0,r,l,i);if(f&&a)return dc(n,t,void 0,t.y+1,r,l,i);if(f&&i===null)return e.y=t.y,t.y=t.y+t.h,[...n];if(m&&o)return dc(n,e,t.x,void 0,r,l,i)}const c=o?t.x+1:void 0,u=a?t.y+1:void 0;return c===void 0&&u===void 0?[...n]:dc(n,t,c,u,r,l,i)}function nh(n,e,t){return Math.max(e,Math.min(t,n))}var wfe={name:"gridBounds",constrainPosition(n,e,t,{cols:r,maxRows:i}){return{x:nh(e,0,Math.max(0,r-n.w)),y:nh(t,0,Math.max(0,i-n.h))}},constrainSize(n,e,t,r,{cols:i,maxRows:s}){const o=r==="w"||r==="nw"||r==="sw"?n.x+n.w:i-n.x,a=r==="n"||r==="nw"||r==="ne"?n.y+n.h:s-n.y;return{w:nh(e,1,Math.max(1,o)),h:nh(t,1,Math.max(1,a))}}},_fe={name:"minMaxSize",constrainSize(n,e,t){return{w:nh(e,n.minW??1,n.maxW??1/0),h:nh(t,n.minH??1,n.maxH??1/0)}}},BV=[wfe,_fe];function V0(n,e,t,r,i){let s={x:t,y:r};for(const o of n)o.constrainPosition&&(s=o.constrainPosition(e,s.x,s.y,i));if(e.constraints)for(const o of e.constraints)o.constrainPosition&&(s=o.constrainPosition(e,s.x,s.y,i));return s}function Sfe(n,e,t,r,i,s){let o={w:t,h:r};for(const a of n)a.constrainSize&&(o=a.constrainSize(e,o.w,o.h,i,s));if(e.constraints)for(const a of e.constraints)a.constrainSize&&(o=a.constrainSize(e,o.w,o.h,i,s));return o}function eR({top:n,left:e,width:t,height:r}){const i=`translate(${e}px,${n}px)`;return{transform:i,WebkitTransform:i,MozTransform:i,msTransform:i,OTransform:i,width:`${t}px`,height:`${r}px`,position:"absolute"}}function zV({top:n,left:e,width:t,height:r}){return{top:`${n}px`,left:`${e}px`,width:`${t}px`,height:`${r}px`,position:"absolute"}}function x5(n){return n*100+"%"}function kfe(n,e,t,r){return n+t>r?e:t}function qV(n,e,t){return n<0?e:t}function Cfe(n){return Math.max(0,n)}function Gy(n){return Math.max(0,n)}var tR=(n,e,t)=>{const{left:r,height:i,width:s}=e,o=n.top-(i-n.height);return{left:r,width:s,height:qV(o,n.height,i),top:Gy(o)}},nR=(n,e,t)=>{const{top:r,left:i,height:s,width:o}=e;return{top:r,height:s,width:kfe(n.left,n.width,o,t),left:Cfe(i)}},rR=(n,e,t)=>{const{top:r,height:i,width:s}=e,o=n.left+n.width-s;return o<0?{height:i,width:n.left+n.width,top:Gy(r),left:0}:{height:i,width:s,top:Gy(r),left:o}},iR=(n,e,t)=>{const{top:r,left:i,height:s,width:o}=e;return{width:o,left:i,height:qV(r,n.height,s),top:Gy(r)}},Efe=(n,e,t)=>tR(n,nR(n,e,t)),Tfe=(n,e,t)=>tR(n,rR(n,e)),Mfe=(n,e,t)=>iR(n,nR(n,e,t)),Ife=(n,e,t)=>iR(n,rR(n,e)),Pfe={n:tR,ne:Efe,e:nR,se:Mfe,s:iR,sw:Ife,w:rR,nw:Tfe};function Ofe(n,e,t,r){const i=Pfe[n];return i?i(e,{...e,...t},r):t}var UV={type:"transform",scale:1,calcStyle(n){return eR(n)}},Rfe={type:"absolute",scale:1,calcStyle(n){return zV(n)}};function Dfe(n){return{type:"transform",scale:n,calcStyle(e){return eR(e)},calcDragPosition(e,t,r,i){return{left:(e-r)/n,top:(t-i)/n}}}}var Nfe=UV,Afe={cols:12,rowHeight:150,margin:[10,10],containerPadding:null,maxRows:1/0},Lfe={enabled:!0,bounded:!1,threshold:3},Ffe={enabled:!0,handles:["se"]},jfe={enabled:!1,defaultItem:{w:1,h:1}};function sR(n,e,t,r,i){const s=r==="x"?"w":"h";e[r]+=1;const o=n.findIndex(l=>l.i===e.i),a=i??cx(n).length>0;for(let l=o+1;l<n.length;l++){const c=n[l];if(c!==void 0&&!c.static){if(!a&&c.y>e.y+e.h)break;JO(e,c)&&sR(n,c,t+e[s],r,a)}}e[r]=t}function $fe(n,e,t,r){for(e.x=Math.max(e.x,0),e.y=Math.max(e.y,0),e.y=Math.min(r,e.y);e.y>0&&!Oc(n,e);)e.y--;let i;for(;(i=Oc(n,e))!==void 0;)sR(t,e,i.y+i.h,"y");return e.y=Math.max(e.y,0),e}function Bfe(n,e,t,r){for(e.x=Math.max(e.x,0),e.y=Math.max(e.y,0);e.x>0&&!Oc(n,e);)e.x--;let i;for(;(i=Oc(n,e))!==void 0;)if(sR(r,e,i.x+i.w,"x"),e.x+e.w>t)for(e.x=t-e.w,e.y++;e.x>0&&!Oc(n,e);)e.x--;return e.x=Math.max(e.x,0),e}var WV={type:"vertical",allowOverlap:!1,compact(n,e){const t=cx(n);let r=lx(t);const i=bI(n),s=new Array(n.length);for(let o=0;o<i.length;o++){const a=i[o];if(a===void 0)continue;let l=Gc(a);l.static||(l=$fe(t,l,i,r),r=Math.max(r,l.y+l.h),t.push(l));const c=n.indexOf(a);s[c]=l,l.moved=!1}return s}},HV={type:"horizontal",allowOverlap:!1,compact(n,e){const t=cx(n),r=$V(n),i=new Array(n.length);for(let s=0;s<r.length;s++){const o=r[s];if(o===void 0)continue;let a=Gc(o);a.static||(a=Bfe(t,a,e,r),t.push(a));const l=n.indexOf(o);i[l]=a,a.moved=!1}return i}},YV={type:null,allowOverlap:!1,compact(n,e){return Ml(n)}},zfe={...WV,allowOverlap:!0,compact(n,e){return Ml(n)}},qfe={...HV,allowOverlap:!0,compact(n,e){return Ml(n)}},Ufe={...YV,allowOverlap:!0};function ux(n,e=!1,t=!1){let r;return e?n==="vertical"?r=zfe:n==="horizontal"?r=qfe:r=Ufe:n==="vertical"?r=WV:n==="horizontal"?r=HV:r=YV,t?{...r,preventCollision:t}:r}function GV(n){return Object.keys(n).sort((t,r)=>n[t]-n[r])}function w5(n,e){const t=GV(n);let r=t[0];if(r===void 0)throw new Error("No breakpoints defined");for(let i=1;i<t.length;i++){const s=t[i];if(s===void 0)continue;const o=n[s];e>o&&(r=s)}return r}function _5(n,e){const t=e[n];if(t===void 0)throw new Error(`ResponsiveReactGridLayout: \`cols\` entry for breakpoint ${String(n)} is missing!`);return t}function j1(n,e,t,r,i,s){const o=n[t];if(o)return Ml(o);let a=n[r];const l=GV(e),c=l.slice(l.indexOf(t));for(let f=0;f<c.length;f++){const m=c[f];if(m===void 0)continue;const g=n[m];if(g){a=g;break}}const u=Ml(a||[]),h=ZO(u,{cols:i});return(typeof s=="object"&&s!==null?s:ux(s)).compact(h,i)}function K0(n,e){if(Array.isArray(n))return n;const t=n,r=t[e];if(r!==void 0)return r;const i=Object.keys(t);for(const s of i){const o=t[s];if(o!==void 0)return o}return[10,10]}var hx={exports:{}},VV={},KV={exports:{}},Wfe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Hfe=Wfe,Yfe=Hfe;function XV(){}function QV(){}QV.resetWarningCache=XV;var Gfe=function(){function n(r,i,s,o,a,l){if(l!==Yfe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:QV,resetWarningCache:XV};return t.PropTypes=t,t};KV.exports=Gfe();var dx=KV.exports;function JV(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=JV(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Pm(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=JV(n))&&(r&&(r+=" "),r+=e);return r}const Vfe=Object.freeze(Object.defineProperty({__proto__:null,clsx:Pm,default:Pm},Symbol.toStringTag,{value:"Module"})),Kfe=_ne(Vfe);var An={},_o={};Object.defineProperty(_o,"__esModule",{value:!0});_o.dontSetMe=epe;_o.findInArray=Xfe;_o.int=Zfe;_o.isFunction=Qfe;_o.isNum=Jfe;function Xfe(n,e){for(let t=0,r=n.length;t<r;t++)if(e.apply(e,[n[t],t,n]))return n[t]}function Qfe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Function]"}function Jfe(n){return typeof n=="number"&&!isNaN(n)}function Zfe(n){return parseInt(n,10)}function epe(n,e,t){if(n[e])return new Error(`Invalid prop ${e} passed to ${t} - do not set this, set it on the child.`)}var hu={};Object.defineProperty(hu,"__esModule",{value:!0});hu.browserPrefixToKey=eK;hu.browserPrefixToStyle=tpe;hu.default=void 0;hu.getPrefix=ZV;const $1=["Moz","Webkit","O","ms"];function ZV(){var t,r;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(r=(t=window.document)==null?void 0:t.documentElement)==null?void 0:r.style;if(!e||n in e)return"";for(let i=0;i<$1.length;i++)if(eK(n,$1[i])in e)return $1[i];return""}function eK(n,e){return e?`${e}${npe(n)}`:n}function tpe(n,e){return e?`-${e.toLowerCase()}-${n}`:n}function npe(n){let e="",t=!0;for(let r=0;r<n.length;r++)t?(e+=n[r].toUpperCase(),t=!1):n[r]==="-"?t=!0:e+=n[r];return e}hu.default=ZV();Object.defineProperty(An,"__esModule",{value:!0});An.addClassName=rK;An.addEvent=ipe;An.addUserSelectStyles=mpe;An.createCSSTransform=hpe;An.createSVGTransform=dpe;An.getTouch=fpe;An.getTouchIdentifier=ppe;An.getTranslation=oR;An.innerHeight=lpe;An.innerWidth=cpe;An.matchesSelector=nK;An.matchesSelectorAndParentsTo=rpe;An.offsetXYFromParent=upe;An.outerHeight=ope;An.outerWidth=ape;An.removeClassName=iK;An.removeEvent=spe;An.scheduleRemoveUserSelectStyles=gpe;var Ni=_o,S5=tK(hu);function tK(n,e){if(typeof WeakMap=="function")var t=new WeakMap,r=new WeakMap;return(tK=function(i,s){if(!s&&i&&i.__esModule)return i;var o,a,l={__proto__:null,default:i};if(i===null||typeof i!="object"&&typeof i!="function")return l;if(o=s?r:t){if(o.has(i))return o.get(i);o.set(i,l)}for(const c in i)c!=="default"&&{}.hasOwnProperty.call(i,c)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(i,c))&&(a.get||a.set)?o(l,c,a):l[c]=i[c]);return l})(n,e)}let X0="";function nK(n,e){return X0||(X0=(0,Ni.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(t){return(0,Ni.isFunction)(n[t])})),(0,Ni.isFunction)(n[X0])?n[X0](e):!1}function rpe(n,e,t){let r=n;do{if(nK(r,e))return!0;if(r===t)return!1;r=r.parentNode}while(r);return!1}function ipe(n,e,t,r){if(!n)return;const i={capture:!0,...r};n.addEventListener?n.addEventListener(e,t,i):n.attachEvent?n.attachEvent("on"+e,t):n["on"+e]=t}function spe(n,e,t,r){if(!n)return;const i={capture:!0,...r};n.removeEventListener?n.removeEventListener(e,t,i):n.detachEvent?n.detachEvent("on"+e,t):n["on"+e]=null}function ope(n){let e=n.clientHeight;const t=n.ownerDocument.defaultView.getComputedStyle(n);return e+=(0,Ni.int)(t.borderTopWidth),e+=(0,Ni.int)(t.borderBottomWidth),e}function ape(n){let e=n.clientWidth;const t=n.ownerDocument.defaultView.getComputedStyle(n);return e+=(0,Ni.int)(t.borderLeftWidth),e+=(0,Ni.int)(t.borderRightWidth),e}function lpe(n){let e=n.clientHeight;const t=n.ownerDocument.defaultView.getComputedStyle(n);return e-=(0,Ni.int)(t.paddingTop),e-=(0,Ni.int)(t.paddingBottom),e}function cpe(n){let e=n.clientWidth;const t=n.ownerDocument.defaultView.getComputedStyle(n);return e-=(0,Ni.int)(t.paddingLeft),e-=(0,Ni.int)(t.paddingRight),e}function upe(n,e,t){const i=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),s=(n.clientX+e.scrollLeft-i.left)/t,o=(n.clientY+e.scrollTop-i.top)/t;return{x:s,y:o}}function hpe(n,e){const t=oR(n,e,"px");return{[(0,S5.browserPrefixToKey)("transform",S5.default)]:t}}function dpe(n,e){return oR(n,e,"")}function oR(n,e,t){let{x:r,y:i}=n,s=`translate(${r}${t},${i}${t})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+t}`,a=`${typeof e.y=="string"?e.y:e.y+t}`;s=`translate(${o}, ${a})`+s}return s}function fpe(n,e){return n.targetTouches&&(0,Ni.findInArray)(n.targetTouches,t=>e===t.identifier)||n.changedTouches&&(0,Ni.findInArray)(n.changedTouches,t=>e===t.identifier)}function ppe(n){if(n.targetTouches&&n.targetTouches[0])return n.targetTouches[0].identifier;if(n.changedTouches&&n.changedTouches[0])return n.changedTouches[0].identifier}function mpe(n){if(!n)return;let e=n.getElementById("react-draggable-style-el");e||(e=n.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,n.getElementsByTagName("head")[0].appendChild(e)),n.body&&rK(n.body,"react-draggable-transparent-selection")}function gpe(n){window.requestAnimationFrame?window.requestAnimationFrame(()=>{k5(n)}):k5(n)}function k5(n){if(n)try{if(n.body&&iK(n.body,"react-draggable-transparent-selection"),n.selection)n.selection.empty();else{const e=(n.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function rK(n,e){n.classList?n.classList.add(e):n.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(n.className+=` ${e}`)}function iK(n,e){n.classList?n.classList.remove(e):n.className=n.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var So={};Object.defineProperty(So,"__esModule",{value:!0});So.canDragX=bpe;So.canDragY=xpe;So.createCoreData=_pe;So.createDraggableData=Spe;So.getBoundPosition=vpe;So.getControlPosition=wpe;So.snapToGrid=ype;var _i=_o,rh=An;function vpe(n,e,t){if(!n.props.bounds)return[e,t];let{bounds:r}=n.props;r=typeof r=="string"?r:kpe(r);const i=aR(n);if(typeof r=="string"){const{ownerDocument:s}=i,o=s.defaultView;let a;if(r==="parent"?a=i.parentNode:a=i.getRootNode().querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const l=a,c=o.getComputedStyle(i),u=o.getComputedStyle(l);r={left:-i.offsetLeft+(0,_i.int)(u.paddingLeft)+(0,_i.int)(c.marginLeft),top:-i.offsetTop+(0,_i.int)(u.paddingTop)+(0,_i.int)(c.marginTop),right:(0,rh.innerWidth)(l)-(0,rh.outerWidth)(i)-i.offsetLeft+(0,_i.int)(u.paddingRight)-(0,_i.int)(c.marginRight),bottom:(0,rh.innerHeight)(l)-(0,rh.outerHeight)(i)-i.offsetTop+(0,_i.int)(u.paddingBottom)-(0,_i.int)(c.marginBottom)}}return(0,_i.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,_i.isNum)(r.bottom)&&(t=Math.min(t,r.bottom)),(0,_i.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,_i.isNum)(r.top)&&(t=Math.max(t,r.top)),[e,t]}function ype(n,e,t){const r=Math.round(e/n[0])*n[0],i=Math.round(t/n[1])*n[1];return[r,i]}function bpe(n){return n.props.axis==="both"||n.props.axis==="x"}function xpe(n){return n.props.axis==="both"||n.props.axis==="y"}function wpe(n,e,t){const r=typeof e=="number"?(0,rh.getTouch)(n,e):null;if(typeof e=="number"&&!r)return null;const i=aR(t),s=t.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,rh.offsetXYFromParent)(r||n,s,t.props.scale)}function _pe(n,e,t){const r=!(0,_i.isNum)(n.lastX),i=aR(n);return r?{node:i,deltaX:0,deltaY:0,lastX:e,lastY:t,x:e,y:t}:{node:i,deltaX:e-n.lastX,deltaY:t-n.lastY,lastX:n.lastX,lastY:n.lastY,x:e,y:t}}function Spe(n,e){const t=n.props.scale;return{node:e.node,x:n.state.x+e.deltaX/t,y:n.state.y+e.deltaY/t,deltaX:e.deltaX/t,deltaY:e.deltaY/t,lastX:n.state.x,lastY:n.state.y}}function kpe(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom}}function aR(n){const e=n.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var fx={},px={};Object.defineProperty(px,"__esModule",{value:!0});px.default=Cpe;function Cpe(){}Object.defineProperty(fx,"__esModule",{value:!0});fx.default=void 0;var B1=sK(I),jr=lR(dx),Epe=lR(Bs),Or=An,La=So,z1=_o,Rf=lR(px);function lR(n){return n&&n.__esModule?n:{default:n}}function sK(n,e){if(typeof WeakMap=="function")var t=new WeakMap,r=new WeakMap;return(sK=function(i,s){if(!s&&i&&i.__esModule)return i;var o,a,l={__proto__:null,default:i};if(i===null||typeof i!="object"&&typeof i!="function")return l;if(o=s?r:t){if(o.has(i))return o.get(i);o.set(i,l)}for(const c in i)c!=="default"&&{}.hasOwnProperty.call(i,c)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(i,c))&&(a.get||a.set)?o(l,c,a):l[c]=i[c]);return l})(n,e)}function $r(n,e,t){return(e=Tpe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Tpe(n){var e=Mpe(n,"string");return typeof e=="symbol"?e:e+""}function Mpe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const xs={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Fa=xs.mouse,mx=class extends B1.Component{constructor(){super(...arguments),$r(this,"dragging",!1),$r(this,"lastX",NaN),$r(this,"lastY",NaN),$r(this,"touchIdentifier",null),$r(this,"mounted",!1),$r(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=t;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,Or.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,Or.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const i=(0,Or.getTouchIdentifier)(e);this.touchIdentifier=i;const s=(0,La.getControlPosition)(e,i,this);if(s==null)return;const{x:o,y:a}=s,l=(0,La.createCoreData)(this,o,a);(0,Rf.default)("DraggableCore: handleDragStart: %j",l),(0,Rf.default)("calling",this.props.onStart),!(this.props.onStart(e,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Or.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,Or.addEvent)(r,Fa.move,this.handleDrag),(0,Or.addEvent)(r,Fa.stop,this.handleDragStop))}),$r(this,"handleDrag",e=>{const t=(0,La.getControlPosition)(e,this.touchIdentifier,this);if(t==null)return;let{x:r,y:i}=t;if(Array.isArray(this.props.grid)){let a=r-this.lastX,l=i-this.lastY;if([a,l]=(0,La.snapToGrid)(this.props.grid,a,l),!a&&!l)return;r=this.lastX+a,i=this.lastY+l}const s=(0,La.createCoreData)(this,r,i);if((0,Rf.default)("DraggableCore: handleDrag: %j",s),this.props.onDrag(e,s)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=r,this.lastY=i}),$r(this,"handleDragStop",e=>{if(!this.dragging)return;const t=(0,La.getControlPosition)(e,this.touchIdentifier,this);if(t==null)return;let{x:r,y:i}=t;if(Array.isArray(this.props.grid)){let l=r-this.lastX||0,c=i-this.lastY||0;[l,c]=(0,La.snapToGrid)(this.props.grid,l,c),r=this.lastX+l,i=this.lastY+c}const s=(0,La.createCoreData)(this,r,i);if(this.props.onStop(e,s)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,Or.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,Rf.default)("DraggableCore: handleDragStop: %j",s),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,Rf.default)("DraggableCore: Removing handlers"),(0,Or.removeEvent)(a.ownerDocument,Fa.move,this.handleDrag),(0,Or.removeEvent)(a.ownerDocument,Fa.stop,this.handleDragStop))}),$r(this,"onMouseDown",e=>(Fa=xs.mouse,this.handleDragStart(e))),$r(this,"onMouseUp",e=>(Fa=xs.mouse,this.handleDragStop(e))),$r(this,"onTouchStart",e=>(Fa=xs.touch,this.handleDragStart(e))),$r(this,"onTouchEnd",e=>(Fa=xs.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,Or.addEvent)(e,xs.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:t}=e;(0,Or.removeEvent)(t,xs.mouse.move,this.handleDrag),(0,Or.removeEvent)(t,xs.touch.move,this.handleDrag),(0,Or.removeEvent)(t,xs.mouse.stop,this.handleDragStop),(0,Or.removeEvent)(t,xs.touch.stop,this.handleDragStop),(0,Or.removeEvent)(e,xs.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Or.scheduleRemoveUserSelectStyles)(t)}}findDOMNode(){var e,t,r;return(e=this.props)!=null&&e.nodeRef?(r=(t=this.props)==null?void 0:t.nodeRef)==null?void 0:r.current:Epe.default.findDOMNode(this)}render(){return B1.cloneElement(B1.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};fx.default=mx;$r(mx,"displayName","DraggableCore");$r(mx,"propTypes",{allowAnyClick:jr.default.bool,allowMobileScroll:jr.default.bool,children:jr.default.node.isRequired,disabled:jr.default.bool,enableUserSelectHack:jr.default.bool,offsetParent:function(n,e){if(n[e]&&n[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:jr.default.arrayOf(jr.default.number),handle:jr.default.string,cancel:jr.default.string,nodeRef:jr.default.object,onStart:jr.default.func,onDrag:jr.default.func,onStop:jr.default.func,onMouseDown:jr.default.func,scale:jr.default.number,className:z1.dontSetMe,style:z1.dontSetMe,transform:z1.dontSetMe});$r(mx,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),n.default=void 0;var e=h(I),t=u(dx),r=u(Bs),i=Kfe,s=An,o=So,a=_o,l=u(fx),c=u(px);function u(y){return y&&y.__esModule?y:{default:y}}function h(y,b){if(typeof WeakMap=="function")var w=new WeakMap,S=new WeakMap;return(h=function(_,E){if(!E&&_&&_.__esModule)return _;var C,T,O={__proto__:null,default:_};if(_===null||typeof _!="object"&&typeof _!="function")return O;if(C=E?S:w){if(C.has(_))return C.get(_);C.set(_,O)}for(const R in _)R!=="default"&&{}.hasOwnProperty.call(_,R)&&((T=(C=Object.defineProperty)&&Object.getOwnPropertyDescriptor(_,R))&&(T.get||T.set)?C(O,R,T):O[R]=_[R]);return O})(y,b)}function d(){return d=Object.assign?Object.assign.bind():function(y){for(var b=1;b<arguments.length;b++){var w=arguments[b];for(var S in w)({}).hasOwnProperty.call(w,S)&&(y[S]=w[S])}return y},d.apply(null,arguments)}function f(y,b,w){return(b=m(b))in y?Object.defineProperty(y,b,{value:w,enumerable:!0,configurable:!0,writable:!0}):y[b]=w,y}function m(y){var b=g(y,"string");return typeof b=="symbol"?b:b+""}function g(y,b){if(typeof y!="object"||!y)return y;var w=y[Symbol.toPrimitive];if(w!==void 0){var S=w.call(y,b);if(typeof S!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(y)}class v extends e.Component{static getDerivedStateFromProps(b,w){let{position:S}=b,{prevPropsPosition:_}=w;return S&&(!_||S.x!==_.x||S.y!==_.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:S,prevPropsPosition:_}),{x:S.x,y:S.y,prevPropsPosition:{...S}}):null}constructor(b){super(b),f(this,"onDragStart",(w,S)=>{if((0,c.default)("Draggable: onDragStart: %j",S),this.props.onStart(w,(0,o.createDraggableData)(this,S))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),f(this,"onDrag",(w,S)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",S);const _=(0,o.createDraggableData)(this,S),E={x:_.x,y:_.y,slackX:0,slackY:0};if(this.props.bounds){const{x:T,y:O}=E;E.x+=this.state.slackX,E.y+=this.state.slackY;const[R,D]=(0,o.getBoundPosition)(this,E.x,E.y);E.x=R,E.y=D,E.slackX=this.state.slackX+(T-E.x),E.slackY=this.state.slackY+(O-E.y),_.x=E.x,_.y=E.y,_.deltaX=E.x-this.state.x,_.deltaY=E.y-this.state.y}if(this.props.onDrag(w,_)===!1)return!1;this.setState(E)}),f(this,"onDragStop",(w,S)=>{if(!this.state.dragging||this.props.onStop(w,(0,o.createDraggableData)(this,S))===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",S);const E={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:T,y:O}=this.props.position;E.x=T,E.y=O}this.setState(E)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var b,w;return((w=(b=this.props)==null?void 0:b.nodeRef)==null?void 0:w.current)??r.default.findDOMNode(this)}render(){const{axis:b,bounds:w,children:S,defaultPosition:_,defaultClassName:E,defaultClassNameDragging:C,defaultClassNameDragged:T,position:O,positionOffset:R,scale:D,...A}=this.props;let F={},z=null;const L=!!!O||this.state.dragging,B=O||_,$={x:(0,o.canDragX)(this)&&L?this.state.x:B.x,y:(0,o.canDragY)(this)&&L?this.state.y:B.y};this.state.isElementSVG?z=(0,s.createSVGTransform)($,R):F=(0,s.createCSSTransform)($,R);const U=(0,i.clsx)(S.props.className||"",E,{[C]:this.state.dragging,[T]:this.state.dragged});return e.createElement(l.default,d({},A,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(S),{className:U,style:{...S.props.style,...F},transform:z}))}}n.default=v,f(v,"displayName","Draggable"),f(v,"propTypes",{...l.default.propTypes,axis:t.default.oneOf(["both","x","y","none"]),bounds:t.default.oneOfType([t.default.shape({left:t.default.number,right:t.default.number,top:t.default.number,bottom:t.default.number}),t.default.string,t.default.oneOf([!1])]),defaultClassName:t.default.string,defaultClassNameDragging:t.default.string,defaultClassNameDragged:t.default.string,defaultPosition:t.default.shape({x:t.default.number,y:t.default.number}),positionOffset:t.default.shape({x:t.default.oneOfType([t.default.number,t.default.string]),y:t.default.oneOfType([t.default.number,t.default.string])}),position:t.default.shape({x:t.default.number,y:t.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),f(v,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(VV);const{default:oK,DraggableCore:Ipe}=VV;hx.exports=oK;hx.exports.default=oK;var Ppe=hx.exports.DraggableCore=Ipe,Ope=hx.exports,cR={exports:{}},gg={},uR={};uR.__esModule=!0;uR.cloneElement=Fpe;var Rpe=Dpe(I);function Dpe(n){return n&&n.__esModule?n:{default:n}}function C5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function E5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?C5(Object(t),!0).forEach(function(r){Npe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):C5(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Npe(n,e,t){return e=Ape(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ape(n){var e=Lpe(n,"string");return typeof e=="symbol"?e:String(e)}function Lpe(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Fpe(n,e){return e.style&&n.props.style&&(e.style=E5(E5({},n.props.style),e.style)),e.className&&n.props.className&&(e.className=n.props.className+" "+e.className),Rpe.default.cloneElement(n,e)}var vg={};vg.__esModule=!0;vg.resizableProps=void 0;var gt=jpe(dx);function jpe(n){return n&&n.__esModule?n:{default:n}}var $pe={axis:gt.default.oneOf(["both","x","y","none"]),className:gt.default.string,children:gt.default.element.isRequired,draggableOpts:gt.default.shape({allowAnyClick:gt.default.bool,cancel:gt.default.string,children:gt.default.node,disabled:gt.default.bool,enableUserSelectHack:gt.default.bool,offsetParent:gt.default.node,grid:gt.default.arrayOf(gt.default.number),handle:gt.default.string,nodeRef:gt.default.object,onStart:gt.default.func,onDrag:gt.default.func,onStop:gt.default.func,onMouseDown:gt.default.func,scale:gt.default.number}),height:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0];if(i.axis==="both"||i.axis==="y"){var s;return(s=gt.default.number).isRequired.apply(s,t)}return gt.default.number.apply(gt.default,t)},handle:gt.default.oneOfType([gt.default.node,gt.default.func]),handleSize:gt.default.arrayOf(gt.default.number),lockAspectRatio:gt.default.bool,maxConstraints:gt.default.arrayOf(gt.default.number),minConstraints:gt.default.arrayOf(gt.default.number),onResizeStop:gt.default.func,onResizeStart:gt.default.func,onResize:gt.default.func,resizeHandles:gt.default.arrayOf(gt.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:gt.default.number,width:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0];if(i.axis==="both"||i.axis==="x"){var s;return(s=gt.default.number).isRequired.apply(s,t)}return gt.default.number.apply(gt.default,t)}};vg.resizableProps=$pe;gg.__esModule=!0;gg.default=void 0;var Df=Wpe(I),Bpe=Ope,zpe=uR,qpe=vg,Upe=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function aK(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(aK=function(i){return i?t:e})(n)}function Wpe(n,e){if(n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var t=aK(e);if(t&&t.has(n))return t.get(n);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in n)if(s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)){var o=i?Object.getOwnPropertyDescriptor(n,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=n[s]}return r.default=n,t&&t.set(n,r),r}function xI(){return xI=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xI.apply(this,arguments)}function Hpe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function T5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function q1(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?T5(Object(t),!0).forEach(function(r){Ype(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):T5(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Ype(n,e,t){return e=Gpe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Gpe(n){var e=Vpe(n,"string");return typeof e=="symbol"?e:String(e)}function Vpe(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Kpe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,wI(n,e)}function wI(n,e){return wI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},wI(n,e)}var hR=function(n){Kpe(e,n);function e(){for(var r,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=n.call.apply(n,[this].concat(s))||this,r.handleRefs={},r.lastHandleRect=null,r.slack=null,r}var t=e.prototype;return t.componentWillUnmount=function(){this.resetData()},t.resetData=function(){this.lastHandleRect=this.slack=null},t.runConstraints=function(i,s){var o=this.props,a=o.minConstraints,l=o.maxConstraints,c=o.lockAspectRatio;if(!a&&!l&&!c)return[i,s];if(c){var u=this.props.width/this.props.height,h=i-this.props.width,d=s-this.props.height;Math.abs(h)>Math.abs(d*u)?s=i/u:i=s*u}var f=i,m=s,g=this.slack||[0,0],v=g[0],y=g[1];return i+=v,s+=y,a&&(i=Math.max(a[0],i),s=Math.max(a[1],s)),l&&(i=Math.min(l[0],i),s=Math.min(l[1],s)),this.slack=[v+(f-i),y+(m-s)],[i,s]},t.resizeHandler=function(i,s){var o=this;return function(a,l){var c=l.node,u=l.deltaX,h=l.deltaY;i==="onResizeStart"&&o.resetData();var d=(o.props.axis==="both"||o.props.axis==="x")&&s!=="n"&&s!=="s",f=(o.props.axis==="both"||o.props.axis==="y")&&s!=="e"&&s!=="w";if(!(!d&&!f)){var m=s[0],g=s[s.length-1],v=c.getBoundingClientRect();if(o.lastHandleRect!=null){if(g==="w"){var y=v.left-o.lastHandleRect.left;u+=y}if(m==="n"){var b=v.top-o.lastHandleRect.top;h+=b}}o.lastHandleRect=v,g==="w"&&(u=-u),m==="n"&&(h=-h);var w=o.props.width+(d?u/o.props.transformScale:0),S=o.props.height+(f?h/o.props.transformScale:0),_=o.runConstraints(w,S);w=_[0],S=_[1];var E=w!==o.props.width||S!==o.props.height,C=typeof o.props[i]=="function"?o.props[i]:null,T=i==="onResize"&&!E;C&&!T&&(a.persist==null||a.persist(),C(a,{node:c,size:{width:w,height:S},handle:s})),i==="onResizeStop"&&o.resetData()}}},t.renderResizeHandle=function(i,s){var o=this.props.handle;if(!o)return Df.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+i,ref:s});if(typeof o=="function")return o(i,s);var a=typeof o.type=="string",l=q1({ref:s},a?{}:{handleAxis:i});return Df.cloneElement(o,l)},t.render=function(){var i=this,s=this.props,o=s.children,a=s.className,l=s.draggableOpts;s.width,s.height,s.handle,s.handleSize,s.lockAspectRatio,s.axis,s.minConstraints,s.maxConstraints,s.onResize,s.onResizeStop,s.onResizeStart;var c=s.resizeHandles;s.transformScale;var u=Hpe(s,Upe);return(0,zpe.cloneElement)(o,q1(q1({},u),{},{className:(a?a+" ":"")+"react-resizable",children:[].concat(o.props.children,c.map(function(h){var d,f=(d=i.handleRefs[h])!=null?d:i.handleRefs[h]=Df.createRef();return Df.createElement(Bpe.DraggableCore,xI({},l,{nodeRef:f,key:"resizableHandle-"+h,onStop:i.resizeHandler("onResizeStop",h),onStart:i.resizeHandler("onResizeStart",h),onDrag:i.resizeHandler("onResize",h)}),i.renderResizeHandle(h,f))}))}))},e}(Df.Component);gg.default=hR;hR.propTypes=qpe.resizableProps;hR.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var gx={};gx.__esModule=!0;gx.default=void 0;var U1=eme(I),Xpe=lK(dx),Qpe=lK(gg),Jpe=vg,Zpe=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function lK(n){return n&&n.__esModule?n:{default:n}}function cK(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(cK=function(i){return i?t:e})(n)}function eme(n,e){if(n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var t=cK(e);if(t&&t.has(n))return t.get(n);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in n)if(s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)){var o=i?Object.getOwnPropertyDescriptor(n,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=n[s]}return r.default=n,t&&t.set(n,r),r}function _I(){return _I=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_I.apply(this,arguments)}function M5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Vy(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?M5(Object(t),!0).forEach(function(r){tme(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):M5(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function tme(n,e,t){return e=nme(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nme(n){var e=rme(n,"string");return typeof e=="symbol"?e:String(e)}function rme(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ime(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function sme(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,SI(n,e)}function SI(n,e){return SI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},SI(n,e)}var uK=function(n){sme(e,n);function e(){for(var r,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=n.call.apply(n,[this].concat(s))||this,r.state={width:r.props.width,height:r.props.height,propsWidth:r.props.width,propsHeight:r.props.height},r.onResize=function(a,l){var c=l.size;r.props.onResize?(a.persist==null||a.persist(),r.setState(c,function(){return r.props.onResize&&r.props.onResize(a,l)})):r.setState(c)},r}e.getDerivedStateFromProps=function(i,s){return s.propsWidth!==i.width||s.propsHeight!==i.height?{width:i.width,height:i.height,propsWidth:i.width,propsHeight:i.height}:null};var t=e.prototype;return t.render=function(){var i=this.props,s=i.handle,o=i.handleSize;i.onResize;var a=i.onResizeStart,l=i.onResizeStop,c=i.draggableOpts,u=i.minConstraints,h=i.maxConstraints,d=i.lockAspectRatio,f=i.axis;i.width,i.height;var m=i.resizeHandles,g=i.style,v=i.transformScale,y=ime(i,Zpe);return U1.createElement(Qpe.default,{axis:f,draggableOpts:c,handle:s,handleSize:o,height:this.state.height,lockAspectRatio:d,maxConstraints:h,minConstraints:u,onResizeStart:a,onResize:this.onResize,onResizeStop:l,resizeHandles:m,transformScale:v,width:this.state.width},U1.createElement("div",_I({},y,{style:Vy(Vy({},g),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},e}(U1.Component);gx.default=uK;uK.propTypes=Vy(Vy({},Jpe.resizableProps),{},{children:Xpe.default.element});cR.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};var ome=cR.exports.Resizable=gg.default;cR.exports.ResizableBox=gx.default;function hK(n){return function(t,r,i,s,o,a,l){return n(t,r,l)}}function vx(n){return function(t,r,i,s){if(!t||!r||typeof t!="object"||typeof r!="object")return n(t,r,i,s);var o=s.get(t),a=s.get(r);if(o&&a)return o===r&&a===t;s.set(t,r),s.set(r,t);var l=n(t,r,i,s);return s.delete(t),s.delete(r),l}}function dK(n,e){var t={};for(var r in n)t[r]=n[r];for(var r in e)t[r]=e[r];return t}function I5(n){return n.constructor===Object||n.constructor==null}function P5(n){return typeof n.then=="function"}function yx(n,e){return n===e||n!==n&&e!==e}var ame="[object Arguments]",lme="[object Boolean]",cme="[object Date]",ume="[object RegExp]",hme="[object Map]",dme="[object Number]",fme="[object Object]",pme="[object Set]",mme="[object String]",O5=Object.prototype.toString;function bx(n){var e=n.areArraysEqual,t=n.areDatesEqual,r=n.areMapsEqual,i=n.areObjectsEqual,s=n.areRegExpsEqual,o=n.areSetsEqual,a=n.createIsNestedEqual,l=a(c);function c(u,h,d){if(u===h)return!0;if(!u||!h||typeof u!="object"||typeof h!="object")return u!==u&&h!==h;if(I5(u)&&I5(h))return i(u,h,l,d);var f=Array.isArray(u),m=Array.isArray(h);if(f||m)return f===m&&e(u,h,l,d);var g=O5.call(u);return g!==O5.call(h)?!1:g===cme?t(u,h,l,d):g===ume?s(u,h,l,d):g===hme?r(u,h,l,d):g===pme?o(u,h,l,d):g===fme||g===ame?P5(u)||P5(h)?!1:i(u,h,l,d):g===lme||g===dme||g===mme?yx(u.valueOf(),h.valueOf()):!1}return c}function fK(n,e,t,r){var i=n.length;if(e.length!==i)return!1;for(;i-- >0;)if(!t(n[i],e[i],i,i,n,e,r))return!1;return!0}var gme=vx(fK);function pK(n,e){return yx(n.valueOf(),e.valueOf())}function mK(n,e,t,r){var i=n.size===e.size;if(!i)return!1;if(!n.size)return!0;var s={},o=0;return n.forEach(function(a,l){if(i){var c=!1,u=0;e.forEach(function(h,d){!c&&!s[u]&&(c=t(l,d,o,u,n,e,r)&&t(a,h,l,d,n,e,r))&&(s[u]=!0),u++}),o++,i=c}}),i}var vme=vx(mK),yme="_owner",bme=Object.prototype.hasOwnProperty;function gK(n,e,t,r){var i=Object.keys(n),s=i.length;if(Object.keys(e).length!==s)return!1;for(var o;s-- >0;){if(o=i[s],o===yme){var a=!!n.$$typeof,l=!!e.$$typeof;if((a||l)&&a!==l)return!1}if(!bme.call(e,o)||!t(n[o],e[o],o,o,n,e,r))return!1}return!0}var xme=vx(gK);function vK(n,e){return n.source===e.source&&n.flags===e.flags}function yK(n,e,t,r){var i=n.size===e.size;if(!i)return!1;if(!n.size)return!0;var s={};return n.forEach(function(o,a){if(i){var l=!1,c=0;e.forEach(function(u,h){!l&&!s[c]&&(l=t(o,u,a,h,n,e,r))&&(s[c]=!0),c++}),i=l}}),i}var wme=vx(yK),bK=Object.freeze({areArraysEqual:fK,areDatesEqual:pK,areMapsEqual:mK,areObjectsEqual:gK,areRegExpsEqual:vK,areSetsEqual:yK,createIsNestedEqual:hK}),xK=Object.freeze({areArraysEqual:gme,areDatesEqual:pK,areMapsEqual:vme,areObjectsEqual:xme,areRegExpsEqual:vK,areSetsEqual:wme,createIsNestedEqual:hK}),_me=bx(bK);function Ho(n,e){return _me(n,e,void 0)}bx(dK(bK,{createIsNestedEqual:function(){return yx}}));bx(xK);bx(dK(xK,{createIsNestedEqual:function(){return yx}}));function R5(n){const{children:e,cols:t,containerWidth:r,margin:i,containerPadding:s,rowHeight:o,maxRows:a,isDraggable:l,isResizable:c,isBounded:u,static:h,useCSSTransforms:d=!0,usePercentages:f=!1,transformScale:m=1,positionStrategy:g,dragThreshold:v=0,droppingPosition:y,className:b="",style:w,handle:S="",cancel:_="",x:E,y:C,w:T,h:O,minW:R=1,maxW:D=1/0,minH:A=1,maxH:F=1/0,i:z,resizeHandles:j,resizeHandle:L,constraints:B=BV,layoutItem:$,layout:U=[],onDragStart:H,onDrag:K,onDragStop:J,onResizeStart:Z,onResize:q,onResizeStop:X}=n,[G,ne]=I.useState(!1),[te,be]=I.useState(!1),Y=I.useRef(null),ee=I.useRef({left:0,top:0}),pe=I.useRef({top:0,left:0,width:0,height:0}),ge=I.useRef(void 0),qe=I.useRef(U);qe.current=U;const De=I.useRef(null),_e=I.useRef(null),Ae=I.useRef(!1),et=I.useRef({x:0,y:0}),Ee=I.useRef(!1),Re=I.useMemo(()=>({cols:t,containerPadding:s,containerWidth:r,margin:i,maxRows:a,rowHeight:o}),[t,s,r,i,a,o]),Xe=I.useMemo(()=>({cols:t,maxRows:a,containerWidth:r,containerHeight:0,rowHeight:o,margin:i,layout:[]}),[t,a,r,o,i]),Ue=I.useCallback(()=>({...Xe,layout:qe.current}),[Xe]),ct=I.useMemo(()=>$??{i:z,x:E,y:C,w:T,h:O,minW:R,maxW:D,minH:A,maxH:F},[$,z,E,C,T,O,R,D,A,F]),Ht=I.useCallback(He=>{if(g!=null&&g.calcStyle)return g.calcStyle(He);if(d)return eR(He);const ht=zV(He);return f?{...ht,left:x5(He.left/r),width:x5(He.width/r)}:ht},[g,d,f,r]),fe=I.useCallback((He,{node:ht})=>{if(!H)return;const{offsetParent:Me}=ht;if(!Me)return;const le=Me.getBoundingClientRect(),lt=ht.getBoundingClientRect(),mt=lt.left/m,Ie=le.left/m,Fe=lt.top/m,Ce=le.top/m;let Bt;if(g!=null&&g.calcDragPosition){const Ze=He;Bt=g.calcDragPosition(Ze.clientX,Ze.clientY,Ze.clientX-lt.left,Ze.clientY-lt.top)}else Bt={left:mt-Ie+Me.scrollLeft,top:Fe-Ce+Me.scrollTop};if(ee.current=Bt,v>0){const Ze=He;et.current={x:Ze.clientX,y:Ze.clientY},Ae.current=!0,Ee.current=!1,ne(!0);return}ne(!0);const Qe=G0(Re,Bt.top,Bt.left),{x:Yt,y:We}=V0(B,ct,Qe.x,Qe.y,Ue());H(z,Yt,We,{e:He,node:ht,newPosition:Bt})},[H,m,Re,g,v,B,ct,Ue,z]),ae=I.useCallback((He,{node:ht,deltaX:Me,deltaY:le})=>{if(!K||!G)return;const lt=He;if(Ae.current&&!Ee.current){const Yt=lt.clientX-et.current.x,We=lt.clientY-et.current.y;if(Math.hypot(Yt,We)<v)return;if(Ee.current=!0,Ae.current=!1,H){const Ne=G0(Re,ee.current.top,ee.current.left),{x:rt,y:dt}=V0(B,ct,Ne.x,Ne.y,Ue());H(z,rt,dt,{e:He,node:ht,newPosition:ee.current})}}let mt=ee.current.top+le,Ie=ee.current.left+Me;if(u){const{offsetParent:Yt}=ht;if(Yt){const We=Yt.clientHeight-dd(O,o,i[1]);mt=Yy(mt,0,We);const Ze=Wd(Re),Ne=r-dd(T,Ze,i[0]);Ie=Yy(Ie,0,Ne)}}const Fe={top:mt,left:Ie};ee.current=Fe;const Ce=G0(Re,mt,Ie),{x:Bt,y:Qe}=V0(B,ct,Ce.x,Ce.y,Ue());K(z,Bt,Qe,{e:He,node:ht,newPosition:Fe})},[K,H,G,v,u,O,o,i,Re,r,T,z,B,ct,Ue]),se=I.useCallback((He,{node:ht})=>{if(!J||!G)return;const Me=Ae.current;if(Ae.current=!1,Ee.current=!1,et.current={x:0,y:0},Me){ne(!1),ee.current={left:0,top:0};return}const{left:le,top:lt}=ee.current,mt={top:lt,left:le};ne(!1),ee.current={left:0,top:0};const Ie=G0(Re,lt,le),{x:Fe,y:Ce}=V0(B,ct,Ie.x,Ie.y,Ue());J(z,Fe,Ce,{e:He,node:ht,newPosition:mt})},[J,G,Re,B,ct,Ue,z]);De.current=fe,_e.current=ae;const Pe=I.useCallback((He,{node:ht,size:Me,handle:le},lt,mt)=>{const Ie=mt==="onResizeStart"?Z:mt==="onResize"?q:X;if(!Ie)return;let Fe;ht?Fe=Ofe(le,lt,Me,r):Fe={...Me,top:lt.top,left:lt.left},pe.current=Fe;const Ce=vfe(Re,Fe.width,Fe.height),{w:Bt,h:Qe}=Sfe(B,ct,Ce.w,Ce.h,le,Ue());Ie(z,Bt,Qe,{e:He.nativeEvent,node:ht,size:Fe,handle:le})},[Z,q,X,r,Re,z,B,ct,Ue]),Ge=I.useCallback((He,ht)=>{be(!0);const Me=Of(Re,E,C,T,O),le={...ht,handle:ht.handle};Pe(He,le,Me,"onResizeStart")},[Pe,Re,E,C,T,O]),me=I.useCallback((He,ht)=>{const Me=Of(Re,E,C,T,O),le={...ht,handle:ht.handle};Pe(He,le,Me,"onResize")},[Pe,Re,E,C,T,O]),ve=I.useCallback((He,ht)=>{be(!1),pe.current={top:0,left:0,width:0,height:0};const Me=Of(Re,E,C,T,O),le={...ht,handle:ht.handle};Pe(He,le,Me,"onResizeStop")},[Pe,Re,E,C,T,O]);I.useEffect(()=>{var le,lt;if(!y)return;const He=Y.current;if(!He)return;const ht=ge.current||{left:0,top:0},Me=G&&(y.left!==ht.left||y.top!==ht.top);if(G){if(Me){const mt=y.left-ee.current.left,Ie=y.top-ee.current.top,Fe={node:He,deltaX:mt,deltaY:Ie,lastX:ee.current.left,lastY:ee.current.top,x:y.left,y:y.top};(lt=_e.current)==null||lt.call(_e,y.e,Fe)}}else{const mt={node:He,deltaX:y.left,deltaY:y.top,lastX:0,lastY:0,x:y.left,y:y.top};(le=De.current)==null||le.call(De,y.e,mt)}ge.current=y},[y,G,z]);const oe=Of(Re,E,C,T,O,G?ee.current:null,te?pe.current:null),ke=de.Children.only(e),Oe=Of(Re,0,0,1,1),ye=[Oe.width,Oe.height],Le=[1/0,1/0],ot=ke.props,en=ot.className,$t=ot.style;let dn=de.cloneElement(ke,{ref:Y,className:Pm("react-grid-item",en,b,{static:h,resizing:te,"react-draggable":l,"react-draggable-dragging":G,dropping:!!y,cssTransforms:d}),style:{...w,...$t,...Ht(oe)}});const Pn=L;return dn=k.jsx(ome,{draggableOpts:{disabled:!c},className:c?void 0:"react-resizable-hide",width:oe.width,height:oe.height,minConstraints:ye,maxConstraints:Le,onResizeStart:Ge,onResize:me,onResizeStop:ve,transformScale:m,resizeHandles:j,handle:Pn,children:dn}),dn=k.jsx(Ppe,{disabled:!l,onStart:fe,onDrag:ae,onStop:se,handle:S,cancel:".react-resizable-handle"+(_?","+_:""),scale:m,nodeRef:Y,children:dn}),dn}var Fo=()=>{},D5="react-grid-layout",wK=!1;try{wK=/firefox/i.test(navigator.userAgent)}catch{}function Sme(n,e){const t=de.Children.toArray(n),r=de.Children.toArray(e);if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i],o=r[i];if((s==null?void 0:s.key)!==(o==null?void 0:o.key))return!1}return!0}function N5(n,e,t,r){const i=[],s=new Set;de.Children.forEach(e,a=>{if(!de.isValidElement(a)||a.key===null)return;const l=String(a.key);s.add(l);const c=n.find(u=>u.i===l);if(c)i.push(Gc(c));else{const h=a.props["data-grid"];h?i.push({i:l,x:h.x??0,y:h.y??0,w:h.w??1,h:h.h??1,minW:h.minW,maxW:h.maxW,minH:h.minH,maxH:h.maxH,static:h.static,isDraggable:h.isDraggable,isResizable:h.isResizable,resizeHandles:h.resizeHandles,isBounded:h.isBounded}):i.push({i:l,x:0,y:lx(i),w:1,h:1})}});const o=ZO(i,{cols:t});return r.compact(o,t)}function kme(n){const{children:e,width:t,gridConfig:r,dragConfig:i,resizeConfig:s,dropConfig:o,positionStrategy:a=Nfe,compactor:l,constraints:c=BV,layout:u=[],droppingItem:h,autoSize:d=!0,className:f="",style:m={},innerRef:g,onLayoutChange:v=Fo,onDragStart:y=Fo,onDrag:b=Fo,onDragStop:w=Fo,onResizeStart:S=Fo,onResize:_=Fo,onResizeStop:E=Fo,onDrop:C=Fo,onDropDragOver:T=Fo}=n,O=I.useMemo(()=>({...Afe,...r}),[r]),R=I.useMemo(()=>({...Lfe,...i}),[i]),D=I.useMemo(()=>({...Ffe,...s}),[s]),A=I.useMemo(()=>({...jfe,...o}),[o]),{cols:F,rowHeight:z,maxRows:j,margin:L,containerPadding:B}=O,{enabled:$,bounded:U,handle:H,cancel:K,threshold:J}=R,{enabled:Z,handles:q,handleComponent:X}=D,{enabled:G,defaultItem:ne,onDragOver:te}=A,be=l??ux("vertical"),Y=be.type,ee=be.allowOverlap,pe=be.preventCollision??!1,ge=I.useMemo(()=>h??{i:"__dropping-elem__",...ne},[h,ne]),qe=a.type==="transform",De=a.scale,_e=B??L,[Ae,et]=I.useState(!1),[Ee,Re]=I.useState(()=>N5(u,e,F,be)),[Xe,Ue]=I.useState(null),[ct,Ht]=I.useState(!1),[fe,ae]=I.useState(null),[se,Pe]=I.useState(),Ge=I.useRef(null),me=I.useRef(null),ve=I.useRef(null),oe=I.useRef(0),ke=I.useRef(Ee),Oe=I.useRef(u),ye=I.useRef(e),Le=I.useRef(Y),ot=I.useRef(Ee);ot.current=Ee,I.useEffect(()=>{et(!0),Ho(Ee,u)||v(Ee)},[]),I.useEffect(()=>{if(Xe||fe)return;const We=!Ho(u,Oe.current),Ze=!Sme(e,ye.current),Ne=Y!==Le.current;if(We||Ze||Ne){const dt=N5(We?u:Ee,e,F,be);Ho(dt,Ee)||Re(dt)}Oe.current=u,ye.current=e,Le.current=Y},[u,e,F,Y,be,Xe,fe,Ee]),I.useEffect(()=>{if(!Xe&&!Ho(Ee,ke.current)){ke.current=Ee;const We=Ee.filter(Ze=>Ze.i!==ge.i);v(We)}},[Ee,Xe,v,ge.i]);const en=I.useMemo(()=>{if(!d)return;const We=lx(Ee),Ze=_e[1];return We*z+(We-1)*L[1]+Ze*2+"px"},[d,Ee,z,L,_e]),$t=I.useCallback((We,Ze,Ne,rt)=>{const dt=ot.current,tt=Zl(dt,We);if(!tt)return;const xt={w:tt.w,h:tt.h,x:tt.x,y:tt.y,i:We};Ge.current=Gc(tt),ve.current=dt,Ue(xt),y(dt,tt,tt,null,rt.e,rt.node)},[y]),dn=I.useCallback((We,Ze,Ne,rt)=>{const dt=ot.current,tt=Ge.current,xt=Zl(dt,We);if(!xt)return;const At={w:xt.w,h:xt.h,x:xt.x,y:xt.y,i:We},Tt=dc(dt,xt,Ze,Ne,!0,pe,Y,F,ee);b(Tt,tt,xt,At,rt.e,rt.node),Re(be.compact(Tt,F)),Ue(At)},[pe,Y,F,ee,be,b]),Pn=I.useCallback((We,Ze,Ne,rt)=>{if(!Xe)return;const dt=ot.current,tt=Ge.current,xt=Zl(dt,We);if(!xt)return;const At=dc(dt,xt,Ze,Ne,!0,pe,Y,F,ee),Tt=be.compact(At,F);w(Tt,tt,xt,null,rt.e,rt.node);const Gn=ve.current;Ge.current=null,ve.current=null,Ue(null),Re(Tt),Gn&&!Ho(Gn,Tt)&&v(Tt)},[Xe,pe,Y,F,ee,be,w,v]),He=I.useCallback((We,Ze,Ne,rt)=>{const dt=ot.current,tt=Zl(dt,We);tt&&(me.current=Gc(tt),ve.current=dt,Ht(!0),S(dt,tt,tt,null,rt.e,rt.node))},[S]),ht=I.useCallback((We,Ze,Ne,rt)=>{const dt=ot.current,tt=me.current,{handle:xt}=rt;let At=!1,Tt,Gn;const[wa,gr]=xfe(dt,We,kt=>(Tt=kt.x,Gn=kt.y,["sw","w","nw","n","ne"].includes(xt)&&(["sw","nw","w"].includes(xt)&&(Tt=kt.x+(kt.w-Ze),Ze=kt.x!==Tt&&Tt<0?kt.w:Ze,Tt=Tt<0?0:Tt),["ne","n","nw"].includes(xt)&&(Gn=kt.y+(kt.h-Ne),Ne=kt.y!==Gn&&Gn<0?kt.h:Ne,Gn=Gn<0?0:Gn),At=!0),pe&&!ee&&jV(dt,{...kt,w:Ze,h:Ne,x:Tt??kt.x,y:Gn??kt.y}).filter(To=>To.i!==kt.i).length>0&&(Gn=kt.y,Ne=kt.h,Tt=kt.x,Ze=kt.w,At=!1),kt.w=Ze,kt.h=Ne,kt));if(!gr)return;let Gs=wa;At&&Tt!==void 0&&Gn!==void 0&&(Gs=dc(wa,gr,Tt,Gn,!0,pe,Y,F,ee));const _a={w:gr.w,h:gr.h,x:gr.x,y:gr.y,i:We,static:!0};_(Gs,tt,gr,_a,rt.e,rt.node),Re(be.compact(Gs,F)),Ue(_a)},[pe,Y,F,ee,be,_]),Me=I.useCallback((We,Ze,Ne,rt)=>{const dt=ot.current,tt=me.current,xt=Zl(dt,We),At=be.compact(dt,F);E(At,tt,xt??null,null,rt.e,rt.node);const Tt=ve.current;me.current=null,ve.current=null,Ue(null),Ht(!1),Re(At),Tt&&!Ho(Tt,At)&&v(At)},[F,be,E,v]),le=I.useCallback(()=>{const We=ot.current;if(!We.some(rt=>rt.i===ge.i)){ae(null),Ue(null),Pe(void 0);return}const Ne=be.compact(We.filter(rt=>rt.i!==ge.i),F);Re(Ne),ae(null),Ue(null),Pe(void 0)},[ge.i,F,be]),lt=I.useCallback(We=>{var Sa;if(We.preventDefault(),We.stopPropagation(),wK&&!((Sa=We.nativeEvent.target)!=null&&Sa.classList.contains(D5)))return!1;const Ze=te?te(We.nativeEvent):T(We);if(Ze===!1)return fe&&le(),!1;const{dragOffsetX:Ne=0,dragOffsetY:rt=0,...dt}=Ze??{},tt={...ge,...dt},xt=We.currentTarget.getBoundingClientRect(),At={cols:F,margin:L,maxRows:j,rowHeight:z,containerWidth:t,containerPadding:_e},Tt=Wd(At),Gn=dd(tt.w,Tt,L[0]),wa=dd(tt.h,z,L[1]),gr=Gn/2,Gs=wa/2,_a=We.clientX-xt.left+Ne-gr,kt=We.clientY-xt.top+rt-Gs,vs=Math.max(0,_a),To=Math.max(0,kt),Mr={left:vs/De,top:To/De,e:We.nativeEvent};if(fe)se&&(se.left!==Mr.left||se.top!==Mr.top)&&Pe(Mr);else{const ka=gfe(At,To,vs,tt.w,tt.h);ae(k.jsx("div",{},tt.i)),Pe(Mr),Re([...ot.current,{...tt,x:ka.x,y:ka.y,static:!1,isDraggable:!0}])}},[fe,se,ge,te,T,le,De,F,L,j,z,t,_e]),mt=I.useCallback(We=>{We.preventDefault(),We.stopPropagation(),oe.current--,oe.current<0&&(oe.current=0),oe.current===0&&le()},[le]),Ie=I.useCallback(We=>{We.preventDefault(),We.stopPropagation(),oe.current++},[]),Fe=I.useCallback(We=>{We.preventDefault(),We.stopPropagation();const Ze=ot.current,Ne=Ze.find(rt=>rt.i===ge.i);oe.current=0,le(),C(Ze,Ne,We.nativeEvent)},[ge.i,le,C]),Ce=I.useCallback((We,Ze)=>{if(!We||!We.key)return null;const Ne=Zl(Ee,String(We.key));if(!Ne)return null;const rt=typeof Ne.isDraggable=="boolean"?Ne.isDraggable:!Ne.static&&$,dt=typeof Ne.isResizable=="boolean"?Ne.isResizable:!Ne.static&&Z,tt=Ne.resizeHandles||[...q],xt=rt&&U&&Ne.isBounded!==!1,At=X;return k.jsx(R5,{containerWidth:t,cols:F,margin:L,containerPadding:_e,maxRows:j,rowHeight:z,cancel:K,handle:H,onDragStart:$t,onDrag:dn,onDragStop:Pn,onResizeStart:He,onResize:ht,onResizeStop:Me,isDraggable:rt,isResizable:dt,isBounded:xt,useCSSTransforms:qe&&Ae,usePercentages:!Ae,transformScale:De,positionStrategy:a,dragThreshold:J,w:Ne.w,h:Ne.h,x:Ne.x,y:Ne.y,i:Ne.i,minH:Ne.minH,minW:Ne.minW,maxH:Ne.maxH,maxW:Ne.maxW,static:Ne.static,droppingPosition:Ze?se:void 0,resizeHandles:tt,resizeHandle:At,constraints:c,layoutItem:Ne,layout:Ee,children:We},Ne.i)},[Ee,t,F,L,_e,j,z,K,H,$t,dn,Pn,He,ht,Me,$,Z,U,qe,Ae,De,a,J,se,q,X,c]),Bt=()=>Xe?k.jsx(R5,{w:Xe.w,h:Xe.h,x:Xe.x,y:Xe.y,i:Xe.i,className:`react-grid-placeholder ${ct?"placeholder-resizing":""}`,containerWidth:t,cols:F,margin:L,containerPadding:_e,maxRows:j,rowHeight:z,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:qe,transformScale:De,constraints:c,layout:Ee,children:k.jsx("div",{})}):null,Qe=Pm(D5,f),Yt={height:en,...m};return k.jsxs("div",{ref:g,className:Qe,style:Yt,onDrop:G?Fe:void 0,onDragLeave:G?mt:void 0,onDragEnter:G?Ie:void 0,onDragOver:G?lt:void 0,children:[de.Children.map(e,We=>de.isValidElement(We)?Ce(We):null),G&&fe&&Ce(fe,!0),Bt()]})}var Cme={lg:1200,md:996,sm:768,xs:480,xxs:0},Eme={lg:12,md:10,sm:6,xs:4,xxs:2},W1=()=>{};function Tme(n,e,t,r){const i=[];de.Children.forEach(e,o=>{if(!de.isValidElement(o)||o.key===null)return;const a=String(o.key),l=n.find(c=>c.i===a);if(l)i.push({...l,i:a});else{const u=o.props["data-grid"];u?i.push({i:a,x:u.x??0,y:u.y??0,w:u.w??1,h:u.h??1,minW:u.minW,maxW:u.maxW,minH:u.minH,maxH:u.maxH,static:u.static,isDraggable:u.isDraggable,isResizable:u.isResizable,resizeHandles:u.resizeHandles,isBounded:u.isBounded}):i.push({i:a,x:0,y:lx(i),w:1,h:1})}});const s=ZO(i,{cols:t});return r.compact(s,t)}function Mme(n){const{children:e,width:t,breakpoint:r,breakpoints:i=Cme,cols:s=Eme,layouts:o={},rowHeight:a=150,maxRows:l=1/0,margin:c=[10,10],containerPadding:u=null,compactor:h,onBreakpointChange:d=W1,onLayoutChange:f=W1,onWidthChange:m=W1,...g}=n,v=h??ux("vertical"),y=v.type,b=v.allowOverlap,w=I.useMemo(()=>r??w5(i,t),[]),S=I.useMemo(()=>_5(w,s),[w,s]),_=I.useMemo(()=>j1(o,i,w,w,S,y),[]),[E,C]=I.useState(w),[T,O]=I.useState(S),[R,D]=I.useState(_),[A,F]=I.useState(o),z=I.useRef(t),j=I.useRef(r),L=I.useRef(i),B=I.useRef(s),$=I.useRef(o),U=I.useRef(y),H=I.useRef(A);I.useEffect(()=>{H.current=A},[A]);const K=I.useMemo(()=>Ho(o,$.current)?null:j1(o,i,E,E,T,v),[o,i,E,T,v]),J=K??R;I.useEffect(()=>{K!==null&&(D(K),F(o),H.current=o,$.current=o)},[K,o]),I.useEffect(()=>{if(y!==U.current){const ne=v.compact(Ml(J),T),te={...H.current,[E]:ne};D(ne),F(te),H.current=te,f(ne,te),U.current=y}},[y,v,J,T,b,E,f]),I.useEffect(()=>{const ne=t!==z.current,te=r!==j.current,be=!Ho(i,L.current),Y=!Ho(s,B.current);if(ne||te||be||Y){const ee=r??w5(i,t),pe=_5(ee,s),ge=E;if(ge!==ee||be||Y){const _e={...H.current};_e[ge]||(_e[ge]=Ml(R));let Ae=j1(_e,i,ee,ge,pe,v);Ae=Tme(Ae,e,pe,v),_e[ee]=Ae,C(ee),O(pe),D(Ae),F(_e),H.current=_e,d(ee,pe),f(Ae,_e)}const qe=K0(c,ee),De=u?K0(u,ee):null;m(t,qe,pe,De),z.current=t,j.current=r,L.current=i,B.current=s}},[t,r,i,s,E,T,R,e,v,y,b,c,u,d,f,m]);const Z=I.useCallback(ne=>{const be={...H.current,[E]:ne};D(ne),F(be),H.current=be,f(ne,be)},[E,f]),q=I.useMemo(()=>K0(c,E),[c,E]),X=I.useMemo(()=>u===null?null:K0(u,E),[u,E]),G=I.useMemo(()=>({cols:T,rowHeight:a,maxRows:l,margin:q,containerPadding:X}),[T,a,l,q,X]);return k.jsx(kme,{...g,width:t,gridConfig:G,compactor:v,onLayoutChange:Z,layout:J,children:e})}function _K(n){const{children:e,width:t,breakpoint:r,breakpoints:i,cols:s,layouts:o,onBreakpointChange:a,onLayoutChange:l,onWidthChange:c,rowHeight:u,maxRows:h,margin:d,containerPadding:f,droppingItem:m,compactType:g,preventCollision:v=!1,allowOverlap:y=!1,verticalCompact:b,isDraggable:w=!0,isBounded:S=!1,draggableHandle:_,draggableCancel:E,isResizable:C=!0,resizeHandles:T=["se"],resizeHandle:O,isDroppable:R=!1,useCSSTransforms:D=!0,transformScale:A=1,autoSize:F,className:z,style:j,innerRef:L,onDragStart:B,onDrag:$,onDragStop:U,onResizeStart:H,onResize:K,onResizeStop:J,onDrop:Z,onDropDragOver:q}=n;let X=g===void 0?"vertical":g;b===!1&&(X=null);const G={enabled:w,bounded:S,handle:_,cancel:E},ne={enabled:C,handles:T,handleComponent:O},te={enabled:R};let be;D?A!==1?be=Dfe(A):be=UV:be=Rfe;const Y=ux(X,y,v);return k.jsx(Mme,{width:t,breakpoint:r,breakpoints:i,cols:s,layouts:o,rowHeight:u,maxRows:h,margin:d,containerPadding:f,compactor:Y,dragConfig:G,resizeConfig:ne,dropConfig:te,positionStrategy:be,droppingItem:m,autoSize:F,className:z,style:j,innerRef:L,onBreakpointChange:a,onLayoutChange:l,onWidthChange:c,onDragStart:B,onDrag:$,onDragStop:U,onResizeStart:H,onResize:K,onResizeStop:J,onDrop:Z,onDropDragOver:q,children:e})}_K.displayName="ResponsiveReactGridLayout";var Ime=_K,Pme="react-grid-layout";function Ome(n){function e(t){const{measureBeforeMount:r=!1,className:i,style:s,...o}=t,[a,l]=I.useState(1280),[c,u]=I.useState(!1),h=I.useRef(null),d=I.useRef(null);return I.useEffect(()=>{u(!0)},[]),I.useEffect(()=>{const f=h.current;if(!(f instanceof HTMLElement))return;const m=new ResizeObserver(g=>{if(g[0]){const v=g[0].contentRect.width;l(v)}});return m.observe(f),d.current=m,()=>{m.unobserve(f),m.disconnect()}},[c]),r&&!c?k.jsx("div",{className:Pm(i,Pme),style:s,ref:h}):k.jsx(n,{innerRef:h,className:i,style:s,...o,width:a})}return e.displayName=`WidthProvider(${n.displayName||n.name||"Component"})`,e}const H1=[[0,4,8,16],[8,4,2,16],[0,40,3,27],[0,20,3,20],[3,20,7,13],[3,33,7,8],[3,41,7,6],[3,47,2,16],[0,0,10,4]],Rme=[[0,0,10,4],[0,4,8,16],[8,4,2,16],[0,43,3,10],[0,20,3,23],[3,20,7,23],[3,98,7,24],[3,78,7,20],[0,53,10,25]],A5=0,Dme=8;function Nme(n,e){return Math.floor(Math.random()*(e-n+1))+n}function Ame(n){const e=Math.ceil(Math.random()*4)+1;return{x:Nme(0,5)*2%12,y:Math.floor(n/6)*e,w:2,h:e,i:n.toString(),static:Math.random()<.05}}function Lme(n,e){const[t,r,i,s]=e;return{x:t,y:r,w:i,h:s,i:n.toString(),static:!0}}function Ep(n,e){const t=n.length,r=[];for(let i=0;i<t;i++)i<n.length?r.push(Lme(i,n[i])):r.push(Ame(i));return r}function Fme(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(const i of t){const s=n[i],o=e[i];if(!s||!o){if(s!==o)return!1;continue}if(s.length!==o.length)return!1;for(let a=0;a<s.length;a++){const l=s[a],c=o[a];if(l.x!==c.x||l.y!==c.y||l.w!==c.w||l.h!==c.h)return!1}}return!0}function Y1(n,e){const t={};for(const r in n){const i=n[r];i&&(t[r]=i.map(s=>({...s,static:e})))}return t}const jme=Ome(Ime);class SK extends de.Component{constructor(t){super(t);ce(this,"isUpdatingLayout",!1);ce(this,"domCache",null);ce(this,"lastLayoutKey","");ce(this,"handleResponsiveLayoutChange",(t,r)=>{const i=Array.isArray(t)?t:[t],s=r;this.onLayoutChange(i,s)});ce(this,"generateNewLayout",()=>{const t=Ep(H1),r=this.props.allStatic??this.state.allStatic,i=t.map(s=>({...s,static:r}));this.domCache=null,this.lastLayoutKey="",this.setState({layouts:{lg:i}})});this.state={currentBreakpoint:"lg",compactType:t.compactType??"vertical",mounted:!1,layouts:{lg:t.initialLayout||Ep(H1)},allStatic:t.allStatic??!0},this.onBreakpointChange=this.onBreakpointChange.bind(this),this.onCompactTypeChange=this.onCompactTypeChange.bind(this),this.onLayoutChange=this.onLayoutChange.bind(this),this.onNewLayout=this.onNewLayout.bind(this),this.onToggleStatic=this.onToggleStatic.bind(this)}componentDidMount(){this.setState({mounted:!0},()=>{this.props.onMount&&this.props.onMount()})}generateDOM(){const t=this.state.layouts.lg||[],{slotContent:r=[]}=this.props,i=this.props.allStatic??this.state.allStatic,s=`${t.length}-${i}-${r.length}`;if(this.domCache&&this.lastLayoutKey===s)return this.domCache;const o=[];for(let a=0;a<t.length;a++){const l=t[a],c=a>=A5&&a<=Dme,u=a-A5,h=c&&r[u]?r[u]:null,d=l.static??i;o.push(k.jsx("div",{className:d?"static":"",children:h?k.jsx("div",{className:"external-slot-content",children:h}):d?k.jsxs("span",{className:"text",title:"This item is static and cannot be removed or resized.",children:["AREA ",a," CLASSIFIED"]}):k.jsx("span",{className:"text",children:a})},l.i||a.toString()))}return this.domCache=o,this.lastLayoutKey=s,o}onBreakpointChange(t){var r,i;this.setState({currentBreakpoint:t}),(i=(r=this.props).onBreakpointChange)==null||i.call(r,t)}onCompactTypeChange(){if(this.props.onCompactTypeChange)this.props.onCompactTypeChange();else{const{compactType:t}=this.state,r=t==="horizontal"?"vertical":t==="vertical"?null:"horizontal";this.setState({compactType:r})}}onLayoutChange(t,r){if(this.isUpdatingLayout){this.props.onLayoutChange(t,r);return}const i=this.props.allStatic??this.state.allStatic;if(i){this.props.onLayoutChange(t,r);return}const s=Y1(r,i);!Fme(this.state.layouts,s)&&(this.domCache=null,this.lastLayoutKey="",this.isUpdatingLayout=!0,this.setState({layouts:s},()=>{this.isUpdatingLayout=!1})),this.props.onLayoutChange(t,s)}onNewLayout(){this.props.onNewLayout?this.props.onNewLayout():this.generateNewLayout()}onToggleStatic(){if(this.props.onToggleStatic)this.props.onToggleStatic();else{const t=!this.state.allStatic,r=Y1(this.state.layouts,t);this.domCache=null,this.lastLayoutKey="",this.setState({allStatic:t,layouts:r})}}componentDidUpdate(t){if(t.compactType!==this.props.compactType&&this.props.compactType!==void 0&&this.setState({compactType:this.props.compactType}),t.allStatic!==this.props.allStatic&&this.props.allStatic!==void 0){const r=Y1(this.state.layouts,this.props.allStatic);this.domCache=null,this.lastLayoutKey="",this.setState({allStatic:this.props.allStatic,layouts:r})}t.slotContent!==this.props.slotContent&&(this.domCache=null,this.lastLayoutKey="")}render(){const t=this.props.compactType??this.state.compactType;return k.jsx("div",{children:k.jsx(jme,{...this.props,layouts:this.state.layouts,onBreakpointChange:this.onBreakpointChange,onLayoutChange:this.handleResponsiveLayoutChange,measureBeforeMount:!1,useCSSTransforms:this.state.mounted,compactType:t,preventCollision:!t,children:this.generateDOM()})})}}ce(SK,"defaultProps",{className:"layout",rowHeight:30,onLayoutChange:function(){},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},initialLayout:Ep(H1)});function $me({isOpen:n,currentLeverage:e,tempLeverage:t,maxRatio:r,onLeverageChange:i,onConfirm:s,onCancel:o,onOverlayClick:a=()=>{}}){if(!n)return null;const l=k.jsx("div",{className:"modal-overlay",onClick:a,children:k.jsxs("div",{className:"modal-content",onClick:c=>c.stopPropagation(),children:[k.jsx("div",{className:"modal-header",children:k.jsx("h3",{children:"Select Leverage"})}),k.jsxs("div",{className:"modal-body",children:[k.jsxs("div",{className:"leverage-max-ratio",children:[k.jsx("div",{className:"leverage-max-ratio-label",children:"Maximum Ratio"}),k.jsxs("div",{className:"leverage-max-ratio-value",children:[r,"x"]})]}),k.jsxs("div",{className:"leverage-slider-container",children:[k.jsx("input",{type:"range",min:w1,max:F3,value:t,onChange:c=>i(parseInt(c.target.value)),className:"filled-slider",style:{"--slider-progress":`${(t-w1)/(F3-w1)*100}%`}}),k.jsxs("div",{className:"leverage-slider-labels",children:[k.jsx("span",{children:"1x"}),k.jsxs("span",{className:"leverage-current-value",children:[t,"x"]}),k.jsx("span",{children:"100x"})]})]})]}),k.jsxs("div",{className:"modal-footer",children:[k.jsx("button",{onClick:o,className:"btn btn-secondary",children:"Cancel"}),k.jsx("button",{onClick:s,className:"btn btn-primary",children:"Confirm"})]})]})});return typeof document<"u"?Bs.createPortal(l,document.body):null}function Bme({isOpen:n,fromValue:e,toValue:t,options:r,bucketsData:i,transferAmount:s,createBucketAmount:o,createBucketAsset:a,createMarginType:l,transferMarginType:c,onFromChange:u,onToChange:h,onTransferAmountChange:d,onCreateBucketAmountChange:f,onCreateBucketAssetChange:m,onCreateMarginTypeChange:g,onTransferMarginTypeChange:v,onConfirm:y,onCancel:b,spotWalletBalance:w=0,activeTab:S,onActiveTabChange:_,isTransferring:E=!1,onOpen:C,collections:T,onOverlayClick:O=()=>{}}){const[R,D]=I.useState("transfer"),A=S??R,F=_??D,z=I.useRef(!1),[j,L]=I.useState(!1),[B,$]=I.useState("transfer"),[U,H]=I.useState(!1);I.useEffect(()=>{n&&!z.current&&C&&C(),z.current=n,n||H(!1)},[n,C,A]);const K=I.useMemo(()=>e==="spot-wallet"?null:i.find(Y=>Y.bucketId===e),[i,e]);I.useMemo(()=>{var ee;if(e==="spot-wallet"||!T)return null;const Y=T.find(pe=>pe.bucketId===e);return((ee=Y==null?void 0:Y.marginType)==null?void 0:ee.toLowerCase())||null},[T,e]);const J=I.useMemo(()=>e==="spot-wallet"?w:(K==null?void 0:K.totalEquity)||0,[e,w,K]),Z=10,q=Math.max(Z,J);if(de.useEffect(()=>{if(e&&q>0){const Y=A==="transfer"?s:o;Y>q?A==="transfer"?d(q):f(q):Y<Z&&q>=Z&&(A==="transfer"?d(Z):f(Z))}},[e,q,A,s,o,d,f]),!n)return null;const X=e&&t&&s>=Z&&s<=q,G=e&&o>=Z&&o<=q&&a&&l,ne=k.jsx("div",{className:"modal-overlay",onClick:O,children:k.jsxs("div",{className:"modal-content transfer-modal-content",onClick:Y=>Y.stopPropagation(),children:[k.jsx("div",{className:"modal-header",children:k.jsx("h3",{children:"Transfer Funds"})}),k.jsxs("div",{className:"transfer-modal-tabs",children:[k.jsx("button",{className:`transfer-tab ${A==="transfer"?"active":""}`,onClick:()=>F("transfer"),type:"button",disabled:E,children:"Transfer"}),k.jsx("button",{className:`transfer-tab ${A==="create"?"active":""}`,onClick:()=>F("create"),type:"button",disabled:E,children:"Create Bucket"})]}),k.jsx("div",{className:"modal-body",children:A==="transfer"?k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"transfer-field-group",children:[k.jsx("label",{className:"transfer-field-label",children:"From"}),k.jsxs("select",{value:e,onChange:Y=>u(Y.target.value),className:"transfer-select",children:[k.jsx("option",{value:"",children:"Select source bucket"}),r.map(Y=>k.jsx("option",{value:Y.value,children:Y.label},Y.value))]})]}),e&&k.jsxs("div",{className:"transfer-field-group",children:[k.jsx("label",{className:"transfer-field-label",children:"To"}),k.jsxs("select",{value:t,onChange:Y=>h(Y.target.value),className:"transfer-select",disabled:!e,children:[k.jsx("option",{value:"",children:"Select destination bucket"}),r.filter(Y=>Y.value!==e).map(Y=>k.jsx("option",{value:Y.value,children:Y.label},Y.value))]})]}),e&&q>=Z?k.jsxs("div",{className:"transfer-field-group",children:[k.jsxs("div",{className:"transfer-amount-header",children:[k.jsx("label",{className:"transfer-field-label",children:"Amount"}),k.jsxs("div",{className:"transfer-available-balance",children:["Available: ",zt(J)]})]}),k.jsx("div",{className:"transfer-amount-display",onClick:()=>{$("transfer"),L(!0)},style:{cursor:"pointer"},children:k.jsx("span",{className:"transfer-amount-value",children:zt(s)})}),k.jsxs("div",{className:"transfer-amount-container",children:[k.jsx("input",{type:"range",min:Z,max:q,step:.01,value:s,onChange:Y=>d(parseFloat(Y.target.value)),className:"transfer-amount-slider",style:{"--slider-progress":`${(s-Z)/(q-Z)*100}%`}}),k.jsxs("div",{className:"transfer-amount-labels",children:[k.jsx("span",{children:zt(Z)}),k.jsx("span",{children:zt(q)})]})]})]}):e?k.jsx("div",{className:"transfer-field-group",children:k.jsxs("div",{className:"transfer-insufficient-funds",children:["Insufficient funds. Minimum required:"," ",zt(Z)]})}):null]}):k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"transfer-field-group",children:[k.jsx("label",{className:"transfer-field-label",children:"From"}),k.jsxs("select",{value:e,onChange:Y=>u(Y.target.value),className:"transfer-select",children:[k.jsx("option",{value:"",children:"Select source bucket"}),r.map(Y=>k.jsx("option",{value:Y.value,children:Y.label},Y.value))]})]}),k.jsxs("div",{className:"transfer-field-group",children:[k.jsx("label",{className:"transfer-field-label",children:"Collateral Asset"}),k.jsxs("select",{value:a,onChange:Y=>m(Y.target.value),className:"transfer-select",children:[k.jsx("option",{value:"",children:"Select collateral asset"}),k.jsx("option",{value:"USDC",children:"USDC"}),k.jsx("option",{value:"USDT",children:"USDT"})]})]}),k.jsxs("div",{className:"transfer-field-group",children:[k.jsx("label",{className:"transfer-field-label",children:"Margin Type"}),k.jsxs("select",{value:l,onChange:Y=>g(Y.target.value),className:"transfer-select",children:[k.jsx("option",{value:"",children:"Select margin type"}),k.jsx("option",{value:"cross",children:"Cross Margin"}),k.jsx("option",{value:"isolated",children:"Isolated Margin"})]})]}),e&&q>=Z?k.jsxs("div",{className:"transfer-field-group",children:[k.jsxs("div",{className:"transfer-amount-header",children:[k.jsx("label",{className:"transfer-field-label",children:"Amount"}),k.jsxs("div",{className:"transfer-available-balance",children:["Available: ",zt(J)]})]}),k.jsx("div",{className:"transfer-amount-display",onClick:()=>{$("create"),L(!0)},style:{cursor:"pointer"},children:k.jsx("span",{className:"transfer-amount-value",children:zt(o)})}),k.jsxs("div",{className:"transfer-amount-container",children:[k.jsx("input",{type:"range",min:Z,max:q,step:.01,value:o,onChange:Y=>f(parseFloat(Y.target.value)),className:"transfer-amount-slider",style:{"--slider-progress":`${(o-Z)/(q-Z)*100}%`}}),k.jsxs("div",{className:"transfer-amount-labels",children:[k.jsx("span",{children:zt(Z)}),k.jsx("span",{children:zt(q)})]})]})]}):e?k.jsx("div",{className:"transfer-field-group",children:k.jsxs("div",{className:"transfer-insufficient-funds",children:["Insufficient funds. Minimum required:"," ",zt(Z)]})}):null]})}),k.jsxs("div",{className:"modal-footer",children:[k.jsx("button",{onClick:b,className:"btn btn-secondary",disabled:E,children:"Cancel"}),k.jsxs("div",{style:{flex:1,position:"relative",minHeight:"48px"},children:[k.jsx("div",{className:"slider-confirm-container",style:{position:"absolute",top:0,left:0,right:0,opacity:U?0:1,visibility:U?"hidden":"visible",transition:"opacity 0.3s ease, visibility 0.3s ease",pointerEvents:U?"none":"auto"},children:k.jsx(DV,{onConfirm:()=>{H(!0)},label:"Slide to confirm",disabled:E||(A==="transfer"?!X:!G),icon:k.jsx("img",{src:"/bconfirm.svg"})})}),k.jsx("button",{onClick:()=>{y(A==="transfer"?{type:"transfer",from:e,to:t,amount:s}:{type:"create",from:e,collateralAsset:a,marginType:l,amount:o})},className:"btn btn-primary",disabled:E||(A==="transfer"?!X:!G),style:{position:"absolute",top:0,right:0,opacity:U?1:0,visibility:U?"visible":"hidden",transition:"opacity 0.3s ease, visibility 0.3s ease",pointerEvents:U?"auto":"none",width:"100%",height:"100%",color:"black"},children:E?"Processing...":"Confirm"})]})]})]})}),te=B==="transfer"?s:o,be=Y=>{B==="transfer"?d(Y):f(Y),L(!1)};return k.jsxs(k.Fragment,{children:[typeof document<"u"?Bs.createPortal(ne,document.body):null,k.jsx(QO,{isOpen:j,value:te,min:Z,max:q,onConfirm:be,onCancel:()=>L(!1)})]})}const zme=[{value:"MORM",label:"MORM"},{value:"USDC",label:"USDC"},{value:"BTC",label:"BTC"}],Jr=.01;function qme(n){const e=(n==null?void 0:n.trim())??"";return e.length>=38&&/^0x[a-fA-F0-9]{40}$/.test(e)}function Ume({isOpen:n,toAddress:e,assetId:t,amount:r,availableBalance:i,onToAddressChange:s,onAssetChange:o,onAmountChange:a,onConfirm:l,onCancel:c,isTransferring:u=!1,onOpen:h,memo:d="",onMemoChange:f,onOverlayClick:m=()=>{}}){const[g,v]=I.useState(!1),[y,b]=I.useState(!1),w=I.useRef(!1);I.useEffect(()=>{n&&!w.current&&h&&h(),w.current=n,n||b(!1)},[n,h]);const S=Math.max(Jr,i);if(I.useEffect(()=>{r>S&&S>=Jr?a(S):r<Jr&&S>=Jr&&a(Jr)},[S,r,a]),!n)return null;const _=qme(e),E=r>=Jr&&r<=S&&i>=Jr,C=_&&E&&t,T=k.jsx("div",{className:"modal-overlay",onClick:m,children:k.jsxs("div",{className:"modal-content transfer-modal-content wallet-transfer-modal-content",onClick:O=>O.stopPropagation(),children:[k.jsx("div",{className:"modal-header",children:k.jsx("h3",{children:"Transfer to Address"})}),k.jsxs("div",{className:"modal-body",children:[k.jsxs("div",{className:"transfer-field-group",children:[k.jsx("label",{className:"transfer-field-label",children:"To Address"}),k.jsx("input",{type:"text",value:e,onChange:O=>s(O.target.value),placeholder:"0x...",className:"transfer-select transfer-input",disabled:u}),e.trim()&&!_&&k.jsx("div",{className:"transfer-field-hint transfer-field-error",children:"Enter a valid 0x address (42 characters)"})]}),k.jsxs("div",{className:"transfer-field-group",children:[k.jsx("label",{className:"transfer-field-label",children:"Asset"}),k.jsxs("select",{value:t,onChange:O=>o(O.target.value),className:"transfer-select",disabled:u,children:[k.jsx("option",{value:"",children:"Select asset"}),zme.map(O=>k.jsx("option",{value:O.value,children:O.label},O.value))]})]}),t&&k.jsxs("div",{className:"transfer-field-group",children:[k.jsxs("div",{className:"transfer-amount-header",children:[k.jsx("label",{className:"transfer-field-label",children:"Amount"}),k.jsxs("div",{className:"transfer-available-balance",children:["Available: ",zt(i)]})]}),S>=Jr?k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"transfer-amount-display",onClick:()=>v(!0),style:{cursor:"pointer"},children:k.jsx("span",{className:"transfer-amount-value",children:zt(r)})}),k.jsxs("div",{className:"transfer-amount-container",children:[k.jsx("input",{type:"range",min:Jr,max:S,step:.01,value:r,onChange:O=>a(parseFloat(O.target.value)),className:"transfer-amount-slider",style:{"--slider-progress":`${(r-Jr)/(S-Jr)*100}%`}}),k.jsxs("div",{className:"transfer-amount-labels",children:[k.jsx("span",{children:zt(Jr)}),k.jsx("span",{children:zt(S)})]})]})]}):k.jsxs("div",{className:"transfer-insufficient-funds",children:["Insufficient funds. Minimum required:"," ",zt(Jr)]})]}),f&&k.jsxs("div",{className:"transfer-field-group",children:[k.jsx("label",{className:"transfer-field-label",children:"Memo (optional)"}),k.jsx("input",{type:"text",value:d,onChange:O=>f(O.target.value),placeholder:"Optional memo",className:"transfer-select transfer-input",disabled:u})]})]}),k.jsxs("div",{className:"modal-footer",children:[k.jsx("button",{onClick:c,className:"btn btn-secondary",disabled:u,children:"Cancel"}),k.jsxs("div",{style:{flex:1,position:"relative",minHeight:"48px"},children:[k.jsx("div",{className:"slider-confirm-container",style:{position:"absolute",top:0,left:0,right:0,opacity:y?0:1,visibility:y?"hidden":"visible",transition:"opacity 0.3s ease, visibility 0.3s ease",pointerEvents:y?"none":"auto"},children:k.jsx(DV,{onConfirm:()=>b(!0),label:"Slide to confirm",disabled:u||!C,icon:k.jsx("img",{src:"/bconfirm.svg",alt:""})})}),k.jsx("button",{onClick:()=>{l({to:e.trim(),assetId:t,amount:r,...d.trim()&&{memo:d.trim()}})},className:"btn btn-primary",disabled:u||!C,style:{position:"absolute",top:0,right:0,opacity:y?1:0,visibility:y?"visible":"hidden",transition:"opacity 0.3s ease, visibility 0.3s ease",pointerEvents:y?"auto":"none",width:"100%",height:"100%",color:"black"},children:u?"Processing...":"Confirm"})]})]})]})});return k.jsxs(k.Fragment,{children:[typeof document<"u"?Bs.createPortal(T,document.body):null,k.jsx(QO,{isOpen:g,value:r,min:Jr,max:S,onConfirm:O=>{a(O),v(!1)},onCancel:()=>v(!1)})]})}function Zt(n){var e=n.width,t=n.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(t<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:t}}function Rc(n,e){return n.width===e.width&&n.height===e.height}var Wme=function(){function n(e){var t=this;this._resolutionListener=function(){return t._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return n.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(n.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),n.prototype.subscribe=function(e){var t=this,r={next:e};return this._observers.push(r),{unsubscribe:function(){t._observers=t._observers.filter(function(i){return i!==r})}}},n.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},n.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},n.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},n.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(t){return t.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},n}();function Hme(n){return new Wme(n)}var Yme=function(){function n(e,t,r){var i;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=Zt({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=t??function(s){return s},this._allowResizeObserver=(i=r==null?void 0:r.allowResizeObserver)!==null&&i!==void 0?i:!0,this._chooseAndInitObserver()}return n.prototype.dispose=function(){var e,t;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(t=this._devicePixelRatioObservable)===null||t===void 0||t.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(n.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bitmapSize",{get:function(){return Zt({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),n.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=Zt(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},n.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},n.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(t){return t!==e})},Object.defineProperty(n.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),n.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},n.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(t){return t!==e})},n.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},n.prototype._resizeBitmap=function(e){var t=this.bitmapSize;Rc(t,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(t,e))},n.prototype._emitBitmapSizeChanged=function(e,t){var r=this;this._bitmapSizeChangedListeners.forEach(function(i){return i.call(r,e,t)})},n.prototype._suggestNewBitmapSize=function(e){var t=this._suggestedBitmapSize,r=Zt(this._transformBitmapSize(e,this._canvasElementClientSize)),i=Rc(this.bitmapSize,r)?null:r;t===null&&i===null||t!==null&&i!==null&&Rc(t,i)||(this._suggestedBitmapSize=i,this._emitSuggestedBitmapSizeChanged(t,i))},n.prototype._emitSuggestedBitmapSizeChanged=function(e,t){var r=this;this._suggestedBitmapSizeChangedListeners.forEach(function(i){return i.call(r,e,t)})},n.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}Vme().then(function(t){return t?e._initResizeObserver():e._initDevicePixelRatioObservable()})},n.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var t=L5(this._canvasElement);if(t===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=Hme(t),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},n.prototype._invalidateBitmapSize=function(){var e,t;if(this._canvasElement!==null){var r=L5(this._canvasElement);if(r!==null){var i=(t=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&t!==void 0?t:r.devicePixelRatio,s=this._canvasElement.getClientRects(),o=s[0]!==void 0?Kme(s[0],i):Zt({width:this._canvasElementClientSize.width*i,height:this._canvasElementClientSize.height*i});this._suggestNewBitmapSize(o)}}},n.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(t){var r=t.find(function(o){return o.target===e._canvasElement});if(!(!r||!r.devicePixelContentBoxSize||!r.devicePixelContentBoxSize[0])){var i=r.devicePixelContentBoxSize[0],s=Zt({width:i.inlineSize,height:i.blockSize});e._suggestNewBitmapSize(s)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},n}();function Gme(n,e){return new Yme(n,e.transform,e.options)}function L5(n){return n.ownerDocument.defaultView}function Vme(){return new Promise(function(n){var e=new ResizeObserver(function(t){n(t.every(function(r){return"devicePixelContentBoxSize"in r})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function Kme(n,e){return Zt({width:Math.round(n.left*e+n.width*e)-Math.round(n.left*e),height:Math.round(n.top*e+n.height*e)-Math.round(n.top*e)})}var Xme=function(){function n(e,t,r){if(t.width===0||t.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=t,r.width===0||r.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=r,this._context=e}return n.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},n.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(n.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),n}();function Vc(n,e){var t=n.canvasElementClientSize;if(t.width===0||t.height===0)return null;var r=n.bitmapSize;if(r.width===0||r.height===0)return null;var i=n.canvasElement.getContext("2d",e);return i===null?null:new Xme(i,t,r)}/*!
 * @license
 * TradingView Lightweight Charts v5.1.0
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const kK={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var F5,j5;function fd(n,e){const t={0:[],1:[n.lineWidth,n.lineWidth],2:[2*n.lineWidth,2*n.lineWidth],3:[6*n.lineWidth,6*n.lineWidth],4:[n.lineWidth,4*n.lineWidth]}[e];n.setLineDash(t)}function CK(n,e,t,r){n.beginPath();const i=n.lineWidth%2?.5:0;n.moveTo(t,e+i),n.lineTo(r,e+i),n.stroke()}function wr(n,e){if(!n)throw new Error("Assertion failed"+(e?": "+e:""))}function mi(n){if(n===void 0)throw new Error("Value is undefined");return n}function Se(n){if(n===null)throw new Error("Value is null");return n}function cl(n){return Se(mi(n))}(function(n){n[n.Simple=0]="Simple",n[n.WithSteps=1]="WithSteps",n[n.Curved=2]="Curved"})(F5||(F5={})),function(n){n[n.Solid=0]="Solid",n[n.Dotted=1]="Dotted",n[n.Dashed=2]="Dashed",n[n.LargeDashed=3]="LargeDashed",n[n.SparseDotted=4]="SparseDotted"}(j5||(j5={}));class Hn{constructor(){this.t=[]}i(e,t,r){const i={h:e,l:t,o:r===!0};this.t.push(i)}_(e){const t=this.t.findIndex(r=>e===r.h);t>-1&&this.t.splice(t,1)}u(e){this.t=this.t.filter(t=>t.l!==e)}p(e,t,r){const i=[...this.t];this.t=this.t.filter(s=>!s.o),i.forEach(s=>s.h(e,t,r))}v(){return this.t.length>0}m(){this.t=[]}}function Ai(n,...e){for(const t of e)for(const r in t)t[r]!==void 0&&Object.prototype.hasOwnProperty.call(t,r)&&!["__proto__","constructor","prototype"].includes(r)&&(typeof t[r]!="object"||n[r]===void 0||Array.isArray(t[r])?n[r]=t[r]:Ai(n[r],t[r]));return n}function pd(n){return typeof n=="number"&&isFinite(n)}function Om(n){return typeof n=="number"&&n%1==0}function yg(n){return typeof n=="string"}function Q0(n){return typeof n=="boolean"}function ta(n){const e=n;if(!e||typeof e!="object")return e;let t,r,i;for(r in t=Array.isArray(e)?[]:{},e)e.hasOwnProperty(r)&&(i=e[r],t[r]=i&&typeof i=="object"?ta(i):i);return t}function $5(n){return n!==null}function Qme(n){return n===null?void 0:n}const EK="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Ky(n,e,t){return e===void 0&&(e=EK),`${t=t!==void 0?`${t} `:""}${n}px ${e}`}class Jme{constructor(e){this.M={S:1,C:5,k:NaN,P:"",T:"",R:"",D:"",I:0,V:0,B:0,A:0,L:0},this.O=e}N(){const e=this.M,t=this.F(),r=this.W();return e.k===t&&e.T===r||(e.k=t,e.T=r,e.P=Ky(t,r),e.A=2.5/12*t,e.I=e.A,e.V=t/12*e.C,e.B=t/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function G1(n){return n<0?0:n>255?255:Math.round(n)||0}function B5(n){return .199*n[0]+.687*n[1]+.114*n[2]}class Zme{constructor(e,t){this.q=new Map,this.j=e,t&&(this.q=t)}Y(e,t){if(e==="transparent")return e;const r=this.K(e),i=r[3];return`rgba(${r[0]}, ${r[1]}, ${r[2]}, ${t*i})`}Z(e){const t=this.K(e);return{G:`rgb(${t[0]}, ${t[1]}, ${t[2]})`,X:B5(t)>160?"black":"white"}}J(e){return B5(this.K(e))}tt(e,t,r){const[i,s,o,a]=this.K(e),[l,c,u,h]=this.K(t),d=[G1(i+r*(l-i)),G1(s+r*(c-s)),G1(o+r*(u-o)),(f=a+r*(h-a),f<=0||f>1?Math.min(Math.max(f,0),1):Math.round(1e4*f)/1e4)];var f;return`rgba(${d[0]}, ${d[1]}, ${d[2]}, ${d[3]})`}K(e){const t=this.q.get(e);if(t)return t;const r=function(o){const a=document.createElement("div");a.style.display="none",document.body.appendChild(a),a.style.color=o;const l=window.getComputedStyle(a).color;return document.body.removeChild(a),l}(e),i=r.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!i){if(this.j.length)for(const o of this.j){const a=o(e);if(a)return this.q.set(e,a),a}throw new Error(`Failed to parse color: ${e}`)}const s=[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),i[4]?parseFloat(i[4]):1];return this.q.set(e,s),s}}class ege{constructor(){this.it=[]}st(e){this.it=e}nt(e,t,r){this.it.forEach(i=>{i.nt(e,t,r)})}}class bg{nt(e,t,r){e.useBitmapCoordinateSpace(i=>this.et(i,t,r))}}class tge extends bg{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:t,verticalPixelRatio:r}){if(this.rt===null||this.rt.lt===null)return;const i=this.rt.lt,s=this.rt,o=Math.max(1,Math.floor(t))%2/2,a=l=>{e.beginPath();for(let c=i.to-1;c>=i.from;--c){const u=s.ot[c],h=Math.round(u._t*t)+o,d=u.ut*r,f=l*r+o;e.moveTo(h,d),e.arc(h,d,f,0,2*Math.PI)}e.fill()};s.ct>0&&(e.fillStyle=s.dt,a(s.ft+s.ct)),e.fillStyle=s.vt,a(s.ft)}}function nge(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const rge={from:0,to:1};class ige{constructor(e,t,r){this.Mt=new ege,this.bt=[],this.St=[],this.xt=!0,this.O=e,this.Ct=t,this.yt=r,this.Mt.st(this.bt)}kt(e){this.Pt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}Pt(){const e=this.yt.Dt();e.length!==this.bt.length&&(this.St=e.map(nge),this.bt=this.St.map(t=>{const r=new tge;return r.ht(t),r}),this.Mt.st(this.bt))}Rt(){const e=this.Ct.N().mode===2||!this.Ct.It(),t=this.yt.Vt(),r=this.Ct.Bt(),i=this.O.Et();this.Pt(),t.forEach((s,o)=>{const a=this.St[o],l=s.At(r),c=s.Lt();!e&&l!==null&&s.It()&&c!==null?(a.vt=l.zt,a.ft=l.ft,a.ct=l.Ot,a.ot[0].gt=l.gt,a.ot[0].ut=s.Ft().Nt(l.gt,c.Wt),a.dt=l.Ht??this.O.Ut(a.ot[0].ut/s.Ft().$t()),a.ot[0].wt=r,a.ot[0]._t=i.qt(r),a.lt=rge):a.lt=null})}}class sge extends bg{constructor(e){super(),this.jt=e}et({context:e,bitmapSize:t,horizontalPixelRatio:r,verticalPixelRatio:i}){if(this.jt===null)return;const s=this.jt.Yt.It,o=this.jt.Kt.It;if(!s&&!o)return;const a=Math.round(this.jt._t*r),l=Math.round(this.jt.ut*i);e.lineCap="butt",s&&a>=0&&(e.lineWidth=Math.floor(this.jt.Yt.ct*r),e.strokeStyle=this.jt.Yt.R,e.fillStyle=this.jt.Yt.R,fd(e,this.jt.Yt.Zt),function(c,u,h,d){c.beginPath();const f=c.lineWidth%2?.5:0;c.moveTo(u+f,h),c.lineTo(u+f,d),c.stroke()}(e,a,0,t.height)),o&&l>=0&&(e.lineWidth=Math.floor(this.jt.Kt.ct*i),e.strokeStyle=this.jt.Kt.R,e.fillStyle=this.jt.Kt.R,fd(e,this.jt.Kt.Zt),CK(e,l,0,t.width))}}class oge{constructor(e,t){this.xt=!0,this.Gt={Yt:{ct:1,Zt:0,R:"",It:!1},Kt:{ct:1,Zt:0,R:"",It:!1},_t:0,ut:0},this.Xt=new sge(this.Gt),this.Jt=e,this.yt=t}kt(){this.xt=!0}Tt(e){return this.xt&&(this.Rt(),this.xt=!1),this.Xt}Rt(){const e=this.Jt.It(),t=this.yt.Qt().N().crosshair,r=this.Gt;if(t.mode===2)return r.Kt.It=!1,void(r.Yt.It=!1);r.Kt.It=e&&this.Jt.ti(this.yt),r.Yt.It=e&&this.Jt.ii(),r.Kt.ct=t.horzLine.width,r.Kt.Zt=t.horzLine.style,r.Kt.R=t.horzLine.color,r.Yt.ct=t.vertLine.width,r.Yt.Zt=t.vertLine.style,r.Yt.R=t.vertLine.color,r._t=this.Jt.si(),r.ut=this.Jt.ni()}}function xx(n,e,t,r,i,s){n.save(),n.globalCompositeOperation="copy",n.fillStyle=s,n.fillRect(e,t,r,i),n.restore()}function z5(n,e,t,r,i,s){n.beginPath(),n.roundRect?n.roundRect(e,t,r,i,s):(n.lineTo(e+r-s[1],t),s[1]!==0&&n.arcTo(e+r,t,e+r,t+s[1],s[1]),n.lineTo(e+r,t+i-s[2]),s[2]!==0&&n.arcTo(e+r,t+i,e+r-s[2],t+i,s[2]),n.lineTo(e+s[3],t+i),s[3]!==0&&n.arcTo(e,t+i,e,t+i-s[3],s[3]),n.lineTo(e,t+s[0]),s[0]!==0&&n.arcTo(e,t,e+s[0],t,s[0]))}function q5(n,e,t,r,i,s,o=0,a=[0,0,0,0],l=""){if(n.save(),!o||!l||l===s)return z5(n,e,t,r,i,a),n.fillStyle=s,n.fill(),void n.restore();const c=o/2;var u;z5(n,e+c,t+c,r-o,i-o,(u=-c,a.map(h=>h===0?h:h+u))),s!=="transparent"&&(n.fillStyle=s,n.fill()),l!=="transparent"&&(n.lineWidth=o,n.strokeStyle=l,n.closePath(),n.stroke()),n.restore()}function TK(n,e,t,r,i,s,o){n.save(),n.globalCompositeOperation="copy";const a=n.createLinearGradient(0,0,0,i);a.addColorStop(0,s),a.addColorStop(1,o),n.fillStyle=a,n.fillRect(e,t,r,i),n.restore()}class U5{constructor(e,t){this.ht(e,t)}ht(e,t){this.jt=e,this.ei=t}$t(e,t){return this.jt.It?e.k+e.A+e.I:0}nt(e,t,r,i){if(!this.jt.It||this.jt.ri.length===0)return;const s=this.jt.R,o=this.ei.G,a=e.useBitmapCoordinateSpace(l=>{const c=l.context;c.font=t.P;const u=this.hi(l,t,r,i),h=u.ai;return u.li?q5(c,h.oi,h._i,h.ui,h.ci,o,h.di,[h.ft,0,0,h.ft],o):q5(c,h.fi,h._i,h.ui,h.ci,o,h.di,[0,h.ft,h.ft,0],o),this.jt.pi&&(c.fillStyle=s,c.fillRect(h.fi,h.mi,h.wi-h.fi,h.gi)),this.jt.Mi&&(c.fillStyle=t.D,c.fillRect(u.li?h.bi-h.di:0,h._i,h.di,h.Si-h._i)),u});e.useMediaCoordinateSpace(({context:l})=>{const c=a.xi;l.font=t.P,l.textAlign=a.li?"right":"left",l.textBaseline="middle",l.fillStyle=s,l.fillText(this.jt.ri,c.Ci,(c._i+c.Si)/2+c.yi)})}hi(e,t,r,i){const{context:s,bitmapSize:o,mediaSize:a,horizontalPixelRatio:l,verticalPixelRatio:c}=e,u=this.jt.pi||!this.jt.ki?t.C:0,h=this.jt.Pi?t.S:0,d=t.A+this.ei.Ti,f=t.I+this.ei.Ri,m=t.V,g=t.B,v=this.jt.ri,y=t.k,b=r.Di(s,v),w=Math.ceil(r.Ii(s,v)),S=y+d+f,_=t.S+m+g+w+u,E=Math.max(1,Math.floor(c));let C=Math.round(S*c);C%2!=E%2&&(C+=1);const T=h>0?Math.max(1,Math.floor(h*l)):0,O=Math.round(_*l),R=Math.round(u*l),D=this.ei.Vi??this.ei.Bi??this.ei.Ei,A=Math.round(D*c)-Math.floor(.5*c),F=Math.floor(A+E/2-C/2),z=F+C,j=i==="right",L=j?a.width-h:h,B=j?o.width-T:T;let $,U,H;return j?($=B-O,U=B-R,H=L-u-m-h):($=B+O,U=B+R,H=L+u+m),{li:j,ai:{_i:F,mi:A,Si:z,ui:O,ci:C,ft:2*l,di:T,oi:$,fi:B,wi:U,gi:E,bi:o.width},xi:{_i:F/c,Si:z/c,Ci:H,yi:b}}}}class wx{constructor(e){this.Ai={Ei:0,G:"#000",Ri:0,Ti:0},this.Li={ri:"",It:!1,pi:!0,ki:!1,Ht:"",R:"#FFF",Mi:!1,Pi:!1},this.zi={ri:"",It:!1,pi:!1,ki:!0,Ht:"",R:"#FFF",Mi:!0,Pi:!0},this.xt=!0,this.Oi=new(e||U5)(this.Li,this.Ai),this.Ni=new(e||U5)(this.zi,this.Ai)}ri(){return this.Fi(),this.Li.ri}Ei(){return this.Fi(),this.Ai.Ei}kt(){this.xt=!0}$t(e,t=!1){return Math.max(this.Oi.$t(e,t),this.Ni.$t(e,t))}Wi(){return this.Ai.Vi??null}Hi(){return this.Ai.Vi??this.Ai.Bi??this.Ei()}Ui(e){this.Ai.Bi=e??void 0}$i(){return this.Fi(),this.Li.It||this.zi.It}qi(){return this.Fi(),this.Li.It}Tt(e){return this.Fi(),this.Li.pi=this.Li.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Oi.ht(this.Li,this.Ai),this.Ni.ht(this.zi,this.Ai),this.Oi}ji(){return this.Fi(),this.Oi.ht(this.Li,this.Ai),this.Ni.ht(this.zi,this.Ai),this.Ni}Fi(){this.xt&&(this.Li.pi=!0,this.zi.pi=!1,this.Yi(this.Li,this.zi,this.Ai))}}class age extends wx{constructor(e,t,r){super(),this.Jt=e,this.Ki=t,this.Zi=r}Yi(e,t,r){if(e.It=!1,this.Jt.N().mode===2)return;const i=this.Jt.N().horzLine;if(!i.labelVisible)return;const s=this.Ki.Lt();if(!this.Jt.It()||this.Ki.Gi()||s===null)return;const o=this.Ki.Xi().Z(i.labelBackgroundColor);r.G=o.G,e.R=o.X;const a=2/12*this.Ki.k();r.Ti=a,r.Ri=a;const l=this.Zi(this.Ki);r.Ei=l.Ei,e.ri=this.Ki.Ji(l.gt,s),e.It=!0}}const lge=/[1-9]/g;class MK{constructor(){this.jt=null}ht(e){this.jt=e}nt(e,t){if(this.jt===null||this.jt.It===!1||this.jt.ri.length===0)return;const r=e.useMediaCoordinateSpace(({context:d})=>(d.font=t.P,Math.round(t.Qi.Ii(d,Se(this.jt).ri,lge))));if(r<=0)return;const i=t.ts,s=r+2*i,o=s/2,a=this.jt.ss;let l=this.jt.Ei,c=Math.floor(l-o)+.5;c<0?(l+=Math.abs(0-c),c=Math.floor(l-o)+.5):c+s>a&&(l-=Math.abs(a-(c+s)),c=Math.floor(l-o)+.5);const u=c+s,h=Math.ceil(0+t.S+t.C+t.A+t.k+t.I);e.useBitmapCoordinateSpace(({context:d,horizontalPixelRatio:f,verticalPixelRatio:m})=>{const g=Se(this.jt);d.fillStyle=g.G;const v=Math.round(c*f),y=Math.round(0*m),b=Math.round(u*f),w=Math.round(h*m),S=Math.round(2*f);if(d.beginPath(),d.moveTo(v,y),d.lineTo(v,w-S),d.arcTo(v,w,v+S,w,S),d.lineTo(b-S,w),d.arcTo(b,w,b,w-S,S),d.lineTo(b,y),d.fill(),g.pi){const _=Math.round(g.Ei*f),E=y,C=Math.round((E+t.C)*m);d.fillStyle=g.R;const T=Math.max(1,Math.floor(f)),O=Math.floor(.5*f);d.fillRect(_-O,E,T,C-E)}}),e.useMediaCoordinateSpace(({context:d})=>{const f=Se(this.jt),m=0+t.S+t.C+t.A+t.k/2;d.font=t.P,d.textAlign="left",d.textBaseline="middle",d.fillStyle=f.R;const g=t.Qi.Di(d,"Apr0");d.translate(c+i,m+g),d.fillText(f.ri,0,0)})}}class cge{constructor(e,t,r){this.xt=!0,this.Xt=new MK,this.Gt={It:!1,G:"#4c525e",R:"white",ri:"",ss:0,Ei:NaN,pi:!0},this.Ct=e,this.ns=t,this.Zi=r}kt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Xt.ht(this.Gt),this.Xt}Rt(){const e=this.Gt;if(e.It=!1,this.Ct.N().mode===2)return;const t=this.Ct.N().vertLine;if(!t.labelVisible)return;const r=this.ns.Et();if(r.Gi())return;e.ss=r.ss();const i=this.Zi();if(i===null)return;e.Ei=i.Ei;const s=r.es(this.Ct.Bt());e.ri=r.rs(Se(s)),e.It=!0;const o=this.ns.Xi().Z(t.labelBackgroundColor);e.G=o.G,e.R=o.X,e.pi=r.N().ticksVisible}}class IK{constructor(){this.hs=null,this.ls=0}_s(){return this.ls}us(e){this.ls=e}Ft(){return this.hs}cs(e){this.hs=e}ds(e){return[]}fs(){return[]}It(){return!0}}var W5;(function(n){n[n.Normal=0]="Normal",n[n.Magnet=1]="Magnet",n[n.Hidden=2]="Hidden",n[n.MagnetOHLC=3]="MagnetOHLC"})(W5||(W5={}));class uge extends IK{constructor(e,t){super(),this.yt=null,this.ps=NaN,this.vs=0,this.ws=!1,this.gs=new Map,this.Ms=!1,this.bs=new WeakMap,this.Ss=new WeakMap,this.xs=NaN,this.Cs=NaN,this.ys=NaN,this.ks=NaN,this.ns=e,this.Ps=t,this.Ts=((i,s)=>o=>{const a=s(),l=i();if(o===Se(this.yt).Rs())return{gt:l,Ei:a};{const c=Se(o.Lt());return{gt:o.Ds(a,c),Ei:a}}})(()=>this.ps,()=>this.Cs);const r=((i,s)=>()=>{const o=this.ns.Et().Is(i()),a=s();return o&&Number.isFinite(a)?{wt:o,Ei:a}:null})(()=>this.vs,()=>this.si());this.Vs=new cge(this,e,r)}N(){return this.Ps}Bs(e,t){this.ys=e,this.ks=t}Es(){this.ys=NaN,this.ks=NaN}As(){return this.ys}Ls(){return this.ks}zs(e,t,r){this.Ms||(this.Ms=!0),this.ws=!0,this.Os(e,t,r)}Bt(){return this.vs}si(){return this.xs}ni(){return this.Cs}It(){return this.ws}Ns(){this.ws=!1,this.Fs(),this.ps=NaN,this.xs=NaN,this.Cs=NaN,this.yt=null,this.Es(),this.Ws()}Hs(e){if(!this.Ps.doNotSnapToHiddenSeriesIndices)return e;const t=this.ns,r=t.Et();let i=null,s=null;for(const c of t.Us()){const u=c.qs().$s(e,-1);if(u){if(u.js===e)return e;(i===null||u.js>i)&&(i=u.js)}const h=c.qs().$s(e,1);if(h){if(h.js===e)return e;(s===null||h.js<s)&&(s=h.js)}}const o=[i,s].filter($5);if(o.length===0)return e;const a=r.qt(e),l=o.map(c=>Math.abs(a-r.qt(c)));return o[l.indexOf(Math.min(...l))]}Ys(e){let t=this.bs.get(e);t||(t=new oge(this,e),this.bs.set(e,t));let r=this.Ss.get(e);return r||(r=new ige(this.ns,this,e),this.Ss.set(e,r)),[t,r]}ti(e){return e===this.yt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ks(e,t){this.ws&&this.yt===e||this.gs.clear();const r=[];return this.yt===e&&r.push(this.Zs(this.gs,t,this.Ts)),r}fs(){return this.ws?[this.Vs]:[]}Gs(){return this.yt}Ws(){this.ns.Xs().forEach(e=>{var t,r;(t=this.bs.get(e))==null||t.kt(),(r=this.Ss.get(e))==null||r.kt()}),this.gs.forEach(e=>e.kt()),this.Vs.kt()}Js(e){return e&&!e.Rs().Gi()?e.Rs():null}Os(e,t,r){this.Qs(e,t,r)&&this.Ws()}Qs(e,t,r){const i=this.xs,s=this.Cs,o=this.ps,a=this.vs,l=this.yt,c=this.Js(r);this.vs=e,this.xs=isNaN(e)?NaN:this.ns.Et().qt(e),this.yt=r;const u=c!==null?c.Lt():null;return c!==null&&u!==null?(this.ps=t,this.Cs=c.Nt(t,u)):(this.ps=NaN,this.Cs=NaN),i!==this.xs||s!==this.Cs||a!==this.vs||o!==this.ps||l!==this.yt}Fs(){const e=this.ns.tn().map(r=>r.qs().sn()).filter($5),t=e.length===0?null:Math.max(...e);this.vs=t!==null?t:NaN}Zs(e,t,r){let i=e.get(t);return i===void 0&&(i=new age(this,t,r),e.set(t,i)),i}}function _x(n){return n==="left"||n==="right"}class xr{constructor(e){this.nn=new Map,this.en=[],this.rn=e}hn(e,t){const r=function(i,s){return i===void 0?s:{an:Math.max(i.an,s.an),ln:i.ln||s.ln}}(this.nn.get(e),t);this.nn.set(e,r)}_n(){return this.rn}un(e){const t=this.nn.get(e);return t===void 0?{an:this.rn}:{an:Math.max(this.rn,t.an),ln:t.ln}}cn(){this.dn(),this.en=[{fn:0}]}pn(e){this.dn(),this.en=[{fn:1,Wt:e}]}vn(e){this.mn(),this.en.push({fn:5,Wt:e})}dn(){this.mn(),this.en.push({fn:6})}wn(){this.dn(),this.en=[{fn:4}]}gn(e){this.dn(),this.en.push({fn:2,Wt:e})}Mn(e){this.dn(),this.en.push({fn:3,Wt:e})}bn(){return this.en}Sn(e){for(const t of e.en)this.xn(t);this.rn=Math.max(this.rn,e.rn),e.nn.forEach((t,r)=>{this.hn(r,t)})}static Cn(){return new xr(2)}static yn(){return new xr(3)}xn(e){switch(e.fn){case 0:this.cn();break;case 1:this.pn(e.Wt);break;case 2:this.gn(e.Wt);break;case 3:this.Mn(e.Wt);break;case 4:this.wn();break;case 5:this.vn(e.Wt);break;case 6:this.mn()}}mn(){const e=this.en.findIndex(t=>t.fn===5);e!==-1&&this.en.splice(e,1)}}class PK{formatTickmarks(e){return e.map(t=>this.format(t))}}const H5=".";function na(n,e){if(!pd(n))return"n/a";if(!Om(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?n.toString():("0000000000000000"+n.toString()).slice(-e)}let Sx=class extends PK{constructor(e,t){if(super(),t||(t=1),pd(e)&&Om(e)||(e=100),e<0)throw new TypeError("invalid base");this.Ki=e,this.kn=t,this.Pn()}format(e){const t=e<0?"":"";return e=Math.abs(e),t+this.Tn(e)}Pn(){if(this.Rn=0,this.Ki>0&&this.kn>0){let e=this.Ki;for(;e>1;)e/=10,this.Rn++}}Tn(e){const t=this.Ki/this.kn;let r=Math.floor(e),i="";const s=this.Rn!==void 0?this.Rn:NaN;if(t>1){let o=+(Math.round(e*t)-r*t).toFixed(this.Rn);o>=t&&(o-=t,r+=1),i=H5+na(+o.toFixed(this.Rn)*this.kn,s)}else r=Math.round(r*t)/t,s>0&&(i=H5+na(0,s));return r.toFixed(0)+i}};class OK extends Sx{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class hge extends PK{constructor(e){super(),this.Dn=e}format(e){let t="";return e<0&&(t="-",e=-e),e<995?t+this.In(e):e<999995?t+this.In(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),t+this.In(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),t+this.In(e/1e9)+"B")}In(e){let t;const r=Math.pow(10,this.Dn);return t=(e=Math.round(e*r)/r)>=1e-15&&e<1?e.toFixed(this.Dn).replace(/\.?0+$/,""):String(e),t.replace(/(\.[1-9]*)0+$/,(i,s)=>s)}}const dge=/[2-9]/g;class Xy{constructor(e=50){this.Vn=0,this.Bn=1,this.En=1,this.An={},this.Ln=new Map,this.zn=e}On(){this.Vn=0,this.Ln.clear(),this.Bn=1,this.En=1,this.An={}}Ii(e,t,r){return this.Nn(e,t,r).width}Di(e,t,r){const i=this.Nn(e,t,r);return((i.actualBoundingBoxAscent||0)-(i.actualBoundingBoxDescent||0))/2}Nn(e,t,r){const i=r||dge,s=String(t).replace(i,"0");if(this.Ln.has(s))return mi(this.Ln.get(s)).Fn;if(this.Vn===this.zn){const a=this.An[this.En];delete this.An[this.En],this.Ln.delete(a),this.En++,this.Vn--}e.save(),e.textBaseline="middle";const o=e.measureText(s);return e.restore(),o.width===0&&t.length||(this.Ln.set(s,{Fn:o,Wn:this.Bn}),this.An[this.Bn]=s,this.Vn++,this.Bn++),o}}class fge{constructor(e){this.Hn=null,this.M=null,this.Un="right",this.$n=e}qn(e,t,r){this.Hn=e,this.M=t,this.Un=r}nt(e){this.M!==null&&this.Hn!==null&&this.Hn.nt(e,this.M,this.$n,this.Un)}}class RK{constructor(e,t,r){this.jn=e,this.$n=new Xy(50),this.Yn=t,this.O=r,this.F=-1,this.Xt=new fge(this.$n)}Tt(){const e=this.O.Kn(this.Yn);if(e===null)return null;const t=e.Zn(this.Yn)?e.Gn():this.Yn.Ft();if(t===null)return null;const r=e.Xn(t);if(r==="overlay")return null;const i=this.O.Jn();return i.k!==this.F&&(this.F=i.k,this.$n.On()),this.Xt.qn(this.jn.ji(),i,r),this.Xt}}let pge=class extends bg{constructor(){super(...arguments),this.jt=null}ht(e){this.jt=e}Qn(e,t){var o;if(!((o=this.jt)!=null&&o.It))return null;const{ut:r,ct:i,te:s}=this.jt;return t>=r-i-7&&t<=r+i+7?{ie:this.jt,te:s}:null}et({context:e,bitmapSize:t,horizontalPixelRatio:r,verticalPixelRatio:i}){if(this.jt===null||this.jt.It===!1)return;const s=Math.round(this.jt.ut*i);s<0||s>t.height||(e.lineCap="butt",e.strokeStyle=this.jt.R,e.lineWidth=Math.floor(this.jt.ct*r),fd(e,this.jt.Zt),CK(e,s,0,t.width))}};class dR{constructor(e){this.se={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Zt:0,It:!1},this.ne=new pge,this.xt=!0,this.ee=e,this.re=e.Qt(),this.ne.ht(this.se)}kt(){this.xt=!0}Tt(){return this.ee.It()?(this.xt&&(this.he(),this.xt=!1),this.ne):null}}class mge extends dR{constructor(e){super(e)}he(){this.se.It=!1;const e=this.ee.Ft(),t=e.ae().ae;if(t!==2&&t!==3)return;const r=this.ee.N();if(!r.baseLineVisible||!this.ee.It())return;const i=this.ee.Lt();i!==null&&(this.se.It=!0,this.se.ut=e.Nt(i.Wt,i.Wt),this.se.R=r.baseLineColor,this.se.ct=r.baseLineWidth,this.se.Zt=r.baseLineStyle)}}class gge extends bg{constructor(){super(...arguments),this.jt=null}ht(e){this.jt=e}le(){return this.jt}et({context:e,horizontalPixelRatio:t,verticalPixelRatio:r}){const i=this.jt;if(i===null)return;const s=Math.max(1,Math.floor(t)),o=s%2/2,a=Math.round(i.oe.x*t)+o,l=i.oe.y*r;e.fillStyle=i._e,e.beginPath();const c=Math.max(2,1.5*i.ue)*t;e.arc(a,l,c,0,2*Math.PI,!1),e.fill(),e.fillStyle=i.ce,e.beginPath(),e.arc(a,l,i.ft*t,0,2*Math.PI,!1),e.fill(),e.lineWidth=s,e.strokeStyle=i.de,e.beginPath(),e.arc(a,l,i.ft*t+s/2,0,2*Math.PI,!1),e.stroke()}}const vge=[{fe:0,pe:.25,ve:4,me:10,we:.25,ge:0,Me:.4,be:.8},{fe:.25,pe:.525,ve:10,me:14,we:0,ge:0,Me:.8,be:0},{fe:.525,pe:1,ve:14,me:14,we:0,ge:0,Me:0,be:0}];class yge{constructor(e){this.Xt=new gge,this.xt=!0,this.Se=!0,this.xe=performance.now(),this.Ce=this.xe-1,this.ye=e}ke(){this.Ce=this.xe-1,this.kt()}Pe(){if(this.kt(),this.ye.N().lastPriceAnimation===2){const e=performance.now(),t=this.Ce-e;if(t>0)return void(t<650&&(this.Ce+=2600));this.xe=e,this.Ce=e+2600}}kt(){this.xt=!0}Te(){this.Se=!0}It(){return this.ye.N().lastPriceAnimation!==0}Re(){switch(this.ye.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Ce}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.Se=!1):this.Se&&(this.De(),this.Se=!1),this.Xt}Rt(){this.Xt.ht(null);const e=this.ye.Qt().Et(),t=e.Ie(),r=this.ye.Lt();if(t===null||r===null)return;const i=this.ye.Ve(!0);if(i.Be||!t.Ee(i.js))return;const s={x:e.qt(i.js),y:this.ye.Ft().Nt(i.gt,r.Wt)},o=i.R,a=this.ye.N().lineWidth,l=this.Ae(this.Le(),o);this.Xt.ht({_e:o,ue:a,ce:l.ce,de:l.de,ft:l.ft,oe:s})}De(){const e=this.Xt.le();if(e!==null){const t=this.Ae(this.Le(),e._e);e.ce=t.ce,e.de=t.de,e.ft=t.ft}}Le(){return this.Re()?performance.now()-this.xe:2599}ze(e,t,r,i){const s=r+(i-r)*t;return this.ye.Qt().Xi().Y(e,s)}Ae(e,t){const r=e%2600/2600;let i;for(const c of vge)if(r>=c.fe&&r<=c.pe){i=c;break}wr(i!==void 0,"Last price animation internal logic error");const s=(r-i.fe)/(i.pe-i.fe);return{ce:this.ze(t,s,i.we,i.ge),de:this.ze(t,s,i.Me,i.be),ft:(o=s,a=i.ve,l=i.me,a+(l-a)*o)};var o,a,l}}class bge extends dR{constructor(e){super(e)}he(){const e=this.se;e.It=!1;const t=this.ee.N();if(!t.priceLineVisible||!this.ee.It())return;const r=this.ee.Ve(t.priceLineSource===0);r.Be||(e.It=!0,e.ut=r.Ei,e.R=this.ee.Oe(r.R),e.ct=t.priceLineWidth,e.Zt=t.priceLineStyle)}}let xge=class extends wx{constructor(e){super(),this.Jt=e}Yi(e,t,r){e.It=!1,t.It=!1;const i=this.Jt;if(!i.It())return;const s=i.N(),o=s.lastValueVisible,a=i.Ne()!=="",l=s.seriesLastValueMode===0,c=i.Ve(!1);if(c.Be)return;o&&(e.ri=this.Fe(c,o,l),e.It=e.ri.length!==0),(a||l)&&(t.ri=this.We(c,o,a,l),t.It=t.ri.length>0);const u=i.Oe(c.R),h=this.Jt.Qt().Xi().Z(u);r.G=h.G,r.Ei=c.Ei,t.Ht=i.Qt().Ut(c.Ei/i.Ft().$t()),e.Ht=u,e.R=h.X,t.R=h.X}We(e,t,r,i){let s="";const o=this.Jt.Ne();return r&&o.length!==0&&(s+=`${o} `),t&&i&&(s+=this.Jt.Ft().He()?e.Ue:e.$e),s.trim()}Fe(e,t,r){return t?r?this.Jt.Ft().He()?e.$e:e.Ue:e.ri:""}};function Y5(n,e,t,r){const i=Number.isFinite(e),s=Number.isFinite(t);return i&&s?n(e,t):i||s?i?e:t:r}class Gr{constructor(e,t){this.qe=e,this.je=t}Ye(e){return e!==null&&this.qe===e.qe&&this.je===e.je}Ke(){return new Gr(this.qe,this.je)}Ze(){return this.qe}Ge(){return this.je}Xe(){return this.je-this.qe}Gi(){return this.je===this.qe||Number.isNaN(this.je)||Number.isNaN(this.qe)}Sn(e){return e===null?this:new Gr(Y5(Math.min,this.Ze(),e.Ze(),-1/0),Y5(Math.max,this.Ge(),e.Ge(),1/0))}Je(e){if(!pd(e)||this.je-this.qe===0)return;const t=.5*(this.je+this.qe);let r=this.je-t,i=this.qe-t;r*=e,i*=e,this.je=t+r,this.qe=t+i}Qe(e){pd(e)&&(this.je+=e,this.qe+=e)}tr(){return{minValue:this.qe,maxValue:this.je}}static ir(e){return e===null?null:new Gr(e.minValue,e.maxValue)}}class Qy{constructor(e,t){this.sr=e,this.nr=t||null}er(){return this.sr}rr(){return this.nr}tr(){return{priceRange:this.sr===null?null:this.sr.tr(),margins:this.nr||void 0}}static ir(e){return e===null?null:new Qy(Gr.ir(e.priceRange),e.margins)}}const wge=[2,4,8,16,32,64,128,256,512],_ge="Custom series with conflation reducer must have a priceValueBuilder method";class Sge extends dR{constructor(e,t){super(e),this.hr=t}he(){const e=this.se;e.It=!1;const t=this.hr.N();if(!this.ee.It()||!t.lineVisible)return;const r=this.hr.ar();r!==null&&(e.It=!0,e.ut=r,e.R=t.color,e.ct=t.lineWidth,e.Zt=t.lineStyle,e.te=this.hr.N().id)}}class kge extends wx{constructor(e,t){super(),this.ye=e,this.hr=t}Yi(e,t,r){e.It=!1,t.It=!1;const i=this.hr.N(),s=i.axisLabelVisible,o=i.title!=="",a=this.ye;if(!s||!a.It())return;const l=this.hr.ar();if(l===null)return;o&&(t.ri=i.title,t.It=!0),t.Ht=a.Qt().Ut(l/a.Ft().$t()),e.ri=this.lr(i.price),e.It=!0;const c=this.ye.Qt().Xi().Z(i.axisLabelColor||i.color);r.G=c.G;const u=i.axisLabelTextColor||c.X;e.R=u,t.R=u,r.Ei=l}lr(e){const t=this.ye.Lt();return t===null?"":this.ye.Ft().Ji(e,t.Wt)}}class Cge{constructor(e,t){this.ye=e,this.Ps=t,this._r=new Sge(e,this),this.jn=new kge(e,this),this.ur=new RK(this.jn,e,e.Qt())}cr(e){Ai(this.Ps,e),this.kt(),this.ye.Qt().dr()}N(){return this.Ps}pr(){return this._r}vr(){return this.ur}mr(){return this.jn}kt(){this._r.kt(),this.jn.kt()}ar(){const e=this.ye,t=e.Ft();if(e.Qt().Et().Gi()||t.Gi())return null;const r=e.Lt();return r===null?null:t.Nt(this.Ps.price,r.Wt)}}class Ege{constructor(){this.wr=new WeakMap}gr(e,t,r){const i=1/t*r;if(e>=i)return 1;const s=i/e,o=Math.pow(2,Math.floor(Math.log2(s)));return Math.min(o,512)}Mr(e,t,r,i=!1,s){if(e.length===0||t<=1)return e;const o=this.br(t);if(o<=1)return e;const a=this.Sr(e);let l=a.Cr.get(o);return l!==void 0||(l=this.yr(e,o,r,i,s,a.Cr),a.Cr.set(o,l)),l}kr(e,t,r,i,s=!1,o){if(r<1||e.length===0)return e;const a=this.Sr(e),l=a.Cr.get(r);if(!l)return this.Mr(e,r,i,s,o);const c=this.Pr(e,t,r,l,s,i,o);return a.Cr.set(r,c),c}br(e){if(e<=2)return 2;for(const t of wge)if(e<=t)return t;return 512}Tr(e){if(e.length===0)return 0;const t=e[0],r=e[e.length-1];return 31*e.length+17*t.js+13*r.js}yr(e,t,r,i=!1,s,o=new Map){if(t===2)return this.Rr(e,2,r,i,s);const a=t/2;let l=o.get(a);return l||(l=this.yr(e,a,r,i,s,o),o.set(a,l)),this.Dr(l,r,i,s)}Rr(e,t,r,i=!1,s){const o=this.Ir(e,t,r,i,s);return this.Vr(o,i)}Dr(e,t,r=!1,i){const s=this.Ir(e,2,t,r,i);return this.Vr(s,r)}Ir(e,t,r,i=!1,s){const o=[];for(let a=0;a<e.length;a+=t)if(e.length-a>=t){const l=this.Br(e[a],e[a+1],r,i,s);l.Er=!1,o.push(l)}else if(o.length===0)o.push(this.Ar(e[a],!0));else{const l=o[o.length-1];o[o.length-1]=this.Lr(l,e[a],r,i,s)}return o}zr(e,t){return(e??1)+(t??1)}Br(e,t,r,i=!1,s){if(!i||!r||!s){const c=e.Wt[1]>t.Wt[1]?e.Wt[1]:t.Wt[1],u=e.Wt[2]<t.Wt[2]?e.Wt[2]:t.Wt[2];return{Or:e.js,Nr:t.js,Fr:e.wt,Wr:t.wt,Hr:e.Wt[0],Ur:c,$r:u,qr:t.Wt[3],jr:this.zr(e.jr,t.jr),Yr:void 0,Er:!1}}const o=r(this.Kr(e,s),this.Kr(t,s)),a=s(o),l=a.length?a[a.length-1]:0;return{Or:e.js,Nr:t.js,Fr:e.wt,Wr:t.wt,Hr:e.Wt[0],Ur:Math.max(e.Wt[1],l),$r:Math.min(e.Wt[2],l),qr:l,jr:this.zr(e.jr,t.jr),Yr:o,Er:!1}}Lr(e,t,r,i=!1,s){if(!i||!r||!s)return{Or:e.Or,Nr:t.js,Fr:e.Fr,Wr:t.wt,Hr:e.Hr,Ur:e.Ur>t.Wt[1]?e.Ur:t.Wt[1],$r:e.$r<t.Wt[2]?e.$r:t.Wt[2],qr:t.Wt[3],jr:e.jr+(t.jr??1),Yr:e.Yr,Er:!1};const o=e.Yr,a=this.Kr(t,s),l=o?{data:o,index:e.Or,originalTime:e.Fr,time:e.Fr,priceValues:s(o)}:null,c=l?r(l,a):a.data,u=l?s(c):a.priceValues,h=u.length?u[u.length-1]:0;return{Or:e.Or,Nr:t.js,Fr:e.Fr,Wr:t.wt,Hr:e.Hr,Ur:Math.max(e.Ur,h),$r:Math.min(e.$r,h),qr:h,jr:e.jr+(t.jr??1),Yr:c,Er:!1}}Zr(e,t,r,i,s,o,a=!1,l){const c=t===i?s:e[t];if(r-t==1)return this.Ar(c,!0);const u=t+1===i?s:e[t+1];let h=this.Br(c,u,o,a,l);for(let d=t+2;d<r;d++){const f=d===i?s:e[d];h=this.Lr(h,f,o,a,l)}return h}Kr(e,t){const r=e.le??{};return{data:e.le,index:e.js,originalTime:e.Gr,time:e.wt,priceValues:t(r)}}Xr(e,t=!1){const r=t===!0,i=!!e.Yr;return{js:e.Or,wt:e.Fr,Gr:e.Fr,Wt:[r?e.qr:e.Hr,e.Ur,e.$r,e.qr],jr:e.jr,le:r?i?e.Yr:{wt:e.Fr}:void 0}}Vr(e,t=!1){return e.map(r=>this.Xr(r,t))}Pr(e,t,r,i,s=!1,o,a){if(i.length===0)return i;const l=e.length-1,c=Math.floor(l/r)*r;if(Math.min(c+r,e.length)-c<r&&e.length>r){const u=e.slice();return u[u.length-1]=t,this.Mr(u,r,o,s,a)}if(Math.floor((l-1)/r)===Math.floor(l/r)||i.length===1){const u=Math.min(c+r,e.length),h=u-c;if(h<=0)return i;const d=h===1?this.Ar(c===l?t:e[c],!0):this.Zr(e,c,u,l,t,o,s,a);return i[i.length-1]=this.Xr(d,s),i}{const u=e.slice();return u[u.length-1]=t,this.Mr(u,r,o,s,a)}}Ar(e,t=!1){return{Or:e.js,Nr:e.js,Fr:e.wt,Wr:e.wt,Hr:e.Wt[0],Ur:e.Wt[1],$r:e.Wt[2],qr:e.Wt[3],jr:e.jr??1,Yr:e.le,Er:t}}Sr(e){const t=this.Jr(e),r=this.Tr(e);return t.Qr!==r&&(t.Cr.clear(),t.Qr=r),t}Jr(e){let t=this.wr.get(e);return t===void 0&&(t={Qr:this.Tr(e),Cr:new Map},this.wr.set(e,t)),t}}class Tge extends IK{constructor(e){super(),this.ns=e}Qt(){return this.ns}}const Mge={Bar:(n,e,t,r)=>{const i=e.upColor,s=e.downColor,o=Se(n(t,r)),a=cl(o.Wt[0])<=cl(o.Wt[3]);return{th:o.R??(a?i:s)}},Candlestick:(n,e,t,r)=>{const i=e.upColor,s=e.downColor,o=e.borderUpColor,a=e.borderDownColor,l=e.wickUpColor,c=e.wickDownColor,u=Se(n(t,r)),h=cl(u.Wt[0])<=cl(u.Wt[3]);return{th:u.R??(h?i:s),ih:u.Ht??(h?o:a),sh:u.nh??(h?l:c)}},Custom:(n,e,t,r)=>({th:Se(n(t,r)).R??e.color}),Area:(n,e,t,r)=>{const i=Se(n(t,r));return{th:i.vt??e.lineColor,vt:i.vt??e.lineColor,eh:i.eh??e.topColor,rh:i.rh??e.bottomColor}},Baseline:(n,e,t,r)=>{const i=Se(n(t,r));return{th:i.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,hh:i.hh??e.topLineColor,ah:i.ah??e.bottomLineColor,oh:i.oh??e.topFillColor1,_h:i._h??e.topFillColor2,uh:i.uh??e.bottomFillColor1,dh:i.dh??e.bottomFillColor2}},Line:(n,e,t,r)=>{const i=Se(n(t,r));return{th:i.R??e.color,vt:i.R??e.color}},Histogram:(n,e,t,r)=>({th:Se(n(t,r)).R??e.color})};class Ige{constructor(e){this.fh=(t,r)=>r!==void 0?r.Wt:this.ye.qs().ph(t),this.ye=e,this.mh=Mge[e.wh()]}gh(e,t){return this.mh(this.fh,this.ye.N(),e,t)}}function DK(n,e,t,r,i=0,s=e.length){let o=s-i;for(;0<o;){const a=o>>1,l=i+a;r(e[l],t)===n?(i=l+1,o-=a+1):o=a}return i}const md=DK.bind(null,!0),NK=DK.bind(null,!1);var G5;(function(n){n[n.NearestLeft=-1]="NearestLeft",n[n.None=0]="None",n[n.NearestRight=1]="NearestRight"})(G5||(G5={}));const ja=30;class Pge{constructor(){this.Mh=[],this.bh=new Map,this.Sh=new Map,this.xh=[]}Ch(){return this.yh()>0?this.Mh[this.Mh.length-1]:null}kh(){return this.yh()>0?this.Ph(0):null}sn(){return this.yh()>0?this.Ph(this.Mh.length-1):null}yh(){return this.Mh.length}Gi(){return this.yh()===0}Ee(e){return this.Th(e,0)!==null}ph(e){return this.$s(e)}$s(e,t=0){const r=this.Th(e,t);return r===null?null:{...this.Rh(r),js:this.Ph(r)}}Dh(){return this.Mh}Ih(e,t,r){if(this.Gi())return null;let i=null;for(const s of r)i=J0(i,this.Vh(e,t,s));return i}ht(e){this.Sh.clear(),this.bh.clear(),this.Mh=e,this.xh=e.map(t=>t.js)}Bh(){return this.xh}Ph(e){return this.Mh[e].js}Rh(e){return this.Mh[e]}Th(e,t){const r=this.Eh(e);if(r===null&&t!==0)switch(t){case-1:return this.Ah(e);case 1:return this.Lh(e);default:throw new TypeError("Unknown search mode")}return r}Ah(e){let t=this.zh(e);return t>0&&(t-=1),t!==this.Mh.length&&this.Ph(t)<e?t:null}Lh(e){const t=this.Oh(e);return t!==this.Mh.length&&e<this.Ph(t)?t:null}Eh(e){const t=this.zh(e);return t===this.Mh.length||e<this.Mh[t].js?null:t}zh(e){return md(this.Mh,e,(t,r)=>t.js<r)}Oh(e){return NK(this.Mh,e,(t,r)=>t.js>r)}Nh(e,t,r){let i=null;for(let s=e;s<t;s++){const o=this.Mh[s].Wt[r];Number.isNaN(o)||(i===null?i={Fh:o,Wh:o}:(o<i.Fh&&(i.Fh=o),o>i.Wh&&(i.Wh=o)))}return i}Vh(e,t,r){if(this.Gi())return null;let i=null;const s=Se(this.kh()),o=Se(this.sn()),a=Math.max(e,s),l=Math.min(t,o),c=Math.ceil(a/ja)*ja,u=Math.max(c,Math.floor(l/ja)*ja);{const d=this.zh(a),f=this.Oh(Math.min(l,c,t));i=J0(i,this.Nh(d,f,r))}let h=this.bh.get(r);h===void 0&&(h=new Map,this.bh.set(r,h));for(let d=Math.max(c+1,a);d<u;d+=ja){const f=Math.floor(d/ja);let m=h.get(f);if(m===void 0){const g=this.zh(f*ja),v=this.Oh((f+1)*ja-1);m=this.Nh(g,v,r),h.set(f,m)}i=J0(i,m)}{const d=this.zh(u),f=this.Oh(l);i=J0(i,this.Nh(d,f,r))}return i}}function J0(n,e){return n===null?e:e===null?n:{Fh:Math.min(n.Fh,e.Fh),Wh:Math.max(n.Wh,e.Wh)}}function V1(){return new Pge}const Jy={setLineStyle:fd};class Oge{constructor(e){this.Hh=e}nt(e,t,r){this.Hh.draw(e,Jy)}Uh(e,t,r){var i,s;(s=(i=this.Hh).drawBackground)==null||s.call(i,e,Jy)}}class Rge{constructor(e){this.Ln=null,this.$h=e}Tt(){var r;const e=this.$h.renderer();if(e===null)return null;if(((r=this.Ln)==null?void 0:r.qh)===e)return this.Ln.jh;const t=new Oge(e);return this.Ln={qh:e,jh:t},t}Yh(){var e,t;return((t=(e=this.$h).zOrder)==null?void 0:t.call(e))??"normal"}}class AK{constructor(e){this.Kh=null,this.Zh=e}Gh(){return this.Zh}Ws(){var e,t;(t=(e=this.Zh).updateAllViews)==null||t.call(e)}Ys(){var r,i,s;const e=((i=(r=this.Zh).paneViews)==null?void 0:i.call(r))??[];if(((s=this.Kh)==null?void 0:s.qh)===e)return this.Kh.jh;const t=e.map(o=>new Rge(o));return this.Kh={qh:e,jh:t},t}Qn(e,t){var r,i;return((i=(r=this.Zh).hitTest)==null?void 0:i.call(r,e,t))??null}}let Dge=class extends AK{ds(){return[]}};class Nge{constructor(e){this.Hh=e}nt(e,t,r){this.Hh.draw(e,Jy)}Uh(e,t,r){var i,s;(s=(i=this.Hh).drawBackground)==null||s.call(i,e,Jy)}}class V5{constructor(e){this.Ln=null,this.$h=e}Tt(){var r;const e=this.$h.renderer();if(e===null)return null;if(((r=this.Ln)==null?void 0:r.qh)===e)return this.Ln.jh;const t=new Nge(e);return this.Ln={qh:e,jh:t},t}Yh(){var e,t;return((t=(e=this.$h).zOrder)==null?void 0:t.call(e))??"normal"}}function LK(n){var e,t,r;return{ri:n.text(),Ei:n.coordinate(),Vi:(e=n.fixedCoordinate)==null?void 0:e.call(n),R:n.textColor(),G:n.backColor(),It:((t=n.visible)==null?void 0:t.call(n))??!0,pi:((r=n.tickVisible)==null?void 0:r.call(n))??!0}}class Age{constructor(e,t){this.Xt=new MK,this.Xh=e,this.Jh=t}Tt(){return this.Xt.ht({ss:this.Jh.ss(),...LK(this.Xh)}),this.Xt}}class Lge extends wx{constructor(e,t){super(),this.Xh=e,this.Ki=t}Yi(e,t,r){const i=LK(this.Xh);r.G=i.G,e.R=i.R;const s=2/12*this.Ki.k();r.Ti=s,r.Ri=s,r.Ei=i.Ei,r.Vi=i.Vi,e.ri=i.ri,e.It=i.It,e.pi=i.pi}}class Fge extends AK{constructor(e,t){super(e),this.Qh=null,this.ta=null,this.ia=null,this.sa=null,this.ye=t}fs(){var i,s,o;const e=((s=(i=this.Zh).timeAxisViews)==null?void 0:s.call(i))??[];if(((o=this.Qh)==null?void 0:o.qh)===e)return this.Qh.jh;const t=this.ye.Qt().Et(),r=e.map(a=>new Age(a,t));return this.Qh={qh:e,jh:r},r}Ks(){var i,s,o;const e=((s=(i=this.Zh).priceAxisViews)==null?void 0:s.call(i))??[];if(((o=this.ta)==null?void 0:o.qh)===e)return this.ta.jh;const t=this.ye.Ft(),r=e.map(a=>new Lge(a,t));return this.ta={qh:e,jh:r},r}na(){var r,i,s;const e=((i=(r=this.Zh).priceAxisPaneViews)==null?void 0:i.call(r))??[];if(((s=this.ia)==null?void 0:s.qh)===e)return this.ia.jh;const t=e.map(o=>new V5(o));return this.ia={qh:e,jh:t},t}ea(){var r,i,s;const e=((i=(r=this.Zh).timeAxisPaneViews)==null?void 0:i.call(r))??[];if(((s=this.sa)==null?void 0:s.qh)===e)return this.sa.jh;const t=e.map(o=>new V5(o));return this.sa={qh:e,jh:t},t}ra(e,t){var r,i;return((i=(r=this.Zh).autoscaleInfo)==null?void 0:i.call(r,e,t))??null}}function K1(n,e,t,r){n.forEach(i=>{e(i).forEach(s=>{s.Yh()===t&&r.push(s)})})}function X1(n){return n.Ys()}function jge(n){return n.na()}function $ge(n){return n.ea()}const Bge=["Area","Line","Baseline"];class kx extends Tge{constructor(e,t,r,i,s){super(e),this.jt=V1(),this._r=new bge(this),this.ha=[],this.aa=new mge(this),this.la=null,this.oa=null,this._a=null,this.ua=[],this.ca=new Ege,this.da=new Map,this.fa=null,this.Ps=r,this.pa=t;const o=new xge(this);if(this.gs=[o],this.ur=new RK(o,this,e),Bge.includes(this.pa)&&(this.la=new yge(this)),this.va(),this.$h=i(this,this.Qt(),s),this.pa==="Custom"){const a=this.$h;a.ma&&this.wa(a.ma)}}m(){this._a!==null&&clearTimeout(this._a)}Oe(e){return this.Ps.priceLineColor||e}Ve(e){const t={Be:!0},r=this.Ft();if(this.Qt().Et().Gi()||r.Gi()||this.jt.Gi())return t;const i=this.Qt().Et().Ie(),s=this.Lt();if(i===null||s===null)return t;let o,a;if(e){const h=this.jt.Ch();if(h===null)return t;o=h,a=h.js}else{const h=this.jt.$s(i.bi(),-1);if(h===null||(o=this.jt.ph(h.js),o===null))return t;a=h.js}const l=o.Wt[3],c=this.ga().gh(a,{Wt:o}),u=r.Nt(l,s.Wt);return{Be:!1,gt:l,ri:r.Ji(l,s.Wt),Ue:r.Ma(l),$e:r.ba(l,s.Wt),R:c.th,Ei:u,js:a}}ga(){return this.oa!==null||(this.oa=new Ige(this)),this.oa}N(){return this.Ps}cr(e){const t=this.Qt(),{priceScaleId:r,visible:i,priceFormat:s}=e;r!==void 0&&r!==this.Ps.priceScaleId&&t.Sa(this,r),i!==void 0&&i!==this.Ps.visible&&t.xa();const o=e.conflationThresholdFactor!==void 0;Ai(this.Ps,e),o&&(this.da.clear(),this.Qt().dr()),s!==void 0&&(this.va(),t.Ca()),t.ya(this),t.ka(),this.$h.kt("options")}ht(e,t){this.jt.ht(e),this.da.clear();const r=this.Qt().Et().N();r.enableConflation&&r.precomputeConflationOnInit&&this.Pa(r.precomputeConflationPriority),this.$h.kt("data"),this.la!==null&&(t&&t.Ta?this.la.Pe():e.length===0&&this.la.ke());const i=this.Qt().Kn(this);this.Qt().Ra(i),this.Qt().ya(this),this.Qt().ka(),this.Qt().dr()}Da(e){const t=new Cge(this,e);return this.ha.push(t),this.Qt().ya(this),t}Ia(e){const t=this.ha.indexOf(e);t!==-1&&this.ha.splice(t,1),this.Qt().ya(this)}Va(){return this.ha}wh(){return this.pa}Lt(){const e=this.Ba();return e===null?null:{Wt:e.Wt[3],Ea:e.wt}}Ba(){const e=this.Qt().Et().Ie();if(e===null)return null;const t=e.Aa();return this.jt.$s(t,1)}qs(){return this.jt}wa(e){this.fa=e,this.da.clear()}La(){return!!this.Qt().Et().N().enableConflation&&this.za()>1}kr(e){if(!this.La())return;const t=this.za();if(!this.da.has(t))return;const r=this.pa==="Custom",i=r&&this.fa||void 0,s=r&&this.$h.Oa?l=>{const c=l,u=this.$h.Oa(c);return Array.isArray(u)?u:[typeof u=="number"?u:0]}:void 0,o=this.ca.kr(this.jt.Dh(),e,t,i,r,s),a=V1();a.ht(o),this.da.set(t,a)}Na(){const e=this.Qt().Et().N().enableConflation;if(this.pa==="Custom"&&this.fa===null)return this.jt;if(!e)return this.jt;const t=this.za(),r=this.da.get(t);return r||(this.Fa(t),this.da.get(t)??this.jt)}Wa(e){const t=this.jt.ph(e);return t===null?null:this.pa==="Bar"||this.pa==="Candlestick"||this.pa==="Custom"?{Hr:t.Wt[0],Ur:t.Wt[1],$r:t.Wt[2],qr:t.Wt[3]}:t.Wt[3]}Ha(e){const t=[];K1(this.ua,X1,"top",t);const r=this.la;return r!==null&&r.It()&&(this._a===null&&r.Re()&&(this._a=setTimeout(()=>{this._a=null,this.Qt().Ua()},0)),r.Te(),t.unshift(r)),t}Ys(){const e=[];this.$a()||e.push(this.aa),e.push(this.$h,this._r);const t=this.ha.map(r=>r.pr());return e.push(...t),K1(this.ua,X1,"normal",e),e}qa(){return this.ja(X1,"bottom")}Ya(e){return this.ja(jge,e)}Ka(e){return this.ja($ge,e)}Za(e,t){return this.ua.map(r=>r.Qn(e,t)).filter(r=>r!==null)}ds(){return[this.ur,...this.ha.map(e=>e.vr())]}Ks(e,t){if(t!==this.hs&&!this.$a())return[];const r=[...this.gs];for(const i of this.ha)r.push(i.mr());return this.ua.forEach(i=>{r.push(...i.Ks())}),r}fs(){const e=[];return this.ua.forEach(t=>{e.push(...t.fs())}),e}ra(e,t){if(this.Ps.autoscaleInfoProvider!==void 0){const r=this.Ps.autoscaleInfoProvider(()=>{const i=this.Ga(e,t);return i===null?null:i.tr()});return Qy.ir(r)}return this.Ga(e,t)}qh(){const e=this.Ps.priceFormat;return e.base??1/e.minMove}Xa(){return this.Ja}Ws(){var e;this.$h.kt();for(const t of this.gs)t.kt();for(const t of this.ha)t.kt();this._r.kt(),this.aa.kt(),(e=this.la)==null||e.kt(),this.ua.forEach(t=>t.Ws())}Ft(){return Se(super.Ft())}At(e){if(!((this.pa==="Line"||this.pa==="Area"||this.pa==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const t=this.jt.ph(e);return t===null?null:{gt:t.Wt[3],ft:this.Qa(),Ht:this.tl(),Ot:this.il(),zt:this.sl(e)}}Ne(){return this.Ps.title}It(){return this.Ps.visible}nl(e){this.ua.push(new Fge(e,this))}el(e){this.ua=this.ua.filter(t=>t.Gh()!==e)}rl(){if(this.pa==="Custom")return e=>this.$h.Oa(e)}hl(){if(this.pa==="Custom")return e=>this.$h.al(e)}ll(){return this.jt.Bh()}$a(){return!_x(this.Ft().ol())}Ga(e,t){if(!Om(e)||!Om(t)||this.jt.Gi())return null;const r=this.pa==="Line"||this.pa==="Area"||this.pa==="Baseline"||this.pa==="Histogram"?[3]:[2,1],i=this.jt.Ih(e,t,r);let s=i!==null?new Gr(i.Fh,i.Wh):null,o=null;if(this.wh()==="Histogram"){const a=this.Ps.base,l=new Gr(a,a);s=s!==null?s.Sn(l):l}return this.ua.forEach(a=>{const l=a.ra(e,t);if(l!=null&&l.priceRange){const c=new Gr(l.priceRange.minValue,l.priceRange.maxValue);s=s!==null?s.Sn(c):c}l!=null&&l.margins&&(o=l.margins)}),new Qy(s,o)}Qa(){switch(this.pa){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}tl(){switch(this.pa){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}il(){switch(this.pa){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}sl(e){switch(this.pa){case"Line":case"Area":case"Baseline":{const t=this.Ps.crosshairMarkerBackgroundColor;if(t.length!==0)return t}}return this.ga().gh(e).th}va(){switch(this.Ps.priceFormat.type){case"custom":{const e=this.Ps.priceFormat.formatter;this.Ja={format:e,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(t=>t.map(e))};break}case"volume":this.Ja=new hge(this.Ps.priceFormat.precision);break;case"percent":this.Ja=new OK(this.Ps.priceFormat.precision);break;default:{const e=Math.pow(10,this.Ps.priceFormat.precision);this.Ja=new Sx(e,this.Ps.priceFormat.minMove*e)}}this.hs!==null&&this.hs._l()}ja(e,t){const r=[];return K1(this.ua,e,t,r),r}za(){const{ul:e,cl:t,dl:r}=this.fl();return this.ca.gr(e,t,r)}fl(){const e=this.Qt().Et(),t=e.ul(),r=window.devicePixelRatio||1,i=e.N().conflationThresholdFactor;return{ul:t,cl:r,dl:this.Ps.conflationThresholdFactor??i??1}}pl(e){const t=this.jt.Dh();let r;if(this.pa==="Custom"&&this.fa!==null){const s=this.rl();if(!s)throw new Error(_ge);r=this.ca.Mr(t,e,this.fa,!0,o=>s(o))}else r=this.ca.Mr(t,e);const i=V1();return i.ht(r),i}Fa(e){const t=this.pl(e);this.da.set(e,t)}Pa(e){var r;if(this.pa==="Custom"&&(this.fa===null||!this.rl()))return;this.da.clear();const t=this.Qt().Et().vl();for(const i of t){const s=()=>{this.ml(i)},o=typeof window=="object"&&window||typeof self=="object"&&self;(r=o==null?void 0:o.gl)!=null&&r.wl?o.gl.wl(()=>{s()},{Ml:e}):Promise.resolve().then(()=>s())}}ml(e){if(this.da.has(e)||this.jt.Dh().length===0)return;const t=this.pl(e);this.da.set(e,t)}}const zge=[3],qge=[0,1,2,3];class Uge{constructor(e){this.Ps=e}bl(e,t,r){let i=e;if(this.Ps.mode===0)return i;const s=r.Rs(),o=s.Lt();if(o===null)return i;const a=s.Nt(e,o),l=r.Sl().filter(u=>u instanceof kx).reduce((u,h)=>{if(r.Zn(h)||!h.It())return u;const d=h.Ft(),f=h.qs();if(d.Gi()||!f.Ee(t))return u;const m=f.ph(t);if(m===null)return u;const g=cl(h.Lt()),v=this.Ps.mode===3?qge:zge;return u.concat(v.map(y=>d.Nt(m.Wt[y],g.Wt)))},[]);if(l.length===0)return i;l.sort((u,h)=>Math.abs(u-a)-Math.abs(h-a));const c=l[0];return i=s.Ds(c,o),i}}function Tp(n,e,t){return Math.min(Math.max(n,e),t)}function Z0(n,e,t){return e-n<=t}class Wge extends bg{constructor(){super(...arguments),this.jt=null}ht(e){this.jt=e}et({context:e,bitmapSize:t,horizontalPixelRatio:r,verticalPixelRatio:i}){if(this.jt===null)return;const s=Math.max(1,Math.floor(r));e.lineWidth=s,function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()}(e,()=>{const o=Se(this.jt);if(o.xl){e.strokeStyle=o.Cl,fd(e,o.yl),e.beginPath();for(const a of o.kl){const l=Math.round(a.Pl*r);e.moveTo(l,-s),e.lineTo(l,t.height+s)}e.stroke()}if(o.Tl){e.strokeStyle=o.Rl,fd(e,o.Dl),e.beginPath();for(const a of o.Il){const l=Math.round(a.Pl*i);e.moveTo(-s,l),e.lineTo(t.width+s,l)}e.stroke()}})}}class Hge{constructor(e){this.Xt=new Wge,this.xt=!0,this.yt=e}kt(){this.xt=!0}Tt(){if(this.xt){const e=this.yt.Qt().N().grid,t={Tl:e.horzLines.visible,xl:e.vertLines.visible,Rl:e.horzLines.color,Cl:e.vertLines.color,Dl:e.horzLines.style,yl:e.vertLines.style,Il:this.yt.Rs().Vl(),kl:(this.yt.Qt().Et().Vl()||[]).map(r=>({Pl:r.coord}))};this.Xt.ht(t),this.xt=!1}return this.Xt}}class Yge{constructor(e){this.$h=new Hge(e)}pr(){return this.$h}}const Q1={Bl:4,El:1e-4};function ih(n,e){const t=100*(n-e)/e;return e<0?-t:t}function Gge(n,e){const t=ih(n.Ze(),e),r=ih(n.Ge(),e);return new Gr(t,r)}function Mp(n,e){const t=100*(n-e)/e+100;return e<0?-t:t}function Vge(n,e){const t=Mp(n.Ze(),e),r=Mp(n.Ge(),e);return new Gr(t,r)}function Zy(n,e){const t=Math.abs(n);if(t<1e-15)return 0;const r=Math.log10(t+e.El)+e.Bl;return n<0?-r:r}function Ip(n,e){const t=Math.abs(n);if(t<1e-15)return 0;const r=Math.pow(10,t-e.Bl)-e.El;return n<0?-r:r}function Nf(n,e){if(n===null)return null;const t=Zy(n.Ze(),e),r=Zy(n.Ge(),e);return new Gr(t,r)}function sh(n,e){if(n===null)return null;const t=Ip(n.Ze(),e),r=Ip(n.Ge(),e);return new Gr(t,r)}function J1(n){if(n===null)return Q1;const e=Math.abs(n.Ge()-n.Ze());if(e>=1||e<1e-15)return Q1;const t=Math.ceil(Math.abs(Math.log10(e))),r=Q1.Bl+t;return{Bl:r,El:1/Math.pow(10,r)}}class Z1{constructor(e,t){if(this.Al=e,this.Ll=t,function(r){if(r<0)return!1;if(r>1e18)return!0;for(let i=r;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.Al))this.zl=[2,2.5,2];else{this.zl=[];for(let r=this.Al;r!==1;){if(r%2==0)this.zl.push(2),r/=2;else{if(r%5!=0)throw new Error("unexpected base");this.zl.push(2,2.5),r/=5}if(this.zl.length>100)throw new Error("something wrong with base")}}}Ol(e,t,r){const i=this.Al===0?0:1/this.Al;let s=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-t)))),o=0,a=this.Ll[0];for(;;){const h=Z0(s,i,1e-14)&&s>i+1e-14,d=Z0(s,r*a,1e-14),f=Z0(s,1,1e-14);if(!(h&&d&&f))break;s/=a,a=this.Ll[++o%this.Ll.length]}if(s<=i+1e-14&&(s=i),s=Math.max(1,s),this.zl.length>0&&(l=s,c=1,u=1e-14,Math.abs(l-c)<u))for(o=0,a=this.zl[0];Z0(s,r*a,1e-14)&&s>i+1e-14;)s/=a,a=this.zl[++o%this.zl.length];var l,c,u;return s}}class K5{constructor(e,t,r,i){this.Nl=[],this.Ki=e,this.Al=t,this.Fl=r,this.Wl=i}Ol(e,t){if(e<t)throw new Error("high < low");const r=this.Ki.$t(),i=(e-t)*this.Hl()/r,s=new Z1(this.Al,[2,2.5,2]),o=new Z1(this.Al,[2,2,2.5]),a=new Z1(this.Al,[2.5,2,2]),l=[];return l.push(s.Ol(e,t,i),o.Ol(e,t,i),a.Ol(e,t,i)),function(c){if(c.length<1)throw Error("array is empty");let u=c[0];for(let h=1;h<c.length;++h)c[h]<u&&(u=c[h]);return u}(l)}Ul(){const e=this.Ki,t=e.Lt();if(t===null)return void(this.Nl=[]);const r=e.$t(),i=this.Fl(r-1,t),s=this.Fl(0,t),o=this.Ki.N().entireTextOnly?this.$l()/2:0,a=o,l=r-1-o,c=Math.max(i,s),u=Math.min(i,s);if(c===u)return void(this.Nl=[]);const h=this.Ol(c,u);if(this.ql(t,h,c,u,a,l),e.jl()&&this.Yl(h,u,c)){const m=this.Ki.Kl();this.Zl(t,h,a,l,m,2*m)}const d=this.Nl.map(m=>m.Gl),f=this.Ki.Xl(d);for(let m=0;m<this.Nl.length;m++)this.Nl[m].Jl=f[m]}Vl(){return this.Nl}$l(){return this.Ki.k()}Hl(){return Math.ceil(2.5*this.$l())}ql(e,t,r,i,s,o){const a=this.Nl,l=this.Ki;let c=r%t;c+=c<0?t:0;const u=r>=i?1:-1;let h=null,d=0;for(let f=r-c;f>i;f-=t){const m=this.Wl(f,e,!0);h!==null&&Math.abs(m-h)<this.Hl()||m<s||m>o||(d<a.length?(a[d].Pl=m,a[d].Jl=l.Ql(f),a[d].Gl=f):a.push({Pl:m,Jl:l.Ql(f),Gl:f}),d++,h=m,l.io()&&(t=this.Ol(f*u,i)))}a.length=d}Zl(e,t,r,i,s,o){const a=this.Nl,l=this.so(e,r,s,o),c=this.so(e,i,-o,-s),u=this.Wl(0,e,!0)-this.Wl(t,e,!0);a.length>0&&a[0].Pl-l.Pl<u/2&&a.shift(),a.length>0&&c.Pl-a[a.length-1].Pl<u/2&&a.pop(),a.unshift(l),a.push(c)}so(e,t,r,i){const s=(r+i)/2,o=this.Fl(t+r,e),a=this.Fl(t+i,e),l=Math.min(o,a),c=Math.max(o,a),u=Math.max(.1,this.Ol(c,l)),h=this.Fl(t+s,e),d=h-h%u,f=this.Wl(d,e,!0);return{Jl:this.Ki.Ql(d),Pl:f,Gl:d}}Yl(e,t,r){let i=cl(this.Ki.er());return this.Ki.io()&&(i=sh(i,this.Ki.no())),i.Ze()-t<e&&r-i.Ge()<e}}function FK(n){return n.slice().sort((e,t)=>Se(e._s())-Se(t._s()))}var X5;(function(n){n[n.Normal=0]="Normal",n[n.Logarithmic=1]="Logarithmic",n[n.Percentage=2]="Percentage",n[n.IndexedTo100=3]="IndexedTo100"})(X5||(X5={}));const Q5=new OK,J5=new Sx(100,1);class Kge{constructor(e,t,r,i,s){this.eo=0,this.ro=null,this.sr=null,this.ho=null,this.ao={lo:!1,oo:null},this._o=!1,this.uo=0,this.co=0,this.do=new Hn,this.fo=new Hn,this.po=[],this.vo=null,this.mo=null,this.wo=null,this.Mo=null,this.bo=null,this.Ja=J5,this.So=J1(null),this.xo=e,this.Ps=t,this.Co=r,this.yo=i,this.ko=s,this.Po=new K5(this,100,this.To.bind(this),this.Ro.bind(this))}ol(){return this.xo}N(){return this.Ps}cr(e){if(Ai(this.Ps,e),this._l(),e.mode!==void 0&&this.Do({ae:e.mode}),e.scaleMargins!==void 0){const t=mi(e.scaleMargins.top),r=mi(e.scaleMargins.bottom);if(t<0||t>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${t}`);if(r<0||r>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${r}`);if(t+r>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${t+r}`);this.Io(),this.wo=null}}Vo(){return this.Ps.autoScale}Bo(){return this._o}io(){return this.Ps.mode===1}He(){return this.Ps.mode===2}Eo(){return this.Ps.mode===3}no(){return this.So}ae(){return{ln:this.Ps.autoScale,Ao:this.Ps.invertScale,ae:this.Ps.mode}}Do(e){const t=this.ae();let r=null;e.ln!==void 0&&(this.Ps.autoScale=e.ln),e.ae!==void 0&&(this.Ps.mode=e.ae,e.ae!==2&&e.ae!==3||(this.Ps.autoScale=!0),this.ao.lo=!1),t.ae===1&&e.ae!==t.ae&&(function(s,o){if(s===null)return!1;const a=Ip(s.Ze(),o),l=Ip(s.Ge(),o);return isFinite(a)&&isFinite(l)}(this.sr,this.So)?(r=sh(this.sr,this.So),r!==null&&this.Lo(r)):this.Ps.autoScale=!0),e.ae===1&&e.ae!==t.ae&&(r=Nf(this.sr,this.So),r!==null&&this.Lo(r));const i=t.ae!==this.Ps.mode;i&&(t.ae===2||this.He())&&this._l(),i&&(t.ae===3||this.Eo())&&this._l(),e.Ao!==void 0&&t.Ao!==e.Ao&&(this.Ps.invertScale=e.Ao,this.zo()),this.fo.p(t,this.ae())}Oo(){return this.fo}k(){return this.Co.fontSize}$t(){return this.eo}No(e){this.eo!==e&&(this.eo=e,this.Io(),this.wo=null)}Fo(){if(this.ro)return this.ro;const e=this.$t()-this.Wo()-this.Ho();return this.ro=e,e}er(){return this.Uo(),this.sr}Lo(e,t){const r=this.sr;(t||r===null&&e!==null||r!==null&&!r.Ye(e))&&(this.wo=null,this.sr=e)}$o(e){this.Lo(e),this.qo(e!==null)}Gi(){return this.Uo(),this.eo===0||!this.sr||this.sr.Gi()}jo(e){return this.Ao()?e:this.$t()-1-e}Nt(e,t){return this.He()?e=ih(e,t):this.Eo()&&(e=Mp(e,t)),this.Ro(e,t)}Yo(e,t,r){this.Uo();const i=this.Ho(),s=Se(this.er()),o=s.Ze(),a=s.Ge(),l=this.Fo()-1,c=this.Ao(),u=l/(a-o),h=r===void 0?0:r.from,d=r===void 0?e.length:r.to,f=this.Ko();for(let m=h;m<d;m++){const g=e[m],v=g.gt;if(isNaN(v))continue;let y=v;f!==null&&(y=f(g.gt,t));const b=i+u*(y-o),w=c?b:this.eo-1-b;g.ut=w}}Zo(e,t,r){this.Uo();const i=this.Ho(),s=Se(this.er()),o=s.Ze(),a=s.Ge(),l=this.Fo()-1,c=this.Ao(),u=l/(a-o),h=r===void 0?0:r.from,d=r===void 0?e.length:r.to,f=this.Ko();for(let m=h;m<d;m++){const g=e[m];let v=g.Hr,y=g.Ur,b=g.$r,w=g.qr;f!==null&&(v=f(g.Hr,t),y=f(g.Ur,t),b=f(g.$r,t),w=f(g.qr,t));let S=i+u*(v-o),_=c?S:this.eo-1-S;g.Go=_,S=i+u*(y-o),_=c?S:this.eo-1-S,g.Xo=_,S=i+u*(b-o),_=c?S:this.eo-1-S,g.Jo=_,S=i+u*(w-o),_=c?S:this.eo-1-S,g.Qo=_}}Ds(e,t){const r=this.To(e,t);return this.t_(r,t)}t_(e,t){let r=e;return this.He()?r=function(i,s){return s<0&&(i=-i),i/100*s+s}(r,t):this.Eo()&&(r=function(i,s){return i-=100,s<0&&(i=-i),i/100*s+s}(r,t)),r}Sl(){return this.po}Dt(){return this.mo||(this.mo=FK(this.po)),this.mo}i_(e){this.po.indexOf(e)===-1&&(this.po.push(e),this._l(),this.s_())}n_(e){const t=this.po.indexOf(e);if(t===-1)throw new Error("source is not attached to scale");this.po.splice(t,1),this.po.length===0&&(this.Do({ln:!0}),this.Lo(null)),this._l(),this.s_()}Lt(){let e=null;for(const t of this.po){const r=t.Lt();r!==null&&(e===null||r.Ea<e.Ea)&&(e=r)}return e===null?null:e.Wt}Ao(){return this.Ps.invertScale}Vl(){const e=this.Lt()===null;if(this.wo!==null&&(e||this.wo.e_===e))return this.wo.Vl;this.Po.Ul();const t=this.Po.Vl();return this.wo={Vl:t,e_:e},this.do.p(),t}r_(){return this.do}h_(e){this.He()||this.Eo()||this.Mo===null&&this.ho===null&&(this.Gi()||(this.Mo=this.eo-e,this.ho=Se(this.er()).Ke()))}a_(e){if(this.He()||this.Eo()||this.Mo===null)return;this.Do({ln:!1}),(e=this.eo-e)<0&&(e=0);let t=(this.Mo+.2*(this.eo-1))/(e+.2*(this.eo-1));const r=Se(this.ho).Ke();t=Math.max(t,.1),r.Je(t),this.Lo(r)}l_(){this.He()||this.Eo()||(this.Mo=null,this.ho=null)}o_(e){this.Vo()||this.bo===null&&this.ho===null&&(this.Gi()||(this.bo=e,this.ho=Se(this.er()).Ke()))}__(e){if(this.Vo()||this.bo===null)return;const t=Se(this.er()).Xe()/(this.Fo()-1);let r=e-this.bo;this.Ao()&&(r*=-1);const i=r*t,s=Se(this.ho).Ke();s.Qe(i),this.Lo(s,!0),this.wo=null}u_(){this.Vo()||this.bo!==null&&(this.bo=null,this.ho=null)}Xa(){return this.Ja||this._l(),this.Ja}Ji(e,t){switch(this.Ps.mode){case 2:return this.c_(ih(e,t));case 3:return this.Xa().format(Mp(e,t));default:return this.lr(e)}}Ql(e){switch(this.Ps.mode){case 2:return this.c_(e);case 3:return this.Xa().format(e);default:return this.lr(e)}}Xl(e){switch(this.Ps.mode){case 2:return this.d_(e);case 3:return this.Xa().formatTickmarks(e);default:return this.f_(e)}}Ma(e){return this.lr(e,Se(this.vo).Xa())}ba(e,t){return e=ih(e,t),this.c_(e,Q5)}p_(){return this.po}v_(e){this.ao={oo:e,lo:!1}}Ws(){this.po.forEach(e=>e.Ws())}jl(){return this.Ps.ensureEdgeTickMarksVisible&&this.Vo()}Kl(){return this.k()/2}_l(){this.wo=null;let e=1/0;this.vo=null;for(const r of this.po)r._s()<e&&(e=r._s(),this.vo=r);let t=100;this.vo!==null&&(t=Math.round(this.vo.qh())),this.Ja=J5,this.He()?(this.Ja=Q5,t=100):this.Eo()?(this.Ja=new Sx(100,1),t=100):this.vo!==null&&(this.Ja=this.vo.Xa()),this.Po=new K5(this,t,this.To.bind(this),this.Ro.bind(this)),this.Po.Ul()}s_(){this.mo=null}m_(){return this.vo===null||this.He()||this.Eo()?1:1/this.vo.qh()}Xi(){return this.ko}qo(e){this._o=e}Wo(){return this.Ao()?this.Ps.scaleMargins.bottom*this.$t()+this.co:this.Ps.scaleMargins.top*this.$t()+this.uo}Ho(){return this.Ao()?this.Ps.scaleMargins.top*this.$t()+this.uo:this.Ps.scaleMargins.bottom*this.$t()+this.co}Uo(){this.ao.lo||(this.ao.lo=!0,this.w_())}Io(){this.ro=null}Ro(e,t){if(this.Uo(),this.Gi())return 0;e=this.io()&&e?Zy(e,this.So):e;const r=Se(this.er()),i=this.Ho()+(this.Fo()-1)*(e-r.Ze())/r.Xe();return this.jo(i)}To(e,t){if(this.Uo(),this.Gi())return 0;const r=this.jo(e),i=Se(this.er()),s=i.Ze()+i.Xe()*((r-this.Ho())/(this.Fo()-1));return this.io()?Ip(s,this.So):s}zo(){this.wo=null,this.Po.Ul()}w_(){if(this.Bo()&&!this.Vo())return;const e=this.ao.oo;if(e===null)return;let t=null;const r=this.p_();let i=0,s=0;for(const l of r){if(!l.It())continue;const c=l.Lt();if(c===null)continue;const u=l.ra(e.Aa(),e.bi());let h=u&&u.er();if(h!==null){switch(this.Ps.mode){case 1:h=Nf(h,this.So);break;case 2:h=Gge(h,c.Wt);break;case 3:h=Vge(h,c.Wt)}if(t=t===null?h:t.Sn(Se(h)),u!==null){const d=u.rr();d!==null&&(i=Math.max(i,d.above),s=Math.max(s,d.below))}}}if(this.jl()&&(i=Math.max(i,this.Kl()),s=Math.max(s,this.Kl())),i===this.uo&&s===this.co||(this.uo=i,this.co=s,this.wo=null,this.Io()),t!==null){if(t.Ze()===t.Ge()){const l=5*this.m_();this.io()&&(t=sh(t,this.So)),t=new Gr(t.Ze()-l,t.Ge()+l),this.io()&&(t=Nf(t,this.So))}if(this.io()){const l=sh(t,this.So),c=J1(l);if(o=c,a=this.So,o.Bl!==a.Bl||o.El!==a.El){const u=this.ho!==null?sh(this.ho,this.So):null;this.So=c,t=Nf(l,c),u!==null&&(this.ho=Nf(u,c))}}this.Lo(t)}else this.sr===null&&(this.Lo(new Gr(-.5,.5)),this.So=J1(null));var o,a}Ko(){return this.He()?ih:this.Eo()?Mp:this.io()?e=>Zy(e,this.So):null}g_(e,t,r){return t===void 0?(r===void 0&&(r=this.Xa()),r.format(e)):t(e)}M_(e,t,r){return t===void 0?(r===void 0&&(r=this.Xa()),r.formatTickmarks(e)):t(e)}lr(e,t){return this.g_(e,this.yo.priceFormatter,t)}f_(e,t){const r=this.yo.priceFormatter;return this.M_(e,this.yo.tickmarksPriceFormatter??(r?i=>i.map(r):void 0),t)}c_(e,t){return this.g_(e,this.yo.percentageFormatter,t)}d_(e,t){const r=this.yo.percentageFormatter;return this.M_(e,this.yo.tickmarksPercentageFormatter??(r?i=>i.map(r):void 0),t)}}function Z5(n){return n instanceof kx}class e4{constructor(e,t){this.po=[],this.b_=new Map,this.eo=0,this.S_=0,this.x_=1,this.mo=null,this.C_=!1,this.y_=new Hn,this.ua=[],this.Jh=e,this.ns=t,this.k_=new Yge(this);const r=t.N();this.P_=this.T_("left",r.leftPriceScale),this.R_=this.T_("right",r.rightPriceScale),this.P_.Oo().i(this.D_.bind(this,this.P_),this),this.R_.Oo().i(this.D_.bind(this,this.R_),this),this.I_(r)}I_(e){if(e.leftPriceScale&&this.P_.cr(e.leftPriceScale),e.rightPriceScale&&this.R_.cr(e.rightPriceScale),e.localization&&(this.P_._l(),this.R_._l()),e.overlayPriceScales){const t=Array.from(this.b_.values());for(const r of t){const i=Se(r[0].Ft());i.cr(e.overlayPriceScales),e.localization&&i._l()}}}V_(e){switch(e){case"left":return this.P_;case"right":return this.R_}return this.b_.has(e)?mi(this.b_.get(e))[0].Ft():null}m(){this.Qt().B_().u(this),this.P_.Oo().u(this),this.R_.Oo().u(this),this.po.forEach(e=>{e.m&&e.m()}),this.ua=this.ua.filter(e=>{const t=e.Gh();return t.detached&&t.detached(),!1}),this.y_.p()}E_(){return this.x_}A_(e){this.x_=e}Qt(){return this.ns}ss(){return this.S_}$t(){return this.eo}L_(e){this.S_=e,this.z_()}No(e){this.eo=e,this.P_.No(e),this.R_.No(e),this.po.forEach(t=>{if(this.Zn(t)){const r=t.Ft();r!==null&&r.No(e)}}),this.z_()}O_(e){this.C_=e}N_(){return this.C_}F_(){return this.po.filter(Z5)}Sl(){return this.po}Zn(e){const t=e.Ft();return t===null||this.P_!==t&&this.R_!==t}i_(e,t,r){this.W_(e,t,r?e._s():this.po.length)}n_(e,t){const r=this.po.indexOf(e);wr(r!==-1,"removeDataSource: invalid data source"),this.po.splice(r,1),t||this.po.forEach((o,a)=>o.us(a));const i=Se(e.Ft()).ol();if(this.b_.has(i)){const o=mi(this.b_.get(i)),a=o.indexOf(e);a!==-1&&(o.splice(a,1),o.length===0&&this.b_.delete(i))}const s=e.Ft();s&&s.Sl().indexOf(e)>=0&&(s.n_(e),this.H_(s)),this.mo=null}Xn(e){return e===this.P_?"left":e===this.R_?"right":"overlay"}U_(){return this.P_}q_(){return this.R_}j_(e,t){e.h_(t)}Y_(e,t){e.a_(t),this.z_()}K_(e){e.l_()}Z_(e,t){e.o_(t)}G_(e,t){e.__(t),this.z_()}X_(e){e.u_()}z_(){this.po.forEach(e=>{e.Ws()})}Rs(){let e=null;return this.ns.N().rightPriceScale.visible&&this.R_.Sl().length!==0?e=this.R_:this.ns.N().leftPriceScale.visible&&this.P_.Sl().length!==0?e=this.P_:this.po.length!==0&&(e=this.po[0].Ft()),e===null&&(e=this.R_),e}Gn(){let e=null;return this.ns.N().rightPriceScale.visible?e=this.R_:this.ns.N().leftPriceScale.visible&&(e=this.P_),e}H_(e){e!==null&&e.Vo()&&this.J_(e)}Q_(e){const t=this.Jh.Ie();e.Do({ln:!0}),t!==null&&e.v_(t),this.z_()}tu(){this.J_(this.P_),this.J_(this.R_)}iu(){this.H_(this.P_),this.H_(this.R_),this.po.forEach(e=>{this.Zn(e)&&this.H_(e.Ft())}),this.z_(),this.ns.dr()}Dt(){return this.mo===null&&(this.mo=FK(this.po)),this.mo}su(e,t){t=Tp(t,0,this.po.length-1);const r=this.po.indexOf(e);wr(r!==-1,"setSeriesOrder: invalid data source"),this.po.splice(r,1),this.po.splice(t,0,e),this.po.forEach((i,s)=>i.us(s)),this.mo=null;for(const i of[this.P_,this.R_])i.s_(),i._l();this.ns.dr()}Vt(){return this.Dt().filter(Z5)}nu(){return this.y_}eu(){return this.k_}nl(e){this.ua.push(new Dge(e))}el(e){this.ua=this.ua.filter(t=>t.Gh()!==e),e.detached&&e.detached(),this.ns.dr()}ru(){return this.ua}Za(e,t){return this.ua.map(r=>r.Qn(e,t)).filter(r=>r!==null)}J_(e){const t=e.p_();if(t&&t.length>0&&!this.Jh.Gi()){const r=this.Jh.Ie();r!==null&&e.v_(r)}e.Ws()}W_(e,t,r){let i=this.V_(t);if(i===null&&(i=this.T_(t,this.ns.N().overlayPriceScales)),this.po.splice(r,0,e),!_x(t)){const s=this.b_.get(t)||[];s.push(e),this.b_.set(t,s)}e.us(r),i.i_(e),e.cs(i),this.H_(i),this.mo=null}D_(e,t,r){t.ae!==r.ae&&this.J_(e)}T_(e,t){const r={visible:!0,autoScale:!0,...ta(t)},i=new Kge(e,r,this.ns.N().layout,this.ns.N().localization,this.ns.Xi());return i.No(this.$t()),i}}function ev(n){return{hu:n.hu,au:{te:n.lu.externalId},ou:n.lu.cursorStyle}}function Xge(n,e,t,r){for(const i of n){const s=i.Tt(r);if(s!==null&&s.Qn){const o=s.Qn(e,t);if(o!==null)return{_u:i,au:o}}}return null}function Qge(n){return n.Ys!==void 0}function jK(n,e,t){const r=[n,...n.Dt()],i=function(s,o,a){var d;let l,c;for(const f of s){const m=((d=f.Za)==null?void 0:d.call(f,o,a))??[];for(const g of m)u=g.zOrder,h=l==null?void 0:l.zOrder,(!h||u==="top"&&h!=="top"||u==="normal"&&h==="bottom")&&(l=g,c=f)}var u,h;return l&&c?{lu:l,hu:c}:null}(r,e,t);if((i==null?void 0:i.lu.zOrder)==="top")return ev(i);for(const s of r){if(i&&i.hu===s&&i.lu.zOrder!=="bottom"&&!i.lu.isBackground)return ev(i);if(Qge(s)){const o=Xge(s.Ys(n),e,t,n);if(o!==null)return{hu:s,_u:o._u,au:o.au}}if(i&&i.hu===s&&i.lu.zOrder!=="bottom"&&i.lu.isBackground)return ev(i)}return i!=null&&i.lu?ev(i):null}class Jge{constructor(e,t,r=50){this.Vn=0,this.Bn=1,this.En=1,this.Ln=new Map,this.An=new Map,this.uu=e,this.cu=t,this.zn=r}du(e){const t=e.time,r=this.cu.cacheKey(t),i=this.Ln.get(r);if(i!==void 0)return i.fu;if(this.Vn===this.zn){const o=this.An.get(this.En);this.An.delete(this.En),this.Ln.delete(mi(o)),this.En++,this.Vn--}const s=this.uu(e);return this.Ln.set(r,{fu:s,Wn:this.Bn}),this.An.set(this.Bn,r),this.Vn++,this.Bn++,s}}class Pp{constructor(e,t){wr(e<=t,"right should be >= left"),this.pu=e,this.vu=t}Aa(){return this.pu}bi(){return this.vu}mu(){return this.vu-this.pu+1}Ee(e){return this.pu<=e&&e<=this.vu}Ye(e){return this.pu===e.Aa()&&this.vu===e.bi()}}function t4(n,e){return n===null||e===null?n===e:n.Ye(e)}class Zge{constructor(){this.wu=new Map,this.Ln=null,this.gu=!1}Mu(e){this.gu=e,this.Ln=null}bu(e,t){this.Su(t),this.Ln=null;for(let r=t;r<e.length;++r){const i=e[r];let s=this.wu.get(i.timeWeight);s===void 0&&(s=[],this.wu.set(i.timeWeight,s)),s.push({index:r,time:i.time,weight:i.timeWeight,originalTime:i.originalTime})}}xu(e,t,r,i,s){const o=Math.ceil(t/e);return this.Ln!==null&&this.Ln.Cu===o&&s===this.Ln.yu&&r===this.Ln.ku||(this.Ln={yu:s,ku:r,Vl:this.Pu(o,r,i),Cu:o}),this.Ln.Vl}Su(e){if(e===0)return void this.wu.clear();const t=[];this.wu.forEach((r,i)=>{e<=r[0].index?t.push(i):r.splice(md(r,e,s=>s.index<e),1/0)});for(const r of t)this.wu.delete(r)}Pu(e,t,r){let i=[];const s=o=>!t||r.has(o.index);for(const o of Array.from(this.wu.keys()).sort((a,l)=>l-a)){if(!this.wu.get(o))continue;const a=i;i=[];const l=a.length;let c=0;const u=mi(this.wu.get(o)),h=u.length;let d=1/0,f=-1/0;for(let m=0;m<h;m++){const g=u[m],v=g.index;for(;c<l;){const y=a[c],b=y.index;if(!(b<v&&s(y))){d=b;break}c++,i.push(y),f=b,d=1/0}if(d-v>=e&&v-f>=e&&s(g))i.push(g),f=v;else if(this.gu)return a}for(;c<l;c++)s(a[c])&&i.push(a[c])}return i}}class yh{constructor(e){this.Tu=e}Ru(){return this.Tu===null?null:new Pp(Math.floor(this.Tu.Aa()),Math.ceil(this.Tu.bi()))}Du(){return this.Tu}static Iu(){return new yh(null)}}function e0e(n,e){return n.weight>e.weight?n:e}class t0e{constructor(e,t,r,i){this.S_=0,this.Vu=null,this.Bu=[],this.bo=null,this.Mo=null,this.Eu=new Zge,this.Au=new Map,this.Lu=yh.Iu(),this.zu=!0,this.Ou=new Hn,this.Nu=new Hn,this.Fu=new Hn,this.Wu=null,this.Hu=null,this.Uu=new Map,this.$u=-1,this.qu=[],this.ju=1,this.Ps=t,this.yo=r,this.Yu=t.rightOffset,this.Ku=t.barSpacing,this.ns=e,this.Zu(t),this.cu=i,this.Gu(),this.Eu.Mu(t.uniformDistribution),this.Xu(),this.Ju()}N(){return this.Ps}Qu(e){Ai(this.yo,e),this.tc(),this.Gu()}cr(e,t){Ai(this.Ps,e),this.Ps.fixLeftEdge&&this.sc(),this.Ps.fixRightEdge&&this.nc(),e.barSpacing!==void 0&&this.ns.gn(e.barSpacing),e.rightOffset!==void 0&&this.ns.Mn(e.rightOffset),this.Zu(e),e.minBarSpacing===void 0&&e.maxBarSpacing===void 0||this.ns.gn(e.barSpacing??this.Ku),e.ignoreWhitespaceIndices!==void 0&&e.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.Ju(),this.tc(),this.Gu(),e.enableConflation===void 0&&e.conflationThresholdFactor===void 0||this.Xu(),this.Fu.p()}Is(e){var t;return((t=this.Bu[e])==null?void 0:t.time)??null}es(e){return this.Bu[e]??null}ec(e,t){if(this.Bu.length<1)return null;if(this.cu.key(e)>this.cu.key(this.Bu[this.Bu.length-1].time))return t?this.Bu.length-1:null;const r=md(this.Bu,this.cu.key(e),(i,s)=>this.cu.key(i.time)<s);return this.cu.key(e)<this.cu.key(this.Bu[r].time)?t?r:null:r}Gi(){return this.S_===0||this.Bu.length===0||this.Vu===null}rc(){return this.Bu.length>0}Ie(){return this.hc(),this.Lu.Ru()}ac(){return this.hc(),this.Lu.Du()}lc(){const e=this.Ie();if(e===null)return null;const t={from:e.Aa(),to:e.bi()};return this.oc(t)}oc(e){const t=Math.round(e.from),r=Math.round(e.to),i=Se(this._c()),s=Se(this.uc());return{from:Se(this.es(Math.max(i,t))),to:Se(this.es(Math.min(s,r)))}}cc(e){return{from:Se(this.ec(e.from,!0)),to:Se(this.ec(e.to,!0))}}ss(){return this.S_}L_(e){if(!isFinite(e)||e<=0||this.S_===e)return;const t=this.ac(),r=this.S_;if(this.S_=e,this.zu=!0,this.Ps.lockVisibleTimeRangeOnResize&&r!==0){const i=this.Ku*e/r;this.Ku=i}if(this.Ps.fixLeftEdge&&t!==null&&t.Aa()<=0){const i=r-e;this.Yu-=Math.round(i/this.Ku)+1,this.zu=!0}this.dc(),this.fc()}qt(e){if(this.Gi()||!Om(e))return 0;const t=this.vc()+this.Yu-e;return this.S_-(t+.5)*this.Ku-1}mc(e,t){const r=this.vc(),i=t===void 0?0:t.from,s=t===void 0?e.length:t.to;for(let o=i;o<s;o++){const a=e[o].wt,l=r+this.Yu-a,c=this.S_-(l+.5)*this.Ku-1;e[o]._t=c}}wc(e,t){const r=Math.ceil(this.gc(e));return t&&this.Ps.ignoreWhitespaceIndices&&!this.Mc(r)?this.bc(r):r}Mn(e){this.zu=!0,this.Yu=e,this.fc(),this.ns.Sc(),this.ns.dr()}ul(){return this.Ku}gn(e){const t=this.Ku;if(this.xc(e),this.Ps.rightOffsetPixels!==void 0&&t!==0){const r=this.Yu*t/this.Ku;this.Yu=r}this.fc(),this.ns.Sc(),this.ns.dr()}Cc(){return this.Yu}Vl(){if(this.Gi())return null;if(this.Hu!==null)return this.Hu;const e=this.Ku,t=5*(this.ns.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),r=Math.round(t/e),i=Se(this.Ie()),s=Math.max(i.Aa(),i.Aa()-r),o=Math.max(i.bi(),i.bi()-r),a=this.Eu.xu(e,t,this.Ps.ignoreWhitespaceIndices,this.Uu,this.$u),l=this._c()+r,c=this.uc()-r,u=this.yc(),h=this.Ps.fixLeftEdge||u,d=this.Ps.fixRightEdge||u;let f=0;for(const m of a){if(!(s<=m.index&&m.index<=o))continue;let g;f<this.qu.length?(g=this.qu[f],g.coord=this.qt(m.index),g.label=this.kc(m),g.weight=m.weight):(g={needAlignCoordinate:!1,coord:this.qt(m.index),label:this.kc(m),weight:m.weight},this.qu.push(g)),this.Ku>t/2&&!u?g.needAlignCoordinate=!1:g.needAlignCoordinate=h&&m.index<=l||d&&m.index>=c,f++}return this.qu.length=f,this.Hu=this.qu,this.qu}Pc(){let e;this.zu=!0,this.gn(this.Ps.barSpacing),e=this.Ps.rightOffsetPixels!==void 0?this.Ps.rightOffsetPixels/this.ul():this.Ps.rightOffset,this.Mn(e)}Tc(e){this.zu=!0,this.Vu=e,this.fc(),this.sc()}Rc(e,t){const r=this.gc(e),i=this.ul(),s=i+t*(i/10);this.gn(s),this.Ps.rightBarStaysOnScroll||this.Mn(this.Cc()+(r-this.gc(e)))}h_(e){this.bo&&this.u_(),this.Mo===null&&this.Wu===null&&(this.Gi()||(this.Mo=e,this.Dc()))}a_(e){if(this.Wu===null)return;const t=Tp(this.S_-e,0,this.S_),r=Tp(this.S_-Se(this.Mo),0,this.S_);t!==0&&r!==0&&this.gn(this.Wu.ul*t/r)}l_(){this.Mo!==null&&(this.Mo=null,this.Ic())}o_(e){this.bo===null&&this.Wu===null&&(this.Gi()||(this.bo=e,this.Dc()))}__(e){if(this.bo===null)return;const t=(this.bo-e)/this.ul();this.Yu=Se(this.Wu).Cc+t,this.zu=!0,this.fc()}u_(){this.bo!==null&&(this.bo=null,this.Ic())}Vc(){this.Bc(this.Ps.rightOffset)}Bc(e,t=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(t)||t<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const r=this.Yu,i=performance.now();this.ns.vn({Ec:s=>(s-i)/t>=1,Ac:s=>{const o=(s-i)/t;return o>=1?e:r+(e-r)*o}})}kt(e,t){this.zu=!0,this.Bu=e,this.Eu.bu(e,t),this.fc()}Lc(){return this.Ou}zc(){return this.Nu}Oc(){return this.Fu}vc(){return this.Vu||0}Nc(e,t){const r=e.mu(),i=t&&this.Ps.rightOffsetPixels||0;this.xc((this.S_-i)/r),this.Yu=e.bi()-this.vc(),t&&(this.Yu=i?i/this.ul():this.Ps.rightOffset),this.fc(),this.zu=!0,this.ns.Sc(),this.ns.dr()}Fc(){const e=this._c(),t=this.uc();if(e===null||t===null)return;const r=!this.Ps.rightOffsetPixels&&this.Ps.rightOffset||0;this.Nc(new Pp(e,t+r),!0)}Wc(e){const t=new Pp(e.from,e.to);this.Nc(t)}rs(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.cu.formatHorzItem(e.time)}Ju(){if(!this.Ps.ignoreWhitespaceIndices)return;this.Uu.clear();const e=this.ns.tn();for(const t of e)for(const r of t.ll())this.Uu.set(r,!0);this.$u++}Hc(){return this.ju}vl(){const e=1/(window.devicePixelRatio||1),t=this.Ps.minBarSpacing;if(t>=e)return[1];const r=[1];let i=2;for(;i<=512;)t<e/i&&r.push(i),i*=2;return r}yc(){const e=this.ns.N().handleScroll,t=this.ns.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||t.axisDoubleClickReset.time||t.axisPressedMouseMove.time||t.mouseWheel||t.pinch)}_c(){return this.Bu.length===0?null:0}uc(){return this.Bu.length===0?null:this.Bu.length-1}Uc(e){return(this.S_-1-e)/this.Ku}gc(e){const t=this.Uc(e),r=this.vc()+this.Yu-t;return Math.round(1e6*r)/1e6}xc(e){const t=this.Ku;this.Ku=e,this.dc(),t!==this.Ku&&(this.zu=!0,this.$c(),this.Xu())}hc(){if(!this.zu)return;if(this.zu=!1,this.Gi())return void this.qc(yh.Iu());const e=this.vc(),t=this.S_/this.Ku,r=this.Yu+e,i=new Pp(r-t+1,r);this.qc(new yh(i))}dc(){const e=Tp(this.Ku,this.jc(),this.Yc());this.Ku!==e&&(this.Ku=e,this.zu=!0)}Yc(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.S_}jc(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.Bu.length!==0?this.S_/this.Bu.length:this.Ps.minBarSpacing}Xu(){if(!this.Ps.enableConflation)return void(this.ju=1);const e=1/(window.devicePixelRatio||1)*(this.Ps.conflationThresholdFactor??1);if(this.Ku>=e)return void(this.ju=1);const t=e/this.Ku,r=Math.pow(2,Math.floor(Math.log2(t)));this.ju=Math.min(r,512)}fc(){const e=this.Kc();e!==null&&this.Yu<e&&(this.Yu=e,this.zu=!0);const t=this.Zc();this.Yu>t&&(this.Yu=t,this.zu=!0)}Kc(){const e=this._c(),t=this.Vu;return e===null||t===null?null:e-t-1+(this.Ps.fixLeftEdge?this.S_/this.Ku:Math.min(2,this.Bu.length))}Zc(){return this.Ps.fixRightEdge?0:this.S_/this.Ku-Math.min(2,this.Bu.length)}Dc(){this.Wu={ul:this.ul(),Cc:this.Cc()}}Ic(){this.Wu=null}kc(e){let t=this.Au.get(e.weight);return t===void 0&&(t=new Jge(r=>this.Gc(r),this.cu),this.Au.set(e.weight,t)),t.du(e)}Gc(e){return this.cu.formatTickmark(e,this.yo)}qc(e){const t=this.Lu;this.Lu=e,t4(t.Ru(),this.Lu.Ru())||this.Ou.p(),t4(t.Du(),this.Lu.Du())||this.Nu.p(),this.$c()}$c(){this.Hu=null}tc(){this.$c(),this.Au.clear()}Gu(){this.cu.updateFormatter(this.yo)}sc(){if(!this.Ps.fixLeftEdge)return;const e=this._c();if(e===null)return;const t=this.Ie();if(t===null)return;const r=t.Aa()-e;if(r<0){const i=this.Yu-r-1;this.Mn(i)}this.dc()}nc(){this.fc(),this.dc()}Mc(e){return!this.Ps.ignoreWhitespaceIndices||this.Uu.get(e)||!1}bc(e){const t=function*(i){const s=Math.round(i),o=s<i;let a=1;for(;;)o?(yield s+a,yield s-a):(yield s-a,yield s+a),a++}(e),r=this.uc();for(;r;){const i=t.next().value;if(this.Uu.get(i))return i;if(i<0||i>r)break}return e}Zu(e){if(e.rightOffsetPixels!==void 0){const t=e.rightOffsetPixels/(e.barSpacing||this.Ku);this.ns.Mn(t)}}}var n4,r4,i4,s4,o4;(function(n){n[n.OnTouchEnd=0]="OnTouchEnd",n[n.OnNextTap=1]="OnNextTap"})(n4||(n4={}));class n0e{constructor(e,t,r){this.Xc=[],this.Jc=[],this.Qc=null,this.S_=0,this.td=null,this.sd=new Hn,this.nd=new Hn,this.ed=null,this.rd=e,this.Ps=t,this.cu=r,this.ko=new Zme(this.Ps.layout.colorParsers),this.hd=new Jme(this),this.Jh=new t0e(this,t.timeScale,this.Ps.localization,r),this.Ct=new uge(this,t.crosshair),this.ad=new Uge(t.crosshair),t.addDefaultPane&&(this.ld(0),this.Xc[0].A_(2)),this.od=this._d(0),this.ud=this._d(1)}Ca(){this.dd(xr.yn())}dr(){this.dd(xr.Cn())}Ua(){this.dd(new xr(1))}ya(e){const t=this.fd(e);this.dd(t)}pd(){return this.td}vd(e){var r,i,s,o;if(((r=this.td)==null?void 0:r.hu)===(e==null?void 0:e.hu)&&((s=(i=this.td)==null?void 0:i.au)==null?void 0:s.te)===((o=e==null?void 0:e.au)==null?void 0:o.te))return;const t=this.td;this.td=e,t!==null&&this.ya(t.hu),e!==null&&e.hu!==(t==null?void 0:t.hu)&&this.ya(e.hu)}N(){return this.Ps}cr(e){Ai(this.Ps,e),this.Xc.forEach(t=>t.I_(e)),e.timeScale!==void 0&&this.Jh.cr(e.timeScale),e.localization!==void 0&&this.Jh.Qu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.sd.p(),this.od=this._d(0),this.ud=this._d(1),this.Ca()}md(e,t,r=0){const i=this.Xc[r];if(i===void 0)return;if(e==="left")return Ai(this.Ps,{leftPriceScale:t}),i.I_({leftPriceScale:t}),this.sd.p(),void this.Ca();if(e==="right")return Ai(this.Ps,{rightPriceScale:t}),i.I_({rightPriceScale:t}),this.sd.p(),void this.Ca();const s=this.wd(e,r);s!==null&&(s.Ft.cr(t),this.sd.p())}wd(e,t){const r=this.Xc[t];if(r===void 0)return null;const i=r.V_(e);return i!==null?{Gs:r,Ft:i}:null}Et(){return this.Jh}Xs(){return this.Xc}gd(){return this.Ct}Md(){return this.nd}bd(e,t){e.No(t),this.Sc()}L_(e){this.S_=e,this.Jh.L_(this.S_),this.Xc.forEach(t=>t.L_(e)),this.Sc()}Sd(e){this.Xc.length!==1&&(wr(e>=0&&e<this.Xc.length,"Invalid pane index"),this.Xc.splice(e,1),this.Ca())}xd(e,t){if(this.Xc.length<2)return;wr(e>=0&&e<this.Xc.length,"Invalid pane index");const r=this.Xc[e],i=this.Xc.reduce((h,d)=>h+d.E_(),0),s=this.Xc.reduce((h,d)=>h+d.$t(),0),o=s-30*(this.Xc.length-1);t=Math.min(o,Math.max(30,t));const a=i/s,l=r.$t();r.A_(t*a);let c=t-l,u=this.Xc.length-1;for(const h of this.Xc)if(h!==r){const d=Math.min(o,Math.max(30,h.$t()-c/u));c-=h.$t()-d,u-=1;const f=d*a;h.A_(f)}this.Ca()}Cd(e,t){wr(e>=0&&e<this.Xc.length&&t>=0&&t<this.Xc.length,"Invalid pane index");const r=this.Xc[e],i=this.Xc[t];this.Xc[e]=i,this.Xc[t]=r,this.Ca()}yd(e,t){if(wr(e>=0&&e<this.Xc.length&&t>=0&&t<this.Xc.length,"Invalid pane index"),e===t)return;const[r]=this.Xc.splice(e,1);this.Xc.splice(t,0,r),this.Ca()}j_(e,t,r){e.j_(t,r)}Y_(e,t,r){e.Y_(t,r),this.ka(),this.dd(this.kd(e,2))}K_(e,t){e.K_(t),this.dd(this.kd(e,2))}Z_(e,t,r){t.Vo()||e.Z_(t,r)}G_(e,t,r){t.Vo()||(e.G_(t,r),this.ka(),this.dd(this.kd(e,2)))}X_(e,t){t.Vo()||(e.X_(t),this.dd(this.kd(e,2)))}Q_(e,t){e.Q_(t),this.dd(this.kd(e,2))}Pd(e){this.Jh.h_(e)}Td(e,t){const r=this.Et();if(r.Gi()||t===0)return;const i=r.ss();e=Math.max(1,Math.min(e,i)),r.Rc(e,t),this.Sc()}Rd(e){this.Dd(0),this.Id(e),this.Vd()}Bd(e){this.Jh.a_(e),this.Sc()}Ed(){this.Jh.l_(),this.dr()}Dd(e){this.Jh.o_(e)}Id(e){this.Jh.__(e),this.Sc()}Vd(){this.Jh.u_(),this.dr()}tn(){return this.Jc}Us(){return this.Qc===null&&(this.Qc=this.Jc.filter(e=>e.It())),this.Qc}xa(){this.Qc=null}Ad(e,t,r,i,s){this.Ct.Bs(e,t);let o=NaN,a=this.Jh.wc(e,!0);const l=this.Jh.Ie();l!==null&&(a=Math.min(Math.max(l.Aa(),a),l.bi())),a=this.Ct.Hs(a);const c=i.Rs(),u=c.Lt();if(u!==null&&(o=c.Ds(t,u)),o=this.ad.bl(o,a,i),this.Ct.zs(a,o,i),this.Ua(),!s){const h=jK(i,e,t);this.vd(h&&{hu:h.hu,au:h.au,ou:h.ou||null}),this.nd.p(this.Ct.Bt(),{x:e,y:t},r)}}Ld(e,t,r){const i=r.Rs(),s=i.Lt(),o=i.Nt(e,Se(s)),a=this.Jh.ec(t,!0),l=this.Jh.qt(Se(a));this.Ad(l,o,null,r,!0)}zd(e){this.gd().Ns(),this.Ua(),e||this.nd.p(null,null,null)}ka(){const e=this.Ct.Gs();if(e!==null){const t=this.Ct.As(),r=this.Ct.Ls();this.Ad(t,r,null,e)}this.Ct.Ws()}Od(e,t,r){const i=this.Jh.Is(0);t!==void 0&&r!==void 0&&this.Jh.kt(t,r);const s=this.Jh.Is(0),o=this.Jh.vc(),a=this.Jh.Ie();if(a!==null&&i!==null&&s!==null){const l=a.Ee(o),c=this.cu.key(i)>this.cu.key(s),u=e!==null&&e>o&&!c,h=this.Jh.N().allowShiftVisibleRangeOnWhitespaceReplacement,d=l&&(r!==void 0||h)&&this.Jh.N().shiftVisibleRangeOnNewBar;if(u&&!d){const f=e-o;this.Jh.Mn(this.Jh.Cc()-f)}}this.Jh.Tc(e)}Ra(e){e!==null&&e.iu()}Kn(e){if(function(r){return r instanceof e4}(e))return e;const t=this.Xc.find(r=>r.Dt().includes(e));return t===void 0?null:t}Sc(){this.Xc.forEach(e=>e.iu()),this.ka()}m(){this.Xc.forEach(e=>e.m()),this.Xc.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Nd(){return this.hd}Jn(){return this.hd.N()}B_(){return this.sd}Fd(e,t){const r=this.ld(t);this.Wd(e,r),this.Jc.push(e),this.xa(),this.Jc.length===1?this.Ca():this.dr()}Hd(e){const t=this.Kn(e),r=this.Jc.indexOf(e);wr(r!==-1,"Series not found");const i=Se(t);this.Jc.splice(r,1),i.n_(e),e.m&&e.m(),this.xa(),this.Jh.Ju(),this.Ud(i)}Sa(e,t){const r=Se(this.Kn(e));r.n_(e,!0),r.i_(e,t,!0)}Fc(){const e=xr.Cn();e.cn(),this.dd(e)}$d(e){const t=xr.Cn();t.pn(e),this.dd(t)}wn(){const e=xr.Cn();e.wn(),this.dd(e)}gn(e){const t=xr.Cn();t.gn(e),this.dd(t)}Mn(e){const t=xr.Cn();t.Mn(e),this.dd(t)}vn(e){const t=xr.Cn();t.vn(e),this.dd(t)}dn(){const e=xr.Cn();e.dn(),this.dd(e)}qd(){return this.Ps.rightPriceScale.visible?"right":"left"}jd(e,t){if(wr(t>=0,"Index should be greater or equal to 0"),t===this.Yd(e))return;const r=Se(this.Kn(e));r.n_(e);const i=this.ld(t);this.Wd(e,i),r.Sl().length===0&&this.Ud(r),this.Ca()}Kd(){return this.ud}$(){return this.od}Ut(e){const t=this.ud,r=this.od;if(t===r)return t;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.ed===null||this.ed.eh!==r||this.ed.rh!==t)this.ed={eh:r,rh:t,Zd:new Map};else{const s=this.ed.Zd.get(e);if(s!==void 0)return s}const i=this.ko.tt(r,t,e/100);return this.ed.Zd.set(e,i),i}Gd(e){return this.Xc.indexOf(e)}Xi(){return this.ko}Xd(){return this.Jd()}Jd(e){const t=new e4(this.Jh,this);this.Xc.push(t);const r=e??this.Xc.length-1,i=xr.yn();return i.hn(r,{an:0,ln:!0}),this.dd(i),t}ld(e){return wr(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.Xc.length,e))<this.Xc.length?this.Xc[e]:this.Jd(e)}Yd(e){return this.Xc.findIndex(t=>t.F_().includes(e))}kd(e,t){const r=new xr(t);if(e!==null){const i=this.Xc.indexOf(e);r.hn(i,{an:t})}return r}fd(e,t){return t===void 0&&(t=2),this.kd(this.Kn(e),t)}dd(e){this.rd&&this.rd(e),this.Xc.forEach(t=>t.eu().pr().kt())}Wd(e,t){const r=e.N().priceScaleId,i=r!==void 0?r:this.qd();t.i_(e,i),_x(i)||e.cr(e.N())}_d(e){const t=this.Ps.layout;return t.background.type==="gradient"?e===0?t.background.topColor:t.background.bottomColor:t.background.color}Ud(e){!e.N_()&&e.Sl().length===0&&this.Xc.length>1&&this.Xc.splice(this.Gd(e),1)}}function $K(n){if(n>=1)return 0;let e=0;for(;e<8;e++){const t=Math.round(n);if(Math.abs(t-n)<1e-8)return e;n*=10}return e}function kI(n){return!pd(n)&&!yg(n)}function BK(n){return pd(n)}(function(n){n[n.Disabled=0]="Disabled",n[n.Continuous=1]="Continuous",n[n.OnDataUpdate=2]="OnDataUpdate"})(r4||(r4={})),function(n){n[n.LastBar=0]="LastBar",n[n.LastVisible=1]="LastVisible"}(i4||(i4={})),function(n){n.Solid="solid",n.VerticalGradient="gradient"}(s4||(s4={})),function(n){n[n.Year=0]="Year",n[n.Month=1]="Month",n[n.DayOfMonth=2]="DayOfMonth",n[n.Time=3]="Time",n[n.TimeWithSeconds=4]="TimeWithSeconds"}(o4||(o4={}));const a4=n=>n.getUTCFullYear();function r0e(n,e,t){return e.replace(/yyyy/g,(r=>na(a4(r),4))(n)).replace(/yy/g,(r=>na(a4(r)%100,2))(n)).replace(/MMMM/g,((r,i)=>new Date(r.getUTCFullYear(),r.getUTCMonth(),1).toLocaleString(i,{month:"long"}))(n,t)).replace(/MMM/g,((r,i)=>new Date(r.getUTCFullYear(),r.getUTCMonth(),1).toLocaleString(i,{month:"short"}))(n,t)).replace(/MM/g,(r=>na((i=>i.getUTCMonth()+1)(r),2))(n)).replace(/dd/g,(r=>na((i=>i.getUTCDate())(r),2))(n))}class zK{constructor(e="yyyy-MM-dd",t="default"){this.Qd=e,this.tf=t}du(e){return r0e(e,this.Qd,this.tf)}}class i0e{constructor(e){this.if=e||"%h:%m:%s"}du(e){return this.if.replace("%h",na(e.getUTCHours(),2)).replace("%m",na(e.getUTCMinutes(),2)).replace("%s",na(e.getUTCSeconds(),2))}}const s0e={sf:"yyyy-MM-dd",nf:"%h:%m:%s",ef:" ",rf:"default"};class o0e{constructor(e={}){const t={...s0e,...e};this.hf=new zK(t.sf,t.rf),this.af=new i0e(t.nf),this.lf=t.ef}du(e){return`${this.hf.du(e)}${this.lf}${this.af.du(e)}`}}function tv(n){return 60*n*60*1e3}function e_(n){return 60*n*1e3}const nv=[{_f:(l4=1,1e3*l4),uf:10},{_f:e_(1),uf:20},{_f:e_(5),uf:21},{_f:e_(30),uf:22},{_f:tv(1),uf:30},{_f:tv(3),uf:31},{_f:tv(6),uf:32},{_f:tv(12),uf:33}];var l4;function c4(n,e){if(n.getUTCFullYear()!==e.getUTCFullYear())return 70;if(n.getUTCMonth()!==e.getUTCMonth())return 60;if(n.getUTCDate()!==e.getUTCDate())return 50;for(let t=nv.length-1;t>=0;--t)if(Math.floor(e.getTime()/nv[t]._f)!==Math.floor(n.getTime()/nv[t]._f))return nv[t].uf;return 0}function t_(n){let e=n;if(yg(n)&&(e=fR(n)),!kI(e))throw new Error("time must be of type BusinessDay");const t=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{cf:Math.round(t.getTime()/1e3),df:e}}function u4(n){if(!BK(n))throw new Error("time must be of type isUTCTimestamp");return{cf:n}}function fR(n){const e=new Date(n);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${n}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function h4(n){yg(n.time)&&(n.time=fR(n.time))}class d4{options(){return this.Ps}setOptions(e){this.Ps=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(t){t.forEach(h4)}(e):h4(e)}createConverterToInternalObj(e){return Se(function(t){return t.length===0?null:kI(t[0].time)||yg(t[0].time)?t_:u4}(e))}key(e){return typeof e=="object"&&"cf"in e?e.cf:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const t=e;return t.df===void 0?new Date(1e3*t.cf).getTime():new Date(Date.UTC(t.df.year,t.df.month-1,t.df.day)).getTime()}convertHorzItemToInternal(e){return BK(t=e)?u4(t):kI(t)?t_(t):t_(fR(t));var t}updateFormatter(e){if(!this.Ps)return;const t=e.dateFormat;this.Ps.timeScale.timeVisible?this.ff=new o0e({sf:t,nf:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",ef:"   ",rf:e.locale}):this.ff=new zK(t,e.locale)}formatHorzItem(e){const t=e;return this.ff.du(new Date(1e3*t.cf))}formatTickmark(e,t){const r=function(s,o,a){switch(s){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),i=this.Ps.timeScale;if(i.tickMarkFormatter!==void 0){const s=i.tickMarkFormatter(e.originalTime,r,t.locale);if(s!==null)return s}return function(s,o,a){const l={};switch(o){case 0:l.year="numeric";break;case 1:l.month="short";break;case 2:l.day="numeric";break;case 3:l.hour12=!1,l.hour="2-digit",l.minute="2-digit";break;case 4:l.hour12=!1,l.hour="2-digit",l.minute="2-digit",l.second="2-digit"}const c=s.df===void 0?new Date(1e3*s.cf):new Date(Date.UTC(s.df.year,s.df.month-1,s.df.day));return new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()).toLocaleString(a,l)}(e.time,r,t.locale)}maxTickMarkWeight(e){let t=e.reduce(e0e,e[0]).weight;return t>30&&t<50&&(t=30),t}fillWeightsForPoints(e,t){(function(r,i=0){if(r.length===0)return;let s=i===0?null:r[i-1].time.cf,o=s!==null?new Date(1e3*s):null,a=0;for(let l=i;l<r.length;++l){const c=r[l],u=new Date(1e3*c.time.cf);o!==null&&(c.timeWeight=c4(u,o)),a+=c.time.cf-(s||c.time.cf),s=c.time.cf,o=u}if(i===0&&r.length>1){const l=Math.ceil(a/(r.length-1)),c=new Date(1e3*(r[0].time.cf-l));r[0].timeWeight=c4(new Date(1e3*r[0].time.cf),c)}})(e,t)}static pf(e){return Ai({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const gd=typeof window<"u";function f4(){return!!gd&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function n_(){return!!gd&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function CI(n){return n+n%2}function a0e(n){gd&&window.chrome!==void 0&&n.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class Cx{constructor(e,t,r){this.vf=0,this.mf=null,this.wf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.gf=0,this.Mf=null,this.bf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.Sf=null,this.xf=!1,this.Cf=null,this.yf=null,this.kf=!1,this.Pf=!1,this.Tf=!1,this.Rf=null,this.Df=null,this.If=null,this.Vf=null,this.Bf=null,this.Ef=null,this.Af=null,this.Lf=0,this.zf=!1,this.Of=!1,this.Nf=!1,this.Ff=0,this.Wf=null,this.Hf=!n_(),this.Uf=i=>{this.$f(i)},this.qf=i=>{if(this.jf(i)){const s=this.Yf(i);if(++this.gf,this.Mf&&this.gf>1){const{Kf:o}=this.Zf(Js(i),this.bf);o<30&&!this.Tf&&this.Gf(s,this.Jf.Xf),this.Qf()}}else{const s=this.Yf(i);if(++this.vf,this.mf&&this.vf>1){const{Kf:o}=this.Zf(Js(i),this.wf);o<5&&!this.Pf&&this.tp(s,this.Jf.ip),this.sp()}}},this.np=e,this.Jf=t,this.Ps=r,this.ep()}m(){this.Rf!==null&&(this.Rf(),this.Rf=null),this.Df!==null&&(this.Df(),this.Df=null),this.Vf!==null&&(this.Vf(),this.Vf=null),this.Bf!==null&&(this.Bf(),this.Bf=null),this.Ef!==null&&(this.Ef(),this.Ef=null),this.If!==null&&(this.If(),this.If=null),this.rp(),this.sp()}hp(e){this.Vf&&this.Vf();const t=this.ap.bind(this);if(this.Vf=()=>{this.np.removeEventListener("mousemove",t)},this.np.addEventListener("mousemove",t),this.jf(e))return;const r=this.Yf(e);this.tp(r,this.Jf.lp),this.Hf=!0}sp(){this.mf!==null&&clearTimeout(this.mf),this.vf=0,this.mf=null,this.wf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Qf(){this.Mf!==null&&clearTimeout(this.Mf),this.gf=0,this.Mf=null,this.bf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}ap(e){if(this.Nf||this.yf!==null||this.jf(e))return;const t=this.Yf(e);this.tp(t,this.Jf.op),this.Hf=!0}_p(e){const t=r_(e.changedTouches,Se(this.Wf));if(t===null||(this.Ff=rv(e),this.Af!==null)||this.Of)return;this.zf=!0;const r=this.Zf(Js(t),Se(this.yf)),{up:i,cp:s,Kf:o}=r;if(this.kf||!(o<5)){if(!this.kf){const a=.5*i,l=s>=a&&!this.Ps.dp(),c=a>s&&!this.Ps.fp();l||c||(this.Of=!0),this.kf=!0,this.Tf=!0,this.rp(),this.Qf()}if(!this.Of){const a=this.Yf(e,t);this.Gf(a,this.Jf.pp),Du(e)}}}vp(e){if(e.button!==0)return;const t=this.Zf(Js(e),Se(this.Cf)),{Kf:r}=t;if(r>=5&&(this.Pf=!0,this.sp()),this.Pf){const i=this.Yf(e);this.tp(i,this.Jf.mp)}}Zf(e,t){const r=Math.abs(t._t-e._t),i=Math.abs(t.ut-e.ut);return{up:r,cp:i,Kf:r+i}}wp(e){let t=r_(e.changedTouches,Se(this.Wf));if(t===null&&e.touches.length===0&&(t=e.changedTouches[0]),t===null)return;this.Wf=null,this.Ff=rv(e),this.rp(),this.yf=null,this.Ef&&(this.Ef(),this.Ef=null);const r=this.Yf(e,t);if(this.Gf(r,this.Jf.gp),++this.gf,this.Mf&&this.gf>1){const{Kf:i}=this.Zf(Js(t),this.bf);i<30&&!this.Tf&&this.Gf(r,this.Jf.Xf),this.Qf()}else this.Tf||(this.Gf(r,this.Jf.Mp),this.Jf.Mp&&Du(e));this.gf===0&&Du(e),e.touches.length===0&&this.xf&&(this.xf=!1,Du(e))}$f(e){if(e.button!==0)return;const t=this.Yf(e);if(this.Cf=null,this.Nf=!1,this.Bf&&(this.Bf(),this.Bf=null),f4()&&this.np.ownerDocument.documentElement.removeEventListener("mouseleave",this.Uf),!this.jf(e))if(this.tp(t,this.Jf.bp),++this.vf,this.mf&&this.vf>1){const{Kf:r}=this.Zf(Js(e),this.wf);r<5&&!this.Pf&&this.tp(t,this.Jf.ip),this.sp()}else this.Pf||this.tp(t,this.Jf.Sp)}rp(){this.Sf!==null&&(clearTimeout(this.Sf),this.Sf=null)}xp(e){if(this.Wf!==null)return;const t=e.changedTouches[0];this.Wf=t.identifier,this.Ff=rv(e);const r=this.np.ownerDocument.documentElement;this.Tf=!1,this.kf=!1,this.Of=!1,this.yf=Js(t),this.Ef&&(this.Ef(),this.Ef=null);{const s=this._p.bind(this),o=this.wp.bind(this);this.Ef=()=>{r.removeEventListener("touchmove",s),r.removeEventListener("touchend",o)},r.addEventListener("touchmove",s,{passive:!1}),r.addEventListener("touchend",o,{passive:!1}),this.rp(),this.Sf=setTimeout(this.Cp.bind(this,e),240)}const i=this.Yf(e,t);this.Gf(i,this.Jf.yp),this.Mf||(this.gf=0,this.Mf=setTimeout(this.Qf.bind(this),500),this.bf=Js(t))}kp(e){if(e.button!==0)return;const t=this.np.ownerDocument.documentElement;f4()&&t.addEventListener("mouseleave",this.Uf),this.Pf=!1,this.Cf=Js(e),this.Bf&&(this.Bf(),this.Bf=null);{const i=this.vp.bind(this),s=this.$f.bind(this);this.Bf=()=>{t.removeEventListener("mousemove",i),t.removeEventListener("mouseup",s)},t.addEventListener("mousemove",i),t.addEventListener("mouseup",s)}if(this.Nf=!0,this.jf(e))return;const r=this.Yf(e);this.tp(r,this.Jf.Pp),this.mf||(this.vf=0,this.mf=setTimeout(this.sp.bind(this),500),this.wf=Js(e))}ep(){this.np.addEventListener("mouseenter",this.hp.bind(this)),this.np.addEventListener("touchcancel",this.rp.bind(this));{const e=this.np.ownerDocument,t=r=>{this.Jf.Tp&&(r.composed&&this.np.contains(r.composedPath()[0])||r.target&&this.np.contains(r.target)||this.Jf.Tp())};this.Df=()=>{e.removeEventListener("touchstart",t)},this.Rf=()=>{e.removeEventListener("mousedown",t)},e.addEventListener("mousedown",t),e.addEventListener("touchstart",t,{passive:!0})}n_()&&(this.If=()=>{this.np.removeEventListener("dblclick",this.qf)},this.np.addEventListener("dblclick",this.qf)),this.np.addEventListener("mouseleave",this.Rp.bind(this)),this.np.addEventListener("touchstart",this.xp.bind(this),{passive:!0}),a0e(this.np),this.np.addEventListener("mousedown",this.kp.bind(this)),this.Dp(),this.np.addEventListener("touchmove",()=>{},{passive:!1})}Dp(){this.Jf.Ip===void 0&&this.Jf.Vp===void 0&&this.Jf.Bp===void 0||(this.np.addEventListener("touchstart",e=>this.Ep(e.touches),{passive:!0}),this.np.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Af!==null&&this.Jf.Vp!==void 0){const t=p4(e.touches[0],e.touches[1])/this.Lf;this.Jf.Vp(this.Af,t),Du(e)}},{passive:!1}),this.np.addEventListener("touchend",e=>{this.Ep(e.touches)}))}Ep(e){e.length===1&&(this.zf=!1),e.length!==2||this.zf||this.xf?this.Ap():this.Lp(e)}Lp(e){const t=this.np.getBoundingClientRect()||{left:0,top:0};this.Af={_t:(e[0].clientX-t.left+(e[1].clientX-t.left))/2,ut:(e[0].clientY-t.top+(e[1].clientY-t.top))/2},this.Lf=p4(e[0],e[1]),this.Jf.Ip!==void 0&&this.Jf.Ip(),this.rp()}Ap(){this.Af!==null&&(this.Af=null,this.Jf.Bp!==void 0&&this.Jf.Bp())}Rp(e){if(this.Vf&&this.Vf(),this.jf(e)||!this.Hf)return;const t=this.Yf(e);this.tp(t,this.Jf.zp),this.Hf=!n_()}Cp(e){const t=r_(e.touches,Se(this.Wf));if(t===null)return;const r=this.Yf(e,t);this.Gf(r,this.Jf.Op),this.Tf=!0,this.xf=!0}jf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:rv(e)<this.Ff+500}Gf(e,t){t&&t.call(this.Jf,e)}tp(e,t){t&&t.call(this.Jf,e)}Yf(e,t){const r=t||e,i=this.np.getBoundingClientRect()||{left:0,top:0};return{clientX:r.clientX,clientY:r.clientY,pageX:r.pageX,pageY:r.pageY,screenX:r.screenX,screenY:r.screenY,localX:r.clientX-i.left,localY:r.clientY-i.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Np:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Fp:e.type,Wp:r.target,_u:e.view,Hp:()=>{e.type!=="touchstart"&&Du(e)}}}}function p4(n,e){const t=n.clientX-e.clientX,r=n.clientY-e.clientY;return Math.sqrt(t*t+r*r)}function Du(n){n.cancelable&&n.preventDefault()}function Js(n){return{_t:n.pageX,ut:n.pageY}}function rv(n){return n.timeStamp||performance.now()}function r_(n,e){for(let t=0;t<n.length;++t)if(n[t].identifier===e)return n[t];return null}class l0e{constructor(e,t,r){this.Up=null,this.$p=null,this.qp=!0,this.jp=null,this.Yp=e,this.Kp=e.Zp()[t],this.Gp=e.Zp()[r],this.Xp=document.createElement("tr"),this.Xp.style.height="1px",this.Jp=document.createElement("td"),this.Jp.style.position="relative",this.Jp.style.padding="0",this.Jp.style.margin="0",this.Jp.setAttribute("colspan","3"),this.Qp(),this.Xp.appendChild(this.Jp),this.qp=this.Yp.N().layout.panes.enableResize,this.qp?this.tv():(this.Up=null,this.$p=null)}m(){this.$p!==null&&this.$p.m()}iv(){return this.Xp}sv(){return Zt({width:this.Kp.sv().width,height:1})}nv(){return Zt({width:this.Kp.nv().width,height:1*window.devicePixelRatio})}ev(e,t,r){const i=this.nv();e.fillStyle=this.Yp.N().layout.panes.separatorColor,e.fillRect(t,r,i.width,i.height)}kt(){this.Qp(),this.Yp.N().layout.panes.enableResize!==this.qp&&(this.qp=this.Yp.N().layout.panes.enableResize,this.qp?this.tv():(this.Up!==null&&(this.Jp.removeChild(this.Up.rv),this.Jp.removeChild(this.Up.hv),this.Up=null),this.$p!==null&&(this.$p.m(),this.$p=null)))}tv(){const e=document.createElement("div"),t=e.style;t.position="fixed",t.display="none",t.zIndex="49",t.top="0",t.left="0",t.width="100%",t.height="100%",t.cursor="row-resize",this.Jp.appendChild(e);const r=document.createElement("div"),i=r.style;i.position="absolute",i.zIndex="50",i.top="-4px",i.height="9px",i.width="100%",i.backgroundColor="",i.cursor="row-resize",this.Jp.appendChild(r);const s={lp:this.av.bind(this),zp:this.lv.bind(this),Pp:this.ov.bind(this),yp:this.ov.bind(this),mp:this._v.bind(this),pp:this._v.bind(this),bp:this.uv.bind(this),gp:this.uv.bind(this)};this.$p=new Cx(r,s,{dp:()=>!1,fp:()=>!0}),this.Up={hv:r,rv:e}}Qp(){this.Jp.style.background=this.Yp.N().layout.panes.separatorColor}av(e){this.Up!==null&&(this.Up.hv.style.backgroundColor=this.Yp.N().layout.panes.separatorHoverColor)}lv(e){this.Up!==null&&this.jp===null&&(this.Up.hv.style.backgroundColor="")}ov(e){if(this.Up===null)return;const t=this.Kp.cv().E_()+this.Gp.cv().E_(),r=t/(this.Kp.sv().height+this.Gp.sv().height),i=30*r;t<=2*i||(this.jp={dv:e.pageY,fv:this.Kp.cv().E_(),pv:t-i,vv:t,mv:r,wv:i},this.Up.rv.style.display="block")}_v(e){const t=this.jp;if(t===null)return;const r=(e.pageY-t.dv)*t.mv,i=Tp(t.fv+r,t.wv,t.pv);this.Kp.cv().A_(i),this.Gp.cv().A_(t.vv-i),this.Yp.Qt().Ca()}uv(e){this.jp!==null&&this.Up!==null&&(this.jp=null,this.Up.rv.style.display="none")}}function i_(n,e){return n.gv-e.gv}function s_(n,e,t){const r=(n.gv-e.gv)/(n.wt-e.wt);return Math.sign(r)*Math.min(Math.abs(r),t)}class c0e{constructor(e,t,r,i){this.Mv=null,this.bv=null,this.Sv=null,this.xv=null,this.Cv=null,this.yv=0,this.kv=0,this.Pv=e,this.Tv=t,this.Rv=r,this.kn=i}Dv(e,t){if(this.Mv!==null){if(this.Mv.wt===t)return void(this.Mv.gv=e);if(Math.abs(this.Mv.gv-e)<this.kn)return}this.xv=this.Sv,this.Sv=this.bv,this.bv=this.Mv,this.Mv={wt:t,gv:e}}fe(e,t){if(this.Mv===null||this.bv===null||t-this.Mv.wt>50)return;let r=0;const i=s_(this.Mv,this.bv,this.Tv),s=i_(this.Mv,this.bv),o=[i],a=[s];if(r+=s,this.Sv!==null){const c=s_(this.bv,this.Sv,this.Tv);if(Math.sign(c)===Math.sign(i)){const u=i_(this.bv,this.Sv);if(o.push(c),a.push(u),r+=u,this.xv!==null){const h=s_(this.Sv,this.xv,this.Tv);if(Math.sign(h)===Math.sign(i)){const d=i_(this.Sv,this.xv);o.push(h),a.push(d),r+=d}}}}let l=0;for(let c=0;c<o.length;++c)l+=a[c]/r*o[c];Math.abs(l)<this.Pv||(this.Cv={gv:e,wt:t},this.kv=l,this.yv=function(c,u){const h=Math.log(u);return Math.log(1*h/-c)/h}(Math.abs(l),this.Rv))}Ac(e){const t=Se(this.Cv),r=e-t.wt;return t.gv+this.kv*(Math.pow(this.Rv,r)-1)/Math.log(this.Rv)}Ec(e){return this.Cv===null||this.Iv(e)===this.yv}Iv(e){const t=e-Se(this.Cv).wt;return Math.min(t,this.yv)}}class u0e{constructor(e,t){this.Vv=void 0,this.Bv=void 0,this.Ev=void 0,this.ws=!1,this.Av=e,this.Lv=t,this.zv()}kt(){this.zv()}Ov(){this.Vv&&this.Av.removeChild(this.Vv),this.Bv&&this.Av.removeChild(this.Bv),this.Vv=void 0,this.Bv=void 0}Nv(){return this.ws!==this.Fv()||this.Ev!==this.Wv()}Wv(){return this.Lv.Qt().Xi().J(this.Lv.N().layout.textColor)>160?"dark":"light"}Fv(){return this.Lv.N().layout.attributionLogo}Hv(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}zv(){this.Nv()&&(this.Ov(),this.ws=this.Fv(),this.ws&&(this.Ev=this.Wv(),this.Bv=document.createElement("style"),this.Bv.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Vv=document.createElement("a"),this.Vv.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Hv()}`,this.Vv.title="Charting by TradingView",this.Vv.id="tv-attr-logo",this.Vv.target="_blank",this.Vv.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Vv.toggleAttribute("data-dark",this.Ev==="dark"),this.Av.appendChild(this.Bv),this.Av.appendChild(this.Vv)))}}function Kc(n,e){const t=Se(n.ownerDocument).createElement("canvas");n.appendChild(t);const r=Gme(t,{options:{allowResizeObserver:!0},transform:(i,s)=>({width:Math.max(i.width,s.width),height:Math.max(i.height,s.height)})});return r.resizeCanvasElement(e),r}function Xc(n){var e;n.width=1,n.height=1,(e=n.getContext("2d"))==null||e.clearRect(0,0,1,1)}function EI(n,e,t,r){n.Uh&&n.Uh(e,t,r)}function Jv(n,e,t,r){n.nt(e,t,r)}function TI(n,e,t,r){const i=n(t,r);for(const s of i){const o=s.Tt(r);o!==null&&e(o)}}function o_(n,e){return t=>{var r,i;return function(s){return s.Ft!==void 0}(t)?(((r=t.Ft())==null?void 0:r.ol())??"")!==e?[]:((i=t.Ya)==null?void 0:i.call(t,n))??[]:[]}}function m4(n,e,t,r){if(!n.length)return;let i=0;const s=n[0].$t(r,!0);let o=e===1?t/2-(n[0].Hi()-s/2):n[0].Hi()-s/2-t/2;o=Math.max(0,o);for(let a=1;a<n.length;a++){const l=n[a],c=n[a-1],u=c.$t(r,!1),h=l.Hi(),d=c.Hi();if(e===1?h>d-u:h<d+u){const f=d-u*e;l.Ui(f);const m=f-e*u/2;if((e===1?m<0:m>t)&&o>0){const g=e===1?-1-m:m-t,v=Math.min(g,o);for(let y=i;y<n.length;y++)n[y].Ui(n[y].Hi()+e*v);o-=v}}else i=a,o=e===1?d-u-h:h-(d+u)}}class g4{constructor(e,t,r,i){this.Ki=null,this.Uv=null,this.$v=!1,this.qv=new Xy(200),this.jv=null,this.Yv=0,this.Kv=!1,this.Zv=()=>{this.Kv||this.yt.Gv().Qt().dr()},this.Xv=()=>{this.Kv||this.yt.Gv().Qt().dr()},this.yt=e,this.Ps=t,this.Co=t.layout,this.hd=r,this.Jv=i==="left",this.Qv=o_("normal",i),this.tm=o_("top",i),this.im=o_("bottom",i),this.Jp=document.createElement("div"),this.Jp.style.height="100%",this.Jp.style.overflow="hidden",this.Jp.style.width="25px",this.Jp.style.left="0",this.Jp.style.position="relative",this.sm=Kc(this.Jp,Zt({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const s=this.sm.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.nm=Kc(this.Jp,Zt({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const o=this.nm.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const a={Pp:this.ov.bind(this),yp:this.ov.bind(this),mp:this._v.bind(this),pp:this._v.bind(this),Tp:this.rm.bind(this),bp:this.uv.bind(this),gp:this.uv.bind(this),ip:this.hm.bind(this),Xf:this.hm.bind(this),lp:this.am.bind(this),zp:this.lv.bind(this)};this.$p=new Cx(this.nm.canvasElement,a,{dp:()=>!this.Ps.handleScroll.vertTouchDrag,fp:()=>!0})}m(){this.$p.m(),this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Xc(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Xc(this.sm.canvasElement),this.sm.dispose(),this.Ki!==null&&this.Ki.r_().u(this),this.Ki=null}iv(){return this.Jp}k(){return this.Co.fontSize}lm(){const e=this.hd.N();return this.jv!==e.P&&(this.qv.On(),this.jv=e.P),e}om(){if(this.Ki===null)return 0;let e=0;const t=this.lm(),r=Se(this.sm.canvasElement.getContext("2d",{colorSpace:this.yt.Gv().N().layout.colorSpace}));r.save();const i=this.Ki.Vl();r.font=this._m(),i.length>0&&(e=Math.max(this.qv.Ii(r,i[0].Jl),this.qv.Ii(r,i[i.length-1].Jl)));const s=this.um();for(let c=s.length;c--;){const u=this.qv.Ii(r,s[c].ri());u>e&&(e=u)}const o=this.Ki.Lt();if(o!==null&&this.Uv!==null&&(a=this.Ps.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){const c=this.Ki.Ds(1,o),u=this.Ki.Ds(this.Uv.height-2,o);e=Math.max(e,this.qv.Ii(r,this.Ki.Ji(Math.floor(Math.min(c,u))+.11111111111111,o)),this.qv.Ii(r,this.Ki.Ji(Math.ceil(Math.max(c,u))-.11111111111111,o)))}var a;r.restore();const l=e||34;return CI(Math.ceil(t.S+t.C+t.V+t.B+5+l))}dm(e){this.Uv!==null&&Rc(this.Uv,e)||(this.Uv=e,this.Kv=!0,this.sm.resizeCanvasElement(e),this.nm.resizeCanvasElement(e),this.Kv=!1,this.Jp.style.width=`${e.width}px`,this.Jp.style.height=`${e.height}px`)}fm(){return Se(this.Uv).width}cs(e){this.Ki!==e&&(this.Ki!==null&&this.Ki.r_().u(this),this.Ki=e,e.r_().i(this.do.bind(this),this))}Ft(){return this.Ki}On(){const e=this.yt.cv();this.yt.Gv().Qt().Q_(e,Se(this.Ft()))}pm(e){if(this.Uv===null)return;const t={colorSpace:this.yt.Gv().N().layout.colorSpace};if(e!==1){this.vm(),this.sm.applySuggestedBitmapSize();const i=Vc(this.sm,t);i!==null&&(i.useBitmapCoordinateSpace(s=>{this.wm(s),this.gm(s)}),this.yt.Mm(i,this.im),this.bm(i),this.yt.Mm(i,this.Qv),this.Sm(i))}this.nm.applySuggestedBitmapSize();const r=Vc(this.nm,t);r!==null&&(r.useBitmapCoordinateSpace(({context:i,bitmapSize:s})=>{i.clearRect(0,0,s.width,s.height)}),this.xm(r),this.yt.Mm(r,this.tm))}nv(){return this.sm.bitmapSize}ev(e,t,r,i){const s=this.nv();if(s.width>0&&s.height>0&&(e.drawImage(this.sm.canvasElement,t,r),i)){const o=this.nm.canvasElement;e.drawImage(o,t,r)}}kt(){var e;(e=this.Ki)==null||e.Vl()}ov(e){if(this.Ki===null||this.Ki.Gi()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.yt.Gv().Qt(),r=this.yt.cv();this.$v=!0,t.j_(r,this.Ki,e.localY)}_v(e){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.yt.Gv().Qt(),r=this.yt.cv(),i=this.Ki;t.Y_(r,i,e.localY)}rm(){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.yt.Gv().Qt(),t=this.yt.cv(),r=this.Ki;this.$v&&(this.$v=!1,e.K_(t,r))}uv(e){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.yt.Gv().Qt(),r=this.yt.cv();this.$v=!1,t.K_(r,this.Ki)}hm(e){this.Ps.handleScale.axisDoubleClickReset.price&&this.On()}am(e){this.Ki!==null&&(!this.yt.Gv().Qt().N().handleScale.axisPressedMouseMove.price||this.Ki.He()||this.Ki.Eo()||this.Cm(1))}lv(e){this.Cm(0)}um(){const e=[],t=this.Ki===null?void 0:this.Ki;return(r=>{for(let i=0;i<r.length;++i){const s=r[i].Ks(this.yt.cv(),t);for(let o=0;o<s.length;o++)e.push(s[o])}})(this.yt.cv().Dt()),e}wm({context:e,bitmapSize:t}){const{width:r,height:i}=t,s=this.yt.cv().Qt(),o=s.$(),a=s.Kd();o===a?xx(e,0,0,r,i,o):TK(e,0,0,r,i,o,a)}gm({context:e,bitmapSize:t,horizontalPixelRatio:r}){if(this.Uv===null||this.Ki===null||!this.Ki.N().borderVisible)return;e.fillStyle=this.Ki.N().borderColor;const i=Math.max(1,Math.floor(this.lm().S*r));let s;s=this.Jv?t.width-i:0,e.fillRect(s,0,i,t.height)}bm(e){if(this.Uv===null||this.Ki===null)return;const t=this.Ki.Vl(),r=this.Ki.N(),i=this.lm(),s=this.Jv?this.Uv.width-i.C:0;r.borderVisible&&r.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:l})=>{o.fillStyle=r.borderColor;const c=Math.max(1,Math.floor(l)),u=Math.floor(.5*l),h=Math.round(i.C*a);o.beginPath();for(const d of t)o.rect(Math.floor(s*a),Math.round(d.Pl*l)-u,h,c);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{o.font=this._m(),o.fillStyle=r.textColor??this.Co.textColor,o.textAlign=this.Jv?"right":"left",o.textBaseline="middle";const a=this.Jv?Math.round(s-i.V):Math.round(s+i.C+i.V),l=t.map(c=>this.qv.Di(o,c.Jl));for(let c=t.length;c--;){const u=t[c];o.fillText(u.Jl,a,u.Pl+l[c])}})}vm(){if(this.Uv===null||this.Ki===null)return;let e=this.Uv.height/2;const t=[],r=this.Ki.Dt().slice(),i=this.yt.cv(),s=this.lm();this.Ki===i.Gn()&&this.yt.cv().Dt().forEach(l=>{i.Zn(l)&&r.push(l)});const o=this.Ki.Sl()[0],a=this.Ki;r.forEach(l=>{const c=l.Ks(i,a);c.forEach(u=>{u.$i()&&u.Wi()===null&&(u.Ui(null),t.push(u))}),o===l&&c.length>0&&(e=c[0].Ei())}),this.Ki.N().alignLabels&&this.ym(t,s,e)}ym(e,t,r){if(this.Uv===null)return;const i=e.filter(o=>o.Ei()<=r),s=e.filter(o=>o.Ei()>r);i.sort((o,a)=>a.Ei()-o.Ei()),i.length&&s.length&&s.push(i[0]),s.sort((o,a)=>o.Ei()-a.Ei());for(const o of e){const a=Math.floor(o.$t(t)/2),l=o.Ei();l>-a&&l<a&&o.Ui(a),l>this.Uv.height-a&&l<this.Uv.height+a&&o.Ui(this.Uv.height-a)}m4(i,1,this.Uv.height,t),m4(s,-1,this.Uv.height,t)}Sm(e){if(this.Uv===null)return;const t=this.um(),r=this.lm(),i=this.Jv?"right":"left";t.forEach(s=>{s.qi()&&s.Tt(Se(this.Ki)).nt(e,r,this.qv,i)})}xm(e){if(this.Uv===null||this.Ki===null)return;const t=this.yt.Gv().Qt(),r=[],i=this.yt.cv(),s=t.gd().Ks(i,this.Ki);s.length&&r.push(s);const o=this.lm(),a=this.Jv?"right":"left";r.forEach(l=>{l.forEach(c=>{c.Tt(Se(this.Ki)).nt(e,o,this.qv,a)})})}Cm(e){this.Jp.style.cursor=e===1?"ns-resize":"default"}do(){const e=this.om();this.Yv<e&&this.yt.Gv().Qt().Ca(),this.Yv=e}_m(){return Ky(this.Co.fontSize,this.Co.fontFamily)}}function h0e(n,e){var t;return((t=n.qa)==null?void 0:t.call(n,e))??[]}function v4(n,e){var t;return((t=n.Ys)==null?void 0:t.call(n,e))??[]}function y4(n,e){var t;return((t=n.ds)==null?void 0:t.call(n,e))??[]}function d0e(n,e){var t;return((t=n.Ha)==null?void 0:t.call(n,e))??[]}class pR{constructor(e,t){this.Uv=Zt({width:0,height:0}),this.km=null,this.Pm=null,this.Tm=null,this.Rm=null,this.Dm=!1,this.Im=new Hn,this.Vm=new Hn,this.Bm=0,this.Em=!1,this.Am=null,this.Lm=!1,this.zm=null,this.Om=null,this.Kv=!1,this.Zv=()=>{this.Kv||this.Nm===null||this.ns().dr()},this.Xv=()=>{this.Kv||this.Nm===null||this.ns().dr()},this.Lv=e,this.Nm=t,this.Nm.nu().i(this.Fm.bind(this),this,!0),this.Wm=document.createElement("td"),this.Wm.style.padding="0",this.Wm.style.position="relative";const r=document.createElement("div");r.style.width="100%",r.style.height="100%",r.style.position="relative",r.style.overflow="hidden",this.Hm=document.createElement("td"),this.Hm.style.padding="0",this.Um=document.createElement("td"),this.Um.style.padding="0",this.Wm.appendChild(r),this.sm=Kc(r,Zt({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const i=this.sm.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.nm=Kc(r,Zt({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const s=this.nm.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.Xp=document.createElement("tr"),this.Xp.appendChild(this.Hm),this.Xp.appendChild(this.Wm),this.Xp.appendChild(this.Um),this.$m(),this.$p=new Cx(this.nm.canvasElement,this,{dp:()=>this.Am===null&&!this.Lv.N().handleScroll.vertTouchDrag,fp:()=>this.Am===null&&!this.Lv.N().handleScroll.horzTouchDrag})}m(){this.km!==null&&this.km.m(),this.Pm!==null&&this.Pm.m(),this.Tm=null,this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Xc(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Xc(this.sm.canvasElement),this.sm.dispose(),this.Nm!==null&&(this.Nm.nu().u(this),this.Nm.m()),this.$p.m()}cv(){return Se(this.Nm)}qm(e){var t;this.Nm!==null&&this.Nm.nu().u(this),this.Nm=e,this.Nm!==null&&this.Nm.nu().i(pR.prototype.Fm.bind(this),this,!0),this.$m(),this.Lv.Zp().indexOf(this)===this.Lv.Zp().length-1?(this.Tm=this.Tm??new u0e(this.Wm,this.Lv),this.Tm.kt()):((t=this.Tm)==null||t.Ov(),this.Tm=null)}Gv(){return this.Lv}iv(){return this.Xp}$m(){if(this.Nm!==null&&(this.jm(),this.ns().tn().length!==0)){if(this.km!==null){const e=this.Nm.U_();this.km.cs(Se(e))}if(this.Pm!==null){const e=this.Nm.q_();this.Pm.cs(Se(e))}}}Ym(){this.km!==null&&this.km.kt(),this.Pm!==null&&this.Pm.kt()}E_(){return this.Nm!==null?this.Nm.E_():0}A_(e){this.Nm&&this.Nm.A_(e)}lp(e){if(!this.Nm)return;this.Km();const t=e.localX,r=e.localY;this.Zm(t,r,e)}Pp(e){this.Km(),this.Gm(),this.Zm(e.localX,e.localY,e)}op(e){if(!this.Nm)return;this.Km();const t=e.localX,r=e.localY;this.Zm(t,r,e)}Sp(e){this.Nm!==null&&(this.Km(),this.Xm(e))}ip(e){this.Nm!==null&&this.Jm(this.Vm,e)}Xf(e){this.ip(e)}mp(e){this.Km(),this.Qm(e),this.Zm(e.localX,e.localY,e)}bp(e){this.Nm!==null&&(this.Km(),this.Em=!1,this.tw(e))}Mp(e){this.Nm!==null&&this.Xm(e)}Op(e){if(this.Em=!0,this.Am===null){const t={x:e.localX,y:e.localY};this.iw(t,t,e)}}zp(e){this.Nm!==null&&(this.Km(),this.Nm.Qt().vd(null),this.sw())}nw(){return this.Im}ew(){return this.Vm}Ip(){this.Bm=1,this.ns().dn()}Vp(e,t){if(!this.Lv.N().handleScale.pinch)return;const r=5*(t-this.Bm);this.Bm=t,this.ns().Td(e._t,r)}yp(e){this.Em=!1,this.Lm=this.Am!==null,this.Gm();const t=this.ns().gd();this.Am!==null&&t.It()&&(this.zm={x:t.si(),y:t.ni()},this.Am={x:e.localX,y:e.localY})}pp(e){if(this.Nm===null)return;const t=e.localX,r=e.localY;if(this.Am===null)this.Qm(e);else{this.Lm=!1;const i=Se(this.zm),s=i.x+(t-this.Am.x),o=i.y+(r-this.Am.y);this.Zm(s,o,e)}}gp(e){this.Gv().N().trackingMode.exitMode===0&&(this.Lm=!0),this.rw(),this.tw(e)}Qn(e,t){const r=this.Nm;return r===null?null:jK(r,e,t)}hw(e,t){Se(t==="left"?this.km:this.Pm).dm(Zt({width:e,height:this.Uv.height}))}sv(){return this.Uv}dm(e){Rc(this.Uv,e)||(this.Uv=e,this.Kv=!0,this.sm.resizeCanvasElement(e),this.nm.resizeCanvasElement(e),this.Kv=!1,this.Wm.style.width=e.width+"px",this.Wm.style.height=e.height+"px")}aw(){const e=Se(this.Nm);e.H_(e.U_()),e.H_(e.q_());for(const t of e.Sl())if(e.Zn(t)){const r=t.Ft();r!==null&&e.H_(r),t.Ws()}for(const t of e.ru())t.Ws()}nv(){return this.sm.bitmapSize}ev(e,t,r,i){const s=this.nv();if(s.width>0&&s.height>0&&(e.drawImage(this.sm.canvasElement,t,r),i)){const o=this.nm.canvasElement;e!==null&&e.drawImage(o,t,r)}}pm(e){if(e===0||this.Nm===null)return;e>1&&this.aw(),this.km!==null&&this.km.pm(e),this.Pm!==null&&this.Pm.pm(e);const t={colorSpace:this.Lv.N().layout.colorSpace};if(e!==1){this.sm.applySuggestedBitmapSize();const i=Vc(this.sm,t);i!==null&&(i.useBitmapCoordinateSpace(s=>{this.wm(s)}),this.Nm&&(this.lw(i,h0e),this.ow(i),this.lw(i,v4),this.lw(i,y4)))}this.nm.applySuggestedBitmapSize();const r=Vc(this.nm,t);r!==null&&(r.useBitmapCoordinateSpace(({context:i,bitmapSize:s})=>{i.clearRect(0,0,s.width,s.height)}),this._w(r),this.lw(r,d0e),this.lw(r,y4))}uw(){return this.km}cw(){return this.Pm}Mm(e,t){this.lw(e,t)}Fm(){this.Nm!==null&&this.Nm.nu().u(this),this.Nm=null}Xm(e){this.Jm(this.Im,e)}Jm(e,t){const r=t.localX,i=t.localY;e.v()&&e.p(this.ns().Et().wc(r),{x:r,y:i},t)}wm({context:e,bitmapSize:t}){const{width:r,height:i}=t,s=this.ns(),o=s.$(),a=s.Kd();o===a?xx(e,0,0,r,i,a):TK(e,0,0,r,i,o,a)}ow(e){const t=Se(this.Nm),r=t.eu().pr().Tt(t);r!==null&&r.nt(e,!1)}_w(e){this.dw(e,v4,Jv,this.ns().gd())}lw(e,t){const r=Se(this.Nm),i=r.Dt(),s=r.ru();for(const o of s)this.dw(e,t,EI,o);for(const o of i)this.dw(e,t,EI,o);for(const o of s)this.dw(e,t,Jv,o);for(const o of i)this.dw(e,t,Jv,o)}dw(e,t,r,i){const s=Se(this.Nm),o=s.Qt().pd(),a=o!==null&&o.hu===i,l=o!==null&&a&&o.au!==void 0?o.au.ie:void 0;TI(t,c=>r(c,e,a,l),i,s)}jm(){if(this.Nm===null)return;const e=this.Lv,t=this.Nm.U_().N().visible,r=this.Nm.q_().N().visible;t||this.km===null||(this.Hm.removeChild(this.km.iv()),this.km.m(),this.km=null),r||this.Pm===null||(this.Um.removeChild(this.Pm.iv()),this.Pm.m(),this.Pm=null);const i=e.Qt().Nd();t&&this.km===null&&(this.km=new g4(this,e.N(),i,"left"),this.Hm.appendChild(this.km.iv())),r&&this.Pm===null&&(this.Pm=new g4(this,e.N(),i,"right"),this.Um.appendChild(this.Pm.iv()))}fw(e){return e.Np&&this.Em||this.Am!==null}Zm(e,t,r){e=Math.max(0,Math.min(e,this.Uv.width-1)),t=Math.max(0,Math.min(t,this.Uv.height-1)),this.ns().Ad(e,t,r,Se(this.Nm))}sw(){this.ns().zd()}rw(){this.Lm&&(this.Am=null,this.sw())}iw(e,t,r){this.Am=e,this.Lm=!1,this.Zm(t.x,t.y,r);const i=this.ns().gd();this.zm={x:i.si(),y:i.ni()}}ns(){return this.Lv.Qt()}tw(e){if(!this.Dm)return;const t=this.ns(),r=this.cv();if(t.X_(r,r.Rs()),this.Rm=null,this.Dm=!1,t.Vd(),this.Om!==null){const i=performance.now(),s=t.Et();this.Om.fe(s.Cc(),i),this.Om.Ec(i)||t.vn(this.Om)}}Km(){this.Am=null}Gm(){if(this.Nm){if(this.ns().dn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)Se(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Nm.Rs().Gi()&&this.ns().Et().Gi()}}Qm(e){if(this.Nm===null)return;const t=this.ns(),r=t.Et();if(r.Gi())return;const i=this.Lv.N(),s=i.handleScroll,o=i.kineticScroll;if((!s.pressedMouseMove||e.Np)&&(!s.horzTouchDrag&&!s.vertTouchDrag||!e.Np))return;const a=this.Nm.Rs(),l=performance.now();if(this.Rm!==null||this.fw(e)||(this.Rm={x:e.clientX,y:e.clientY,cf:l,pw:e.localX,mw:e.localY}),this.Rm!==null&&!this.Dm&&(this.Rm.x!==e.clientX||this.Rm.y!==e.clientY)){if(e.Np&&o.touch||!e.Np&&o.mouse){const c=r.ul();this.Om=new c0e(.2/c,7/c,.997,15/c),this.Om.Dv(r.Cc(),this.Rm.cf)}else this.Om=null;a.Gi()||t.Z_(this.Nm,a,e.localY),t.Dd(e.localX),this.Dm=!0}this.Dm&&(a.Gi()||t.G_(this.Nm,a,e.localY),t.Id(e.localX),this.Om!==null&&this.Om.Dv(r.Cc(),l))}}class b4{constructor(e,t,r,i,s){this.xt=!0,this.Uv=Zt({width:0,height:0}),this.Zv=()=>this.pm(3),this.Jv=e==="left",this.hd=r.Nd,this.Ps=t,this.ww=i,this.gw=s,this.Jp=document.createElement("div"),this.Jp.style.width="25px",this.Jp.style.height="100%",this.Jp.style.overflow="hidden",this.sm=Kc(this.Jp,Zt({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv)}m(){this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Xc(this.sm.canvasElement),this.sm.dispose()}iv(){return this.Jp}sv(){return this.Uv}dm(e){Rc(this.Uv,e)||(this.Uv=e,this.sm.resizeCanvasElement(e),this.Jp.style.width=`${e.width}px`,this.Jp.style.height=`${e.height}px`,this.xt=!0)}pm(e){if(e<3&&!this.xt||this.Uv.width===0||this.Uv.height===0)return;this.xt=!1,this.sm.applySuggestedBitmapSize();const t=Vc(this.sm,{colorSpace:this.Ps.layout.colorSpace});t!==null&&t.useBitmapCoordinateSpace(r=>{this.wm(r),this.gm(r)})}nv(){return this.sm.bitmapSize}ev(e,t,r){const i=this.nv();i.width>0&&i.height>0&&e.drawImage(this.sm.canvasElement,t,r)}gm({context:e,bitmapSize:t,horizontalPixelRatio:r,verticalPixelRatio:i}){if(!this.ww())return;e.fillStyle=this.Ps.timeScale.borderColor;const s=Math.floor(this.hd.N().S*r),o=Math.floor(this.hd.N().S*i),a=this.Jv?t.width-s:0;e.fillRect(a,0,s,o)}wm({context:e,bitmapSize:t}){xx(e,0,0,t.width,t.height,this.gw())}}function mR(n){return e=>{var t;return((t=e.Ka)==null?void 0:t.call(e,n))??[]}}const f0e=mR("normal"),p0e=mR("top"),m0e=mR("bottom");class g0e{constructor(e,t){this.Mw=null,this.bw=null,this.M=null,this.Sw=!1,this.Uv=Zt({width:0,height:0}),this.xw=new Hn,this.qv=new Xy(5),this.Kv=!1,this.Zv=()=>{this.Kv||this.Lv.Qt().dr()},this.Xv=()=>{this.Kv||this.Lv.Qt().dr()},this.Lv=e,this.cu=t,this.Ps=e.N().layout,this.Vv=document.createElement("tr"),this.Cw=document.createElement("td"),this.Cw.style.padding="0",this.yw=document.createElement("td"),this.yw.style.padding="0",this.Jp=document.createElement("td"),this.Jp.style.height="25px",this.Jp.style.padding="0",this.kw=document.createElement("div"),this.kw.style.width="100%",this.kw.style.height="100%",this.kw.style.position="relative",this.kw.style.overflow="hidden",this.Jp.appendChild(this.kw),this.sm=Kc(this.kw,Zt({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const r=this.sm.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.nm=Kc(this.kw,Zt({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const i=this.nm.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.Vv.appendChild(this.Cw),this.Vv.appendChild(this.Jp),this.Vv.appendChild(this.yw),this.Pw(),this.Lv.Qt().B_().i(this.Pw.bind(this),this),this.$p=new Cx(this.nm.canvasElement,this,{dp:()=>!0,fp:()=>!this.Lv.N().handleScroll.horzTouchDrag})}m(){this.$p.m(),this.Mw!==null&&this.Mw.m(),this.bw!==null&&this.bw.m(),this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Xc(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Xc(this.sm.canvasElement),this.sm.dispose()}iv(){return this.Vv}Tw(){return this.Mw}Rw(){return this.bw}Pp(e){if(this.Sw)return;this.Sw=!0;const t=this.Lv.Qt();!t.Et().Gi()&&this.Lv.N().handleScale.axisPressedMouseMove.time&&t.Pd(e.localX)}yp(e){this.Pp(e)}Tp(){const e=this.Lv.Qt();!e.Et().Gi()&&this.Sw&&(this.Sw=!1,this.Lv.N().handleScale.axisPressedMouseMove.time&&e.Ed())}mp(e){const t=this.Lv.Qt();!t.Et().Gi()&&this.Lv.N().handleScale.axisPressedMouseMove.time&&t.Bd(e.localX)}pp(e){this.mp(e)}bp(){this.Sw=!1;const e=this.Lv.Qt();e.Et().Gi()&&!this.Lv.N().handleScale.axisPressedMouseMove.time||e.Ed()}gp(){this.bp()}ip(){this.Lv.N().handleScale.axisDoubleClickReset.time&&this.Lv.Qt().wn()}Xf(){this.ip()}lp(){this.Lv.Qt().N().handleScale.axisPressedMouseMove.time&&this.Cm(1)}zp(){this.Cm(0)}sv(){return this.Uv}Dw(){return this.xw}Iw(e,t,r){Rc(this.Uv,e)||(this.Uv=e,this.Kv=!0,this.sm.resizeCanvasElement(e),this.nm.resizeCanvasElement(e),this.Kv=!1,this.Jp.style.width=`${e.width}px`,this.Jp.style.height=`${e.height}px`,this.xw.p(e)),this.Mw!==null&&this.Mw.dm(Zt({width:t,height:e.height})),this.bw!==null&&this.bw.dm(Zt({width:r,height:e.height}))}Vw(){const e=this.Bw();return Math.ceil(e.S+e.C+e.k+e.A+e.I+e.Ew)}kt(){this.Lv.Qt().Et().Vl()}nv(){return this.sm.bitmapSize}ev(e,t,r,i){const s=this.nv();if(s.width>0&&s.height>0&&(e.drawImage(this.sm.canvasElement,t,r),i)){const o=this.nm.canvasElement;e.drawImage(o,t,r)}}pm(e){if(e===0)return;const t={colorSpace:this.Ps.colorSpace};if(e!==1){this.sm.applySuggestedBitmapSize();const i=Vc(this.sm,t);i!==null&&(i.useBitmapCoordinateSpace(s=>{this.wm(s),this.gm(s),this.Aw(i,m0e)}),this.bm(i),this.Aw(i,f0e)),this.Mw!==null&&this.Mw.pm(e),this.bw!==null&&this.bw.pm(e)}this.nm.applySuggestedBitmapSize();const r=Vc(this.nm,t);r!==null&&(r.useBitmapCoordinateSpace(({context:i,bitmapSize:s})=>{i.clearRect(0,0,s.width,s.height)}),this.Lw([...this.Lv.Qt().tn(),this.Lv.Qt().gd()],r),this.Aw(r,p0e))}Aw(e,t){const r=this.Lv.Qt().tn();for(const i of r)TI(t,s=>EI(s,e,!1,void 0),i,void 0);for(const i of r)TI(t,s=>Jv(s,e,!1,void 0),i,void 0)}wm({context:e,bitmapSize:t}){xx(e,0,0,t.width,t.height,this.Lv.Qt().Kd())}gm({context:e,bitmapSize:t,verticalPixelRatio:r}){if(this.Lv.N().timeScale.borderVisible){e.fillStyle=this.zw();const i=Math.max(1,Math.floor(this.Bw().S*r));e.fillRect(0,0,t.width,i)}}bm(e){const t=this.Lv.Qt().Et(),r=t.Vl();if(!r||r.length===0)return;const i=this.cu.maxTickMarkWeight(r),s=this.Bw(),o=t.N();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:c})=>{a.strokeStyle=this.zw(),a.fillStyle=this.zw();const u=Math.max(1,Math.floor(l)),h=Math.floor(.5*l);a.beginPath();const d=Math.round(s.C*c);for(let f=r.length;f--;){const m=Math.round(r[f].coord*l);a.rect(m-h,0,u,d)}a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{const l=s.S+s.C+s.A+s.k/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.H(),a.font=this._m();for(const c of r)if(c.weight<i){const u=c.needAlignCoordinate?this.Ow(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}this.Lv.N().timeScale.allowBoldLabels&&(a.font=this.Nw());for(const c of r)if(c.weight>=i){const u=c.needAlignCoordinate?this.Ow(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}})}Ow(e,t,r){const i=this.qv.Ii(e,r),s=i/2,o=Math.floor(t-s)+.5;return o<0?t+=Math.abs(0-o):o+i>this.Uv.width&&(t-=Math.abs(this.Uv.width-(o+i))),t}Lw(e,t){const r=this.Bw();for(const i of e)for(const s of i.fs())s.Tt().nt(t,r)}zw(){return this.Lv.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}_m(){return Ky(this.F(),this.Ps.fontFamily)}Nw(){return Ky(this.F(),this.Ps.fontFamily,"bold")}Bw(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,I:NaN,ts:NaN,C:5,k:NaN,P:"",Qi:new Xy,Ew:0});const e=this.M,t=this._m();if(e.P!==t){const r=this.F();e.k=r,e.P=t,e.A=3*r/12,e.I=3*r/12,e.ts=9*r/12,e.L=0,e.Ew=4*r/12,e.Qi.On()}return this.M}Cm(e){this.Jp.style.cursor=e===1?"ew-resize":"default"}Pw(){const e=this.Lv.Qt(),t=e.N();t.leftPriceScale.visible||this.Mw===null||(this.Cw.removeChild(this.Mw.iv()),this.Mw.m(),this.Mw=null),t.rightPriceScale.visible||this.bw===null||(this.yw.removeChild(this.bw.iv()),this.bw.m(),this.bw=null);const r={Nd:this.Lv.Qt().Nd()},i=()=>t.leftPriceScale.borderVisible&&e.Et().N().borderVisible,s=()=>e.Kd();t.leftPriceScale.visible&&this.Mw===null&&(this.Mw=new b4("left",t,r,i,s),this.Cw.appendChild(this.Mw.iv())),t.rightPriceScale.visible&&this.bw===null&&(this.bw=new b4("right",t,r,i,s),this.yw.appendChild(this.bw.iv()))}}var pW;const v0e=!!gd&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(n=>n.brand.includes("Chromium"))&&!!gd&&((pW=navigator==null?void 0:navigator.userAgentData)!=null&&pW.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class y0e{constructor(e,t,r){var i;this.Fw=[],this.Ww=[],this.Hw=0,this.eo=0,this.S_=0,this.Uw=0,this.$w=0,this.qw=null,this.jw=!1,this.Im=new Hn,this.Vm=new Hn,this.nd=new Hn,this.Yw=null,this.Kw=null,this.Av=e,this.Ps=t,this.cu=r,this.Vv=document.createElement("div"),this.Vv.classList.add("tv-lightweight-charts"),this.Vv.style.overflow="hidden",this.Vv.style.direction="ltr",this.Vv.style.width="100%",this.Vv.style.height="100%",(i=this.Vv).style.userSelect="none",i.style.webkitUserSelect="none",i.style.msUserSelect="none",i.style.MozUserSelect="none",i.style.webkitTapHighlightColor="transparent",this.Zw=document.createElement("table"),this.Zw.setAttribute("cellspacing","0"),this.Vv.appendChild(this.Zw),this.Gw=this.Xw.bind(this),a_(this.Ps)&&this.Jw(!0),this.ns=new n0e(this.rd.bind(this),this.Ps,r),this.Qt().Md().i(this.Qw.bind(this),this),this.tg=new g0e(this,this.cu),this.Zw.appendChild(this.tg.iv());const s=t.autoSize&&this.ig();let o=this.Ps.width,a=this.Ps.height;if(s||o===0||a===0){const l=e.getBoundingClientRect();o=o||l.width,a=a||l.height}this.sg(o,a),this.ng(),e.appendChild(this.Vv),this.eg(),this.ns.Et().Oc().i(this.ns.Ca.bind(this.ns),this),this.ns.B_().i(this.ns.Ca.bind(this.ns),this)}Qt(){return this.ns}N(){return this.Ps}Zp(){return this.Fw}rg(){return this.tg}m(){this.Jw(!1),this.Hw!==0&&window.cancelAnimationFrame(this.Hw),this.ns.Md().u(this),this.ns.Et().Oc().u(this),this.ns.B_().u(this),this.ns.m();for(const e of this.Fw)this.Zw.removeChild(e.iv()),e.nw().u(this),e.ew().u(this),e.m();this.Fw=[];for(const e of this.Ww)this.hg(e);this.Ww=[],Se(this.tg).m(),this.Vv.parentElement!==null&&this.Vv.parentElement.removeChild(this.Vv),this.nd.m(),this.Im.m(),this.Vm.m(),this.ag()}sg(e,t,r=!1){if(this.eo===t&&this.S_===e)return;const i=function(a){const l=Math.floor(a.width),c=Math.floor(a.height);return Zt({width:l-l%2,height:c-c%2})}(Zt({width:e,height:t}));this.eo=i.height,this.S_=i.width;const s=this.eo+"px",o=this.S_+"px";Se(this.Vv).style.height=s,Se(this.Vv).style.width=o,this.Zw.style.height=s,this.Zw.style.width=o,r?this.lg(xr.yn(),performance.now()):this.ns.Ca()}pm(e){e===void 0&&(e=xr.yn());for(let t=0;t<this.Fw.length;t++)this.Fw[t].pm(e.un(t).an);this.Ps.timeScale.visible&&this.tg.pm(e._n())}cr(e){var i;const t=a_(this.Ps);this.ns.cr(e);const r=a_(this.Ps);r!==t&&this.Jw(r),(i=e.layout)!=null&&i.panes&&this.og(),this.eg(),this._g(e)}nw(){return this.Im}ew(){return this.Vm}Md(){return this.nd}ug(e=!1){this.qw!==null&&(this.lg(this.qw,performance.now()),this.qw=null);const t=this.cg(null),r=document.createElement("canvas");r.width=t.width,r.height=t.height;const i=Se(r.getContext("2d"));return this.cg(i,e),r}dg(e){return e==="left"&&!this.fg()||e==="right"&&!this.pg()||this.Fw.length===0?0:Se(e==="left"?this.Fw[0].uw():this.Fw[0].cw()).fm()}vg(){return this.Ps.autoSize&&this.Yw!==null}hv(){return this.Vv}mg(e){this.Kw=e,this.Kw?this.hv().style.setProperty("cursor",e):this.hv().style.removeProperty("cursor")}wg(){return this.Kw}gg(e){return mi(this.Fw[e]).sv()}og(){this.Ww.forEach(e=>{e.kt()})}_g(e){(e.autoSize!==void 0||!this.Yw||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Yw&&this.ig(),e.autoSize===!1&&this.Yw!==null&&this.ag(),e.autoSize||e.width===void 0&&e.height===void 0||this.sg(e.width||this.S_,e.height||this.eo))}cg(e,t){let r=0,i=0;const s=this.Fw[0],o=(l,c)=>{let u=0;for(let h=0;h<this.Fw.length;h++){const d=this.Fw[h],f=Se(l==="left"?d.uw():d.cw()),m=f.nv();if(e!==null&&f.ev(e,c,u,t),u+=m.height,h<this.Fw.length-1){const g=this.Ww[h],v=g.nv();e!==null&&g.ev(e,c,u),u+=v.height}}};this.fg()&&(o("left",0),r+=Se(s.uw()).nv().width);for(let l=0;l<this.Fw.length;l++){const c=this.Fw[l],u=c.nv();if(e!==null&&c.ev(e,r,i,t),i+=u.height,l<this.Fw.length-1){const h=this.Ww[l],d=h.nv();e!==null&&h.ev(e,r,i),i+=d.height}}r+=s.nv().width,this.pg()&&(o("right",r),r+=Se(s.cw()).nv().width);const a=(l,c,u)=>{Se(l==="left"?this.tg.Tw():this.tg.Rw()).ev(Se(e),c,u)};if(this.Ps.timeScale.visible){const l=this.tg.nv();if(e!==null){let c=0;this.fg()&&(a("left",c,i),c=Se(s.uw()).nv().width),this.tg.ev(e,c,i,t),c+=l.width,this.pg()&&a("right",c,i)}i+=l.height}return Zt({width:r,height:i})}Mg(){let e=0,t=0,r=0;for(const v of this.Fw)this.fg()&&(t=Math.max(t,Se(v.uw()).om(),this.Ps.leftPriceScale.minimumWidth)),this.pg()&&(r=Math.max(r,Se(v.cw()).om(),this.Ps.rightPriceScale.minimumWidth)),e+=v.E_();t=CI(t),r=CI(r);const i=this.S_,s=this.eo,o=Math.max(i-t-r,0),a=1*this.Ww.length,l=this.Ps.timeScale.visible;let c=l?Math.max(this.tg.Vw(),this.Ps.timeScale.minimumHeight):0;var u;c=(u=c)+u%2;const h=a+c,d=s<h?0:s-h,f=d/e;let m=0;const g=window.devicePixelRatio||1;for(let v=0;v<this.Fw.length;++v){const y=this.Fw[v];y.qm(this.ns.Xs()[v]);let b=0,w=0;w=v===this.Fw.length-1?Math.ceil((d-m)*g)/g:Math.round(y.E_()*f*g)/g,b=Math.max(w,2),m+=b,y.dm(Zt({width:o,height:b})),this.fg()&&y.hw(t,"left"),this.pg()&&y.hw(r,"right"),y.cv()&&this.ns.bd(y.cv(),b)}this.tg.Iw(Zt({width:l?o:0,height:c}),l?t:0,l?r:0),this.ns.L_(o),this.Uw!==t&&(this.Uw=t),this.$w!==r&&(this.$w=r)}Jw(e){e?this.Vv.addEventListener("wheel",this.Gw,{passive:!1}):this.Vv.removeEventListener("wheel",this.Gw)}bg(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return v0e?1/window.devicePixelRatio:1}Xw(e){if(!(e.deltaX!==0&&this.Ps.handleScroll.mouseWheel||e.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const t=this.bg(e),r=t*e.deltaX/100,i=-t*e.deltaY/100;if(e.cancelable&&e.preventDefault(),i!==0&&this.Ps.handleScale.mouseWheel){const s=Math.sign(i)*Math.min(1,Math.abs(i)),o=e.clientX-this.Vv.getBoundingClientRect().left;this.Qt().Td(o,s)}r!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().Rd(-80*r)}lg(e,t){var i;const r=e._n();r===3&&this.Sg(),r!==3&&r!==2||(this.xg(e),this.Cg(e,t),this.tg.kt(),this.Fw.forEach(s=>{s.Ym()}),((i=this.qw)==null?void 0:i._n())===3&&(this.qw.Sn(e),this.Sg(),this.xg(this.qw),this.Cg(this.qw,t),e=this.qw,this.qw=null)),this.pm(e)}Cg(e,t){for(const r of e.bn())this.xn(r,t)}xg(e){const t=this.ns.Xs();for(let r=0;r<t.length;r++)e.un(r).ln&&t[r].tu()}xn(e,t){const r=this.ns.Et();switch(e.fn){case 0:r.Fc();break;case 1:r.Wc(e.Wt);break;case 2:r.gn(e.Wt);break;case 3:r.Mn(e.Wt);break;case 4:r.Pc();break;case 5:e.Wt.Ec(t)||r.Mn(e.Wt.Ac(t))}}rd(e){this.qw!==null?this.qw.Sn(e):this.qw=e,this.jw||(this.jw=!0,this.Hw=window.requestAnimationFrame(t=>{if(this.jw=!1,this.Hw=0,this.qw!==null){const r=this.qw;this.qw=null,this.lg(r,t);for(const i of r.bn())if(i.fn===5&&!i.Wt.Ec(t)){this.Qt().vn(i.Wt);break}}}))}Sg(){this.ng()}hg(e){this.Zw.removeChild(e.iv()),e.m()}ng(){const e=this.ns.Xs(),t=e.length,r=this.Fw.length;for(let i=t;i<r;i++){const s=mi(this.Fw.pop());this.Zw.removeChild(s.iv()),s.nw().u(this),s.ew().u(this),s.m();const o=this.Ww.pop();o!==void 0&&this.hg(o)}for(let i=r;i<t;i++){const s=new pR(this,e[i]);if(s.nw().i(this.yg.bind(this,s),this),s.ew().i(this.kg.bind(this,s),this),this.Fw.push(s),i>0){const o=new l0e(this,i-1,i);this.Ww.push(o),this.Zw.insertBefore(o.iv(),this.tg.iv())}this.Zw.insertBefore(s.iv(),this.tg.iv())}for(let i=0;i<t;i++){const s=e[i],o=this.Fw[i];o.cv()!==s?o.qm(s):o.$m()}this.eg(),this.Mg()}Pg(e,t,r,i){var h;const s=new Map;e!==null&&this.ns.tn().forEach(d=>{const f=d.qs().$s(e);f!==null&&s.set(d,f)});let o;if(e!==null){const d=(h=this.ns.Et().es(e))==null?void 0:h.originalTime;d!==void 0&&(o=d)}const a=this.Qt().pd(),l=a!==null&&a.hu instanceof kx?a.hu:void 0,c=a!==null&&a.au!==void 0?a.au.te:void 0,u=this.Tg(i);return{Gr:o,js:e??void 0,Rg:t??void 0,Dg:u!==-1?u:void 0,Ig:l,Vg:s,Bg:c,Eg:r??void 0}}Tg(e){let t=-1;if(e)t=this.Fw.indexOf(e);else{const r=this.Qt().gd().Gs();r!==null&&(t=this.Qt().Xs().indexOf(r))}return t}yg(e,t,r,i){this.Im.p(()=>this.Pg(t,r,i,e))}kg(e,t,r,i){this.Vm.p(()=>this.Pg(t,r,i,e))}Qw(e,t,r){var i;this.mg(((i=this.Qt().pd())==null?void 0:i.ou)??null),this.nd.p(()=>this.Pg(e,t,r))}eg(){const e=this.Ps.timeScale.visible?"":"none";this.tg.iv().style.display=e}fg(){return this.Fw[0].cv().U_().N().visible}pg(){return this.Fw[0].cv().q_().N().visible}ig(){return"ResizeObserver"in window&&(this.Yw=new ResizeObserver(e=>{const t=e[e.length-1];t&&this.sg(t.contentRect.width,t.contentRect.height)}),this.Yw.observe(this.Av,{box:"border-box"}),!0)}ag(){this.Yw!==null&&this.Yw.disconnect(),this.Yw=null}}function a_(n){return!!(n.handleScroll.mouseWheel||n.handleScale.mouseWheel)}function b0e(n){return n.open===void 0&&n.value===void 0}function x0e(n){return function(e){return e.open!==void 0}(n)||function(e){return e.value!==void 0}(n)}function x4(n,e,t,r){const i=t.value,s={js:e,wt:n,Wt:[i,i,i,i],Gr:r};return t.color!==void 0&&(s.R=t.color),s}function w0e(n,e,t,r){const i=t.value,s={js:e,wt:n,Wt:[i,i,i,i],Gr:r};return t.lineColor!==void 0&&(s.vt=t.lineColor),t.topColor!==void 0&&(s.eh=t.topColor),t.bottomColor!==void 0&&(s.rh=t.bottomColor),s}function _0e(n,e,t,r){const i=t.value,s={js:e,wt:n,Wt:[i,i,i,i],Gr:r};return t.topLineColor!==void 0&&(s.hh=t.topLineColor),t.bottomLineColor!==void 0&&(s.ah=t.bottomLineColor),t.topFillColor1!==void 0&&(s.oh=t.topFillColor1),t.topFillColor2!==void 0&&(s._h=t.topFillColor2),t.bottomFillColor1!==void 0&&(s.uh=t.bottomFillColor1),t.bottomFillColor2!==void 0&&(s.dh=t.bottomFillColor2),s}function S0e(n,e,t,r){const i={js:e,wt:n,Wt:[t.open,t.high,t.low,t.close],Gr:r};return t.color!==void 0&&(i.R=t.color),i}function k0e(n,e,t,r){const i={js:e,wt:n,Wt:[t.open,t.high,t.low,t.close],Gr:r};return t.color!==void 0&&(i.R=t.color),t.borderColor!==void 0&&(i.Ht=t.borderColor),t.wickColor!==void 0&&(i.nh=t.wickColor),i}function C0e(n,e,t,r,i){const s=mi(i)(t),o=Math.max(...s),a=Math.min(...s),l=s[s.length-1],c=[l,o,a,l],{time:u,color:h,...d}=t;return{js:e,wt:n,Wt:c,Gr:r,le:d,R:h}}function Nu(n){return n.Wt!==void 0}function w4(n,e){return e.customValues!==void 0&&(n.Ag=e.customValues),n}function Yl(n){return(e,t,r,i,s,o)=>function(a,l){return l?l(a):b0e(a)}(r,o)?w4({wt:e,js:t,Gr:i},r):w4(n(e,t,r,i,s),r)}function _4(n){return{Candlestick:Yl(k0e),Bar:Yl(S0e),Area:Yl(w0e),Baseline:Yl(_0e),Histogram:Yl(x4),Line:Yl(x4),Custom:Yl(C0e)}[n]}function S4(n){return{js:0,Lg:new Map,Ea:n}}function k4(n,e){if(n!==void 0&&n.length!==0)return{zg:e.key(n[0].wt),Og:e.key(n[n.length-1].wt)}}function C4(n){let e;return n.forEach(t=>{e===void 0&&(e=t.Gr)}),mi(e)}class E0e{constructor(e){this.Ng=new Map,this.Fg=new Map,this.Wg=new Map,this.Hg=[],this.cu=e}m(){this.Ng.clear(),this.Fg.clear(),this.Wg.clear(),this.Hg=[]}Ug(e,t){let r=this.Ng.size!==0,i=!1;const s=this.Fg.get(e);if(s!==void 0)if(this.Fg.size===1)r=!1,i=!0,this.Ng.clear();else for(const l of this.Hg)l.pointData.Lg.delete(e)&&(i=!0);let o=[];if(t.length!==0){const l=t.map(f=>f.time),c=this.cu.createConverterToInternalObj(t),u=_4(e.wh()),h=e.rl(),d=e.hl();o=t.map((f,m)=>{const g=c(f.time),v=this.cu.key(g);let y=this.Ng.get(v);y===void 0&&(y=S4(g),this.Ng.set(v,y),i=!0);const b=u(g,y.js,f,l[m],h,d);return y.Lg.set(e,b),b})}r&&this.$g(),this.qg(e,o);let a=-1;if(i){const l=[];this.Ng.forEach(c=>{l.push({timeWeight:0,time:c.Ea,pointData:c,originalTime:C4(c.Lg)})}),l.sort((c,u)=>this.cu.key(c.time)-this.cu.key(u.time)),a=this.jg(l)}return this.Yg(e,a,function(l,c,u){const h=k4(l,u),d=k4(c,u);if(h!==void 0&&d!==void 0)return{Kg:!1,Ta:h.Og>=d.Og&&h.zg>=d.zg}}(this.Fg.get(e),s,this.cu))}Hd(e){return this.Ug(e,[])}Zg(e,t,r){if(r&&e.La())throw new Error("Historical updates are not supported when conflation is enabled. Conflation requires data to be processed in order.");const i=t;(function(y){y.Gr===void 0&&(y.Gr=y.time)})(i),this.cu.preprocessData(t);const s=this.cu.createConverterToInternalObj([t])(t.time),o=this.Wg.get(e);if(!r&&o!==void 0&&this.cu.key(s)<this.cu.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${s}`);let a=this.Ng.get(this.cu.key(s));if(r&&a===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const l=a===void 0;a===void 0&&(a=S4(s),this.Ng.set(this.cu.key(s),a));const c=_4(e.wh()),u=e.rl(),h=e.hl(),d=c(s,a.js,t,i.Gr,u,h),f=!r&&!l&&o!==void 0&&this.cu.key(s)===this.cu.key(o);a.Lg.set(e,d),r?this.Gg(e,d,a.js):f&&e.La()&&Nu(d)?(e.kr(d),this.Xg(e,d)):this.Xg(e,d);const m={Ta:Nu(d),Kg:r};if(!l)return this.Yg(e,-1,m);const g={timeWeight:0,time:a.Ea,pointData:a,originalTime:C4(a.Lg)},v=md(this.Hg,this.cu.key(g.time),(y,b)=>this.cu.key(y.time)<b);this.Hg.splice(v,0,g);for(let y=v;y<this.Hg.length;++y)iv(this.Hg[y].pointData,y);return this.cu.fillWeightsForPoints(this.Hg,v),this.Yg(e,v,m)}Jg(e,t){const r=this.Fg.get(e);if(r===void 0||t<=0)return[[],this.Qg()];t=Math.min(t,r.length);const i=r.splice(-t).reverse();r.length===0?this.Wg.delete(e):this.Wg.set(e,r[r.length-1].wt);for(const s of i){const o=this.Ng.get(this.cu.key(s.wt));if(o&&(o.Lg.delete(e),o.Lg.size===0)){this.Ng.delete(this.cu.key(o.Ea)),this.Hg.splice(o.js,1);for(let a=o.js;a<this.Hg.length;++a)iv(this.Hg[a].pointData,a)}}return[i,this.Yg(e,this.Hg.length-1,{Kg:!1,Ta:!1})]}Xg(e,t){let r=this.Fg.get(e);r===void 0&&(r=[],this.Fg.set(e,r));const i=r.length!==0?r[r.length-1]:null;i===null||this.cu.key(t.wt)>this.cu.key(i.wt)?Nu(t)&&r.push(t):Nu(t)?r[r.length-1]=t:r.splice(-1,1),this.Wg.set(e,t.wt)}Gg(e,t,r){const i=this.Fg.get(e);if(i===void 0)return;const s=md(i,r,(o,a)=>o.js<a);Nu(t)?i[s]=t:i.splice(s,1)}qg(e,t){t.length!==0?(this.Fg.set(e,t.filter(Nu)),this.Wg.set(e,t[t.length-1].wt)):(this.Fg.delete(e),this.Wg.delete(e))}$g(){for(const e of this.Hg)e.pointData.Lg.size===0&&this.Ng.delete(this.cu.key(e.time))}jg(e){let t=-1;for(let r=0;r<this.Hg.length&&r<e.length;++r){const i=this.Hg[r],s=e[r];if(this.cu.key(i.time)!==this.cu.key(s.time)){t=r;break}s.timeWeight=i.timeWeight,iv(s.pointData,r)}if(t===-1&&this.Hg.length!==e.length&&(t=Math.min(this.Hg.length,e.length)),t===-1)return-1;for(let r=t;r<e.length;++r)iv(e[r].pointData,r);return this.cu.fillWeightsForPoints(e,t),this.Hg=e,t}tM(){if(this.Fg.size===0)return null;let e=0;return this.Fg.forEach(t=>{t.length!==0&&(e=Math.max(e,t[t.length-1].js))}),e}Yg(e,t,r){const i=this.Qg();if(t!==-1)this.Fg.forEach((s,o)=>{i.F_.set(o,{le:s,iM:o===e?r:void 0})}),this.Fg.has(e)||i.F_.set(e,{le:[],iM:r}),i.Et.sM=this.Hg,i.Et.nM=t;else{const s=this.Fg.get(e);i.F_.set(e,{le:s||[],iM:r})}return i}Qg(){return{F_:new Map,Et:{vc:this.tM()}}}}function iv(n,e){n.js=e,n.Lg.forEach(t=>{t.js=e})}function T0e(n,e){return n.wt<e}function M0e(n,e){return e<n.wt}function I0e(n,e,t){const r=e.Aa(),i=e.bi(),s=md(n,r,T0e),o=NK(n,i,M0e);if(!t)return{from:s,to:o};let a=s,l=o;return s>0&&s<n.length&&n[s].wt>=r&&(a=s-1),o>0&&o<n.length&&n[o-1].wt<=i&&(l=o+1),{from:a,to:l}}class P0e{constructor(e,t,r){this.eM=!0,this.rM=!0,this.hM=!0,this.aM=[],this.lM=null,this.oM=-1,this.ee=e,this.re=t,this._M=r}kt(e){this.eM=!0,e==="data"&&(this.rM=!0),e==="options"&&(this.hM=!0)}Tt(){return this.ee.It()?(this.uM(),this.lM===null?null:this.cM):null}dM(){this.aM=this.aM.map(e=>({...e,...this.ee.ga().gh(e.wt)}))}fM(){this.lM=null}uM(){const e=this.re.Et(),t=e.N().enableConflation?e.Hc():0;t!==this.oM&&(this.rM=!0,this.oM=t),this.rM&&(this.pM(),this.rM=!1),this.hM&&(this.dM(),this.hM=!1),this.eM&&(this.vM(),this.eM=!1)}vM(){const e=this.ee.Ft(),t=this.re.Et();if(this.fM(),t.Gi()||e.Gi())return;const r=t.Ie();if(r===null||this.ee.qs().yh()===0)return;const i=this.ee.Lt();i!==null&&(this.lM=I0e(this.aM,r,this._M),this.mM(e,t,i.Wt),this.wM())}}class O0e{constructor(e,t){this.gM=e,this.Ki=t}nt(e,t,r){this.gM.draw(e,this.Ki,t,r)}}class R0e extends P0e{constructor(e,t,r){super(e,t,!1),this.$h=r,this.cM=new O0e(this.$h.renderer(),i=>{const s=e.Lt();return s===null?null:e.Ft().Nt(i,s.Wt)})}get ma(){return this.$h.conflationReducer}Oa(e){return this.$h.priceValueBuilder(e)}al(e){return this.$h.isWhitespace(e)}pM(){const e=this.ee.ga();this.aM=this.ee.Na().Dh().map(t=>({wt:t.js,_t:NaN,...e.gh(t.js),MM:t.le}))}mM(e,t){t.mc(this.aM,Qme(this.lM))}wM(){this.$h.update({bars:this.aM.map(D0e),barSpacing:this.re.Et().ul(),visibleRange:this.lM,conflationFactor:this.re.Et().Hc()},this.ee.N())}}function D0e(n){return{x:n._t,time:n.wt,originalData:n.MM,barColor:n.th}}const N0e={color:"#2196f3"},A0e=(n,e,t)=>{const r=cl(t);return new R0e(n,e,r)};function gR(n){const e={value:n.Wt[3],time:n.Gr};return n.Ag!==void 0&&(e.customValues=n.Ag),e}function E4(n){const e=gR(n);return n.R!==void 0&&(e.color=n.R),e}function L0e(n){const e=gR(n);return n.vt!==void 0&&(e.lineColor=n.vt),n.eh!==void 0&&(e.topColor=n.eh),n.rh!==void 0&&(e.bottomColor=n.rh),e}function F0e(n){const e=gR(n);return n.hh!==void 0&&(e.topLineColor=n.hh),n.ah!==void 0&&(e.bottomLineColor=n.ah),n.oh!==void 0&&(e.topFillColor1=n.oh),n._h!==void 0&&(e.topFillColor2=n._h),n.uh!==void 0&&(e.bottomFillColor1=n.uh),n.dh!==void 0&&(e.bottomFillColor2=n.dh),e}function qK(n){const e={open:n.Wt[0],high:n.Wt[1],low:n.Wt[2],close:n.Wt[3],time:n.Gr};return n.Ag!==void 0&&(e.customValues=n.Ag),e}function j0e(n){const e=qK(n);return n.R!==void 0&&(e.color=n.R),e}function $0e(n){const e=qK(n),{R:t,Ht:r,nh:i}=n;return t!==void 0&&(e.color=t),r!==void 0&&(e.borderColor=r),i!==void 0&&(e.wickColor=i),e}function Zv(n){return{Area:L0e,Line:E4,Baseline:F0e,Histogram:E4,Bar:j0e,Candlestick:$0e,Custom:B0e}[n]}function B0e(n){const e=n.Gr;return{...n.le,time:e}}const z0e={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1,doNotSnapToHiddenSeriesIndices:!1},q0e={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},U0e={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:EK,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},l_={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},W0e={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1,enableConflation:!1,conflationThresholdFactor:1,precomputeConflationOnInit:!1,precomputeConflationPriority:"background"};function T4(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:U0e,crosshair:z0e,grid:q0e,overlayPriceScales:{...l_},leftPriceScale:{...l_,visible:!1},rightPriceScale:{...l_,visible:!0},timeScale:W0e,localization:{locale:gd?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class UK{constructor(e,t,r){this.Yp=e,this.bM=t,this.SM=r??0}applyOptions(e){this.Yp.Qt().md(this.bM,e,this.SM)}options(){return this.Ki().N()}width(){return _x(this.bM)?this.Yp.dg(this.bM):0}setVisibleRange(e){this.setAutoScale(!1),this.Ki().$o(new Gr(e.from,e.to))}getVisibleRange(){let e,t,r=this.Ki().er();if(r===null)return null;if(this.Ki().io()){const i=this.Ki().m_(),s=$K(i);r=sh(r,this.Ki().no()),e=Number((Math.round(r.Ze()/i)*i).toFixed(s)),t=Number((Math.round(r.Ge()/i)*i).toFixed(s))}else e=r.Ze(),t=r.Ge();return{from:e,to:t}}setAutoScale(e){this.applyOptions({autoScale:e})}Ki(){return Se(this.Yp.Qt().wd(this.bM,this.SM)).Ft}}class H0e{constructor(e,t,r,i){this.Yp=e,this.yt=r,this.xM=t,this.CM=i}getHeight(){return this.yt.$t()}setHeight(e){const t=this.Yp.Qt(),r=t.Gd(this.yt);t.xd(r,e)}getStretchFactor(){return this.yt.E_()}setStretchFactor(e){this.yt.A_(e),this.Yp.Qt().Ca()}paneIndex(){return this.Yp.Qt().Gd(this.yt)}moveTo(e){const t=this.paneIndex();t!==e&&(wr(e>=0&&e<this.Yp.Zp().length,"Invalid pane index"),this.Yp.Qt().yd(t,e))}getSeries(){return this.yt.F_().map(e=>this.xM(e))??[]}getHTMLElement(){const e=this.Yp.Zp();return e&&e.length!==0&&e[this.paneIndex()]?e[this.paneIndex()].iv():null}attachPrimitive(e){this.yt.nl(e),e.attached&&e.attached({chart:this.CM,requestUpdate:()=>this.yt.Qt().Ca()})}detachPrimitive(e){this.yt.el(e)}priceScale(e){if(this.yt.V_(e)===null)throw new Error(`Cannot find price scale with id: ${e}`);return new UK(this.Yp,e,this.paneIndex())}setPreserveEmptyPane(e){this.yt.O_(e)}preserveEmptyPane(){return this.yt.N_()}addCustomSeries(e,t={},r=0){return this.CM.addCustomSeries(e,t,r)}addSeries(e,t={}){return this.CM.addSeries(e,t,this.paneIndex())}}const Y0e={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class M4{constructor(e){this.hr=e}applyOptions(e){this.hr.cr(e)}options(){return this.hr.N()}yM(){return this.hr}}class G0e{constructor(e,t,r,i,s,o){this.kM=new Hn,this.ee=e,this.PM=t,this.TM=r,this.cu=s,this.CM=i,this.RM=o}m(){this.kM.m()}priceFormatter(){return this.ee.Xa()}priceToCoordinate(e){const t=this.ee.Lt();return t===null?null:this.ee.Ft().Nt(e,t.Wt)}coordinateToPrice(e){const t=this.ee.Lt();return t===null?null:this.ee.Ft().Ds(e,t.Wt)}barsInLogicalRange(e){if(e===null)return null;const t=new yh(new Pp(e.from,e.to)).Ru(),r=this.ee.qs();if(r.Gi())return null;const i=r.$s(t.Aa(),1),s=r.$s(t.bi(),-1),o=Se(r.kh()),a=Se(r.sn());if(i!==null&&s!==null&&i.js>s.js)return{barsBefore:e.from-o,barsAfter:a-e.to};const l={barsBefore:i===null||i.js===o?e.from-o:i.js-o,barsAfter:s===null||s.js===a?a-e.to:a-s.js};return i!==null&&s!==null&&(l.from=i.Gr,l.to=s.Gr),l}setData(e){this.cu,this.ee.wh(),this.PM.DM(this.ee,e),this.IM("full")}update(e,t=!1){this.ee.wh(),this.PM.VM(this.ee,e,t),this.IM("update")}pop(e=1){const t=this.PM.BM(this.ee,e);t.length!==0&&this.IM("update");const r=Zv(this.seriesType());return t.map(i=>r(i))}dataByIndex(e,t){const r=this.ee.qs().$s(e,t);return r===null?null:Zv(this.seriesType())(r)}data(){const e=Zv(this.seriesType());return this.ee.qs().Dh().map(t=>e(t))}subscribeDataChanged(e){this.kM.i(e)}unsubscribeDataChanged(e){this.kM._(e)}applyOptions(e){this.ee.cr(e)}options(){return ta(this.ee.N())}priceScale(){return this.TM.priceScale(this.ee.Ft().ol(),this.getPane().paneIndex())}createPriceLine(e){const t=Ai(ta(Y0e),e),r=this.ee.Da(t);return new M4(r)}removePriceLine(e){this.ee.Ia(e.yM())}priceLines(){return this.ee.Va().map(e=>new M4(e))}seriesType(){return this.ee.wh()}lastValueData(e){const t=this.ee.Ve(e);return t.Be?{noData:!0}:{noData:!1,price:t.gt,color:t.R}}attachPrimitive(e){this.ee.nl(e),e.attached&&e.attached({chart:this.CM,series:this,requestUpdate:()=>this.ee.Qt().Ca(),horzScaleBehavior:this.cu})}detachPrimitive(e){this.ee.el(e),e.detached&&e.detached(),this.ee.Qt().Ca()}getPane(){const e=this.ee,t=Se(this.ee.Qt().Kn(e));return this.RM(t)}moveToPane(e){this.ee.Qt().jd(this.ee,e)}seriesOrder(){const e=this.ee.Qt().Kn(this.ee);return e===null?-1:e.F_().indexOf(this.ee)}setSeriesOrder(e){const t=this.ee.Qt().Kn(this.ee);t!==null&&t.su(this.ee,e)}IM(e){this.kM.v()&&this.kM.p(e)}}class V0e{constructor(e,t,r){this.EM=new Hn,this.Nu=new Hn,this.xw=new Hn,this.ns=e,this.Jh=e.Et(),this.tg=t,this.Jh.Lc().i(this.AM.bind(this)),this.Jh.zc().i(this.LM.bind(this)),this.tg.Dw().i(this.zM.bind(this)),this.cu=r}m(){this.Jh.Lc().u(this),this.Jh.zc().u(this),this.tg.Dw().u(this),this.EM.m(),this.Nu.m(),this.xw.m()}scrollPosition(){return this.Jh.Cc()}scrollToPosition(e,t){t?this.Jh.Bc(e,1e3):this.ns.Mn(e)}scrollToRealTime(){this.Jh.Vc()}getVisibleRange(){const e=this.Jh.lc();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const t={from:this.cu.convertHorzItemToInternal(e.from),to:this.cu.convertHorzItemToInternal(e.to)},r=this.Jh.cc(t);this.ns.$d(r)}getVisibleLogicalRange(){const e=this.Jh.ac();return e===null?null:{from:e.Aa(),to:e.bi()}}setVisibleLogicalRange(e){wr(e.from<=e.to,"The from index cannot be after the to index."),this.ns.$d(e)}resetTimeScale(){this.ns.wn()}fitContent(){this.ns.Fc()}logicalToCoordinate(e){const t=this.ns.Et();return t.Gi()?null:t.qt(e)}coordinateToLogical(e){return this.Jh.Gi()?null:this.Jh.wc(e)}timeToIndex(e,t){const r=this.cu.convertHorzItemToInternal(e);return this.Jh.ec(r,t)}timeToCoordinate(e){const t=this.timeToIndex(e,!1);return t===null?null:this.Jh.qt(t)}coordinateToTime(e){const t=this.ns.Et(),r=t.wc(e),i=t.es(r);return i===null?null:i.originalTime}width(){return this.tg.sv().width}height(){return this.tg.sv().height}subscribeVisibleTimeRangeChange(e){this.EM.i(e)}unsubscribeVisibleTimeRangeChange(e){this.EM._(e)}subscribeVisibleLogicalRangeChange(e){this.Nu.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.Nu._(e)}subscribeSizeChange(e){this.xw.i(e)}unsubscribeSizeChange(e){this.xw._(e)}applyOptions(e){this.Jh.cr(e)}options(){return{...ta(this.Jh.N()),barSpacing:this.Jh.ul()}}AM(){this.EM.v()&&this.EM.p(this.getVisibleRange())}LM(){this.Nu.v()&&this.Nu.p(this.getVisibleLogicalRange())}zM(e){this.xw.p(e.width,e.height)}}function I4(n){return function(e){if(Q0(e.handleScale)){const r=e.handleScale;e.handleScale={axisDoubleClickReset:{time:r,price:r},axisPressedMouseMove:{time:r,price:r},mouseWheel:r,pinch:r}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:r,axisDoubleClickReset:i}=e.handleScale;Q0(r)&&(e.handleScale.axisPressedMouseMove={time:r,price:r}),Q0(i)&&(e.handleScale.axisDoubleClickReset={time:i,price:i})}const t=e.handleScroll;Q0(t)&&(e.handleScroll={horzTouchDrag:t,vertTouchDrag:t,mouseWheel:t,pressedMouseMove:t})}(n),n}class K0e{constructor(e,t,r){this.OM=new Map,this.NM=new Map,this.FM=new Hn,this.WM=new Hn,this.HM=new Hn,this.Xc=new WeakMap,this.UM=new E0e(t);const i=r===void 0?ta(T4()):Ai(ta(T4()),I4(r));this.$M=t,this.Yp=new y0e(e,i,t),this.Yp.nw().i(o=>{this.FM.v()&&this.FM.p(this.qM(o()))},this),this.Yp.ew().i(o=>{this.WM.v()&&this.WM.p(this.qM(o()))},this),this.Yp.Md().i(o=>{this.HM.v()&&this.HM.p(this.qM(o()))},this);const s=this.Yp.Qt();this.jM=new V0e(s,this.Yp.rg(),this.$M)}remove(){this.Yp.nw().u(this),this.Yp.ew().u(this),this.Yp.Md().u(this),this.jM.m(),this.Yp.m(),this.OM.clear(),this.NM.clear(),this.FM.m(),this.WM.m(),this.HM.m(),this.UM.m()}resize(e,t,r){this.autoSizeActive()||this.Yp.sg(e,t,r)}addCustomSeries(e,t={},r=0){const i=(s=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...N0e,...s.defaultOptions()},YM:A0e,KM:s}))(cl(e));return this.ZM(i,t,r)}addSeries(e,t={},r=0){return this.ZM(e,t,r)}removeSeries(e){const t=mi(this.OM.get(e)),r=this.UM.Hd(t);this.Yp.Qt().Hd(t),this.GM(r),this.OM.delete(e),this.NM.delete(t)}DM(e,t){this.GM(this.UM.Ug(e,t))}VM(e,t,r){this.GM(this.UM.Zg(e,t,r))}BM(e,t){const[r,i]=this.UM.Jg(e,t);return r.length!==0&&this.GM(i),r}subscribeClick(e){this.FM.i(e)}unsubscribeClick(e){this.FM._(e)}subscribeCrosshairMove(e){this.HM.i(e)}unsubscribeCrosshairMove(e){this.HM._(e)}subscribeDblClick(e){this.WM.i(e)}unsubscribeDblClick(e){this.WM._(e)}priceScale(e,t=0){return new UK(this.Yp,e,t)}timeScale(){return this.jM}applyOptions(e){this.Yp.cr(I4(e))}options(){return this.Yp.N()}takeScreenshot(e=!1,t=!1){let r,i;try{t||(r=this.Yp.Qt().N().crosshair.mode,this.Yp.cr({crosshair:{mode:2}})),i=this.Yp.ug(e)}finally{t||r===void 0||this.Yp.Qt().cr({crosshair:{mode:r}})}return i}addPane(e=!1){const t=this.Yp.Qt().Xd();return t.O_(e),this.XM(t)}removePane(e){this.Yp.Qt().Sd(e)}swapPanes(e,t){this.Yp.Qt().Cd(e,t)}autoSizeActive(){return this.Yp.vg()}chartElement(){return this.Yp.hv()}panes(){return this.Yp.Qt().Xs().map(e=>this.XM(e))}paneSize(e=0){const t=this.Yp.gg(e);return{height:t.height,width:t.width}}setCrosshairPosition(e,t,r){const i=this.OM.get(r);if(i===void 0)return;const s=this.Yp.Qt().Kn(i);s!==null&&this.Yp.Qt().Ld(e,t,s)}clearCrosshairPosition(){this.Yp.Qt().zd(!0)}horzBehaviour(){return this.$M}ZM(e,t={},r=0){wr(e.YM!==void 0),function(l){if(l===void 0||l.type==="custom")return;const c=l;c.minMove!==void 0&&c.precision===void 0&&(c.precision=$K(c.minMove))}(t.priceFormat),e.type==="Candlestick"&&function(l){l.borderColor!==void 0&&(l.borderUpColor=l.borderColor,l.borderDownColor=l.borderColor),l.wickColor!==void 0&&(l.wickUpColor=l.wickColor,l.wickDownColor=l.wickColor)}(t);const i=Ai(ta(kK),ta(e.defaultOptions),t),s=e.YM,o=new kx(this.Yp.Qt(),e.type,i,s,e.KM);this.Yp.Qt().Fd(o,r);const a=new G0e(o,this,this,this,this.$M,l=>this.XM(l));return this.OM.set(a,o),this.NM.set(o,a),a}GM(e){const t=this.Yp.Qt();t.Od(e.Et.vc,e.Et.sM,e.Et.nM),e.F_.forEach((r,i)=>i.ht(r.le,r.iM)),t.Et().Ju(),t.Sc()}JM(e){return mi(this.NM.get(e))}qM(e){const t=new Map;e.Vg.forEach((i,s)=>{const o=s.wh(),a=Zv(o)(i);if(o!=="Custom")wr(x0e(a));else{const l=s.hl();wr(!l||l(a)===!1)}t.set(this.JM(s),a)});const r=e.Ig!==void 0&&this.NM.has(e.Ig)?this.JM(e.Ig):void 0;return{time:e.Gr,logical:e.js,point:e.Rg,paneIndex:e.Dg,hoveredSeries:r,hoveredObjectId:e.Bg,seriesData:t,sourceEvent:e.Eg}}XM(e){let t=this.Xc.get(e);return t||(t=new H0e(this.Yp,r=>this.JM(r),e,this),this.Xc.set(e,t)),t}}function X0e(n){if(yg(n)){const e=document.getElementById(n);return wr(e!==null,`Cannot find element in DOM with id=${n}`),e}return n}function Q0e(n,e,t){const r=X0e(n),i=new K0e(r,e,t);return e.setOptions(i.options()),i}function J0e(n,e){return Q0e(n,new d4,d4.pf(e))}({...kK});const Z0e=I.forwardRef(({initialData:n=[],symbol:e="BTC/USDC",height:t=500,showVolume:r=!0},i)=>{const s=I.useRef(null),o=I.useRef(null),a=I.useRef(null),l=I.useRef(null),[c,u]=I.useState(null),h=g=>{if(g==null)return console.warn("[KlineChart] Invalid price: undefined or null"),0;if(typeof g=="number")return isNaN(g)||!isFinite(g)||g<0?(console.warn("[KlineChart] Invalid price number:",g),0):g;if(typeof g=="string"){if(g.trim()==="")return console.warn("[KlineChart] Invalid price: empty string"),0;try{const v=ar(g);return isNaN(v)||!isFinite(v)||v<0?(console.warn("[KlineChart] Invalid price after conversion:",g,"->",v),0):v}catch(v){return console.error("[KlineChart] Error parsing price:",g,v),0}}return console.warn("[KlineChart] Invalid price type:",typeof g,g),0},d=g=>{if(g.open===void 0||g.open===null||g.high===void 0||g.high===null||g.low===void 0||g.low===null||g.close===void 0||g.close===null)return console.warn("[KlineChart] Missing required OHLC fields:",g),null;const v=Math.floor((g.openTime??g.closeTime??Date.now())/1e3),y=h(g.open),b=h(g.high),w=h(g.low),S=h(g.close);if(y<=0||b<=0||w<=0||S<=0)return console.warn("[KlineChart] Invalid kline data - non-positive prices detected:",{original:g,parsed:{open:y,high:b,low:w,close:S}}),null;const _=Math.max(y,b,w,S),E=Math.min(y,b,w,S);return(b!==_||w!==E)&&console.warn("[KlineChart] Kline data corrected - high/low were not extremes:",{original:{high:b,low:w},corrected:{high:_,low:E}}),{time:v,open:y,high:_,low:E,close:S}},f=g=>{if(!g.volume)return null;const v=Math.floor((g.openTime??g.closeTime??Date.now())/1e3);let y;if(typeof g.volume=="number"){if(isNaN(g.volume)||!isFinite(g.volume)||g.volume<0)return console.warn("[KlineChart] Invalid volume number:",g.volume),null;y=g.volume}else if(typeof g.volume=="string"&&g.volume.trim()!=="")try{if(y=ar(g.volume),isNaN(y)||!isFinite(y)||y<0)return console.warn("[KlineChart] Invalid volume after conversion:",g.volume,"->",y),null}catch(_){return console.error("[KlineChart] Error converting volume from satoshi:",g.volume,_),null}else return console.warn("[KlineChart] Invalid volume type:",typeof g.volume,g.volume),null;const b=h(g.close),w=h(g.open);if(b<=0||w<=0)return console.warn("[KlineChart] Invalid prices for volume color calculation:",{open:w,close:b}),null;const S=b>=w;return{time:v,value:y,color:S?"#26a69a80":"#ef535080"}},m=g=>{if(!a.current){console.warn("[KlineChart] updateChart called before chart is initialized");return}if(!g||typeof g!="object"){console.warn("[KlineChart] Invalid kline update data:",g);return}try{const v=d(g);if(!v){console.warn("[KlineChart] Failed to convert kline to bar, skipping update");return}const y=r?f(g):null;a.current.update(v),u(v.close),r&&l.current&&y&&l.current.update(y)}catch(v){console.error("[KlineChart] Error updating chart:",v)}};return I.useImperativeHandle(i,()=>({updateChart:m})),I.useEffect(()=>{if(!s.current)return;if(o.current){try{o.current.remove()}catch(w){console.warn("[KlineChart] Error removing existing chart:",w)}o.current=null,a.current=null,l.current=null}let g=null,v=null,y=null;const b=()=>{if(!s.current)return;const w=s.current,S=w.clientWidth||w.offsetWidth,_=t||500;if(!S||S<100){console.warn("[KlineChart] Container not ready, waiting for layout...",{clientWidth:w.clientWidth,offsetWidth:w.offsetWidth}),v=requestAnimationFrame(b);return}if(_<=0){console.warn("[KlineChart] Invalid height:",_);return}let E,C=null;try{g=J0e(w,{width:S,height:_,layout:{background:{color:"#1e1e1e"},textColor:"#d1d4dc"},grid:{vertLines:{color:"#2a2e39"},horzLines:{color:"#2a2e39"}},crosshair:{mode:1},rightPriceScale:{borderColor:"#2a2e39"},timeScale:{borderColor:"#2a2e39",timeVisible:!0,secondsVisible:!1}}),typeof g.addCandlestickSeries=="function"?E=g.addCandlestickSeries({upColor:"#26a69a",downColor:"#ef5350",borderVisible:!1,wickUpColor:"#26a69a",wickDownColor:"#ef5350"}):E=g.addSeries("Candlestick",{upColor:"#26a69a",downColor:"#ef5350",borderVisible:!1,wickUpColor:"#26a69a",wickDownColor:"#ef5350"}),r&&(typeof g.addHistogramSeries=="function"?C=g.addHistogramSeries({color:"#26a69a80",priceFormat:{type:"volume"},priceScaleId:""}):C=g.addSeries("Histogram",{color:"#26a69a80",priceFormat:{type:"volume"},priceScaleId:""}))}catch(T){console.error("[KlineChart] Error creating chart or series:",T);return}if(n.length>0&&E)try{E.setData(n),u(n[n.length-1].close)}catch(T){console.error("[KlineChart] Error setting initial data:",T)}o.current=g,a.current=E,l.current=C,y=()=>{if(s.current&&o.current){const T=s.current.clientWidth||s.current.offsetWidth;T>0&&o.current.applyOptions({width:T})}},window.addEventListener("resize",y)};return b(),()=>{if(v!==null&&cancelAnimationFrame(v),y&&window.removeEventListener("resize",y),g)try{g.remove()}catch(w){console.error("[KlineChart] Error removing chart:",w)}o.current=null,a.current=null,l.current=null}},[t,r]),I.useEffect(()=>{if(a.current&&n.length>0)try{a.current.setData(n),u(n[n.length-1].close)}catch(g){console.error("[KlineChart] Error setting initial data:",g)}},[n]),k.jsxs("div",{style:{position:"relative",width:"100%"},children:[k.jsx("div",{style:{marginBottom:"0.5rem",fontSize:"1.2rem",color:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center"},children:k.jsxs("span",{children:[e," Live Kline Chart",c!==null&&` - Current: $${c.toFixed(2)}`]})}),k.jsx("div",{ref:s,style:{position:"relative",width:"100%"}})]})});Z0e.displayName="KlineChart";function WK(){const n=document.getElementById("tradingview-widget-script");n&&n.parentNode&&n.parentNode.removeChild(n)}function eve(){return new Promise((n,e)=>{if(typeof window.TradingView<"u"){n();return}WK();const t=document.createElement("script");t.id="tradingview-widget-script",t.src=Jue,t.async=!0,t.onload=()=>{typeof window.TradingView<"u"?n():e(new Error("TradingView script loaded but TradingView object not found"))},t.onerror=()=>{e(new Error("Failed to load TradingView script"))},document.head.appendChild(t)})}function tve(n){if(typeof window.TradingView>"u")throw new Error("TradingView is not loaded. Call loadTradingViewScript() first.");const e={autosize:n.autosize!==!1,symbol:n.symbol,interval:n.interval,timezone:n.timezone||"Etc/UTC",theme:"dark",style:"1",locale:n.locale||"en",toolbar_bg:"#1a1a1a",enable_publishing:n.enablePublishing||!1,hide_top_toolbar:n.hideTopToolbar||!1,hide_legend:n.hideLegend||!1,save_image:!1,container_id:n.containerId,hide_volume:n.hideVolume||!1,studies:n.studies||["RSI@tv-basicstudies","MASimple@tv-basicstudies"]};return new window.TradingView.widget(e)}function nve(){return`tradingview-widget-container-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function rve({symbol:n=Xue,interval:e=Que,isCollapsed:t=!1,className:r=""}){const i=I.useRef(null),s=I.useRef(null),o=I.useRef(nve());return I.useEffect(()=>{if(t||!i.current)return;i.current&&(i.current.id=o.current);let a=!0;return eve().then(()=>{if(!a||!i.current)return;const l={symbol:n,interval:e,containerId:o.current};s.current=tve(l)}).catch(l=>{console.error("Failed to load TradingView widget:",l)}),()=>{a=!1,s.current&&(s.current=null)}},[n,e,t]),I.useEffect(()=>()=>{WK()},[]),t?k.jsx("div",{className:`tradingview-widget-container ${r}`}):k.jsx("div",{className:`tradingview-widget-wrapper ${r}`,children:k.jsx("div",{ref:i,id:o.current,className:"tradingview-widget-container"})})}function ive({isOpen:n,onClose:e,networkChainName:t,walletAddress:r,onCopyAddress:i,onBucketTransfer:s,onCoinTransfer:o,onDisconnect:a,anchorRef:l}){const c=()=>{r&&navigator.clipboard.writeText(r).then(()=>Ke.success("Address copied to clipboard"),()=>Ke.error("Failed to copy address")),i==null||i()},u=()=>{e(),s==null||s()},h=()=>{e(),o==null||o()},d=()=>{e(),a==null||a()};if(!n)return null;const f=k.jsx("div",{className:"wallet-modal-overlay",onClick:e,role:"presentation",children:k.jsxs("div",{className:"wallet-modal-panel",onClick:m=>m.stopPropagation(),role:"dialog","aria-label":"Wallet",children:[k.jsx("div",{className:"wallet-modal-header",children:k.jsx("h3",{children:"Wallet"})}),k.jsxs("div",{className:"wallet-modal-body",children:[k.jsxs("div",{className:"wallet-modal-row",children:[k.jsx("span",{className:"wallet-modal-label",children:"Network"}),k.jsx("span",{className:"wallet-modal-value",children:t})]}),k.jsxs("div",{className:"wallet-modal-row",children:[k.jsx("span",{className:"wallet-modal-label",children:"Address"}),k.jsx("span",{className:"wallet-modal-address",title:r,children:r})]}),k.jsxs("div",{className:"wallet-modal-actions",children:[k.jsx("button",{type:"button",className:"wallet-modal-btn wallet-modal-btn-secondary",onClick:c,children:"Copy Address"}),k.jsx("button",{type:"button",className:"wallet-modal-btn wallet-modal-btn-secondary",onClick:u,children:"Bucket Transfer"}),k.jsx("button",{type:"button",className:"wallet-modal-btn wallet-modal-btn-secondary",onClick:h,children:"Coin Transfer"}),k.jsx("button",{type:"button",className:"wallet-modal-btn wallet-modal-btn-danger",onClick:d,children:"Disconnect"})]})]})]})});return typeof document<"u"?Bs.createPortal(f,document.body):null}const sve=[{label:"Trade"},{label:"Portfolio"},{label:"Public Pools"},{label:"Staking"},{label:"Stats"},{label:"Tools",hasDropdown:!0}];function ove(n,e=6){return n.length<=e*2?n:`${n.slice(0,e)}...${n.slice(-e)}`}function ave({brandName:n="Morpheum",menuItems:e=sve,walletAddress:t="",onConnectClick:r,networkChainName:i="Morpheum Network",onBucketTransfer:s,onCoinTransfer:o,onDisconnect:a,onSettingsClick:l,statusText:c,onNetworkClick:u,logo:h}){const[d,f]=I.useState(!1),[m,g]=I.useState(!1),v=!!(t!=null&&t.trim()),y=()=>{v?g(!0):r==null||r()};return k.jsxs("header",{className:"menubar",role:"banner",children:[k.jsxs("div",{className:"menubar-inner",children:[k.jsx("div",{className:"menubar-left",children:k.jsxs("a",{href:"/",className:"menubar-logo-link","aria-label":`${n} home`,children:[h??k.jsx("div",{className:"menubar-logo-placeholder","aria-hidden":!0,children:k.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("path",{d:"M6 4L22 4L22 24L6 24L6 4Z",stroke:"currentColor",strokeWidth:"2",fill:"none"}),k.jsx("path",{d:"M6 14L22 14",stroke:"currentColor",strokeWidth:"2"})]})}),k.jsx("span",{className:"menubar-brand",children:n})]})}),k.jsxs("nav",{className:"menubar-nav","aria-label":"Main navigation",children:[k.jsxs("button",{type:"button",className:"menubar-hamburger","aria-expanded":d,"aria-controls":"menubar-menu",onClick:()=>f(b=>!b),children:[k.jsx("span",{}),k.jsx("span",{}),k.jsx("span",{})]}),k.jsx("ul",{id:"menubar-menu",className:`menubar-menu ${d?"menubar-menu-open":""}`,children:e.map(b=>k.jsx("li",{children:k.jsxs("a",{href:b.href??"#",className:"menubar-menu-item",onClick:w=>{(!b.href||b.href==="#")&&w.preventDefault(),f(!1)},children:[b.label,b.hasDropdown&&k.jsx("svg",{className:"menubar-chevron",width:"10",height:"6",viewBox:"0 0 10 6",fill:"none","aria-hidden":!0,children:k.jsx("path",{d:"M1 1L5 5L9 1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})]})},b.label))})]}),k.jsxs("div",{className:"menubar-right",children:[c&&k.jsxs("div",{className:"menubar-status",title:c,children:[k.jsx("span",{className:"menubar-status-dot"}),k.jsx("span",{className:"menubar-status-text",children:c})]}),u&&k.jsxs("button",{type:"button",className:"menubar-icon-btn",onClick:u,"aria-label":"Network or language",children:[k.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[k.jsx("circle",{cx:"12",cy:"12",r:"10"}),k.jsx("path",{d:"M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),k.jsx("svg",{className:"menubar-chevron",width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",children:k.jsx("path",{d:"M1 1L5 5L9 1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})]}),k.jsx("button",{type:"button",className:"menubar-icon-btn",onClick:l,"aria-label":"Settings",children:k.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[k.jsx("circle",{cx:"12",cy:"12",r:"3"}),k.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]})}),k.jsx("button",{type:"button",className:"menubar-connect-btn",onClick:y,children:v?ove(t):"Connect Wallet"})]})]}),k.jsx(ive,{isOpen:m,onClose:()=>g(!1),networkChainName:i,walletAddress:t,onBucketTransfer:()=>{g(!1),s==null||s()},onCoinTransfer:()=>{g(!1),o==null||o()},onDisconnect:a})]})}const lve={phantom:"Phantom",metamask:"MetaMask",onekey:"OneKey"};function cve({isOpen:n,onMnemonicConnect:e,onWalletExtensionConnect:t,onClose:r}){const[i,s]=I.useState(""),[o,a]=I.useState(null),[l,c]=I.useState(null),[u,h]=I.useState(!1);I.useEffect(()=>{n||(s(""),a(null),c(null))},[n]);const{connect:d,connectors:f,isPending:m}=cae(),g=f.find(C=>C.id==="injected"),v=I.useMemo(()=>Xhe(),[]),y=!!v,b=v?lve[v]??"Browser Wallet":"",w=I.useCallback(async C=>{const T=C.trim();if(!T)return null;try{Oi.isReady()||await Oi.initialize();const O=await Oi.generateAddress(T,0);return O.success&&O.address?O.address:null}catch{return null}},[]),S=I.useCallback(async()=>{h(!0),a(null);const C=i.trim();if(!C){a("Please enter a mnemonic phrase"),h(!1);return}try{const T=await w(C);if(!T){a("Invalid mnemonic phrase");return}await Promise.resolve(e(C,T))}catch(T){const O=T instanceof Error?T.message:"Connection failed";a(O)}finally{h(!1)}},[i,w,e]),_=I.useCallback(async()=>{var R,D;if(!g||!v)return;const C=typeof window<"u"?window:null;if(!C)return;h(!0),c(null);const T=C.ethereum;let O=T;if(v==="phantom"){const A=(R=C.phantom)==null?void 0:R.ethereum,F=C.phantom&&"request"in C.phantom&&typeof C.phantom.request=="function"?C.phantom:null;O=A??F??(T!=null&&T.isPhantom?T:null)}else v==="onekey"&&(O=((D=C.$onekey)==null?void 0:D.ethereum)??T);if(!O||typeof O.request!="function"){h(!1);return}try{const A=await O.request({method:"eth_requestAccounts"});A!=null&&A[0]&&(await d({connector:g}),await new Promise(F=>setTimeout(F,300)),t(A[0]))}catch(A){const F=A instanceof Error?A.message:"Failed to connect wallet";c(F),console.error("Wallet connect error:",A)}finally{h(!1)}},[d,g,v,t]);if(!n)return null;const E=k.jsx("div",{className:"modal-overlay onboard-modal-overlay",onClick:r??(()=>{}),role:"presentation",children:k.jsxs("div",{className:"modal-content onboard-modal-content",onClick:C=>C.stopPropagation(),role:"dialog","aria-labelledby":"onboard-modal-title",children:[k.jsxs("div",{className:"modal-header",children:[k.jsx("h3",{id:"onboard-modal-title",children:"Connect Wallet"}),k.jsx("p",{className:"onboard-modal-subtitle",children:"Choose how to connect as the owner"})]}),k.jsxs("div",{className:"onboard-modal-body",children:[k.jsxs("div",{className:"onboard-option",children:[k.jsx("h4",{className:"onboard-option-title",children:"1. Mnemonic phrase"}),k.jsx("p",{className:"onboard-option-desc",children:"Enter your mnemonic. Address derived at index 0 (ETH, no password)."}),k.jsx("textarea",{className:"onboard-mnemonic-input",value:i,onChange:C=>{s(C.target.value),a(null)},placeholder:"Enter your 12 or 24 word mnemonic phrase...",rows:3,disabled:u,autoComplete:"off"}),o&&k.jsx("div",{className:"onboard-error",children:o}),k.jsx("button",{type:"button",className:"btn btn-primary onboard-option-btn",onClick:S,disabled:u||!i.trim(),children:u?"Connecting...":"Connect with Mnemonic"})]}),k.jsxs("div",{className:`onboard-option ${y?"":"onboard-option-greyed"}`,children:[k.jsx("h4",{className:"onboard-option-title",children:"2. Wallet extension"}),k.jsx("p",{className:"onboard-option-desc",children:y?`${b} detected`:"No wallet extension detected"}),l&&k.jsx("div",{className:"onboard-error",children:l}),k.jsx("button",{type:"button",className:"btn btn-secondary onboard-option-btn",onClick:_,disabled:!y||u||m,children:m||u?"Connecting...":y?`Connect with ${b}`:"No wallet available"})]})]})]})});return typeof document<"u"?Bs.createPortal(E,document.body):null}const uve={animation:!0,orderFillSound:!0,orderFillNotification:!0,setSizeOnClick:!0,setSizeOnClickSound:!1},hve={colorTheme:"theme1",language:"en",soundStyle:"style1",orderbook:uve},dve=[{value:"theme1",label:"Color Theme 1"},{value:"theme2",label:"Color Theme 2"},{value:"theme3",label:"Color Theme 3"}],fve=[{value:"en",label:"English"},{value:"ko",label:"Korean"},{value:"zh",label:"Chinese"},{value:"tr",label:"Turkish"},{value:"es",label:"Spanish"}],pve=[{value:"style1",label:"Style 1"},{value:"style2",label:"Style 2"},{value:"style3",label:"Style 3"}];function mve({isOpen:n,onClose:e,state:t,onStateChange:r,anchorRef:i}){const s=I.useCallback((a,l)=>{r({...t,orderbook:{...t.orderbook,[a]:l}})},[t,r]);if(!n)return null;const o=k.jsx("div",{className:"settings-modal-overlay",onClick:e,role:"presentation",children:k.jsxs("div",{className:"settings-modal-panel",onClick:a=>a.stopPropagation(),role:"dialog","aria-label":"Settings",children:[k.jsxs("div",{className:"settings-modal-header",children:[k.jsx("h3",{children:"Settings"}),k.jsx("button",{type:"button",className:"settings-modal-close",onClick:e,"aria-label":"Close settings",children:k.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:k.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),k.jsxs("div",{className:"settings-modal-body",children:[k.jsxs("section",{className:"settings-section",children:[k.jsx("h4",{className:"settings-section-title",children:"Theme"}),k.jsx("div",{className:"settings-options",children:dve.map(({value:a,label:l})=>k.jsx("button",{type:"button",className:`settings-option ${t.colorTheme===a?"active":""}`,onClick:()=>r({...t,colorTheme:a}),children:l},a))})]}),k.jsxs("section",{className:"settings-section",children:[k.jsx("h4",{className:"settings-section-title",children:"Language"}),k.jsx("div",{className:"settings-options",children:fve.map(({value:a,label:l})=>k.jsx("button",{type:"button",className:`settings-option ${t.language===a?"active":""}`,onClick:()=>r({...t,language:a}),children:l},a))})]}),k.jsxs("section",{className:"settings-section",children:[k.jsx("h4",{className:"settings-section-title",children:"Sound Theme Preference"}),k.jsx("div",{className:"settings-options",children:pve.map(({value:a,label:l})=>k.jsx("button",{type:"button",className:`settings-option ${t.soundStyle===a?"active":""}`,onClick:()=>r({...t,soundStyle:a}),children:l},a))})]}),k.jsxs("section",{className:"settings-section",children:[k.jsx("h4",{className:"settings-section-title",children:"Orderbook Preferences"}),k.jsxs("div",{className:"settings-toggles",children:[k.jsxs("label",{className:"settings-toggle",children:[k.jsx("input",{type:"checkbox",checked:t.orderbook.animation,onChange:a=>s("animation",a.target.checked)}),k.jsx("span",{children:"Animation"})]}),k.jsxs("label",{className:"settings-toggle",children:[k.jsx("input",{type:"checkbox",checked:t.orderbook.orderFillSound,onChange:a=>s("orderFillSound",a.target.checked)}),k.jsx("span",{children:"Order Fill Sound"})]}),k.jsxs("label",{className:"settings-toggle",children:[k.jsx("input",{type:"checkbox",checked:t.orderbook.orderFillNotification,onChange:a=>s("orderFillNotification",a.target.checked)}),k.jsx("span",{children:"Order Fill Notification (Background)"})]}),k.jsxs("label",{className:"settings-toggle",children:[k.jsx("input",{type:"checkbox",checked:t.orderbook.setSizeOnClick,onChange:a=>s("setSizeOnClick",a.target.checked)}),k.jsx("span",{children:"Order Book Set Size on Click"})]}),k.jsxs("label",{className:"settings-toggle",children:[k.jsx("input",{type:"checkbox",checked:t.orderbook.setSizeOnClickSound,onChange:a=>s("setSizeOnClickSound",a.target.checked)}),k.jsx("span",{children:"Order Book Set Size on Click Sound"})]})]})]})]}),k.jsxs("div",{className:"settings-modal-footer",children:[k.jsx("span",{className:"settings-status-badge",children:"Online"}),k.jsxs("span",{className:"settings-version",children:[new Date().toLocaleDateString(),".006a0e1"]})]})]})});return typeof document<"u"?Bs.createPortal(o,document.body):null}var gve={value:()=>{}};function HK(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new ey(t)}function ey(n){this._=n}function vve(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}ey.prototype=HK.prototype={constructor:ey,on:function(n,e){var t=this._,r=vve(n+"",t),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(n=r[s]).type)&&(i=yve(t[i],n.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(n=r[s]).type)t[i]=P4(t[i],n.name,e);else if(e==null)for(i in t)t[i]=P4(t[i],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new ey(n)},call:function(n,e){if((i=arguments.length-2)>0)for(var t=new Array(i),r=0,i,s;r<i;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],r=0,i=s.length;r<i;++r)s[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,s=r.length;i<s;++i)r[i].value.apply(e,t)}};function yve(n,e){for(var t=0,r=n.length,i;t<r;++t)if((i=n[t]).name===e)return i.value}function P4(n,e,t){for(var r=0,i=n.length;r<i;++r)if(n[r].name===e){n[r]=gve,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var MI="http://www.w3.org/1999/xhtml";const O4={svg:"http://www.w3.org/2000/svg",xhtml:MI,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ex(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),O4.hasOwnProperty(e)?{space:O4[e],local:n}:n}function bve(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===MI&&e.documentElement.namespaceURI===MI?e.createElement(n):e.createElementNS(t,n)}}function xve(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function YK(n){var e=Ex(n);return(e.local?xve:bve)(e)}function wve(){}function vR(n){return n==null?wve:function(){return this.querySelector(n)}}function _ve(n){typeof n!="function"&&(n=vR(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=n.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new js(r,this._parents)}function Sve(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function kve(){return[]}function GK(n){return n==null?kve:function(){return this.querySelectorAll(n)}}function Cve(n){return function(){return Sve(n.apply(this,arguments))}}function Eve(n){typeof n=="function"?n=Cve(n):n=GK(n);for(var e=this._groups,t=e.length,r=[],i=[],s=0;s<t;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(n.call(l,l.__data__,c,o)),i.push(l));return new js(r,i)}function VK(n){return function(){return this.matches(n)}}function KK(n){return function(e){return e.matches(n)}}var Tve=Array.prototype.find;function Mve(n){return function(){return Tve.call(this.children,n)}}function Ive(){return this.firstElementChild}function Pve(n){return this.select(n==null?Ive:Mve(typeof n=="function"?n:KK(n)))}var Ove=Array.prototype.filter;function Rve(){return Array.from(this.children)}function Dve(n){return function(){return Ove.call(this.children,n)}}function Nve(n){return this.selectAll(n==null?Rve:Dve(typeof n=="function"?n:KK(n)))}function Ave(n){typeof n!="function"&&(n=VK(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&n.call(l,l.__data__,c,s)&&a.push(l);return new js(r,this._parents)}function XK(n){return new Array(n.length)}function Lve(){return new js(this._enter||this._groups.map(XK),this._parents)}function eb(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}eb.prototype={constructor:eb,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function Fve(n){return function(){return n}}function jve(n,e,t,r,i,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):t[o]=new eb(n,s[o]);for(;o<l;++o)(a=e[o])&&(i[o]=a)}function $ve(n,e,t,r,i,s,o){var a,l,c=new Map,u=e.length,h=s.length,d=new Array(u),f;for(a=0;a<u;++a)(l=e[a])&&(d[a]=f=o.call(l,l.__data__,a,e)+"",c.has(f)?i[a]=l:c.set(f,l));for(a=0;a<h;++a)f=o.call(n,s[a],a,s)+"",(l=c.get(f))?(r[a]=l,l.__data__=s[a],c.delete(f)):t[a]=new eb(n,s[a]);for(a=0;a<u;++a)(l=e[a])&&c.get(d[a])===l&&(i[a]=l)}function Bve(n){return n.__data__}function zve(n,e){if(!arguments.length)return Array.from(this,Bve);var t=e?$ve:jve,r=this._parents,i=this._groups;typeof n!="function"&&(n=Fve(n));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],h=i[c],d=h.length,f=qve(n.call(u,u&&u.__data__,c,r)),m=f.length,g=a[c]=new Array(m),v=o[c]=new Array(m),y=l[c]=new Array(d);t(u,h,g,v,y,f,e);for(var b=0,w=0,S,_;b<m;++b)if(S=g[b]){for(b>=w&&(w=b+1);!(_=v[w])&&++w<m;);S._next=_||null}}return o=new js(o,r),o._enter=a,o._exit=l,o}function qve(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Uve(){return new js(this._exit||this._groups.map(XK),this._parents)}function Wve(n,e,t){var r=this.enter(),i=this,s=this.exit();return typeof n=="function"?(r=n(r),r&&(r=r.selection())):r=r.append(n+""),e!=null&&(i=e(i),i&&(i=i.selection())),t==null?s.remove():t(s),r&&i?r.merge(i).order():i}function Hve(n){for(var e=n.selection?n.selection():n,t=this._groups,r=e._groups,i=t.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var c=t[l],u=r[l],h=c.length,d=a[l]=new Array(h),f,m=0;m<h;++m)(f=c[m]||u[m])&&(d[m]=f);for(;l<i;++l)a[l]=t[l];return new js(a,this._parents)}function Yve(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var r=n[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Gve(n){n||(n=Vve);function e(h,d){return h&&d?n(h.__data__,d.__data__):!h-!d}for(var t=this._groups,r=t.length,i=new Array(r),s=0;s<r;++s){for(var o=t[s],a=o.length,l=i[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(e)}return new js(i,this._parents).order()}function Vve(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function Kve(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function Xve(){return Array.from(this)}function Qve(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Jve(){let n=0;for(const e of this)++n;return n}function Zve(){return!this.node()}function eye(n){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],s=0,o=i.length,a;s<o;++s)(a=i[s])&&n.call(a,a.__data__,s,i);return this}function tye(n){return function(){this.removeAttribute(n)}}function nye(n){return function(){this.removeAttributeNS(n.space,n.local)}}function rye(n,e){return function(){this.setAttribute(n,e)}}function iye(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function sye(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function oye(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function aye(n,e){var t=Ex(n);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?nye:tye:typeof e=="function"?t.local?oye:sye:t.local?iye:rye)(t,e))}function QK(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function lye(n){return function(){this.style.removeProperty(n)}}function cye(n,e,t){return function(){this.style.setProperty(n,e,t)}}function uye(n,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}}function hye(n,e,t){return arguments.length>1?this.each((e==null?lye:typeof e=="function"?uye:cye)(n,e,t??"")):vd(this.node(),n)}function vd(n,e){return n.style.getPropertyValue(e)||QK(n).getComputedStyle(n,null).getPropertyValue(e)}function dye(n){return function(){delete this[n]}}function fye(n,e){return function(){this[n]=e}}function pye(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function mye(n,e){return arguments.length>1?this.each((e==null?dye:typeof e=="function"?pye:fye)(n,e)):this.node()[n]}function JK(n){return n.trim().split(/^|\s+/)}function yR(n){return n.classList||new ZK(n)}function ZK(n){this._node=n,this._names=JK(n.getAttribute("class")||"")}ZK.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function eX(n,e){for(var t=yR(n),r=-1,i=e.length;++r<i;)t.add(e[r])}function tX(n,e){for(var t=yR(n),r=-1,i=e.length;++r<i;)t.remove(e[r])}function gye(n){return function(){eX(this,n)}}function vye(n){return function(){tX(this,n)}}function yye(n,e){return function(){(e.apply(this,arguments)?eX:tX)(this,n)}}function bye(n,e){var t=JK(n+"");if(arguments.length<2){for(var r=yR(this.node()),i=-1,s=t.length;++i<s;)if(!r.contains(t[i]))return!1;return!0}return this.each((typeof e=="function"?yye:e?gye:vye)(t,e))}function xye(){this.textContent=""}function wye(n){return function(){this.textContent=n}}function _ye(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function Sye(n){return arguments.length?this.each(n==null?xye:(typeof n=="function"?_ye:wye)(n)):this.node().textContent}function kye(){this.innerHTML=""}function Cye(n){return function(){this.innerHTML=n}}function Eye(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function Tye(n){return arguments.length?this.each(n==null?kye:(typeof n=="function"?Eye:Cye)(n)):this.node().innerHTML}function Mye(){this.nextSibling&&this.parentNode.appendChild(this)}function Iye(){return this.each(Mye)}function Pye(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Oye(){return this.each(Pye)}function Rye(n){var e=typeof n=="function"?n:YK(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Dye(){return null}function Nye(n,e){var t=typeof n=="function"?n:YK(n),r=e==null?Dye:typeof e=="function"?e:vR(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function Aye(){var n=this.parentNode;n&&n.removeChild(this)}function Lye(){return this.each(Aye)}function Fye(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function jye(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function $ye(n){return this.select(n?jye:Fye)}function Bye(n){return arguments.length?this.property("__data__",n):this.node().__data__}function zye(n){return function(e){n.call(this,e,this.__data__)}}function qye(n){return n.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function Uye(n){return function(){var e=this.__on;if(e){for(var t=0,r=-1,i=e.length,s;t<i;++t)s=e[t],(!n.type||s.type===n.type)&&s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function Wye(n,e,t){return function(){var r=this.__on,i,s=zye(e);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===n.type&&i.name===n.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=t),i.value=e;return}}this.addEventListener(n.type,s,t),i={type:n.type,name:n.name,value:e,listener:s,options:t},r?r.push(i):this.__on=[i]}}function Hye(n,e,t){var r=qye(n+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(i=0,u=a[l];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?Wye:Uye,i=0;i<s;++i)this.each(a(r[i],e,t));return this}function nX(n,e,t){var r=QK(n),i=r.CustomEvent;typeof i=="function"?i=new i(e,t):(i=r.document.createEvent("Event"),t?(i.initEvent(e,t.bubbles,t.cancelable),i.detail=t.detail):i.initEvent(e,!1,!1)),n.dispatchEvent(i)}function Yye(n,e){return function(){return nX(this,n,e)}}function Gye(n,e){return function(){return nX(this,n,e.apply(this,arguments))}}function Vye(n,e){return this.each((typeof e=="function"?Gye:Yye)(n,e))}function*Kye(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var Xye=[null];function js(n,e){this._groups=n,this._parents=e}function xg(){return new js([[document.documentElement]],Xye)}function Qye(){return this}js.prototype=xg.prototype={constructor:js,select:_ve,selectAll:Eve,selectChild:Pve,selectChildren:Nve,filter:Ave,data:zve,enter:Lve,exit:Uve,join:Wve,merge:Hve,selection:Qye,order:Yve,sort:Gve,call:Kve,nodes:Xve,node:Qve,size:Jve,empty:Zve,each:eye,attr:aye,style:hye,property:mye,classed:bye,text:Sye,html:Tye,raise:Iye,lower:Oye,append:Rye,insert:Nye,remove:Lye,clone:$ye,datum:Bye,on:Hye,dispatch:Vye,[Symbol.iterator]:Kye};function bR(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function rX(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function wg(){}var Rm=.7,tb=1/Rm,bh="\\s*([+-]?\\d+)\\s*",Dm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Jye=/^#([0-9a-f]{3,8})$/,Zye=new RegExp(`^rgb\\(${bh},${bh},${bh}\\)$`),ebe=new RegExp(`^rgb\\(${bo},${bo},${bo}\\)$`),tbe=new RegExp(`^rgba\\(${bh},${bh},${bh},${Dm}\\)$`),nbe=new RegExp(`^rgba\\(${bo},${bo},${bo},${Dm}\\)$`),rbe=new RegExp(`^hsl\\(${Dm},${bo},${bo}\\)$`),ibe=new RegExp(`^hsla\\(${Dm},${bo},${bo},${Dm}\\)$`),R4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};bR(wg,Nm,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:D4,formatHex:D4,formatHex8:sbe,formatHsl:obe,formatRgb:N4,toString:N4});function D4(){return this.rgb().formatHex()}function sbe(){return this.rgb().formatHex8()}function obe(){return iX(this).formatHsl()}function N4(){return this.rgb().formatRgb()}function Nm(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=Jye.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?A4(e):t===3?new ai(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?sv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?sv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Zye.exec(n))?new ai(e[1],e[2],e[3],1):(e=ebe.exec(n))?new ai(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=tbe.exec(n))?sv(e[1],e[2],e[3],e[4]):(e=nbe.exec(n))?sv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=rbe.exec(n))?j4(e[1],e[2]/100,e[3]/100,1):(e=ibe.exec(n))?j4(e[1],e[2]/100,e[3]/100,e[4]):R4.hasOwnProperty(n)?A4(R4[n]):n==="transparent"?new ai(NaN,NaN,NaN,0):null}function A4(n){return new ai(n>>16&255,n>>8&255,n&255,1)}function sv(n,e,t,r){return r<=0&&(n=e=t=NaN),new ai(n,e,t,r)}function abe(n){return n instanceof wg||(n=Nm(n)),n?(n=n.rgb(),new ai(n.r,n.g,n.b,n.opacity)):new ai}function II(n,e,t,r){return arguments.length===1?abe(n):new ai(n,e,t,r??1)}function ai(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}bR(ai,II,rX(wg,{brighter(n){return n=n==null?tb:Math.pow(tb,n),new ai(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Rm:Math.pow(Rm,n),new ai(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new ai(Dc(this.r),Dc(this.g),Dc(this.b),nb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:L4,formatHex:L4,formatHex8:lbe,formatRgb:F4,toString:F4}));function L4(){return`#${fc(this.r)}${fc(this.g)}${fc(this.b)}`}function lbe(){return`#${fc(this.r)}${fc(this.g)}${fc(this.b)}${fc((isNaN(this.opacity)?1:this.opacity)*255)}`}function F4(){const n=nb(this.opacity);return`${n===1?"rgb(":"rgba("}${Dc(this.r)}, ${Dc(this.g)}, ${Dc(this.b)}${n===1?")":`, ${n})`}`}function nb(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Dc(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function fc(n){return n=Dc(n),(n<16?"0":"")+n.toString(16)}function j4(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Os(n,e,t,r)}function iX(n){if(n instanceof Os)return new Os(n.h,n.s,n.l,n.opacity);if(n instanceof wg||(n=Nm(n)),!n)return new Os;if(n instanceof Os)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),s=Math.max(e,t,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(t-r)/a+(t<r)*6:t===s?o=(r-e)/a+2:o=(e-t)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Os(o,a,l,n.opacity)}function cbe(n,e,t,r){return arguments.length===1?iX(n):new Os(n,e,t,r??1)}function Os(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}bR(Os,cbe,rX(wg,{brighter(n){return n=n==null?tb:Math.pow(tb,n),new Os(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Rm:Math.pow(Rm,n),new Os(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new ai(c_(n>=240?n-240:n+120,i,r),c_(n,i,r),c_(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Os($4(this.h),ov(this.s),ov(this.l),nb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=nb(this.opacity);return`${n===1?"hsl(":"hsla("}${$4(this.h)}, ${ov(this.s)*100}%, ${ov(this.l)*100}%${n===1?")":`, ${n})`}`}}));function $4(n){return n=(n||0)%360,n<0?n+360:n}function ov(n){return Math.max(0,Math.min(1,n||0))}function c_(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const sX=n=>()=>n;function ube(n,e){return function(t){return n+t*e}}function hbe(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function dbe(n){return(n=+n)==1?oX:function(e,t){return t-e?hbe(e,t,n):sX(isNaN(e)?t:e)}}function oX(n,e){var t=e-n;return t?ube(n,t):sX(isNaN(n)?e:n)}const B4=function n(e){var t=dbe(e);function r(i,s){var o=t((i=II(i)).r,(s=II(s)).r),a=t(i.g,s.g),l=t(i.b,s.b),c=oX(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=n,r}(1);function Ya(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var PI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,u_=new RegExp(PI.source,"g");function fbe(n){return function(){return n}}function pbe(n){return function(e){return n(e)+""}}function mbe(n,e){var t=PI.lastIndex=u_.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(n=n+"",e=e+"";(r=PI.exec(n))&&(i=u_.exec(e));)(s=i.index)>t&&(s=e.slice(t,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:Ya(r,i)})),t=u_.lastIndex;return t<e.length&&(s=e.slice(t),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?pbe(l[0].x):fbe(e):(e=l.length,function(c){for(var u=0,h;u<e;++u)a[(h=l[u]).i]=h.x(c);return a.join("")})}var z4=180/Math.PI,OI={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function aX(n,e,t,r,i,s){var o,a,l;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(l=n*t+e*r)&&(t-=n*l,r-=e*l),(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a,l/=a),n*r<e*t&&(n=-n,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,n)*z4,skewX:Math.atan(l)*z4,scaleX:o,scaleY:a}}var av;function gbe(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?OI:aX(e.a,e.b,e.c,e.d,e.e,e.f)}function vbe(n){return n==null||(av||(av=document.createElementNS("http://www.w3.org/2000/svg","g")),av.setAttribute("transform",n),!(n=av.transform.baseVal.consolidate()))?OI:(n=n.matrix,aX(n.a,n.b,n.c,n.d,n.e,n.f))}function lX(n,e,t,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,h,d,f,m){if(c!==h||u!==d){var g=f.push("translate(",null,e,null,t);m.push({i:g-4,x:Ya(c,h)},{i:g-2,x:Ya(u,d)})}else(h||d)&&f.push("translate("+h+e+d+t)}function o(c,u,h,d){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),d.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Ya(c,u)})):u&&h.push(i(h)+"rotate("+u+r)}function a(c,u,h,d){c!==u?d.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Ya(c,u)}):u&&h.push(i(h)+"skewX("+u+r)}function l(c,u,h,d,f,m){if(c!==h||u!==d){var g=f.push(i(f)+"scale(",null,",",null,")");m.push({i:g-4,x:Ya(c,h)},{i:g-2,x:Ya(u,d)})}else(h!==1||d!==1)&&f.push(i(f)+"scale("+h+","+d+")")}return function(c,u){var h=[],d=[];return c=n(c),u=n(u),s(c.translateX,c.translateY,u.translateX,u.translateY,h,d),o(c.rotate,u.rotate,h,d),a(c.skewX,u.skewX,h,d),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,d),c=u=null,function(f){for(var m=-1,g=d.length,v;++m<g;)h[(v=d[m]).i]=v.x(f);return h.join("")}}}var ybe=lX(gbe,"px, ","px)","deg)"),bbe=lX(vbe,", ",")",")"),yd=0,np=0,Af=0,cX=1e3,rb,rp,ib=0,Qc=0,Tx=0,Am=typeof performance=="object"&&performance.now?performance:Date,uX=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function xR(){return Qc||(uX(xbe),Qc=Am.now()+Tx)}function xbe(){Qc=0}function sb(){this._call=this._time=this._next=null}sb.prototype=hX.prototype={constructor:sb,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?xR():+t)+(e==null?0:+e),!this._next&&rp!==this&&(rp?rp._next=this:rb=this,rp=this),this._call=n,this._time=t,RI()},stop:function(){this._call&&(this._call=null,this._time=1/0,RI())}};function hX(n,e,t){var r=new sb;return r.restart(n,e,t),r}function wbe(){xR(),++yd;for(var n=rb,e;n;)(e=Qc-n._time)>=0&&n._call.call(void 0,e),n=n._next;--yd}function q4(){Qc=(ib=Am.now())+Tx,yd=np=0;try{wbe()}finally{yd=0,Sbe(),Qc=0}}function _be(){var n=Am.now(),e=n-ib;e>cX&&(Tx-=e,ib=n)}function Sbe(){for(var n,e=rb,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:rb=t);rp=n,RI(r)}function RI(n){if(!yd){np&&(np=clearTimeout(np));var e=n-Qc;e>24?(n<1/0&&(np=setTimeout(q4,n-Am.now()-Tx)),Af&&(Af=clearInterval(Af))):(Af||(ib=Am.now(),Af=setInterval(_be,cX)),yd=1,uX(q4))}}function U4(n,e,t){var r=new sb;return e=e==null?0:+e,r.restart(i=>{r.stop(),n(i+e)},e,t),r}var kbe=HK("start","end","cancel","interrupt"),Cbe=[],dX=0,W4=1,DI=2,ty=3,H4=4,NI=5,ny=6;function Mx(n,e,t,r,i,s){var o=n.__transition;if(!o)n.__transition={};else if(t in o)return;Ebe(n,t,{name:e,index:r,group:i,on:kbe,tween:Cbe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:dX})}function wR(n,e){var t=qs(n,e);if(t.state>dX)throw new Error("too late; already scheduled");return t}function ko(n,e){var t=qs(n,e);if(t.state>ty)throw new Error("too late; already running");return t}function qs(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function Ebe(n,e,t){var r=n.__transition,i;r[e]=t,t.timer=hX(s,0,t.time);function s(c){t.state=W4,t.timer.restart(o,t.delay,t.time),t.delay<=c&&o(c-t.delay)}function o(c){var u,h,d,f;if(t.state!==W4)return l();for(u in r)if(f=r[u],f.name===t.name){if(f.state===ty)return U4(o);f.state===H4?(f.state=ny,f.timer.stop(),f.on.call("interrupt",n,n.__data__,f.index,f.group),delete r[u]):+u<e&&(f.state=ny,f.timer.stop(),f.on.call("cancel",n,n.__data__,f.index,f.group),delete r[u])}if(U4(function(){t.state===ty&&(t.state=H4,t.timer.restart(a,t.delay,t.time),a(c))}),t.state=DI,t.on.call("start",n,n.__data__,t.index,t.group),t.state===DI){for(t.state=ty,i=new Array(d=t.tween.length),u=0,h=-1;u<d;++u)(f=t.tween[u].value.call(n,n.__data__,t.index,t.group))&&(i[++h]=f);i.length=h+1}}function a(c){for(var u=c<t.duration?t.ease.call(null,c/t.duration):(t.timer.restart(l),t.state=NI,1),h=-1,d=i.length;++h<d;)i[h].call(n,u);t.state===NI&&(t.on.call("end",n,n.__data__,t.index,t.group),l())}function l(){t.state=ny,t.timer.stop(),delete r[e];for(var c in r)return;delete n.__transition}}function Tbe(n,e){var t=n.__transition,r,i,s=!0,o;if(t){e=e==null?null:e+"";for(o in t){if((r=t[o]).name!==e){s=!1;continue}i=r.state>DI&&r.state<NI,r.state=ny,r.timer.stop(),r.on.call(i?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete t[o]}s&&delete n.__transition}}function Mbe(n){return this.each(function(){Tbe(this,n)})}function Ibe(n,e){var t,r;return function(){var i=ko(this,n),s=i.tween;if(s!==t){r=t=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Pbe(n,e,t){var r,i;if(typeof t!="function")throw new Error;return function(){var s=ko(this,n),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:t},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=a;break}l===c&&i.push(a)}s.tween=i}}function Obe(n,e){var t=this._id;if(n+="",arguments.length<2){for(var r=qs(this.node(),t).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===n)return o.value;return null}return this.each((e==null?Ibe:Pbe)(t,n,e))}function _R(n,e,t){var r=n._id;return n.each(function(){var i=ko(this,r);(i.value||(i.value={}))[e]=t.apply(this,arguments)}),function(i){return qs(i,r).value[e]}}function fX(n,e){var t;return(typeof e=="number"?Ya:e instanceof Nm?B4:(t=Nm(e))?(e=t,B4):mbe)(n,e)}function Rbe(n){return function(){this.removeAttribute(n)}}function Dbe(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Nbe(n,e,t){var r,i=t+"",s;return function(){var o=this.getAttribute(n);return o===i?null:o===r?s:s=e(r=o,t)}}function Abe(n,e,t){var r,i=t+"",s;return function(){var o=this.getAttributeNS(n.space,n.local);return o===i?null:o===r?s:s=e(r=o,t)}}function Lbe(n,e,t){var r,i,s;return function(){var o,a=t(this),l;return a==null?void this.removeAttribute(n):(o=this.getAttribute(n),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function Fbe(n,e,t){var r,i,s;return function(){var o,a=t(this),l;return a==null?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function jbe(n,e){var t=Ex(n),r=t==="transform"?bbe:fX;return this.attrTween(n,typeof e=="function"?(t.local?Fbe:Lbe)(t,r,_R(this,"attr."+n,e)):e==null?(t.local?Dbe:Rbe)(t):(t.local?Abe:Nbe)(t,r,e))}function $be(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function Bbe(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function zbe(n,e){var t,r;function i(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&Bbe(n,s)),t}return i._value=e,i}function qbe(n,e){var t,r;function i(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&$be(n,s)),t}return i._value=e,i}function Ube(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var r=Ex(n);return this.tween(t,(r.local?zbe:qbe)(r,e))}function Wbe(n,e){return function(){wR(this,n).delay=+e.apply(this,arguments)}}function Hbe(n,e){return e=+e,function(){wR(this,n).delay=e}}function Ybe(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?Wbe:Hbe)(e,n)):qs(this.node(),e).delay}function Gbe(n,e){return function(){ko(this,n).duration=+e.apply(this,arguments)}}function Vbe(n,e){return e=+e,function(){ko(this,n).duration=e}}function Kbe(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?Gbe:Vbe)(e,n)):qs(this.node(),e).duration}function Xbe(n,e){if(typeof e!="function")throw new Error;return function(){ko(this,n).ease=e}}function Qbe(n){var e=this._id;return arguments.length?this.each(Xbe(e,n)):qs(this.node(),e).ease}function Jbe(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;ko(this,n).ease=t}}function Zbe(n){if(typeof n!="function")throw new Error;return this.each(Jbe(this._id,n))}function exe(n){typeof n!="function"&&(n=VK(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&n.call(l,l.__data__,c,s)&&a.push(l);return new ma(r,this._parents,this._name,this._id)}function txe(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,r=e.length,i=t.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=e[a],c=t[a],u=l.length,h=o[a]=new Array(u),d,f=0;f<u;++f)(d=l[f]||c[f])&&(h[f]=d);for(;a<r;++a)o[a]=e[a];return new ma(o,this._parents,this._name,this._id)}function nxe(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function rxe(n,e,t){var r,i,s=nxe(e)?wR:ko;return function(){var o=s(this,n),a=o.on;a!==r&&(i=(r=a).copy()).on(e,t),o.on=i}}function ixe(n,e){var t=this._id;return arguments.length<2?qs(this.node(),t).on.on(n):this.each(rxe(t,n,e))}function sxe(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function oxe(){return this.on("end.remove",sxe(this._id))}function axe(n){var e=this._name,t=this._id;typeof n!="function"&&(n=vR(n));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,c=s[o]=new Array(l),u,h,d=0;d<l;++d)(u=a[d])&&(h=n.call(u,u.__data__,d,a))&&("__data__"in u&&(h.__data__=u.__data__),c[d]=h,Mx(c[d],e,t,d,c,qs(u,t)));return new ma(s,this._parents,e,t)}function lxe(n){var e=this._name,t=this._id;typeof n!="function"&&(n=GK(n));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var d=n.call(u,u.__data__,h,l),f,m=qs(u,t),g=0,v=d.length;g<v;++g)(f=d[g])&&Mx(f,e,t,g,d,m);s.push(d),o.push(u)}return new ma(s,o,e,t)}var cxe=xg.prototype.constructor;function uxe(){return new cxe(this._groups,this._parents)}function hxe(n,e){var t,r,i;return function(){var s=vd(this,n),o=(this.style.removeProperty(n),vd(this,n));return s===o?null:s===t&&o===r?i:i=e(t=s,r=o)}}function pX(n){return function(){this.style.removeProperty(n)}}function dxe(n,e,t){var r,i=t+"",s;return function(){var o=vd(this,n);return o===i?null:o===r?s:s=e(r=o,t)}}function fxe(n,e,t){var r,i,s;return function(){var o=vd(this,n),a=t(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(n),vd(this,n))),o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a))}}function pxe(n,e){var t,r,i,s="style."+e,o="end."+s,a;return function(){var l=ko(this,n),c=l.on,u=l.value[s]==null?a||(a=pX(e)):void 0;(c!==t||i!==u)&&(r=(t=c).copy()).on(o,i=u),l.on=r}}function mxe(n,e,t){var r=(n+="")=="transform"?ybe:fX;return e==null?this.styleTween(n,hxe(n,r)).on("end.style."+n,pX(n)):typeof e=="function"?this.styleTween(n,fxe(n,r,_R(this,"style."+n,e))).each(pxe(this._id,n)):this.styleTween(n,dxe(n,r,e),t).on("end.style."+n,null)}function gxe(n,e,t){return function(r){this.style.setProperty(n,e.call(this,r),t)}}function vxe(n,e,t){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&gxe(n,o,t)),r}return s._value=e,s}function yxe(n,e,t){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,vxe(n,e,t??""))}function bxe(n){return function(){this.textContent=n}}function xxe(n){return function(){var e=n(this);this.textContent=e??""}}function wxe(n){return this.tween("text",typeof n=="function"?xxe(_R(this,"text",n)):bxe(n==null?"":n+""))}function _xe(n){return function(e){this.textContent=n.call(this,e)}}function Sxe(n){var e,t;function r(){var i=n.apply(this,arguments);return i!==t&&(e=(t=i)&&_xe(i)),e}return r._value=n,r}function kxe(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,Sxe(n))}function Cxe(){for(var n=this._name,e=this._id,t=mX(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=qs(l,e);Mx(l,n,t,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new ma(r,this._parents,n,t)}function Exe(){var n,e,t=this,r=t._id,i=t.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};t.each(function(){var c=ko(this,r),u=c.on;u!==n&&(e=(n=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),i===0&&s()})}var Txe=0;function ma(n,e,t,r){this._groups=n,this._parents=e,this._name=t,this._id=r}function mX(){return++Txe}var jo=xg.prototype;ma.prototype={constructor:ma,select:axe,selectAll:lxe,selectChild:jo.selectChild,selectChildren:jo.selectChildren,filter:exe,merge:txe,selection:uxe,transition:Cxe,call:jo.call,nodes:jo.nodes,node:jo.node,size:jo.size,empty:jo.empty,each:jo.each,on:ixe,attr:jbe,attrTween:Ube,style:mxe,styleTween:yxe,text:wxe,textTween:kxe,remove:oxe,tween:Obe,delay:Ybe,duration:Kbe,ease:Qbe,easeVarying:Zbe,end:Exe,[Symbol.iterator]:jo[Symbol.iterator]};function Mxe(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var Ixe={time:null,delay:0,duration:250,ease:Mxe};function Pxe(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function Oxe(n){var e,t;n instanceof ma?(e=n._id,n=n._name):(e=mX(),(t=Ixe).time=xR(),n=n==null?null:n+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&Mx(l,n,e,c,o,t||Pxe(l,e));return new ma(r,this._parents,n,e)}xg.prototype.interrupt=Mbe;xg.prototype.transition=Oxe;function ip(n,e,t){this.k=n,this.x=e,this.y=t}ip.prototype={constructor:ip,scale:function(n){return n===1?this:new ip(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new ip(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ip.prototype;/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function _g(n){return n+.5|0}const ul=(n,e,t)=>Math.max(Math.min(n,t),e);function sp(n){return ul(_g(n*2.55),0,255)}function _l(n){return ul(_g(n*255),0,255)}function Yo(n){return ul(_g(n/2.55)/100,0,1)}function Y4(n){return ul(_g(n*100),0,100)}const Yi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},AI=[..."0123456789ABCDEF"],Rxe=n=>AI[n&15],Dxe=n=>AI[(n&240)>>4]+AI[n&15],lv=n=>(n&240)>>4===(n&15),Nxe=n=>lv(n.r)&&lv(n.g)&&lv(n.b)&&lv(n.a);function Axe(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Yi[n[1]]*17,g:255&Yi[n[2]]*17,b:255&Yi[n[3]]*17,a:e===5?Yi[n[4]]*17:255}:(e===7||e===9)&&(t={r:Yi[n[1]]<<4|Yi[n[2]],g:Yi[n[3]]<<4|Yi[n[4]],b:Yi[n[5]]<<4|Yi[n[6]],a:e===9?Yi[n[7]]<<4|Yi[n[8]]:255})),t}const Lxe=(n,e)=>n<255?e(n):"";function Fxe(n){var e=Nxe(n)?Rxe:Dxe;return n?"#"+e(n.r)+e(n.g)+e(n.b)+Lxe(n.a,e):void 0}const jxe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function gX(n,e,t){const r=e*Math.min(t,1-t),i=(s,o=(s+n/30)%12)=>t-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function $xe(n,e,t){const r=(i,s=(i+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function Bxe(n,e,t){const r=gX(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function zxe(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}function SR(n){const t=n.r/255,r=n.g/255,i=n.b/255,s=Math.max(t,r,i),o=Math.min(t,r,i),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=zxe(t,r,i,u,s),l=l*60+.5),[l|0,c||0,a]}function kR(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(_l)}function CR(n,e,t){return kR(gX,n,e,t)}function qxe(n,e,t){return kR(Bxe,n,e,t)}function Uxe(n,e,t){return kR($xe,n,e,t)}function vX(n){return(n%360+360)%360}function Wxe(n){const e=jxe.exec(n);let t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?sp(+e[5]):_l(+e[5]));const i=vX(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=qxe(i,s,o):e[1]==="hsv"?r=Uxe(i,s,o):r=CR(i,s,o),{r:r[0],g:r[1],b:r[2],a:t}}function Hxe(n,e){var t=SR(n);t[0]=vX(t[0]+e),t=CR(t),n.r=t[0],n.g=t[1],n.b=t[2]}function Yxe(n){if(!n)return;const e=SR(n),t=e[0],r=Y4(e[1]),i=Y4(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${Yo(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}const G4={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},V4={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Gxe(){const n={},e=Object.keys(V4),t=Object.keys(G4);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<t.length;i++)s=t[i],a=a.replace(s,G4[s]);s=parseInt(V4[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}let cv;function Vxe(n){cv||(cv=Gxe(),cv.transparent=[0,0,0,0]);const e=cv[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Kxe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Xxe(n){const e=Kxe.exec(n);let t=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];t=e[8]?sp(o):ul(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?sp(r):ul(r,0,255)),i=255&(e[4]?sp(i):ul(i,0,255)),s=255&(e[6]?sp(s):ul(s,0,255)),{r,g:i,b:s,a:t}}}function Qxe(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Yo(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const h_=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Au=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function Jxe(n,e,t){const r=Au(Yo(n.r)),i=Au(Yo(n.g)),s=Au(Yo(n.b));return{r:_l(h_(r+t*(Au(Yo(e.r))-r))),g:_l(h_(i+t*(Au(Yo(e.g))-i))),b:_l(h_(s+t*(Au(Yo(e.b))-s))),a:n.a+t*(e.a-n.a)}}function uv(n,e,t){if(n){let r=SR(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=CR(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function yX(n,e){return n&&Object.assign(e||{},n)}function K4(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=_l(n[3]))):(e=yX(n,{r:0,g:0,b:0,a:1}),e.a=_l(e.a)),e}function Zxe(n){return n.charAt(0)==="r"?Xxe(n):Wxe(n)}class Lm{constructor(e){if(e instanceof Lm)return e;const t=typeof e;let r;t==="object"?r=K4(e):t==="string"&&(r=Axe(e)||Vxe(e)||Zxe(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=yX(this._rgb);return e&&(e.a=Yo(e.a)),e}set rgb(e){this._rgb=K4(e)}rgbString(){return this._valid?Qxe(this._rgb):void 0}hexString(){return this._valid?Fxe(this._rgb):void 0}hslString(){return this._valid?Yxe(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,i=e.rgb;let s;const o=t===s?.5:t,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=Jxe(this._rgb,e._rgb,t)),this}clone(){return new Lm(this.rgb)}alpha(e){return this._rgb.a=_l(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=_g(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return uv(this._rgb,2,e),this}darken(e){return uv(this._rgb,2,-e),this}saturate(e){return uv(this._rgb,1,e),this}desaturate(e){return uv(this._rgb,1,-e),this}rotate(e){return Hxe(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function $o(){}const ewe=(()=>{let n=0;return()=>n++})();function En(n){return n==null}function xn(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function wt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function gi(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Zs(n,e){return gi(n)?n:e}function bt(n,e){return typeof n>"u"?e:n}const twe=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,bX=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function Vt(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function qt(n,e,t,r){let i,s,o;if(xn(n))for(s=n.length,i=0;i<s;i++)e.call(t,n[i],i);else if(wt(n))for(o=Object.keys(n),s=o.length,i=0;i<s;i++)e.call(t,n[o[i]],o[i])}function ob(n,e){let t,r,i,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],s=e[t],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function ab(n){if(xn(n))return n.map(ab);if(wt(n)){const e=Object.create(null),t=Object.keys(n),r=t.length;let i=0;for(;i<r;++i)e[t[i]]=ab(n[t[i]]);return e}return n}function xX(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function nwe(n,e,t,r){if(!xX(n))return;const i=e[n],s=t[n];wt(i)&&wt(s)?Fm(i,s,r):e[n]=ab(s)}function Fm(n,e,t){const r=xn(e)?e:[e],i=r.length;if(!wt(n))return n;t=t||{};const s=t.merger||nwe;let o;for(let a=0;a<i;++a){if(o=r[a],!wt(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],n,o,t)}return n}function Op(n,e){return Fm(n,e,{merger:rwe})}function rwe(n,e,t){if(!xX(n))return;const r=e[n],i=t[n];wt(r)&&wt(i)?Op(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=ab(i))}const X4={"":n=>n,x:n=>n.x,y:n=>n.y};function iwe(n){const e=n.split("."),t=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function swe(n){const e=iwe(n);return t=>{for(const r of e){if(r==="")break;t=t&&t[r]}return t}}function jm(n,e){return(X4[e]||(X4[e]=swe(e)))(n)}function ER(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Fi=n=>typeof n<"u",di=n=>typeof n=="function",Q4=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function owe(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const jt=Math.PI,kr=2*jt,awe=kr+jt,lb=Number.POSITIVE_INFINITY,TR=jt/180,Cr=jt/2,ns=jt/4,cb=jt*2/3,wX=Math.log10,bd=Math.sign;function Rp(n,e,t){return Math.abs(n-e)<t}function J4(n){const e=Math.round(n);n=Rp(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(wX(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function lwe(n){const e=[],t=Math.sqrt(n);let r;for(r=1;r<t;r++)n%r===0&&(e.push(r),e.push(n/r));return t===(t|0)&&e.push(t),e.sort((i,s)=>i-s).pop(),e}function cwe(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function xd(n){return!cwe(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function uwe(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function hwe(n,e,t){let r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function dr(n){return n*(jt/180)}function _X(n){return n*(180/jt)}function Z4(n){if(!gi(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function LI(n,e){const t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r);let s=Math.atan2(r,t);return s<-.5*jt&&(s+=kr),{angle:s,distance:i}}function wd(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function dwe(n,e){return(n-e+awe)%kr-jt}function qa(n){return(n%kr+kr)%kr}function ub(n,e,t,r){const i=qa(n),s=qa(e),o=qa(t),a=qa(s-i),l=qa(o-i),c=qa(i-s),u=qa(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function fo(n,e,t){return Math.max(e,Math.min(t,n))}function fwe(n){return fo(n,-32768,32767)}function op(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function MR(n,e,t){t=t||(o=>n[o]<e);let r=n.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,t(s)?i=s:r=s;return{lo:i,hi:r}}const FI=(n,e,t,r)=>MR(n,t,r?i=>{const s=n[i][e];return s<t||s===t&&n[i+1][e]===t}:i=>n[i][e]<t),pwe=(n,e,t)=>MR(n,t,r=>n[r][e]>=t);function mwe(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}const SX=["push","pop","shift","splice","unshift"];function gwe(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),SX.forEach(t=>{const r="_onData"+ER(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function eL(n,e){const t=n._chartjs;if(!t)return;const r=t.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(SX.forEach(s=>{delete n[s]}),delete n._chartjs)}function vwe(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const kX=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function CX(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,kX.call(window,()=>{r=!1,n.apply(e,t)}))}}function ywe(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}const IR=n=>n==="start"?"left":n==="end"?"right":"center",Rr=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,bwe=(n,e,t,r)=>n===(r?"left":"right")?t:n==="center"?(e+t)/2:e,hv=n=>n===0||n===1,tL=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*kr/t)),nL=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*kr/t)+1,Dp={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Cr)+1,easeOutSine:n=>Math.sin(n*Cr),easeInOutSine:n=>-.5*(Math.cos(jt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>hv(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>hv(n)?n:tL(n,.075,.3),easeOutElastic:n=>hv(n)?n:nL(n,.075,.3),easeInOutElastic(n){return hv(n)?n:n<.5?.5*tL(n*2,.1125,.45):.5+.5*nL(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Dp.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Dp.easeInBounce(n*2)*.5:Dp.easeOutBounce(n*2-1)*.5+.5};function PR(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function rL(n){return PR(n)?n:new Lm(n)}function d_(n){return PR(n)?n:new Lm(n).saturate(.5).darken(.1).hexString()}const xwe=["x","y","borderWidth","radius","tension"],wwe=["color","borderColor","backgroundColor"];function _we(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:wwe},numbers:{type:"number",properties:xwe}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Swe(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const iL=new Map;function kwe(n,e){e=e||{};const t=n+JSON.stringify(e);let r=iL.get(t);return r||(r=new Intl.NumberFormat(n,e),iL.set(t,r)),r}function OR(n,e,t){return kwe(e,t).format(n)}const Cwe={values(n){return xn(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const r=this.chart.options.locale;let i,s=n;if(t.length>1){const c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=Ewe(n,t)}const o=wX(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),OR(n,r,l)}};function Ewe(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var EX={formatters:Cwe};function Twe(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:EX.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Jc=Object.create(null),jI=Object.create(null);function Np(n,e){if(!e)return n;const t=e.split(".");for(let r=0,i=t.length;r<i;++r){const s=t[r];n=n[s]||(n[s]=Object.create(null))}return n}function f_(n,e,t){return typeof e=="string"?Fm(Np(n,e),t):Fm(Np(n,""),e)}class Mwe{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>d_(i.backgroundColor),this.hoverBorderColor=(r,i)=>d_(i.borderColor),this.hoverColor=(r,i)=>d_(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return f_(this,e,t)}get(e){return Np(this,e)}describe(e,t){return f_(jI,e,t)}override(e,t){return f_(Jc,e,t)}route(e,t,r,i){const s=Np(this,e),o=Np(this,r),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[a],c=o[i];return wt(l)?Object.assign({},c,l):bt(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}}var Nn=new Mwe({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[_we,Swe,Twe]);function Iwe(n){return!n||En(n.size)||En(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function sL(n,e,t,r,i){let s=e[i];return s||(s=e[i]=n.measureText(i).width,t.push(i)),s>r&&(r=s),r}function Gl(n,e,t){const r=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function oL(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function $I(n,e,t,r){TX(n,e,t,r,null)}function TX(n,e,t,r,i){let s,o,a,l,c,u,h,d;const f=e.pointStyle,m=e.rotation,g=e.radius;let v=(m||0)*TR;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,r),n.rotate(v),n.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),n.restore();return}if(!(isNaN(g)||g<=0)){switch(n.beginPath(),f){default:i?n.ellipse(t,r,i/2,g,0,0,kr):n.arc(t,r,g,0,kr),n.closePath();break;case"triangle":u=i?i/2:g,n.moveTo(t+Math.sin(v)*u,r-Math.cos(v)*g),v+=cb,n.lineTo(t+Math.sin(v)*u,r-Math.cos(v)*g),v+=cb,n.lineTo(t+Math.sin(v)*u,r-Math.cos(v)*g),n.closePath();break;case"rectRounded":c=g*.516,l=g-c,o=Math.cos(v+ns)*l,h=Math.cos(v+ns)*(i?i/2-c:l),a=Math.sin(v+ns)*l,d=Math.sin(v+ns)*(i?i/2-c:l),n.arc(t-h,r-a,c,v-jt,v-Cr),n.arc(t+d,r-o,c,v-Cr,v),n.arc(t+h,r+a,c,v,v+Cr),n.arc(t-d,r+o,c,v+Cr,v+jt),n.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*g,u=i?i/2:l,n.rect(t-u,r-l,2*u,2*l);break}v+=ns;case"rectRot":h=Math.cos(v)*(i?i/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,d=Math.sin(v)*(i?i/2:g),n.moveTo(t-h,r-a),n.lineTo(t+d,r-o),n.lineTo(t+h,r+a),n.lineTo(t-d,r+o),n.closePath();break;case"crossRot":v+=ns;case"cross":h=Math.cos(v)*(i?i/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,d=Math.sin(v)*(i?i/2:g),n.moveTo(t-h,r-a),n.lineTo(t+h,r+a),n.moveTo(t+d,r-o),n.lineTo(t-d,r+o);break;case"star":h=Math.cos(v)*(i?i/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,d=Math.sin(v)*(i?i/2:g),n.moveTo(t-h,r-a),n.lineTo(t+h,r+a),n.moveTo(t+d,r-o),n.lineTo(t-d,r+o),v+=ns,h=Math.cos(v)*(i?i/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,d=Math.sin(v)*(i?i/2:g),n.moveTo(t-h,r-a),n.lineTo(t+h,r+a),n.moveTo(t+d,r-o),n.lineTo(t-d,r+o);break;case"line":o=i?i/2:Math.cos(v)*g,a=Math.sin(v)*g,n.moveTo(t-o,r-a),n.lineTo(t+o,r+a);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(v)*(i?i/2:g),r+Math.sin(v)*g);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function $m(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Ix(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Px(n){n.restore()}function Pwe(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){const s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else i==="after"!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function Owe(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function Rwe(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),En(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function Dwe(n,e,t,r,i){if(i.strikethrough||i.underline){const s=n.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=t-s.actualBoundingBoxAscent,c=t+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function Nwe(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Bm(n,e,t,r,i,s={}){const o=xn(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(n.save(),n.font=i.string,Rwe(n,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&Nwe(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),En(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(c,t,r,s.maxWidth)),n.fillText(c,t,r,s.maxWidth),Dwe(n,t,r,c,s),r+=Number(i.lineHeight);n.restore()}function hb(n,e){const{x:t,y:r,w:i,h:s,radius:o}=e;n.arc(t+o.topLeft,r+o.topLeft,o.topLeft,1.5*jt,jt,!0),n.lineTo(t,r+s-o.bottomLeft),n.arc(t+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,jt,Cr,!0),n.lineTo(t+i-o.bottomRight,r+s),n.arc(t+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Cr,0,!0),n.lineTo(t+i,r+o.topRight),n.arc(t+i-o.topRight,r+o.topRight,o.topRight,0,-Cr,!0),n.lineTo(t+o.topLeft,r)}const Awe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Lwe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Fwe(n,e){const t=(""+n).match(Awe);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const jwe=n=>+n||0;function MX(n,e){const t={},r=wt(e),i=r?Object.keys(e):e,s=wt(n)?r?o=>bt(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of i)t[o]=jwe(s(o));return t}function $we(n){return MX(n,{top:"y",right:"x",bottom:"y",left:"x"})}function xh(n){return MX(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Ar(n){const e=$we(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function nr(n,e){n=n||{},e=e||Nn.font;let t=bt(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=bt(n.style,e.style);r&&!(""+r).match(Lwe)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:bt(n.family,e.family),lineHeight:Fwe(bt(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:bt(n.weight,e.weight),string:""};return i.string=Iwe(i),i}function dv(n,e,t,r){let i,s,o;for(i=0,s=n.length;i<s;++i)if(o=n[i],o!==void 0&&o!==void 0)return o}function Bwe(n,e,t){const{min:r,max:i}=n,s=bX(e,(i-r)/2),o=(a,l)=>t&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function du(n,e){return Object.assign(Object.create(n),e)}function RR(n,e=[""],t,r,i=()=>n[0]){const s=t||n;typeof r>"u"&&(r=RX("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>RR([a,...n],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return PX(a,l,()=>Vwe(l,e,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return lL(a).includes(l)},ownKeys(a){return lL(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function _d(n,e,t,r){const i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:IX(n,r),setContext:s=>_d(n,s,t,r),override:s=>_d(n.override(s),e,t,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return PX(s,o,()=>qwe(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function IX(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:di(t)?t:()=>t,isIndexable:di(r)?r:()=>r}}const zwe=(n,e)=>n?n+ER(e):e,DR=(n,e)=>wt(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function PX(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const r=t();return n[e]=r,r}function qwe(n,e,t){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=n;let a=r[e];return di(a)&&o.isScriptable(e)&&(a=Uwe(e,a,n,t)),xn(a)&&a.length&&(a=Wwe(e,a,n,o.isIndexable)),DR(e,a)&&(a=_d(a,i,s&&s[e],o)),a}function Uwe(n,e,t,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=e(s,o||r);return a.delete(n),DR(n,l)&&(l=NR(i._scopes,i,n,l)),l}function Wwe(n,e,t,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&r(n))return e[s.index%e.length];if(wt(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=NR(c,i,n,u);e.push(_d(h,s,o&&o[n],a))}}return e}function OX(n,e,t){return di(n)?n(e,t):n}const Hwe=(n,e)=>n===!0?e:typeof n=="string"?jm(e,n):void 0;function Ywe(n,e,t,r,i){for(const s of e){const o=Hwe(t,s);if(o){n.add(o);const a=OX(o._fallback,t,i);if(typeof a<"u"&&a!==t&&a!==r)return a}else if(o===!1&&typeof r<"u"&&t!==r)return null}return!1}function NR(n,e,t,r){const i=e._rootScopes,s=OX(e._fallback,t,r),o=[...n,...i],a=new Set;a.add(r);let l=aL(a,o,t,s||t,r);return l===null||typeof s<"u"&&s!==t&&(l=aL(a,o,s,l,r),l===null)?!1:RR(Array.from(a),[""],i,s,()=>Gwe(e,t,r))}function aL(n,e,t,r,i){for(;t;)t=Ywe(n,e,t,r,i);return t}function Gwe(n,e,t){const r=n._getTarget();e in r||(r[e]={});const i=r[e];return xn(i)&&wt(t)?t:i||{}}function Vwe(n,e,t,r){let i;for(const s of e)if(i=RX(zwe(s,n),t),typeof i<"u")return DR(n,i)?NR(t,r,n,i):i}function RX(n,e){for(const t of e){if(!t)continue;const r=t[n];if(typeof r<"u")return r}}function lL(n){let e=n._keys;return e||(e=n._keys=Kwe(n._scopes)),e}function Kwe(n){const e=new Set;for(const t of n)for(const r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const Xwe=Number.EPSILON||1e-14,Sd=(n,e)=>e<n.length&&!n[e].skip&&n[e],DX=n=>n==="x"?"y":"x";function Qwe(n,e,t,r){const i=n.skip?e:n,s=e,o=t.skip?e:t,a=wd(s,i),l=wd(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=r*c,d=r*u;return{previous:{x:s.x-h*(o.x-i.x),y:s.y-h*(o.y-i.y)},next:{x:s.x+d*(o.x-i.x),y:s.y+d*(o.y-i.y)}}}function Jwe(n,e,t){const r=n.length;let i,s,o,a,l,c=Sd(n,0);for(let u=0;u<r-1;++u)if(l=c,c=Sd(n,u+1),!(!l||!c)){if(Rp(e[u],0,Xwe)){t[u]=t[u+1]=0;continue}i=t[u]/e[u],s=t[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[u]=i*o*e[u],t[u+1]=s*o*e[u])}}function Zwe(n,e,t="x"){const r=DX(t),i=n.length;let s,o,a,l=Sd(n,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Sd(n,c+1),!a)continue;const u=a[t],h=a[r];o&&(s=(u-o[t])/3,a[`cp1${t}`]=u-s,a[`cp1${r}`]=h-s*e[c]),l&&(s=(l[t]-u)/3,a[`cp2${t}`]=u+s,a[`cp2${r}`]=h+s*e[c])}}function e1e(n,e="x"){const t=DX(e),r=n.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=Sd(n,0);for(o=0;o<r;++o)if(a=l,l=c,c=Sd(n,o+1),!!l){if(c){const u=c[e]-l[e];i[o]=u!==0?(c[t]-l[t])/u:0}s[o]=a?c?bd(i[o-1])!==bd(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}Jwe(n,i,s),Zwe(n,s,e)}function fv(n,e,t){return Math.max(Math.min(n,t),e)}function t1e(n,e){let t,r,i,s,o,a=$m(n[0],e);for(t=0,r=n.length;t<r;++t)o=s,s=a,a=t<r-1&&$m(n[t+1],e),s&&(i=n[t],o&&(i.cp1x=fv(i.cp1x,e.left,e.right),i.cp1y=fv(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=fv(i.cp2x,e.left,e.right),i.cp2y=fv(i.cp2y,e.top,e.bottom)))}function n1e(n,e,t,r,i){let s,o,a,l;if(e.spanGaps&&(n=n.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")e1e(n,i);else{let c=r?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],l=Qwe(c,a,n[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&t1e(n,t)}function AR(){return typeof window<"u"&&typeof document<"u"}function LR(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function db(n,e,t){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=n,r}const Ox=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function r1e(n,e){return Ox(n).getPropertyValue(e)}const i1e=["top","right","bottom","left"];function Nc(n,e,t){const r={};t=t?"-"+t:"";for(let i=0;i<4;i++){const s=i1e[i];r[s]=parseFloat(n[e+"-"+s+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const s1e=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function o1e(n,e){const t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(s1e(i,s,n.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function ec(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:r}=e,i=Ox(t),s=i.boxSizing==="border-box",o=Nc(i,"padding"),a=Nc(i,"border","width"),{x:l,y:c,box:u}=o1e(n,t),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:m}=e;return s&&(f-=o.width+a.width,m-=o.height+a.height),{x:Math.round((l-h)/f*t.width/r),y:Math.round((c-d)/m*t.height/r)}}function a1e(n,e,t){let r,i;if(e===void 0||t===void 0){const s=n&&LR(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{const o=s.getBoundingClientRect(),a=Ox(s),l=Nc(a,"border","width"),c=Nc(a,"padding");e=o.width-c.width-l.width,t=o.height-c.height-l.height,r=db(a.maxWidth,s,"clientWidth"),i=db(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:r||lb,maxHeight:i||lb}}const hl=n=>Math.round(n*10)/10;function l1e(n,e,t,r){const i=Ox(n),s=Nc(i,"margin"),o=db(i.maxWidth,n,"clientWidth")||lb,a=db(i.maxHeight,n,"clientHeight")||lb,l=a1e(n,e,t);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const d=Nc(i,"border","width"),f=Nc(i,"padding");c-=f.width+d.width,u-=f.height+d.height}return c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=hl(Math.min(c,o,l.maxWidth)),u=hl(Math.min(u,a,l.maxHeight)),c&&!u&&(u=hl(c/2)),(e!==void 0||t!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=hl(Math.floor(u*r))),{width:c,height:u}}function cL(n,e,t){const r=e||1,i=hl(n.height*r),s=hl(n.width*r);n.height=hl(n.height),n.width=hl(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(n.currentDevicePixelRatio=r,o.height=i,o.width=s,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}const c1e=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};AR()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function uL(n,e){const t=r1e(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function tc(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function u1e(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:r==="middle"?t<.5?n.y:e.y:r==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function h1e(n,e,t,r){const i={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=tc(n,i,t),a=tc(i,s,t),l=tc(s,e,t),c=tc(o,a,t),u=tc(a,l,t);return tc(c,u,t)}const d1e=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},f1e=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function wh(n,e,t){return n?d1e(e,t):f1e()}function NX(n,e){let t,r;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function AX(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function LX(n){return n==="angle"?{between:ub,compare:dwe,normalize:qa}:{between:op,compare:(e,t)=>e-t,normalize:e=>e}}function hL({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t===0,style:i}}function p1e(n,e,t){const{property:r,start:i,end:s}=t,{between:o,normalize:a}=LX(r),l=e.length;let{start:c,end:u,loop:h}=n,d,f;if(h){for(c+=l,u+=l,d=0,f=l;d<f&&o(a(e[c%l][r]),i,s);++d)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:n.style}}function m1e(n,e,t){if(!t)return[n];const{property:r,start:i,end:s}=t,o=e.length,{compare:a,between:l,normalize:c}=LX(r),{start:u,end:h,loop:d,style:f}=p1e(n,e,t),m=[];let g=!1,v=null,y,b,w;const S=()=>l(i,w,y)&&a(i,w)!==0,_=()=>a(s,y)===0||l(s,w,y),E=()=>g||S(),C=()=>!g||_();for(let T=u,O=u;T<=h;++T)b=e[T%o],!b.skip&&(y=c(b[r]),y!==w&&(g=l(y,i,s),v===null&&E()&&(v=a(y,i)===0?T:O),v!==null&&C()&&(m.push(hL({start:v,end:T,loop:d,count:o,style:f})),v=null),O=T,w=y));return v!==null&&m.push(hL({start:v,end:h,loop:d,count:o,style:f})),m}function g1e(n,e){const t=[],r=n.segments;for(let i=0;i<r.length;i++){const s=m1e(r[i],n.points,e);s.length&&t.push(...s)}return t}function v1e(n,e,t,r){let i=0,s=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(s+=i);s>i&&n[s%e].skip;)s--;return s%=e,{start:i,end:s}}function y1e(n,e,t,r){const i=n.length,s=[];let o=e,a=n[e],l;for(l=e+1;l<=t;++l){const c=n[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function b1e(n,e){const t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];const s=!!n._loop,{start:o,end:a}=v1e(t,i,s,r);if(r===!0)return dL(n,[{start:o,end:a,loop:s}],t,e);const l=a<o?a+i:a,c=!!n._fullLoop&&o===0&&a===i-1;return dL(n,y1e(t,o,l,c),t,e)}function dL(n,e,t,r){return!r||!r.setContext||!t?e:x1e(n,e,t,r)}function x1e(n,e,t,r){const i=n._chart.getContext(),s=fL(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=t.length,c=[];let u=s,h=e[0].start,d=h;function f(m,g,v,y){const b=a?-1:1;if(m!==g){for(m+=l;t[m%l].skip;)m-=b;for(;t[g%l].skip;)g+=b;m%l!==g%l&&(c.push({start:m%l,end:g%l,loop:v,style:y}),u=y,h=g%l)}}for(const m of e){h=a?h:m.start;let g=t[h%l],v;for(d=h+1;d<=m.end;d++){const y=t[d%l];v=fL(r.setContext(du(i,{type:"segment",p0:g,p1:y,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),w1e(v,u)&&f(h,d-1,m.loop,u),g=y,u=v}h<d-1&&f(h,d-1,m.loop,u)}return c}function fL(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function w1e(n,e){if(!e)return!1;const t=[],r=function(i,s){return PR(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,r)!==JSON.stringify(e,r)}function pv(n,e,t){return n.options.clip?n[t]:e[t]}function _1e(n,e){const{xScale:t,yScale:r}=n;return t&&r?{left:pv(t,e,"left"),right:pv(t,e,"right"),top:pv(r,e,"top"),bottom:pv(r,e,"bottom")}:e}function S1e(n,e){const t=e._clip;if(t.disabled)return!1;const r=_1e(e,n.chartArea);return{left:t.left===!1?0:r.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:r.right+(t.right===!0?0:t.right),top:t.top===!1?0:r.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:r.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class k1e{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){const s=t.listeners[i],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(r-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=kX.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var zo=new k1e;const pL="transparent",C1e={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const r=rL(n||pL),i=r.valid&&rL(e||pL);return i&&i.valid?i.mix(r,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class E1e{constructor(e,t,r,i){const s=t[r];i=dv([e.to,i,s,e.from]);const o=dv([e.from,s,i]);this._active=!0,this._fn=e.fn||C1e[e.type||typeof o],this._easing=Dp[e.easing]||Dp.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=dv([e.to,t,i,e.from]),this._from=dv([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||t<r),!this._active){this._target[i]=a,this._notify(!0);return}if(t<0){this._target[i]=s;return}l=t/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}}class FR{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!wt(e))return;const t=Object.keys(Nn.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!wt(s))return;const o={};for(const a of t)o[a]=s[a];(xn(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,t){const r=t.options,i=M1e(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&T1e(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,t){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,t));continue}const u=t[c];let h=s[c];const d=r.get(c);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){e[c]=u;continue}s[c]=h=new E1e(d,e,c,u),i.push(h)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const r=this._createAnimations(e,t);if(r.length)return zo.add(this._chart,r),!0}}function T1e(n,e){const t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=n[r[i]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function M1e(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function mL(n,e){const t=n&&n.options||{},r=t.reverse,i=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function I1e(n,e,t){if(t===!1)return!1;const r=mL(n,t),i=mL(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function P1e(n){let e,t,r,i;return wt(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:n===!1}}function FX(n,e){const t=[],r=n._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)t.push(r[i].index);return t}function gL(n,e,t,r={}){const i=n.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===t){if(u=!0,r.all)continue;break}c=n.values[l],gi(c)&&(s||e===0||bd(e)===bd(c))&&(e+=c)}return!u&&!r.all?0:e}function O1e(n,e){const{iScale:t,vScale:r}=e,i=t.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:n[u]};return a}function p_(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function R1e(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function D1e(n){const{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function N1e(n,e,t){const r=n[e]||(n[e]={});return r[t]||(r[t]={})}function vL(n,e,t,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=n[i.index];if(t&&s>0||!t&&s<0)return i.index}return null}function yL(n,e){const{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=R1e(s,o,r),h=e.length;let d;for(let f=0;f<h;++f){const m=e[f],{[l]:g,[c]:v}=m,y=m._stacks||(m._stacks={});d=y[c]=N1e(i,u,g),d[a]=v,d._top=vL(d,o,!0,r.type),d._bottom=vL(d,o,!1,r.type);const b=d._visualValues||(d._visualValues={});b[a]=v}}function m_(n,e){const t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function A1e(n,e){return du(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function L1e(n,e,t){return du(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Lf(n,e){const t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][t]===void 0)return;delete s[r][t],s[r]._visualValues!==void 0&&s[r]._visualValues[t]!==void 0&&delete s[r]._visualValues[t]}}}const g_=n=>n==="reset"||n==="none",bL=(n,e)=>e?n:Object.assign({},n),F1e=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:FX(t,!0),values:null};class Ap{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=p_(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Lf(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),i=(h,d,f,m)=>h==="x"?d:h==="r"?m:f,s=t.xAxisID=bt(r.xAxisID,m_(e,"x")),o=t.yAxisID=bt(r.yAxisID,m_(e,"y")),a=t.rAxisID=bt(r.rAxisID,m_(e,"r")),l=t.indexAxis,c=t.iAxisID=i(l,s,o,a),u=t.vAxisID=i(l,o,s,a);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&eL(this._data,this),e._stacked&&Lf(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(wt(t)){const i=this._cachedMeta;this._data=O1e(t,i)}else if(r!==t){if(r){eL(r,this);const i=this._cachedMeta;Lf(i),i._parsed=[]}t&&Object.isExtensible(t)&&gwe(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=t._stacked;t._stacked=p_(t.vScale,t),t.stack!==r.stack&&(i=!0,Lf(t),t.stack=r.stack),this._resyncElements(e),(i||s!==t._stacked)&&(yL(this,t._parsed),t._stacked=p_(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&t===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,h,d;if(this._parsing===!1)r._parsed=i,r._sorted=!0,d=i;else{xn(i[e])?d=this.parseArrayData(r,i,e,t):wt(i[e])?d=this.parseObjectData(r,i,e,t):d=this.parsePrimitiveData(r,i,e,t);const f=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<t;++u)r._parsed[u+e]=h=d[u],l&&(f()&&(l=!1),c=h);r._sorted=l}o&&yL(this,d)}parsePrimitiveData(e,t,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,h=new Array(i);let d,f,m;for(d=0,f=i;d<f;++d)m=d+r,h[d]={[a]:u||s.parse(c[m],m),[l]:o.parse(t[m],m)};return h}parseArrayData(e,t,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,u,h;for(l=0,c=i;l<c;++l)u=l+r,h=t[u],a[l]={x:s.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,t,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,h,d,f;for(u=0,h=i;u<h;++u)d=u+r,f=t[d],c[u]={x:s.parse(jm(f,a),d),y:o.parse(jm(f,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const i=this.chart,s=this._cachedMeta,o=t[e.axis],a={keys:FX(i,!0),values:t._stacks[e.axis]._visualValues};return gL(a,o,s.index,{mode:r})}updateRangeFromParsed(e,t,r,i){const s=r[t.axis];let o=s===null?NaN:s;const a=i&&r._stacks[t.axis];i&&a&&(i.values=a,o=gL(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=F1e(t,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=D1e(a);let d,f;function m(){f=i[d];const g=f[a.axis];return!gi(f[e.axis])||u>g||h<g}for(d=0;d<o&&!(!m()&&(this.updateRangeFromParsed(c,e,f,l),s));++d);if(s){for(d=o-1;d>=0;--d)if(!m()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=t.length;i<s;++i)o=t[i][e.axis],gi(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,i=t.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=P1e(bt(this.options.clip,I1e(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,r=this._cachedMeta,i=r.data||[],s=t.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const h=i[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,t){const r=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=L1e(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=A1e(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",r){const i=t==="active",s=this._cachedDataOpts,o=e+"-"+t,a=s[o],l=this.enableOptionSharing&&Fi(r);if(a)return bL(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=i?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),u),f=Object.keys(Nn.elements[e]),m=()=>this.getContext(r,i,t),g=c.resolveNamedOptions(d,f,m,h);return g.$shared&&(g.$shared=l,s[o]=Object.freeze(bL(g,l))),g}_resolveAnimations(e,t,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${t}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,t),d=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(d,this.getContext(e,r,t))}const c=new FR(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||g_(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(t,s)||s!==i;return this.updateSharedOptions(s,t,r),{sharedOptions:s,includeOptions:o}}updateElement(e,t,r,i){g_(i)?Object.assign(e,r):this._resolveAnimations(t,i).update(e,r)}updateSharedOptions(e,t,r){e&&!g_(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,i){e.active=i;const s=this.getStyle(t,i);this._resolveAnimations(t,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=t.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,t,r=!0){const i=this._cachedMeta,s=i.data,o=e+t;let a;const l=c=>{for(c.length+=t,a=c.length-1;a>=o;a--)c[a]=c[a-t]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,t),r&&this.updateElements(s,e,t,"reset")}updateElements(e,t,r,i){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,t);r._stacked&&Lf(r,i)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,i]=e;this[t](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ce(Ap,"defaults",{}),ce(Ap,"datasetElementType",null),ce(Ap,"dataElementType",null);function j1e(n,e,t){let r=1,i=1,s=0,o=0;if(e<kr){const a=n,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(w,S,_)=>ub(w,a,l,!0)?1:Math.max(S,S*t,_,_*t),m=(w,S,_)=>ub(w,a,l,!0)?-1:Math.min(S,S*t,_,_*t),g=f(0,c,h),v=f(Cr,u,d),y=m(jt,c,h),b=m(jt+Cr,u,d);r=(g-y)/2,i=(v-b)/2,s=-(g+y)/2,o=-(v+b)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class ap extends Ap{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(wt(r[e])){const{key:l="value"}=this._parsing;s=c=>+jm(r[c],l)}let o,a;for(o=e,a=e+t;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return dr(this.options.rotation-90)}_getCircumference(){return dr(this.options.circumference)}_getRotationExtents(){let e=kr,t=-kr;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),t=Math.max(t,s+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:r}=t,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(twe(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:m,offsetY:g}=j1e(h,u,l),v=(r.width-o)/d,y=(r.height-o)/f,b=Math.max(Math.min(v,y)/2,0),w=bX(this.options.radius,b),S=Math.max(w*l,0),_=(w-S)/this._getVisibleDatasetWeightTotal();this.offsetX=m*w,this.offsetY=g*w,i.total=this.calculateTotal(),this.outerRadius=w-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return t&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/kr)}updateElements(e,t,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,d=s&&c.animateScale,f=d?0:this.innerRadius,m=d?0:this.outerRadius,{sharedOptions:g,includeOptions:v}=this._getSharedOptions(t,i);let y=this._getRotation(),b;for(b=0;b<t;++b)y+=this._circumference(b,s);for(b=t;b<t+r;++b){const w=this._circumference(b,s),S=e[b],_={x:u+this.offsetX,y:h+this.offsetY,startAngle:y,endAngle:y+w,circumference:w,outerRadius:m,innerRadius:f};v&&(_.options=g||this.resolveDataElementOptions(b,S.active?"active":i)),y+=w,this.updateElement(S,b,_,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let r=0,i;for(i=0;i<t.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!t[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?kr*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=OR(t._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);t=Math.max(t,s.offset||0,s.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(t+=this._getRingWeight(r));return t}_getRingWeight(e){return Math.max(bt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ce(ap,"id","doughnut"),ce(ap,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ce(ap,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ce(ap,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data,{labels:{pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((l,c)=>{const h=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:h.backgroundColor,fontColor:s,hidden:!e.getDataVisibility(c),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:i,pointStyle:r,borderRadius:o&&(a||h.borderRadius),index:c}}):[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}}});function Vl(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class jR{constructor(e){ce(this,"options");this.options=e||{}}static override(e){Object.assign(jR.prototype,e)}init(){}formats(){return Vl()}parse(){return Vl()}format(){return Vl()}add(){return Vl()}diff(){return Vl()}startOf(){return Vl()}endOf(){return Vl()}}var $1e={_date:jR};function B1e(n,e,t,r){const{controller:i,data:s,_sorted:o}=n,a=i._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?pwe:FI;if(r){if(i._sharedOptions){const u=s[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const d=c(s,e,t-h),f=c(s,e,t+h);return{lo:d.lo,hi:f.hi}}}}else{const u=c(s,e,t);if(l){const{vScale:h}=i._cachedMeta,{_parsed:d}=n,f=d.slice(0,u.lo+1).reverse().findIndex(g=>!En(g[h.axis]));u.lo-=Math.max(0,f);const m=d.slice(u.hi).findIndex(g=>!En(g[h.axis]));u.hi+=Math.max(0,m)}return u}}return{lo:0,hi:s.length-1}}function Rx(n,e,t,r,i){const s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:h,hi:d}=B1e(s[a],e,o,i);for(let f=h;f<=d;++f){const m=u[f];m.skip||r(m,c,f)}}}function z1e(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function v_(n,e,t,r,i){const s=[];return!i&&!n.isPointInArea(e)||Rx(n,t,e,function(a,l,c){!i&&!$m(a,n.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function q1e(n,e,t,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:h}=LI(o,{x:e.x,y:e.y});ub(h,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return Rx(n,t,e,s),i}function U1e(n,e,t,r,i,s){let o=[];const a=z1e(t);let l=Number.POSITIVE_INFINITY;function c(u,h,d){const f=u.inRange(e.x,e.y,i);if(r&&!f)return;const m=u.getCenterPoint(i);if(!(!!s||n.isPointInArea(m))&&!f)return;const v=a(e,m);v<l?(o=[{element:u,datasetIndex:h,index:d}],l=v):v===l&&o.push({element:u,datasetIndex:h,index:d})}return Rx(n,t,e,c),o}function y_(n,e,t,r,i,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!r?q1e(n,e,t,i):U1e(n,e,t,r,i,s)}function xL(n,e,t,r,i){const s=[],o=t==="x"?"inXRange":"inYRange";let a=!1;return Rx(n,t,e,(l,c,u)=>{l[o]&&l[o](e[t],i)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var W1e={modes:{index(n,e,t,r){const i=ec(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?v_(n,i,s,r,o):y_(n,i,s,!1,r,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(n,e,t,r){const i=ec(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?v_(n,i,s,r,o):y_(n,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(n,e,t,r){const i=ec(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return v_(n,i,s,r,o)},nearest(n,e,t,r){const i=ec(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return y_(n,i,s,t.intersect,r,o)},x(n,e,t,r){const i=ec(e,n);return xL(n,i,"x",t.intersect,r)},y(n,e,t,r){const i=ec(e,n);return xL(n,i,"y",t.intersect,r)}}};const jX=["left","top","right","bottom"];function Ff(n,e){return n.filter(t=>t.pos===e)}function wL(n,e){return n.filter(t=>jX.indexOf(t.pos)===-1&&t.box.axis===e)}function jf(n,e){return n.sort((t,r)=>{const i=e?r:t,s=e?t:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function H1e(n){const e=[];let t,r,i,s,o,a;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:t,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function Y1e(n){const e={};for(const t of n){const{stack:r,pos:i,stackWeight:s}=t;if(!r||!jX.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function G1e(n,e){const t=Y1e(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];const{fullSize:l}=a.box,c=t[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:l&&e.availableHeight)}return t}function V1e(n){const e=H1e(n),t=jf(e.filter(c=>c.box.fullSize),!0),r=jf(Ff(e,"left"),!0),i=jf(Ff(e,"right")),s=jf(Ff(e,"top"),!0),o=jf(Ff(e,"bottom")),a=wL(e,"x"),l=wL(e,"y");return{fullSize:t,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:Ff(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function _L(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function $X(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function K1e(n,e,t,r){const{pos:i,box:s}=t,o=n.maxPadding;if(!wt(i)){t.size&&(n[i]-=t.size);const h=r[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?s.height:s.width),t.size=h.size/h.count,n[i]+=t.size}s.getPadding&&$X(o,s.getPadding());const a=Math.max(0,e.outerWidth-_L(o,n,"left","right")),l=Math.max(0,e.outerHeight-_L(o,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,t.horizontal?{same:c,other:u}:{same:u,other:c}}function X1e(n){const e=n.maxPadding;function t(r){const i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function Q1e(n,e){const t=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return r(n?["left","right"]:["top","bottom"])}function lp(n,e,t,r){const i=[];let s,o,a,l,c,u;for(s=0,o=n.length,c=0;s<o;++s){a=n[s],l=a.box,l.update(a.width||e.w,a.height||e.h,Q1e(a.horizontal,e));const{same:h,other:d}=K1e(e,t,a,r);c|=h&&i.length,u=u||d,l.fullSize||i.push(a)}return c&&lp(i,e,t,r)||u}function mv(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function SL(n,e,t,r){const i=t.padding;let{x:s,y:o}=e;for(const a of n){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,d=c.size||l.height;Fi(c.start)&&(o=c.start),l.fullSize?mv(l,i.left,o,t.outerWidth-i.right-i.left,d):mv(l,e.left+c.placed,o,h,d),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,d=c.size||l.width;Fi(c.start)&&(s=c.start),l.fullSize?mv(l,s,i.top,d,t.outerHeight-i.bottom-i.top):mv(l,s,e.top+c.placed,d,h),c.start=s,c.placed+=h,s=l.right}}e.x=s,e.y=o}var os={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;const i=Ar(n.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(t-i.height,0),a=V1e(n.boxes),l=a.vertical,c=a.horizontal;qt(n.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const u=l.reduce((g,v)=>v.box.options&&v.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},i);$X(d,Ar(r));const f=Object.assign({maxPadding:d,w:s,h:o,x:i.left,y:i.top},i),m=G1e(l.concat(c),h);lp(a.fullSize,f,h,m),lp(l,f,h,m),lp(c,f,h,m)&&lp(l,f,h,m),X1e(f),SL(a.leftAndTop,f,h,m),f.x+=f.w,f.y+=f.h,SL(a.rightAndBottom,f,h,m),n.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},qt(a.chartArea,g=>{const v=g.box;Object.assign(v,n.chartArea),v.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class BX{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}}class J1e extends BX{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const ry="$chartjs",Z1e={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},kL=n=>n===null||n==="";function e_e(n,e){const t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[ry]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",kL(i)){const s=uL(n,"width");s!==void 0&&(n.width=s)}if(kL(r))if(n.style.height==="")n.height=n.width/(e||2);else{const s=uL(n,"height");s!==void 0&&(n.height=s)}return n}const zX=c1e?{passive:!0}:!1;function t_e(n,e,t){n&&n.addEventListener(e,t,zX)}function n_e(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,zX)}function r_e(n,e){const t=Z1e[n.type]||n.type,{x:r,y:i}=ec(n,e);return{type:t,chart:e,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function fb(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function i_e(n,e,t){const r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||fb(a.addedNodes,r),o=o&&!fb(a.removedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function s_e(n,e,t){const r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||fb(a.removedNodes,r),o=o&&!fb(a.addedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const zm=new Map;let CL=0;function qX(){const n=window.devicePixelRatio;n!==CL&&(CL=n,zm.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function o_e(n,e){zm.size||window.addEventListener("resize",qX),zm.set(n,e)}function a_e(n){zm.delete(n),zm.size||window.removeEventListener("resize",qX)}function l_e(n,e,t){const r=n.canvas,i=r&&LR(r);if(!i)return;const s=CX((a,l)=>{const c=i.clientWidth;t(a,l),c<i.clientWidth&&t()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(i),o_e(n,s),o}function b_(n,e,t){t&&t.disconnect(),e==="resize"&&a_e(n)}function c_e(n,e,t){const r=n.canvas,i=CX(s=>{n.ctx!==null&&t(r_e(s,n))},n);return t_e(r,e,i),i}class u_e extends BX{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(e_e(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[ry])return!1;const r=t[ry].initial;["height","width"].forEach(s=>{const o=r[s];En(o)?t.removeAttribute(s):t.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{t.style[s]=i[s]}),t.width=t.width,delete t[ry],!0}addEventListener(e,t,r){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),o={attach:i_e,detach:s_e,resize:l_e}[t]||c_e;i[t]=o(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),i=r[t];if(!i)return;({attach:b_,detach:b_,resize:b_}[t]||n_e)(e,t,i),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return l1e(e,t,r,i)}isAttached(e){const t=e&&LR(e);return!!(t&&t.isConnected)}}function h_e(n){return!AR()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?J1e:u_e}var Pv;let bi=(Pv=class{constructor(){ce(this,"x");ce(this,"y");ce(this,"active",!1);ce(this,"options");ce(this,"$animations")}tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return xd(this.x)&&xd(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},ce(Pv,"defaults",{}),ce(Pv,"defaultRoutes"),Pv);function d_e(n,e){const t=n.options.ticks,r=f_e(n),i=Math.min(t.maxTicksLimit||r,r),s=t.major.enabled?m_e(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return g_e(e,c,s,o/i),c;const u=p_e(s,e,i);if(o>0){let h,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(gv(e,c,u,En(f)?0:a-f,a),h=0,d=o-1;h<d;h++)gv(e,c,u,s[h],s[h+1]);return gv(e,c,u,l,En(f)?e.length:l+f),c}return gv(e,c,u),c}function f_e(n){const e=n.options.offset,t=n._tickSize(),r=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(r,i))}function p_e(n,e,t){const r=v_e(n),i=e.length/t;if(!r)return Math.max(i,1);const s=lwe(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function m_e(n){const e=[];let t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}function g_e(n,e,t,r){let i=0,s=t[0],o;for(r=Math.ceil(r),o=0;o<n.length;o++)o===s&&(e.push(n[o]),i++,s=t[i*r])}function gv(n,e,t,r,i){const s=bt(r,0),o=Math.min(bt(i,n.length),n.length);let a=0,l,c,u;for(t=Math.ceil(t),i&&(l=i-r,t=l/Math.floor(l/t)),u=s;u<0;)a++,u=Math.round(s+a*t);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(n[c]),a++,u=Math.round(s+a*t))}function v_e(n){const e=n.length;let t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}const y_e=n=>n==="left"?"right":n==="right"?"left":n,EL=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,TL=(n,e)=>Math.min(e||n,n);function ML(n,e){const t=[],r=n.length/e,i=n.length;let s=0;for(;s<i;s+=r)t.push(n[Math.floor(s)]);return t}function b_e(n,e,t){const r=n.ticks.length,i=Math.min(e,r-1),s=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(i),c;if(!(t&&(r===1?c=Math.max(l-s,o-l):e===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function x_e(n,e){qt(n,t=>{const r=t.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete t.data[r[s]];r.splice(0,i)}})}function $f(n){return n.drawTicks?n.tickLength:0}function IL(n,e){if(!n.display)return 0;const t=nr(n.font,e),r=Ar(n.padding);return(xn(n.text)?n.text.length:1)*t.lineHeight+r.height}function w_e(n,e){return du(n,{scale:e,type:"scale"})}function __e(n,e,t){return du(n,{tick:t,index:e,type:"tick"})}function S_e(n,e,t){let r=IR(n);return(t&&e!=="right"||!t&&e==="right")&&(r=y_e(r)),r}function k_e(n,e,t,r){const{top:i,left:s,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:u}=l;let h=0,d,f,m;const g=o-i,v=a-s;if(n.isHorizontal()){if(f=Rr(r,s,a),wt(t)){const y=Object.keys(t)[0],b=t[y];m=u[y].getPixelForValue(b)+g-e}else t==="center"?m=(c.bottom+c.top)/2+g-e:m=EL(n,t,e);d=a-s}else{if(wt(t)){const y=Object.keys(t)[0],b=t[y];f=u[y].getPixelForValue(b)-v+e}else t==="center"?f=(c.left+c.right)/2-v+e:f=EL(n,t,e);m=Rr(r,o,i),h=t==="left"?-Cr:Cr}return{titleX:f,titleY:m,maxWidth:d,rotation:h}}class Hd extends bi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=Zs(e,Number.POSITIVE_INFINITY),t=Zs(t,Number.NEGATIVE_INFINITY),r=Zs(r,Number.POSITIVE_INFINITY),i=Zs(i,Number.NEGATIVE_INFINITY),{min:Zs(e,r),max:Zs(t,i),minDefined:gi(e),maxDefined:gi(t)}}getMinMax(e){let{min:t,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:t,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(t=Math.min(t,o.min)),s||(r=Math.max(r,o.max));return t=s&&t>r?r:t,r=i&&t>r?t:r,{min:Zs(t,Zs(r,t)),max:Zs(r,Zs(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Vt(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Bwe(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?ML(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=d_e(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Vt(this.options.afterUpdate,[this])}beforeSetDimensions(){Vt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Vt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Vt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Vt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Vt(t.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Vt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Vt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=TL(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,s=t.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!t.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=fo(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/r:f/(r-1),h+6>a&&(a=f/(r-(e.offset?.5:1)),l=this.maxHeight-$f(e.grid)-t.padding-IL(e.title,this.chart.options.font),c=Math.sqrt(h*h+d*d),o=_X(Math.min(Math.asin(fo((u.highest.height+6)/a,-1,1)),Math.asin(fo(l/c,-1,1))-Math.asin(fo(d/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Vt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Vt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=IL(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=$f(s)+l):(e.height=this.maxHeight,e.width=$f(s)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:d}=this._getLabelSizes(),f=r.padding*2,m=dr(this.labelRotation),g=Math.cos(m),v=Math.sin(m);if(a){const y=r.mirror?0:v*h.width+g*d.height;e.height=Math.min(this.maxHeight,e.height+y+f)}else{const y=r.mirror?0:g*h.width+v*d.height;e.width=Math.min(this.maxWidth,e.width+y+f)}this._calculatePadding(c,u,v,g)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=i*e.width,f=r*t.height):(d=r*e.height,f=i*t.width):s==="start"?f=t.width:s==="end"?d=e.width:s!=="inner"&&(d=e.width/2,f=t.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=t.height/2,h=e.height/2;s==="start"?(u=0,h=e.height):s==="end"&&(u=t.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Vt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)En(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=ML(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(t/TL(t,r));let c=0,u=0,h,d,f,m,g,v,y,b,w,S,_;for(h=0;h<t;h+=l){if(m=e[h].label,g=this._resolveTickFontOptions(h),i.font=v=g.string,y=s[v]=s[v]||{data:{},gc:[]},b=g.lineHeight,w=S=0,!En(m)&&!xn(m))w=sL(i,y.data,y.gc,w,m),S=b;else if(xn(m))for(d=0,f=m.length;d<f;++d)_=m[d],!En(_)&&!xn(_)&&(w=sL(i,y.data,y.gc,w,_),S+=b);o.push(w),a.push(S),c=Math.max(w,c),u=Math.max(S,u)}x_e(s,t);const E=o.indexOf(c),C=a.indexOf(u),T=O=>({width:o[O]||0,height:a[O]||0});return{first:T(0),last:T(t-1),widest:T(E),highest:T(C),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return fwe(this._alignToPixels?Gl(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=__e(this.getContext(),e,r))}return this.$context||(this.$context=w_e(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=dr(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=$f(s),f=[],m=a.setContext(this.getContext()),g=m.display?m.width:0,v=g/2,y=function(L){return Gl(r,L,g)};let b,w,S,_,E,C,T,O,R,D,A,F;if(o==="top")b=y(this.bottom),C=this.bottom-d,O=b-v,D=y(e.top)+v,F=e.bottom;else if(o==="bottom")b=y(this.top),D=e.top,F=y(e.bottom)-v,C=b+v,O=this.top+d;else if(o==="left")b=y(this.right),E=this.right-d,T=b-v,R=y(e.left)+v,A=e.right;else if(o==="right")b=y(this.left),R=e.left,A=y(e.right)-v,E=b+v,T=this.left+d;else if(t==="x"){if(o==="center")b=y((e.top+e.bottom)/2+.5);else if(wt(o)){const L=Object.keys(o)[0],B=o[L];b=y(this.chart.scales[L].getPixelForValue(B))}D=e.top,F=e.bottom,C=b+v,O=C+d}else if(t==="y"){if(o==="center")b=y((e.left+e.right)/2);else if(wt(o)){const L=Object.keys(o)[0],B=o[L];b=y(this.chart.scales[L].getPixelForValue(B))}E=b-v,T=E-d,R=e.left,A=e.right}const z=bt(i.ticks.maxTicksLimit,h),j=Math.max(1,Math.ceil(h/z));for(w=0;w<h;w+=j){const L=this.getContext(w),B=s.setContext(L),$=a.setContext(L),U=B.lineWidth,H=B.color,K=$.dash||[],J=$.dashOffset,Z=B.tickWidth,q=B.tickColor,X=B.tickBorderDash||[],G=B.tickBorderDashOffset;S=b_e(this,w,l),S!==void 0&&(_=Gl(r,S,U),c?E=T=R=A=_:C=O=D=F=_,f.push({tx1:E,ty1:C,tx2:T,ty2:O,x1:R,y1:D,x2:A,y2:F,width:U,color:H,borderDash:K,borderDashOffset:J,tickWidth:Z,tickColor:q,tickBorderDash:X,tickBorderDashOffset:G}))}return this._ticksLength=h,this._borderValue=b,f}_computeLabelItems(e){const t=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=s,d=$f(r.grid),f=d+u,m=h?-u:f,g=-dr(this.labelRotation),v=[];let y,b,w,S,_,E,C,T,O,R,D,A,F="middle";if(i==="top")E=this.bottom-m,C=this._getXAxisLabelAlignment();else if(i==="bottom")E=this.top+m,C=this._getXAxisLabelAlignment();else if(i==="left"){const j=this._getYAxisLabelAlignment(d);C=j.textAlign,_=j.x}else if(i==="right"){const j=this._getYAxisLabelAlignment(d);C=j.textAlign,_=j.x}else if(t==="x"){if(i==="center")E=(e.top+e.bottom)/2+f;else if(wt(i)){const j=Object.keys(i)[0],L=i[j];E=this.chart.scales[j].getPixelForValue(L)+f}C=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")_=(e.left+e.right)/2-f;else if(wt(i)){const j=Object.keys(i)[0],L=i[j];_=this.chart.scales[j].getPixelForValue(L)}C=this._getYAxisLabelAlignment(d).textAlign}t==="y"&&(l==="start"?F="top":l==="end"&&(F="bottom"));const z=this._getLabelSizes();for(y=0,b=a.length;y<b;++y){w=a[y],S=w.label;const j=s.setContext(this.getContext(y));T=this.getPixelForTick(y)+s.labelOffset,O=this._resolveTickFontOptions(y),R=O.lineHeight,D=xn(S)?S.length:1;const L=D/2,B=j.color,$=j.textStrokeColor,U=j.textStrokeWidth;let H=C;o?(_=T,C==="inner"&&(y===b-1?H=this.options.reverse?"left":"right":y===0?H=this.options.reverse?"right":"left":H="center"),i==="top"?c==="near"||g!==0?A=-D*R+R/2:c==="center"?A=-z.highest.height/2-L*R+R:A=-z.highest.height+R/2:c==="near"||g!==0?A=R/2:c==="center"?A=z.highest.height/2-L*R:A=z.highest.height-D*R,h&&(A*=-1),g!==0&&!j.showLabelBackdrop&&(_+=R/2*Math.sin(g))):(E=T,A=(1-D)*R/2);let K;if(j.showLabelBackdrop){const J=Ar(j.backdropPadding),Z=z.heights[y],q=z.widths[y];let X=A-J.top,G=0-J.left;switch(F){case"middle":X-=Z/2;break;case"bottom":X-=Z;break}switch(C){case"center":G-=q/2;break;case"right":G-=q;break;case"inner":y===b-1?G-=q:y>0&&(G-=q/2);break}K={left:G,top:X,width:q+J.width,height:Z+J.height,color:j.backdropColor}}v.push({label:S,font:O,textOffset:A,options:{rotation:g,color:B,strokeColor:$,strokeWidth:U,textAlign:H,textBaseline:F,translation:[_,E],backdrop:K}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-dr(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return t==="left"?i?(u=this.right+s,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):t==="right"?i?(u=this.left+s,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:i,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(t.display)for(s=0,o=i.length;s<o;++s){const l=i[s];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,d;this.isHorizontal()?(c=Gl(e,this.left,o)-o/2,u=Gl(e,this.right,a)+a/2,h=d=l):(h=Gl(e,this.top,o)-o/2,d=Gl(e,this.bottom,a)+a/2,c=u=l),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(c,h),t.lineTo(u,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Ix(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Bm(r,c,0,u,l,a)}i&&Px(r)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;const s=nr(r.font),o=Ar(r.padding),a=r.align;let l=s.lineHeight/2;t==="bottom"||t==="center"||wt(t)?(l+=o.bottom,xn(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:d}=k_e(this,l,t,a);Bm(e,r.text,0,0,s,{color:r.color,maxWidth:h,rotation:d,textAlign:S_e(a,t,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=bt(e.grid&&e.grid.z,-1),i=bt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Hd.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=t.length;s<o;++s){const a=t[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return nr(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class vv{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;T_e(t)&&(r=this.register(t));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,C_e(e,o,r),this.override&&Nn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in Nn[i]&&(delete Nn[i][r],this.override&&delete Jc[r])}}function C_e(n,e,t){const r=Fm(Object.create(null),[t?Nn.get(t):{},Nn.get(e),n.defaults]);Nn.set(e,r),n.defaultRoutes&&E_e(e,n.defaultRoutes),n.descriptors&&Nn.describe(e,n.descriptors)}function E_e(n,e){Object.keys(e).forEach(t=>{const r=t.split("."),i=r.pop(),s=[n].concat(r).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");Nn.route(s,i,l,a)})}function T_e(n){return"id"in n&&"defaults"in n}class M_e{constructor(){this.controllers=new vv(Ap,"datasets",!0),this.elements=new vv(bi,"elements"),this.plugins=new vv(Object,"plugins"),this.scales=new vv(Hd,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):qt(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,r){const i=ER(e);Vt(r["before"+i],[],r),t[e](r),Vt(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var ro=new M_e;class I_e{constructor(){this._init=void 0}notify(e,t,r,i){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,t,r);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,t,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[t,i,s.options];if(Vt(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){En(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,i=bt(r.options&&r.options.plugins,{}),s=P_e(r);return i===!1&&!t?[]:R_e(e,s,i,t)}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}}function P_e(n){const e={},t=[],r=Object.keys(ro.plugins.items);for(let s=0;s<r.length;s++)t.push(ro.getPlugin(r[s]));const i=n.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function O_e(n,e){return!e&&n===!1?null:n===!0?{}:n}function R_e(n,{plugins:e,localIds:t},r,i){const s=[],o=n.getContext();for(const a of e){const l=a.id,c=O_e(r[l],i);c!==null&&s.push({plugin:a,options:D_e(n.config,{plugin:a,local:t[l]},c,o)})}return s}function D_e(n,{plugin:e,local:t},r,i){const s=n.pluginScopeKeys(e),o=n.getOptionScopes(r,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function BI(n,e){const t=Nn.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function N_e(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function A_e(n,e){return n===e?"_index_":"_value_"}function PL(n){if(n==="x"||n==="y"||n==="r")return n}function L_e(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function zI(n,...e){if(PL(n))return n;for(const t of e){const r=t.axis||L_e(t.position)||n.length>1&&PL(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function OL(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function F_e(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return OL(n,"x",t[0])||OL(n,"y",t[0])}return{}}function j_e(n,e){const t=Jc[n.type]||{scales:{}},r=e.scales||{},i=BI(n.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!wt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=zI(o,a,F_e(o,n),Nn.scales[a.type]),c=A_e(l,i),u=t.scales||{};s[o]=Op(Object.create(null),[{axis:l},a,u[l],u[c]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||BI(a,e),u=(Jc[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=N_e(h,l),f=o[d+"AxisID"]||d;s[f]=s[f]||Object.create(null),Op(s[f],[{axis:d},r[f],u[h]])})}),Object.keys(s).forEach(o=>{const a=s[o];Op(a,[Nn.scales[a.type],Nn.scale])}),s}function UX(n){const e=n.options||(n.options={});e.plugins=bt(e.plugins,{}),e.scales=j_e(n,e)}function WX(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function $_e(n){return n=n||{},n.data=WX(n.data),UX(n),n}const RL=new Map,HX=new Set;function yv(n,e){let t=RL.get(n);return t||(t=e(),RL.set(n,t),HX.add(t)),t}const Bf=(n,e,t)=>{const r=jm(e,t);r!==void 0&&n.add(r)};class B_e{constructor(e){this._config=$_e(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=WX(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),UX(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return yv(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return yv(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return yv(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,r=this.type;return yv(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(t);if(a)return a;const l=new Set;t.forEach(u=>{e&&(l.add(e),u.forEach(h=>Bf(l,e,h))),u.forEach(h=>Bf(l,i,h)),u.forEach(h=>Bf(l,Jc[s]||{},h)),u.forEach(h=>Bf(l,Nn,h)),u.forEach(h=>Bf(l,jI,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),HX.has(t)&&o.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,Jc[t]||{},Nn.datasets[t]||{},{type:t},Nn,jI]}resolveNamedOptions(e,t,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=DL(this._resolverCache,e,i);let l=o;if(q_e(o,t)){s.$shared=!1,r=di(r)?r():r;const c=this.createResolver(e,r,a);l=_d(o,r,c)}for(const c of t)s[c]=l[c];return s}createResolver(e,t,r=[""],i){const{resolver:s}=DL(this._resolverCache,e,r);return wt(t)?_d(s,t,void 0,i):s}}function DL(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));const i=t.join();let s=r.get(i);return s||(s={resolver:RR(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const z_e=n=>wt(n)&&Object.getOwnPropertyNames(n).some(e=>di(n[e]));function q_e(n,e){const{isScriptable:t,isIndexable:r}=IX(n);for(const i of e){const s=t(i),o=r(i),a=(o||s)&&n[i];if(s&&(di(a)||z_e(a))||o&&xn(a))return!0}return!1}var U_e="4.5.1";const W_e=["top","bottom","left","right","chartArea"];function NL(n,e){return n==="top"||n==="bottom"||W_e.indexOf(n)===-1&&e==="x"}function AL(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function LL(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Vt(t&&t.onComplete,[n],e)}function H_e(n){const e=n.chart,t=e.options.animation;Vt(t&&t.onProgress,[n],e)}function YX(n){return AR()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const iy={},FL=n=>{const e=YX(n);return Object.values(iy).filter(t=>t.canvas===e).pop()};function Y_e(n,e,t){const r=Object.keys(n);for(const i of r){const s=+i;if(s>=e){const o=n[i];delete n[i],(t>0||s>e)&&(n[s+t]=o)}}}function G_e(n,e,t,r){return!t||n.type==="mouseout"?null:r?e:n}class Ps{static register(...e){ro.add(...e),jL()}static unregister(...e){ro.remove(...e),jL()}constructor(e,t){const r=this.config=new B_e(t),i=YX(e),s=FL(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||h_e(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=ewe(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new I_e,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ywe(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],iy[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}zo.listen(this,"complete",LL),zo.listen(this,"progress",H_e),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:i,_aspectRatio:s}=this;return En(e)?t&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ro}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():cL(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return oL(this.canvas,this.ctx),this}stop(){return zo.stop(this),this}resize(e,t){zo.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,t,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,cL(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Vt(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};qt(t,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];t&&(s=s.concat(Object.keys(t).map(o=>{const a=t[o],l=zI(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),qt(s,o=>{const a=o.options,l=a.id,c=zI(l,a),u=bt(a.type,o.dtype);(a.position===void 0||NL(a.position,c)!==NL(o.dposition))&&(a.position=o.dposition),i[l]=!0;let h=null;if(l in r&&r[l].type===u)h=r[l];else{const d=ro.getScale(u);h=new d({id:l,type:u,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(a,e)}),qt(i,(o,a)=>{o||delete r[a]}),qt(r,o=>{os.configure(this,o,o.options),os.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>t){for(let i=t;i<r;++i)this._destroyDatasetMeta(i);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(AL("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((r,i)=>{t.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=t.length;r<i;r++){const s=t[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||BI(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=ro.getController(a),{datasetElementType:c,dataElementType:u}=Nn.datasets[a];Object.assign(l,{dataElementType:ro.getElement(u),datasetElementType:c&&ro.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){qt(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),d=!i&&s.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||qt(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(AL("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){qt(this.scales,e=>{os.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Q4(t,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of t){const o=r==="_removeElements"?-s:s;Y_e(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<t;s++)if(!Q4(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;os.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],qt(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,r=this.data.datasets.length;t<r;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,di(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(zo.has(this)?this.attached&&!zo.running(this)&&zo.start(this):(this.draw(),LL({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let i,s;for(i=0,s=t.length;i<s;++i){const o=t[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=S1e(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&Ix(t,i),e.controller.draw(),i&&Px(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return $m(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,i){const s=W1e.modes[t];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=du(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!t.hidden}setDatasetVisibility(e,t){const r=this.getDatasetMeta(e);r.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Fi(t)?(s.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),zo.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),oL(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete iy[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(s,o)=>{t.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};qt(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(l,c)=>{t.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(t.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){qt(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},qt(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const i=r?"set":"remove";let s,o,a,l;for(t==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!ob(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,r){const i=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=s(t,e),a=r?e:s(e,t);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:i=[],options:s}=this,o=t,a=this._getActiveElements(e,i,r,o),l=owe(e),c=G_e(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Vt(s.onHover,[e,a,this],this),l&&Vt(s.onClick,[e,a,this],this));const u=!ob(a,i);return(u||t)&&(this._active=a,this._updateHoverStyles(a,i,t)),this._lastEvent=c,u}_getActiveElements(e,t,r,i){if(e.type==="mouseout")return[];if(!r)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}ce(Ps,"defaults",Nn),ce(Ps,"instances",iy),ce(Ps,"overrides",Jc),ce(Ps,"registry",ro),ce(Ps,"version",U_e),ce(Ps,"getChart",FL);function jL(){return qt(Ps.instances,n=>n._plugins.invalidate())}function GX(n,e,t=e){n.lineCap=bt(t.borderCapStyle,e.borderCapStyle),n.setLineDash(bt(t.borderDash,e.borderDash)),n.lineDashOffset=bt(t.borderDashOffset,e.borderDashOffset),n.lineJoin=bt(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=bt(t.borderWidth,e.borderWidth),n.strokeStyle=bt(t.borderColor,e.borderColor)}function V_e(n,e,t){n.lineTo(t.x,t.y)}function K_e(n){return n.stepped?Pwe:n.tension||n.cubicInterpolationMode==="monotone"?Owe:V_e}function VX(n,e,t={}){const r=n.length,{start:i=0,end:s=r-1}=t,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function X_e(n,e,t,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=VX(i,t,r),u=K_e(s);let{move:h=!0,reverse:d}=r||{},f,m,g;for(f=0;f<=c;++f)m=i[(a+(d?c-f:f))%o],!m.skip&&(h?(n.moveTo(m.x,m.y),h=!1):u(n,g,m,d,s.stepped),g=m);return l&&(m=i[(a+(d?c:0))%o],u(n,g,m,d,s.stepped)),!!l}function Q_e(n,e,t,r){const i=e.points,{count:s,start:o,ilen:a}=VX(i,t,r),{move:l=!0,reverse:c}=r||{};let u=0,h=0,d,f,m,g,v,y;const b=S=>(o+(c?a-S:S))%s,w=()=>{g!==v&&(n.lineTo(u,v),n.lineTo(u,g),n.lineTo(u,y))};for(l&&(f=i[b(0)],n.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=i[b(d)],f.skip)continue;const S=f.x,_=f.y,E=S|0;E===m?(_<g?g=_:_>v&&(v=_),u=(h*u+S)/++h):(w(),n.lineTo(S,_),m=E,h=0,g=v=_),y=_}w()}function qI(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?Q_e:X_e}function J_e(n){return n.stepped?u1e:n.tension||n.cubicInterpolationMode==="monotone"?h1e:tc}function Z_e(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),GX(n,e.options),n.stroke(i)}function eSe(n,e,t,r){const{segments:i,options:s}=e,o=qI(e);for(const a of i)GX(n,s,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}const tSe=typeof Path2D=="function";function nSe(n,e,t,r){tSe&&!e.options.segment?Z_e(n,e,t,r):eSe(n,e,t,r)}class cp extends bi{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;n1e(this._points,r,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=b1e(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,r=e.length;return r&&t[e[r-1].end]}interpolate(e,t){const r=this.options,i=e[t],s=this.points,o=g1e(this,{property:t,start:i,end:i});if(!o.length)return;const a=[],l=J_e(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:d}=o[c],f=s[h],m=s[d];if(f===m){a.push(f);continue}const g=Math.abs((i-f[t])/(m[t]-f[t])),v=l(f,m,g,r.stepped);v[t]=e[t],a.push(v)}return a.length===1?a[0]:a}pathSegment(e,t,r){return qI(this)(e,this,t,r)}path(e,t,r){const i=this.segments,s=qI(this);let o=this._loop;t=t||0,r=r||this.points.length-t;for(const a of i)o&=s(e,this,a,{start:t,end:t+r-1});return!!o}draw(e,t,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),nSe(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ce(cp,"id","line"),ce(cp,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ce(cp,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ce(cp,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function $L(n,e,t,r){const i=n.options,{[t]:s}=n.getProps([t],r);return Math.abs(e-s)<i.radius+i.hitRadius}class sy extends bi{constructor(t){super();ce(this,"parsed");ce(this,"skip");ce(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,r){return $L(this,t,"x",r)}inYRange(t,r){return $L(this,t,"y",r)}getCenterPoint(t){const{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}size(t){t=t||this.options||{};let r=t.radius||0;r=Math.max(r,r&&t.hoverRadius||0);const i=r&&t.borderWidth||0;return(r+i)*2}draw(t,r){const i=this.options;this.skip||i.radius<.1||!$m(this,r,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,$I(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}ce(sy,"id","point"),ce(sy,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ce(sy,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const BL=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},rSe=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;let zL=class extends bi{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Vt(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=nr(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=BL(r,s);let c,u;t.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let h=e;s.textAlign="left",s.textBaseline="middle";let d=-1,f=-u;return this.legendItems.forEach((m,g)=>{const v=r+t/2+s.measureText(m.text).width;(g===0||c[c.length-1]+v+2*a>o)&&(h+=u,c[c.length-(g>0?0:1)]=0,f+=u,d++),l[g]={left:0,top:f,row:d,width:v,height:i},c[c.length-1]+=v+a}),h}_fitCols(e,t,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,d=0,f=0,m=0,g=0;return this.legendItems.forEach((v,y)=>{const{itemWidth:b,itemHeight:w}=iSe(r,t,s,v,i);y>0&&f+w+2*a>u&&(h+=d+a,c.push({width:d,height:f}),m+=d+a,g++,d=f=0),l[y]={left:m,top:f,col:g,width:b,height:w},d=Math.max(d,b),f+=w+a}),h+=d,c.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:s}}=this,o=wh(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Rr(r,this.left+i,this.right-this.lineWidths[a]);for(const c of t)a!==c.row&&(a=c.row,l=Rr(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Rr(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of t)c.col!==a&&(a=c.col,l=Rr(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Ix(e,this),this._draw(),Px(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Nn.color,l=wh(e.rtl,this.left,this.width),c=nr(o.font),{padding:u}=o,h=c.size,d=h/2;let f;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:m,boxHeight:g,itemHeight:v}=BL(o,h),y=function(E,C,T){if(isNaN(m)||m<=0||isNaN(g)||g<0)return;i.save();const O=bt(T.lineWidth,1);if(i.fillStyle=bt(T.fillStyle,a),i.lineCap=bt(T.lineCap,"butt"),i.lineDashOffset=bt(T.lineDashOffset,0),i.lineJoin=bt(T.lineJoin,"miter"),i.lineWidth=O,i.strokeStyle=bt(T.strokeStyle,a),i.setLineDash(bt(T.lineDash,[])),o.usePointStyle){const R={radius:g*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:O},D=l.xPlus(E,m/2),A=C+d;TX(i,R,D,A,o.pointStyleWidth&&m)}else{const R=C+Math.max((h-g)/2,0),D=l.leftForLtr(E,m),A=xh(T.borderRadius);i.beginPath(),Object.values(A).some(F=>F!==0)?hb(i,{x:D,y:R,w:m,h:g,radius:A}):i.rect(D,R,m,g),i.fill(),O!==0&&i.stroke()}i.restore()},b=function(E,C,T){Bm(i,T.text,E,C+v/2,c,{strikethrough:T.hidden,textAlign:l.textAlign(T.textAlign)})},w=this.isHorizontal(),S=this._computeTitleHeight();w?f={x:Rr(s,this.left+u,this.right-r[0]),y:this.top+u+S,line:0}:f={x:this.left+u,y:Rr(s,this.top+S+u,this.bottom-t[0].height),line:0},NX(this.ctx,e.textDirection);const _=v+u;this.legendItems.forEach((E,C)=>{i.strokeStyle=E.fontColor,i.fillStyle=E.fontColor;const T=i.measureText(E.text).width,O=l.textAlign(E.textAlign||(E.textAlign=o.textAlign)),R=m+d+T;let D=f.x,A=f.y;l.setWidth(this.width),w?C>0&&D+R+u>this.right&&(A=f.y+=_,f.line++,D=f.x=Rr(s,this.left+u,this.right-r[f.line])):C>0&&A+_>this.bottom&&(D=f.x=D+t[f.line].width+u,f.line++,A=f.y=Rr(s,this.top+S+u,this.bottom-t[f.line].height));const F=l.x(D);if(y(F,A,E),D=bwe(O,D+m+d,w?D+R:this.right,e.rtl),b(l.x(D),A,E),w)f.x+=R+u;else if(typeof E.text!="string"){const z=c.lineHeight;f.y+=KX(E,z)+u}else f.y+=_}),AX(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=nr(t.font),i=Ar(t.padding);if(!t.display)return;const s=wh(e.rtl,this.left,this.width),o=this.ctx,a=t.position,l=r.size/2,c=i.top+l;let u,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,h=Rr(e.align,h,this.right-d);else{const m=this.columnSizes.reduce((g,v)=>Math.max(g,v.height),0);u=c+Rr(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const f=Rr(a,h,h+d);o.textAlign=s.textAlign(IR(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=r.string,Bm(o,t.text,f,u,r)}_computeTitleHeight(){const e=this.options.title,t=nr(e.font),r=Ar(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,s;if(op(e,this.left,this.right)&&op(t,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],op(e,i.left,i.left+i.width)&&op(t,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const t=this.options;if(!aSe(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=rSe(i,r);i&&!s&&Vt(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Vt(t.onHover,[e,r,this],this)}else r&&Vt(t.onClick,[e,r,this],this)}};function iSe(n,e,t,r,i){const s=sSe(r,n,e,t),o=oSe(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function sSe(n,e,t,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+r.measureText(i).width}function oSe(n,e,t){let r=n;return typeof e.text!="string"&&(r=KX(e,t)),r}function KX(n,e){const t=n.text?n.text.length:0;return e*t}function aSe(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var lSe={id:"legend",_element:zL,start(n,e,t){const r=n.legend=new zL({ctx:n.ctx,options:t,chart:n});os.configure(n,r,t),os.addBox(n,r)},stop(n){os.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const r=n.legend;os.configure(n,r,t),r.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(t?0:void 0),u=Ar(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class XX extends bi{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const i=xn(r.text)?r.text.length:1;this._padding=Ar(r.padding);const s=i*nr(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=Rr(a,r,s),h=t+e,c=s-r):(o.position==="left"?(u=r+e,h=Rr(a,i,t),l=jt*-.5):(u=s-e,h=Rr(a,t,i),l=jt*.5),c=i-t),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=nr(t.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Bm(e,t.text,0,0,r,{color:t.color,maxWidth:l,rotation:c,textAlign:IR(t.align),textBaseline:"middle",translation:[o,a]})}}function cSe(n,e){const t=new XX({ctx:n.ctx,options:e,chart:n});os.configure(n,t,e),os.addBox(n,t),n.titleBlock=t}var uSe={id:"title",_element:XX,start(n,e,t){cSe(n,t)},stop(n){const e=n.titleBlock;os.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const r=n.titleBlock;os.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const up={average(n){if(!n.length)return!1;let e,t,r=new Set,i=0,s=0;for(e=0,t=n.length;e<t;++e){const a=n[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){const l=n[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=wd(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();t=l.x,r=l.y}return{x:t,y:r}}};function to(n,e){return e&&(xn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function qo(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function hSe(n,e){const{element:t,datasetIndex:r,index:i}=e,s=n.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:n,label:o,parsed:s.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function qL(n,e){const t=n.chart.ctx,{body:r,footer:i,title:s}=n,{boxWidth:o,boxHeight:a}=e,l=nr(e.bodyFont),c=nr(e.titleFont),u=nr(e.footerFont),h=s.length,d=i.length,f=r.length,m=Ar(e.padding);let g=m.height,v=0,y=r.reduce((S,_)=>S+_.before.length+_.lines.length+_.after.length,0);if(y+=n.beforeBody.length+n.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){const S=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=f*S+(y-f)*l.lineHeight+(y-1)*e.bodySpacing}d&&(g+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let b=0;const w=function(S){v=Math.max(v,t.measureText(S).width+b)};return t.save(),t.font=c.string,qt(n.title,w),t.font=l.string,qt(n.beforeBody.concat(n.afterBody),w),b=e.displayColors?o+2+e.boxPadding:0,qt(r,S=>{qt(S.before,w),qt(S.lines,w),qt(S.after,w)}),b=0,t.font=u.string,qt(n.footer,w),t.restore(),v+=m.width,{width:v,height:g}}function dSe(n,e){const{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}function fSe(n,e,t,r){const{x:i,width:s}=r,o=t.caretSize+t.caretPadding;if(n==="left"&&i+s+o>e.width||n==="right"&&i-s-o<0)return!0}function pSe(n,e,t,r){const{x:i,width:s}=t,{width:o,chartArea:{left:a,right:l}}=n;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),fSe(c,n,e,t)&&(c="center"),c}function UL(n,e,t){const r=t.yAlign||e.yAlign||dSe(n,t);return{xAlign:t.xAlign||e.xAlign||pSe(n,e,t,r),yAlign:r}}function mSe(n,e){let{x:t,width:r}=n;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function gSe(n,e,t){let{y:r,height:i}=n;return e==="top"?r+=t:e==="bottom"?r-=i+t:r-=i/2,r}function WL(n,e,t,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:l}=t,c=i+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=xh(o);let m=mSe(e,a);const g=gSe(e,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(u,d)+i:a==="right"&&(m+=Math.max(h,f)+i),{x:fo(m,0,r.width-e.width),y:fo(g,0,r.height-e.height)}}function bv(n,e,t){const r=Ar(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-r.right:n.x+r.left}function HL(n){return to([],qo(n))}function vSe(n,e,t){return du(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function YL(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const QX={beforeTitle:$o,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:$o,beforeBody:$o,beforeLabel:$o,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return En(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:$o,afterBody:$o,beforeFooter:$o,footer:$o,afterFooter:$o};function Zr(n,e,t,r){const i=n[e].call(t,r);return typeof i>"u"?QX[e].call(t,r):i}class UI extends bi{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&t.options.animation&&r.animations,s=new FR(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=vSe(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:r}=t,i=Zr(r,"beforeTitle",this,e),s=Zr(r,"title",this,e),o=Zr(r,"afterTitle",this,e);let a=[];return a=to(a,qo(i)),a=to(a,qo(s)),a=to(a,qo(o)),a}getBeforeBody(e,t){return HL(Zr(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,i=[];return qt(e,s=>{const o={before:[],lines:[],after:[]},a=YL(r,s);to(o.before,qo(Zr(a,"beforeLabel",this,s))),to(o.lines,Zr(a,"label",this,s)),to(o.after,qo(Zr(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,t){return HL(Zr(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,i=Zr(r,"beforeFooter",this,e),s=Zr(r,"footer",this,e),o=Zr(r,"afterFooter",this,e);let a=[];return a=to(a,qo(i)),a=to(a,qo(s)),a=to(a,qo(o)),a}_createItems(e){const t=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=t.length;l<c;++l)a.push(hSe(this.chart,t[l]));return e.filter&&(a=a.filter((u,h,d)=>e.filter(u,h,d,r))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,r))),qt(a,u=>{const h=YL(e.callbacks,u);i.push(Zr(h,"labelColor",this,u)),s.push(Zr(h,"labelPointStyle",this,u)),o.push(Zr(h,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,t){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=up[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=qL(this,r),c=Object.assign({},a,l),u=UL(this.chart,r,c),h=WL(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,i){const s=this.getCaretPosition(e,r,i);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=xh(a),{x:d,y:f}=e,{width:m,height:g}=t;let v,y,b,w,S,_;return s==="center"?(S=f+g/2,i==="left"?(v=d,y=v-o,w=S+o,_=S-o):(v=d+m,y=v+o,w=S-o,_=S+o),b=v):(i==="left"?y=d+Math.max(l,u)+o:i==="right"?y=d+m-Math.max(c,h)-o:y=this.caretX,s==="top"?(w=f,S=w-o,v=y-o,b=y+o):(w=f+g,S=w+o,v=y+o,b=y-o),_=w),{x1:v,x2:y,x3:b,y1:w,y2:S,y3:_}}drawTitle(e,t,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=wh(r.rtl,this.x,this.width);for(e.x=bv(this,r.titleAlign,r),t.textAlign=c.textAlign(r.titleAlign),t.textBaseline="middle",o=nr(r.titleFont),a=r.titleSpacing,t.fillStyle=r.titleColor,t.font=o.string,l=0;l<s;++l)t.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,t,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,u=nr(s.bodyFont),h=bv(this,"left",s),d=i.x(h),f=l<u.lineHeight?(u.lineHeight-l)/2:0,m=t.y+f;if(s.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},v=i.leftForLtr(d,c)+c/2,y=m+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,$I(e,g,v,y),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,$I(e,g,v,y)}else{e.lineWidth=wt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const g=i.leftForLtr(d,c),v=i.leftForLtr(i.xPlus(d,1),c-2),y=xh(o.borderRadius);Object.values(y).some(b=>b!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,hb(e,{x:g,y:m,w:c,h:l,radius:y}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),hb(e,{x:v,y:m+1,w:c-2,h:l-2,radius:y}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(g,m,c,l),e.strokeRect(g,m,c,l),e.fillStyle=o.backgroundColor,e.fillRect(v,m+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,h=nr(r.bodyFont);let d=h.lineHeight,f=0;const m=wh(r.rtl,this.x,this.width),g=function(T){t.fillText(T,m.x(e.x+f),e.y+d/2),e.y+=d+s},v=m.textAlign(o);let y,b,w,S,_,E,C;for(t.textAlign=o,t.textBaseline="middle",t.font=h.string,e.x=bv(this,v,r),t.fillStyle=r.bodyColor,qt(this.beforeBody,g),f=a&&v!=="right"?o==="center"?c/2+u:c+2+u:0,S=0,E=i.length;S<E;++S){for(y=i[S],b=this.labelTextColors[S],t.fillStyle=b,qt(y.before,g),w=y.lines,a&&w.length&&(this._drawColorBox(t,e,S,m,r),d=Math.max(h.lineHeight,l)),_=0,C=w.length;_<C;++_)g(w[_]),d=h.lineHeight;qt(y.after,g)}f=0,d=h.lineHeight,qt(this.afterBody,g),e.y-=s}drawFooter(e,t,r){const i=this.footer,s=i.length;let o,a;if(s){const l=wh(r.rtl,this.x,this.width);for(e.x=bv(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=l.textAlign(r.footerAlign),t.textBaseline="middle",o=nr(r.footerFont),t.fillStyle=r.footerColor,t.font=o.string,a=0;a<s;++a)t.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,t,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:m}=xh(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(a+h,l),o==="top"&&this.drawCaret(e,t,r,i),t.lineTo(a+c-d,l),t.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&s==="right"&&this.drawCaret(e,t,r,i),t.lineTo(a+c,l+u-m),t.quadraticCurveTo(a+c,l+u,a+c-m,l+u),o==="bottom"&&this.drawCaret(e,t,r,i),t.lineTo(a+f,l+u),t.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&s==="left"&&this.drawCaret(e,t,r,i),t.lineTo(a,l+h),t.quadraticCurveTo(a,l,a+h,l),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=up[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=qL(this,e),l=Object.assign({},o,this._size),c=UL(t,e,l),u=WL(e,l,c,t);(i._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Ar(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,t),NX(e,t.textDirection),s.y+=o.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),AX(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!ob(r,i),o=this._positionChanged(i,t);(s||o)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,r=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,t,r),a=this._positionChanged(o,e),l=t||!ob(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return t.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:r,caretY:i,options:s}=this,o=up[s.position].call(this,e,t);return o!==!1&&(r!==o.x||i!==o.y)}}ce(UI,"positioners",up);var ySe={id:"tooltip",_element:UI,positioners:up,afterInit(n,e,t){t&&(n.tooltip=new UI({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:QX},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const bSe=(n,e,t,r)=>(typeof e=="string"?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function xSe(n,e,t,r){const i=n.indexOf(e);if(i===-1)return bSe(n,e,t,r);const s=n.lastIndexOf(e);return i!==s?t:i}const wSe=(n,e)=>n===null?null:fo(Math.round(n),0,e);function GL(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class WI extends Hd{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const r=this.getLabels();for(const{index:i,label:s}of t)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(En(e))return null;const r=this.getLabels();return t=isFinite(t)&&r[t]===e?t:xSe(r,e,bt(t,e),this._addedLabels),wSe(t,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),t||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=t;o++)i.push({value:o});return i}getLabelForValue(e){return GL.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ce(WI,"id","category"),ce(WI,"defaults",{ticks:{callback:GL}});function _Se(n,e){const t=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=n,f=s||1,m=u-1,{min:g,max:v}=e,y=!En(o),b=!En(a),w=!En(c),S=(v-g)/(h+1);let _=J4((v-g)/m/f)*f,E,C,T,O;if(_<1e-14&&!y&&!b)return[{value:g},{value:v}];O=Math.ceil(v/_)-Math.floor(g/_),O>m&&(_=J4(O*_/m/f)*f),En(l)||(E=Math.pow(10,l),_=Math.ceil(_*E)/E),i==="ticks"?(C=Math.floor(g/_)*_,T=Math.ceil(v/_)*_):(C=g,T=v),y&&b&&s&&uwe((a-o)/s,_/1e3)?(O=Math.round(Math.min((a-o)/_,u)),_=(a-o)/O,C=o,T=a):w?(C=y?o:C,T=b?a:T,O=c-1,_=(T-C)/O):(O=(T-C)/_,Rp(O,Math.round(O),_/1e3)?O=Math.round(O):O=Math.ceil(O));const R=Math.max(Z4(_),Z4(C));E=Math.pow(10,En(l)?R:l),C=Math.round(C*E)/E,T=Math.round(T*E)/E;let D=0;for(y&&(d&&C!==o?(t.push({value:o}),C<o&&D++,Rp(Math.round((C+D*_)*E)/E,o,VL(o,S,n))&&D++):C<o&&D++);D<O;++D){const A=Math.round((C+D*_)*E)/E;if(b&&A>a)break;t.push({value:A})}return b&&d&&T!==a?t.length&&Rp(t[t.length-1].value,a,VL(a,S,n))?t[t.length-1].value=a:t.push({value:a}):(!b||T===a)&&t.push({value:T}),t}function VL(n,e,{horizontal:t,minRotation:r}){const i=dr(r),s=(t?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}class SSe extends Hd{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return En(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=t?i:l,a=l=>s=r?s:l;if(e){const l=bd(i),c=bd(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=_Se(i,s);return e.bounds==="ticks"&&hwe(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return OR(e,this.chart.options.locale,this.options.ticks.format)}}class HI extends SSe{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=gi(e)?e:0,this.max=gi(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=dr(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ce(HI,"id","linear"),ce(HI,"defaults",{ticks:{callback:EX.formatters.numeric}});const Dx={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},si=Object.keys(Dx);function KL(n,e){return n-e}function XL(n,e){if(En(e))return null;const t=n._adapter,{parser:r,round:i,isoWeekday:s}=n._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),gi(o)||(o=typeof r=="string"?t.parse(o,r):t.parse(o)),o===null?null:(i&&(o=i==="week"&&(xd(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,i)),+o)}function QL(n,e,t,r){const i=si.length;for(let s=si.indexOf(n);s<i-1;++s){const o=Dx[si[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=r)return si[s]}return si[i-1]}function kSe(n,e,t,r,i){for(let s=si.length-1;s>=si.indexOf(t);s--){const o=si[s];if(Dx[o].common&&n._adapter.diff(i,r,o)>=e-1)return o}return si[t?si.indexOf(t):0]}function CSe(n){for(let e=si.indexOf(n)+1,t=si.length;e<t;++e)if(Dx[si[e]].common)return si[e]}function JL(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:r,hi:i}=MR(t,e),s=t[r]>=e?t[r]:t[i];n[s]=!0}}function ESe(n,e,t,r){const i=n._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=t[a],l>=0&&(e[l].major=!0);return e}function ZL(n,e,t){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!t?r:ESe(n,r,i,t)}class pb extends Hd{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const r=e.time||(e.time={}),i=this._adapter=new $1e._date(e.adapters.date);i.init(t),Op(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:XL(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=gi(i)&&!isNaN(i)?i:+t.startOf(Date.now(),r),s=gi(s)&&!isNaN(s)?s:+t.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=mwe(i,s,o);return this._unit=t.unit||(r.autoSkip?QL(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):kSe(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:CSe(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),ZL(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?t=1-i:t=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=fo(t,0,o),r=fo(r,0,o),this._offsets={start:t,end:r,factor:1/(t+1+r)}}_generate(){const e=this._adapter,t=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||QL(s.minUnit,t,r,this._getLabelCapacity(t)),a=bt(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=xd(l)||l===!0,u={};let h=t,d,f;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(r,t,o)>1e5*a)throw new Error(t+" and "+r+" are too far apart with stepSize of "+a+" "+o);const m=i.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<r;d=+e.add(d,a,o),f++)JL(u,d,m);return(d===r||i.bounds==="ticks"||f===1)&&JL(u,d,m),Object.keys(u).sort(KL).map(g=>+g)}getLabelForValue(e){const t=this._adapter,r=this.options.time;return r.tooltipFormat?t.format(e,r.tooltipFormat):t.format(e,r.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,s=this._unit,o=t||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,t,r,i){const s=this.options,o=s.ticks.callback;if(o)return Vt(o,[e,t,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],d=r[t],f=c&&h&&d&&d.major;return this._adapter.format(e,i||(f?h:u))}generateTickLabels(e){let t,r,i;for(t=0,r=e.length;t<r;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,i=dr(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,i=r[t.unit]||r.millisecond,s=this._tickFormatFunction(e,0,ZL(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],t,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,r=i.length;t<r;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const i=this.getLabels();for(t=0,r=i.length;t<r;++t)e.push(XL(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return vwe(e.sort(KL))}}ce(pb,"id","time"),ce(pb,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function xv(n,e,t){let r=0,i=n.length-1,s,o,a,l;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=FI(n,"pos",e)),{pos:s,time:a}=n[r],{pos:o,time:l}=n[i]):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=FI(n,"time",e)),{time:s,pos:a}=n[r],{time:o,pos:l}=n[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class e8 extends pb{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=xv(t,this.min),this._tableRange=xv(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,i=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=t&&c<=r&&i.push(c);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(xv(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return xv(this._table,r*this._tableRange+this._minPos,!0)}}ce(e8,"id","timeseries"),ce(e8,"defaults",pb.defaults);/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const t8={modes:{point(n,e){return oy(n,e,{intersect:!0})},nearest(n,e,t){return ISe(n,e,t)},x(n,e,t){return oy(n,e,{intersect:t.intersect,axis:"x"})},y(n,e,t){return oy(n,e,{intersect:t.intersect,axis:"y"})}}};function $R(n,e,t){return(t8.modes[t.mode]||t8.modes.nearest)(n,e,t)}function TSe(n,e,t){return t!=="x"&&t!=="y"?n.inRange(e.x,e.y,"x",!0)||n.inRange(e.x,e.y,"y",!0):n.inRange(e.x,e.y,t,!0)}function MSe(n,e,t){return t==="x"?{x:n.x,y:e.y}:t==="y"?{x:e.x,y:n.y}:e}function oy(n,e,t){return n.filter(r=>t.intersect?r.inRange(e.x,e.y):TSe(r,e,t.axis))}function ISe(n,e,t){let r=Number.POSITIVE_INFINITY;return oy(n,e,t).reduce((i,s)=>{const o=s.getCenterPoint(),a=MSe(e,o,t.axis),l=wd(e,a);return l<r?(i=[s],r=l):l===r&&i.push(s),i},[]).sort((i,s)=>i._index-s._index).slice(0,1)}function fu(n,e,t){const r=Math.cos(t),i=Math.sin(t),s=e.x,o=e.y;return{x:s+r*(n.x-s)-i*(n.y-o),y:o+i*(n.x-s)+r*(n.y-o)}}const PSe=(n,e)=>e>n||n.length>e.length&&n.slice(0,e.length)===e,pc=.001,Nx=(n,e,t)=>Math.min(t,Math.max(e,n)),JX=(n,e)=>n.value>=n.start-e&&n.value<=n.end+e;function OSe(n,e,t){for(const r of Object.keys(n))n[r]=Nx(n[r],e,t);return n}function RSe(n,e,t,r){return!n||!e||t<=0?!1:Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2)<=Math.pow(t+r,2)}function ZX(n,{x:e,y:t,x2:r,y2:i},s,{borderWidth:o,hitTolerance:a}){const l=(o+a)/2,c=n.x>=e-l-pc&&n.x<=r+l+pc,u=n.y>=t-l-pc&&n.y<=i+l+pc;return s==="x"?c:(s==="y"||c)&&u}function eQ(n,{rect:e,center:t},r,{rotation:i,borderWidth:s,hitTolerance:o}){const a=fu(n,t,dr(-i));return ZX(a,e,r,{borderWidth:s,hitTolerance:o})}function pu(n,e){const{centerX:t,centerY:r}=n.getProps(["centerX","centerY"],e);return{x:t,y:r}}function DSe(n,e,t,r=!0){const i=t.split(".");let s=0;for(const o of e.split(".")){const a=i[s++];if(parseInt(o,10)<parseInt(a,10))break;if(PSe(a,o)){if(r)throw new Error(`${n} v${t} is not supported. v${e} or newer is required.`);return!1}}return!0}const tQ=n=>typeof n=="string"&&n.endsWith("%"),nQ=n=>parseFloat(n)/100,rQ=n=>Nx(nQ(n),0,1),zf=(n,e)=>({x:n,y:e,x2:n,y2:e,width:0,height:0}),NSe={box:n=>zf(n.centerX,n.centerY),doughnutLabel:n=>zf(n.centerX,n.centerY),ellipse:n=>({centerX:n.centerX,centerY:n.centerX,radius:0,width:0,height:0}),label:n=>zf(n.centerX,n.centerY),line:n=>zf(n.x,n.y),point:n=>({centerX:n.centerX,centerY:n.centerY,radius:0,width:0,height:0}),polygon:n=>zf(n.centerX,n.centerY)};function BR(n,e){return e==="start"?0:e==="end"?n:tQ(e)?rQ(e)*n:n/2}function Il(n,e,t=!0){return typeof e=="number"?e:tQ(e)?(t?rQ(e):nQ(e))*n:n}function ASe(n,e){const{x:t,width:r}=n,i=e.textAlign;return i==="center"?t+r/2:i==="end"||i==="right"?t+r:t}function iQ(n,e,{borderWidth:t,position:r,xAdjust:i,yAdjust:s},o){const a=wt(o),l=e.width+(a?o.width:0)+t,c=e.height+(a?o.height:0)+t,u=zR(r),h=n8(n.x,l,i,u.x),d=n8(n.y,c,s,u.y);return{x:h,y:d,x2:h+l,y2:d+c,width:l,height:c,centerX:h+l/2,centerY:d+c/2}}function zR(n,e="center"){return wt(n)?{x:bt(n.x,e),y:bt(n.y,e)}:(n=bt(n,e),{x:n,y:n})}const sQ=(n,e)=>n&&n.autoFit&&e<1;function oQ(n,e){const t=n.font,r=xn(t)?t:[t];return sQ(n,e)?r.map(function(i){const s=nr(i);return s.size=Math.floor(i.size*e),s.lineHeight=i.lineHeight,nr(s)}):r.map(i=>nr(i))}function aQ(n){return n&&(Fi(n.xValue)||Fi(n.yValue))}function n8(n,e,t=0,r){return n-BR(e,r)+t}function Yd(n,e,t){const r=t.init;if(r){if(r===!0)return cQ(e,t)}else return;return LSe(n,e,t)}function lQ(n,e,t){let r=!1;return e.forEach(i=>{di(n[i])?(r=!0,t[i]=n[i]):Fi(t[i])&&delete t[i]}),r}function cQ(n,e){const t=e.type||"line";return NSe[t](n)}function LSe(n,e,t){const r=Vt(t.init,[{chart:n,properties:e,options:t}]);if(r===!0)return cQ(e,t);if(wt(r))return r}const x_=new Map,FSe=n=>isNaN(n)||n<=0,jSe=n=>n.reduce(function(e,t){return e+=t.string,e},"");function Ax(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function Lx(n,{x:e,y:t},r){r&&(n.translate(e,t),n.rotate(dr(r)),n.translate(-e,-t))}function ga(n,e){if(e&&e.borderWidth)return n.lineCap=e.borderCapStyle||"butt",n.setLineDash(e.borderDash),n.lineDashOffset=e.borderDashOffset,n.lineJoin=e.borderJoinStyle||"miter",n.lineWidth=e.borderWidth,n.strokeStyle=e.borderColor,!0}function Gd(n,e){n.shadowColor=e.backgroundShadowColor,n.shadowBlur=e.shadowBlur,n.shadowOffsetX=e.shadowOffsetX,n.shadowOffsetY=e.shadowOffsetY}function Fx(n,e){const t=e.content;if(Ax(t))return{width:Il(t.width,e.width),height:Il(t.height,e.height)};const r=oQ(e),i=e.textStrokeWidth,s=xn(t)?t:[t],o=s.join()+jSe(r)+i+(n._measureText?"-spriting":"");return x_.has(o)||x_.set(o,qSe(n,s,r,i)),x_.get(o)}function uQ(n,e,t){const{x:r,y:i,width:s,height:o}=e;n.save(),Gd(n,t);const a=ga(n,t);n.fillStyle=t.backgroundColor,n.beginPath(),hb(n,{x:r,y:i,w:s,h:o,radius:OSe(xh(t.borderRadius),0,Math.min(s,o)/2)}),n.closePath(),n.fill(),a&&(n.shadowColor=t.borderShadowColor,n.stroke()),n.restore()}function hQ(n,e,t,r){const i=t.content;if(Ax(i)){n.save(),n.globalAlpha=HSe(t.opacity,i.style.opacity),n.drawImage(i,e.x,e.y,e.width,e.height),n.restore();return}const s=xn(i)?i:[i],o=oQ(t,r),a=t.color,l=xn(a)?a:[a],c=ASe(e,t),u=e.y+t.textStrokeWidth/2;n.save(),n.textBaseline="middle",n.textAlign=t.textAlign,$Se(n,t)&&USe(n,{x:c,y:u},s,o),WSe(n,{x:c,y:u},s,{fonts:o,colors:l}),n.restore()}function $Se(n,e){if(e.textStrokeWidth>0)return n.lineJoin="round",n.miterLimit=2,n.lineWidth=e.textStrokeWidth,n.strokeStyle=e.textStrokeColor,!0}function BSe(n,e,t,r){const{radius:i,options:s}=e,o=s.pointStyle,a=s.rotation;let l=(a||0)*TR;if(Ax(o)){n.save(),n.translate(t,r),n.rotate(l),n.drawImage(o,-o.width/2,-o.height/2,o.width,o.height),n.restore();return}FSe(i)||zSe(n,{x:t,y:r,radius:i,rotation:a,style:o,rad:l})}function zSe(n,{x:e,y:t,radius:r,rotation:i,style:s,rad:o}){let a,l,c,u;switch(n.beginPath(),s){default:n.arc(e,t,r,0,kr),n.closePath();break;case"triangle":n.moveTo(e+Math.sin(o)*r,t-Math.cos(o)*r),o+=cb,n.lineTo(e+Math.sin(o)*r,t-Math.cos(o)*r),o+=cb,n.lineTo(e+Math.sin(o)*r,t-Math.cos(o)*r),n.closePath();break;case"rectRounded":u=r*.516,c=r-u,a=Math.cos(o+ns)*c,l=Math.sin(o+ns)*c,n.arc(e-a,t-l,u,o-jt,o-Cr),n.arc(e+l,t-a,u,o-Cr,o),n.arc(e+a,t+l,u,o,o+Cr),n.arc(e-l,t+a,u,o+Cr,o+jt),n.closePath();break;case"rect":if(!i){c=Math.SQRT1_2*r,n.rect(e-c,t-c,2*c,2*c);break}o+=ns;case"rectRot":a=Math.cos(o)*r,l=Math.sin(o)*r,n.moveTo(e-a,t-l),n.lineTo(e+l,t-a),n.lineTo(e+a,t+l),n.lineTo(e-l,t+a),n.closePath();break;case"crossRot":o+=ns;case"cross":a=Math.cos(o)*r,l=Math.sin(o)*r,n.moveTo(e-a,t-l),n.lineTo(e+a,t+l),n.moveTo(e+l,t-a),n.lineTo(e-l,t+a);break;case"star":a=Math.cos(o)*r,l=Math.sin(o)*r,n.moveTo(e-a,t-l),n.lineTo(e+a,t+l),n.moveTo(e+l,t-a),n.lineTo(e-l,t+a),o+=ns,a=Math.cos(o)*r,l=Math.sin(o)*r,n.moveTo(e-a,t-l),n.lineTo(e+a,t+l),n.moveTo(e+l,t-a),n.lineTo(e-l,t+a);break;case"line":a=Math.cos(o)*r,l=Math.sin(o)*r,n.moveTo(e-a,t-l),n.lineTo(e+a,t+l);break;case"dash":n.moveTo(e,t),n.lineTo(e+Math.cos(o)*r,t+Math.sin(o)*r);break}n.fill()}function qSe(n,e,t,r){n.save();const i=e.length;let s=0,o=r;for(let a=0;a<i;a++){const l=t[Math.min(a,t.length-1)];n.font=l.string;const c=e[a];s=Math.max(s,n.measureText(c).width+r),o+=l.lineHeight}return n.restore(),{width:s,height:o}}function USe(n,{x:e,y:t},r,i){n.beginPath();let s=0;r.forEach(function(o,a){const l=i[Math.min(a,i.length-1)],c=l.lineHeight;n.font=l.string,n.strokeText(o,e,t+c/2+s),s+=c}),n.stroke()}function WSe(n,{x:e,y:t},r,{fonts:i,colors:s}){let o=0;r.forEach(function(a,l){const c=s[Math.min(l,s.length-1)],u=i[Math.min(l,i.length-1)],h=u.lineHeight;n.beginPath(),n.font=u.string,n.fillStyle=c,n.fillText(a,e,t+h/2+o),o+=h,n.fill()})}function HSe(n,e){const t=xd(n)?n:e;return xd(t)?Nx(t,0,1):1}const dQ=["left","bottom","top","right"];function YSe(n,e){const{pointX:t,pointY:r,options:i}=e,s=i.callout,o=s&&s.display&&QSe(e,s);if(!o||ZSe(e,s,o))return;if(n.save(),n.beginPath(),!ga(n,s))return n.restore();const{separatorStart:l,separatorEnd:c}=GSe(e,o),{sideStart:u,sideEnd:h}=KSe(e,o,l);(s.margin>0||i.borderWidth===0)&&(n.moveTo(l.x,l.y),n.lineTo(c.x,c.y)),n.moveTo(u.x,u.y),n.lineTo(h.x,h.y);const d=fu({x:t,y:r},e.getCenterPoint(),dr(-e.rotation));n.lineTo(d.x,d.y),n.stroke(),n.restore()}function GSe(n,e){const{x:t,y:r,x2:i,y2:s}=n,o=VSe(n,e);let a,l;return e==="left"||e==="right"?(a={x:t+o,y:r},l={x:a.x,y:s}):(a={x:t,y:r+o},l={x:i,y:a.y}),{separatorStart:a,separatorEnd:l}}function VSe(n,e){const{width:t,height:r,options:i}=n,s=i.callout.margin+i.borderWidth/2;return e==="right"?t+s:e==="bottom"?r+s:-s}function KSe(n,e,t){const{y:r,width:i,height:s,options:o}=n,a=o.callout.start,l=XSe(e,o.callout);let c,u;return e==="left"||e==="right"?(c={x:t.x,y:r+Il(s,a)},u={x:c.x+l,y:c.y}):(c={x:t.x+Il(i,a),y:t.y},u={x:c.x,y:c.y+l}),{sideStart:c,sideEnd:u}}function XSe(n,e){const t=e.side;return n==="left"||n==="top"?-t:t}function QSe(n,e){const t=e.position;return dQ.includes(t)?t:JSe(n,e)}function JSe(n,e){const{x:t,y:r,x2:i,y2:s,width:o,height:a,pointX:l,pointY:c,centerX:u,centerY:h,rotation:d}=n,f={x:u,y:h},m=e.start,g=Il(o,m),v=Il(a,m),y=[t,t+g,t+g,i],b=[r+v,s,r,s],w=[];for(let S=0;S<4;S++){const _=fu({x:y[S],y:b[S]},f,dr(d));w.push({position:dQ[S],distance:wd(_,{x:l,y:c})})}return w.sort((S,_)=>S.distance-_.distance)[0].position}function ZSe(n,e,t){const{pointX:r,pointY:i}=n,s=e.margin;let o=r,a=i;return t==="left"?o+=s:t==="right"?o-=s:t==="top"?a+=s:t==="bottom"&&(a-=s),n.inRange(o,a)}const r8={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function kd(n,e,t){return e=typeof e=="number"?e:n.parse(e),gi(e)?n.getPixelForValue(e):t}function Zc(n,e,t){const r=e[t];if(r||t==="scaleID")return r;const i=t.charAt(0),s=Object.values(n).filter(o=>o.axis&&o.axis===i);return s.length?s[0].id:i}function fQ(n,e){if(n){const t=n.options.reverse,r=kd(n,e.min,t?e.end:e.start),i=kd(n,e.max,t?e.start:e.end);return{start:r,end:i}}}function pQ(n,e){const{chartArea:t,scales:r}=n,i=r[Zc(r,e,"xScaleID")],s=r[Zc(r,e,"yScaleID")];let o=t.width/2,a=t.height/2;return i&&(o=kd(i,e.xValue,i.left+i.width/2)),s&&(a=kd(s,e.yValue,s.top+s.height/2)),{x:o,y:a}}function qR(n,e){const t=n.scales,r=t[Zc(t,e,"xScaleID")],i=t[Zc(t,e,"yScaleID")];if(!r&&!i)return{};let{left:s,right:o}=r||n.chartArea,{top:a,bottom:l}=i||n.chartArea;const c=i8(r,{min:e.xMin,max:e.xMax,start:s,end:o});s=c.start,o=c.end;const u=i8(i,{min:e.yMin,max:e.yMax,start:l,end:a});return a=u.start,l=u.end,{x:s,y:a,x2:o,y2:l,width:o-s,height:l-a,centerX:s+(o-s)/2,centerY:a+(l-a)/2}}function mQ(n,e){if(!aQ(e)){const t=qR(n,e);let r=e.radius;(!r||isNaN(r))&&(r=Math.min(t.width,t.height)/2,e.radius=r);const i=r*2,s=t.centerX+e.xAdjust,o=t.centerY+e.yAdjust;return{x:s-r,y:o-r,x2:s+r,y2:o+r,centerX:s,centerY:o,width:i,height:i,radius:r}}return tke(n,e)}function eke(n,e){const{scales:t,chartArea:r}=n,i=t[e.scaleID],s={x:r.left,y:r.top,x2:r.right,y2:r.bottom};return i?nke(i,s,e):rke(t,s,e),s}function gQ(n,e){const t=qR(n,e);return t.initProperties=Yd(n,t,e),t.elements=[{type:"label",optionScope:"label",properties:oke(n,t,e),initProperties:t.initProperties}],t}function tke(n,e){const t=pQ(n,e),r=e.radius*2;return{x:t.x-e.radius+e.xAdjust,y:t.y-e.radius+e.yAdjust,x2:t.x+e.radius+e.xAdjust,y2:t.y+e.radius+e.yAdjust,centerX:t.x+e.xAdjust,centerY:t.y+e.yAdjust,radius:e.radius,width:r,height:r}}function i8(n,e){const t=fQ(n,e)||e;return{start:Math.min(t.start,t.end),end:Math.max(t.start,t.end)}}function nke(n,e,t){const r=kd(n,t.value,NaN),i=kd(n,t.endValue,r);n.isHorizontal()?(e.x=r,e.x2=i):(e.y=r,e.y2=i)}function rke(n,e,t){for(const r of Object.keys(r8)){const i=n[Zc(n,t,r)];if(i){const{min:s,max:o,start:a,end:l,startProp:c,endProp:u}=r8[r],h=fQ(i,{min:t[s],max:t[o],start:i[a],end:i[l]});e[c]=h.start,e[u]=h.end}}}function ike({properties:n,options:e},t,r,i){const{x:s,x2:o,width:a}=n;return vQ({start:s,end:o,borderWidth:e.borderWidth},{position:r.x,padding:{start:i.left,end:i.right},adjust:e.label.xAdjust,size:t.width})}function ske({properties:n,options:e},t,r,i){const{y:s,y2:o,height:a}=n;return vQ({start:s,end:o,borderWidth:e.borderWidth},{position:r.y,padding:{start:i.top,end:i.bottom},adjust:e.label.yAdjust,size:t.height})}function vQ(n,e){const{start:t,end:r,borderWidth:i}=n,{position:s,padding:{start:o,end:a},adjust:l}=e,c=r-i-t-o-a-e.size;return t+i/2+l+BR(c,s)}function oke(n,e,t){const r=t.label;r.backgroundColor="transparent",r.callout.display=!1;const i=zR(r.position),s=Ar(r.padding),o=Fx(n.ctx,r),a=ike({properties:e,options:t},o,i,s),l=ske({properties:e,options:t},o,i,s),c=o.width+s.width,u=o.height+s.height;return{x:a,y:l,x2:a+c,y2:l+u,width:c,height:u,centerX:a+c/2,centerY:l+u/2,rotation:r.rotation}}const YI=["enter","leave"],UR=YI.concat("click");function ake(n,e,t){e.listened=lQ(t,UR,e.listeners),e.moveListened=!1,YI.forEach(r=>{di(t[r])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(r=>{!e.listened&&di(r.click)&&(e.listened=!0),e.moveListened||YI.forEach(i=>{di(r[i])&&(e.listened=!0,e.moveListened=!0)})})}function lke(n,e,t){if(n.listened)switch(e.type){case"mousemove":case"mouseout":return cke(n,e,t);case"click":return uke(n,e,t)}}function cke(n,e,t){if(!n.moveListened)return;let r;e.type==="mousemove"?r=$R(n.visibleElements,e,t.interaction):r=[];const i=n.hovered;n.hovered=r;const s={state:n,event:e};let o=s8(s,"leave",i,r);return s8(s,"enter",r,i)||o}function s8({state:n,event:e},t,r,i){let s;for(const o of r)i.indexOf(o)<0&&(s=yQ(o.options[t]||n.listeners[t],o,e)||s);return s}function uke(n,e,t){const r=n.listeners,i=$R(n.visibleElements,e,t.interaction);let s;for(const o of i)s=yQ(o.options.click||r.click,o,e)||s;return s}function yQ(n,e,t){return Vt(n,[e.$context,t])===!0}const mb=["afterDraw","beforeDraw"];function hke(n,e,t){const r=e.visibleElements;e.hooked=lQ(t,mb,e.hooks),e.hooked||r.forEach(i=>{e.hooked||mb.forEach(s=>{di(i.options[s])&&(e.hooked=!0)})})}function o8(n,e,t){if(n.hooked){const r=e.options[t]||n.hooks[t];return Vt(r,[e.$context])}}function dke(n,e,t){const r=vke(n.scales,e,t);let i=a8(e,r,"min","suggestedMin");i=a8(e,r,"max","suggestedMax")||i,i&&di(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function fke(n,e){for(const t of n)mke(t,e)}function a8(n,e,t,r){if(gi(e[t])&&!pke(n.options,t,r)){const i=n[t]!==e[t];return n[t]=e[t],i}}function pke(n,e,t){return Fi(n[e])||Fi(n[t])}function mke(n,e){for(const t of["scaleID","xScaleID","yScaleID"]){const r=Zc(e,n,t);r&&!e[r]&&gke(n,t)&&console.warn(`No scale found with id '${r}' for annotation '${n.id}'`)}}function gke(n,e){if(e==="scaleID")return!0;const t=e.charAt(0);for(const r of["Min","Max","Value"])if(Fi(n[t+r]))return!0;return!1}function vke(n,e,t){const r=e.axis,i=e.id,s=r+"ScaleID",o={min:bt(e.min,Number.NEGATIVE_INFINITY),max:bt(e.max,Number.POSITIVE_INFINITY)};for(const a of t)a.scaleID===i?l8(a,e,["value","endValue"],o):Zc(n,a,s)===i&&l8(a,e,[r+"Min",r+"Max",r+"Value"],o);return o}function l8(n,e,t,r){for(const i of t){const s=n[i];if(Fi(s)){const o=e.parse(s);r.min=Math.min(r.min,o),r.max=Math.max(r.max,o)}}}class Vd extends bi{inRange(e,t,r,i){const{x:s,y:o}=fu({x:e,y:t},this.getCenterPoint(i),dr(-this.options.rotation));return ZX({x:s,y:o},this.getProps(["x","y","x2","y2"],i),r,this.options)}getCenterPoint(e){return pu(this,e)}draw(e){e.save(),Lx(e,this.getCenterPoint(),this.options.rotation),uQ(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,t){return gQ(e,t)}}Vd.id="boxAnnotation";Vd.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Vd.defaultRoutes={borderColor:"color",backgroundColor:"color"};Vd.descriptors={label:{_fallback:!0}};class jx extends bi{inRange(e,t,r,i){return eQ({x:e,y:t},{rect:this.getProps(["x","y","x2","y2"],i),center:this.getCenterPoint(i)},r,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return pu(this,e)}draw(e){const t=this.options;!t.display||!t.content||(Ske(e,this),e.save(),Lx(e,this.getCenterPoint(),this.rotation),hQ(e,this,t,this._fitRatio),e.restore())}resolveElementProperties(e,t){const r=yke(e,t);if(!r)return{};const{controllerMeta:i,point:s,radius:o}=xke(e,t,r);let a=Fx(e.ctx,t);const l=wke(a,o);sQ(t,l)&&(a={width:a.width*l,height:a.height*l});const{position:c,xAdjust:u,yAdjust:h}=t,d=iQ(s,a,{borderWidth:0,position:c,xAdjust:u,yAdjust:h});return{initProperties:Yd(e,d,t),...d,...i,rotation:t.rotation,_fitRatio:l}}}jx.id="doughnutLabelAnnotation";jx.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};jx.defaultRoutes={};function yke(n,e){return n.getSortedVisibleDatasetMetas().reduce(function(t,r){const i=r.controller;return i instanceof ap&&bke(n,e,r.data)&&(!t||i.innerRadius<t.controller.innerRadius)&&i.options.circumference>=90?r:t},void 0)}function bke(n,e,t){if(!e.autoHide)return!0;for(let r=0;r<t.length;r++)if(!t[r].hidden&&n.getDataVisibility(r))return!0}function xke({chartArea:n},e,t){const{left:r,top:i,right:s,bottom:o}=n,{innerRadius:a,offsetX:l,offsetY:c}=t.controller,u=(r+s)/2+l,h=(i+o)/2+c,d={left:Math.max(u-a,r),right:Math.min(u+a,s),top:Math.max(h-a,i),bottom:Math.min(h+a,o)},f={x:(d.left+d.right)/2,y:(d.top+d.bottom)/2},m=e.spacing+e.borderWidth/2,g=a-m,v=f.y>h,y=v?i+m:o-m,b=_ke(y,u,h,g);return{controllerMeta:{_centerX:u,_centerY:h,_radius:g,_counterclockwise:v,...b},point:f,radius:Math.min(a,Math.min(d.right-d.left,d.bottom-d.top)/2)}}function wke({width:n,height:e},t){const r=Math.sqrt(Math.pow(n,2)+Math.pow(e,2));return t*2/r}function _ke(n,e,t,r){const i=Math.pow(t-n,2),s=Math.pow(r,2),o=e*-2,a=Math.pow(e,2)+i-s,l=Math.pow(o,2)-4*a;if(l<=0)return{_startAngle:0,_endAngle:kr};const c=(-o-Math.sqrt(l))/2,u=(-o+Math.sqrt(l))/2;return{_startAngle:LI({x:e,y:t},{x:c,y:n}).angle,_endAngle:LI({x:e,y:t},{x:u,y:n}).angle}}function Ske(n,e){const{_centerX:t,_centerY:r,_radius:i,_startAngle:s,_endAngle:o,_counterclockwise:a,options:l}=e;n.save();const c=ga(n,l);n.fillStyle=l.backgroundColor,n.beginPath(),n.arc(t,r,i,s,o,a),n.closePath(),n.fill(),c&&n.stroke(),n.restore()}class Sg extends bi{inRange(e,t,r,i){return eQ({x:e,y:t},{rect:this.getProps(["x","y","x2","y2"],i),center:this.getCenterPoint(i)},r,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return pu(this,e)}draw(e){const t=this.options,r=!Fi(this._visible)||this._visible;!t.display||!t.content||!r||(e.save(),Lx(e,this.getCenterPoint(),this.rotation),YSe(e,this),uQ(e,this,t),hQ(e,kke(this),t),e.restore())}resolveElementProperties(e,t){let r;if(aQ(t))r=pQ(e,t);else{const{centerX:a,centerY:l}=qR(e,t);r={x:a,y:l}}const i=Ar(t.padding),s=Fx(e.ctx,t),o=iQ(r,s,t,i);return{initProperties:Yd(e,o,t),pointX:r.x,pointY:r.y,...o,rotation:t.rotation}}}Sg.id="labelAnnotation";Sg.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Sg.defaultRoutes={borderColor:"color"};function kke({x:n,y:e,width:t,height:r,options:i}){const s=i.borderWidth/2,o=Ar(i.padding);return{x:n+o.left+s,y:e+o.top+s,width:t-o.left-o.right-i.borderWidth,height:r-o.top-o.bottom-i.borderWidth}}const WR=(n,e,t)=>({x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}),GI=(n,e,t)=>WR(e,t,Math.abs((n-e.y)/(t.y-e.y))).x,c8=(n,e,t)=>WR(e,t,Math.abs((n-e.x)/(t.x-e.x))).y,hp=n=>n*n,Cke=(n,e,{x:t,y:r,x2:i,y2:s},o)=>o==="y"?{start:Math.min(r,s),end:Math.max(r,s),value:e}:{start:Math.min(t,i),end:Math.max(t,i),value:n},u8=(n,e,t,r)=>(1-r)*(1-r)*n+2*(1-r)*r*e+r*r*t,VI=(n,e,t,r)=>({x:u8(n.x,e.x,t.x,r),y:u8(n.y,e.y,t.y,r)}),h8=(n,e,t,r)=>2*(1-r)*(e-n)+2*r*(t-e),d8=(n,e,t,r)=>-Math.atan2(h8(n.x,e.x,t.x,r),h8(n.y,e.y,t.y,r))+.5*jt;class kg extends bi{inRange(e,t,r,i){const s=(this.options.borderWidth+this.options.hitTolerance)/2;if(r!=="x"&&r!=="y"){const o={mouseX:e,mouseY:t},{path:a,ctx:l}=this;if(a){ga(l,this.options),l.lineWidth+=this.options.hitTolerance;const{chart:u}=this.$context,h=e*u.currentDevicePixelRatio,d=t*u.currentDevicePixelRatio,f=l.isPointInStroke(a,h,d)||KI(this,o,i);return l.restore(),f}const c=hp(s);return Ike(this,o,c,i)||KI(this,o,i)}return Eke(this,{mouseX:e,mouseY:t},r,{hitSize:s,useFinalPosition:i})}getCenterPoint(e){return pu(this,e)}draw(e){const{x:t,y:r,x2:i,y2:s,cp:o,options:a}=this;if(e.save(),!ga(e,a))return e.restore();Gd(e,a);const l=Math.sqrt(Math.pow(i-t,2)+Math.pow(s-r,2));if(a.curve&&o)return Fke(e,this,o,l),e.restore();const{startOpts:c,endOpts:u,startAdjust:h,endAdjust:d}=bQ(this),f=Math.atan2(s-r,i-t);e.translate(t,r),e.rotate(f),e.beginPath(),e.moveTo(0+h,0),e.lineTo(l-d,0),e.shadowColor=a.borderShadowColor,e.stroke(),XI(e,0,h,c),XI(e,l,-d,u),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,t){const r=eke(e,t),{x:i,y:s,x2:o,y2:a}=r,l=Tke(r,e.chartArea),c=l?Mke({x:i,y:s},{x:o,y:a},e.chartArea):{x:i,y:s,x2:o,y2:a,width:Math.abs(o-i),height:Math.abs(a-s)};if(c.centerX=(o+i)/2,c.centerY=(a+s)/2,c.initProperties=Yd(e,c,t),t.curve){const h={x:c.x,y:c.y},d={x:c.x2,y:c.y2};c.cp=Lke(c,t,wd(h,d))}const u=Pke(e,c,t.label);return u._visible=l,c.elements=[{type:"label",optionScope:"label",properties:u,initProperties:c.initProperties}],c}}kg.id="lineAnnotation";const f8={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};kg.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},f8),fill:!1,length:12,start:Object.assign({},f8),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},Sg.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};kg.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};kg.defaultRoutes={borderColor:"color"};function Eke(n,{mouseX:e,mouseY:t},r,{hitSize:i,useFinalPosition:s}){const o=Cke(e,t,n.getProps(["x","y","x2","y2"],s),r);return JX(o,i)||KI(n,{mouseX:e,mouseY:t},s,r)}function Tke({x:n,y:e,x2:t,y2:r},{top:i,right:s,bottom:o,left:a}){return!(n<a&&t<a||n>s&&t>s||e<i&&r<i||e>o&&r>o)}function p8({x:n,y:e},t,{top:r,right:i,bottom:s,left:o}){return n<o&&(e=c8(o,{x:n,y:e},t),n=o),n>i&&(e=c8(i,{x:n,y:e},t),n=i),e<r&&(n=GI(r,{x:n,y:e},t),e=r),e>s&&(n=GI(s,{x:n,y:e},t),e=s),{x:n,y:e}}function Mke(n,e,t){const{x:r,y:i}=p8(n,e,t),{x:s,y:o}=p8(e,n,t);return{x:r,y:i,x2:s,y2:o,width:Math.abs(s-r),height:Math.abs(o-i)}}function Ike(n,{mouseX:e,mouseY:t},r=pc,i){const{x:s,y:o,x2:a,y2:l}=n.getProps(["x","y","x2","y2"],i),c=a-s,u=l-o,h=hp(c)+hp(u),d=h===0?-1:((e-s)*c+(t-o)*u)/h;let f,m;return d<0?(f=s,m=o):d>1?(f=a,m=l):(f=s+d*c,m=o+d*u),hp(e-f)+hp(t-m)<=r}function KI(n,{mouseX:e,mouseY:t},r,i){const s=n.label;return s.options.display&&s.inRange(e,t,i,r)}function Pke(n,e,t){const r=t.borderWidth,i=Ar(t.padding),s=Fx(n.ctx,t),o=s.width+i.width+r,a=s.height+i.height+r;return Rke(e,t,{width:o,height:a,padding:i},n.chartArea)}function Oke(n){const{x:e,y:t,x2:r,y2:i}=n,s=Math.atan2(i-t,r-e);return s>jt/2?s-jt:s<jt/-2?s+jt:s}function Rke(n,e,t,r){const{width:i,height:s,padding:o}=t,{xAdjust:a,yAdjust:l}=e,c={x:n.x,y:n.y},u={x:n.x2,y:n.y2},h=e.rotation==="auto"?Oke(n):dr(e.rotation),d=Dke(i,s,h),f=Nke(n,e,{labelSize:d,padding:o},r),m=n.cp?VI(c,n.cp,u,f):WR(c,u,f),g={size:d.w,min:r.left,max:r.right,padding:o.left},v={size:d.h,min:r.top,max:r.bottom,padding:o.top},y=g8(m.x,g)+a,b=g8(m.y,v)+l;return{x:y-i/2,y:b-s/2,x2:y+i/2,y2:b+s/2,centerX:y,centerY:b,pointX:m.x,pointY:m.y,width:i,height:s,rotation:_X(h)}}function Dke(n,e,t){const r=Math.cos(t),i=Math.sin(t);return{w:Math.abs(n*r)+Math.abs(e*i),h:Math.abs(n*i)+Math.abs(e*r)}}function Nke(n,e,t,r){let i;const s=Ake(n,r);return e.position==="start"?i=m8({w:n.x2-n.x,h:n.y2-n.y},t,e,s):e.position==="end"?i=1-m8({w:n.x-n.x2,h:n.y-n.y2},t,e,s):i=BR(1,e.position),i}function m8(n,e,t,r){const{labelSize:i,padding:s}=e,o=n.w*r.dx,a=n.h*r.dy,l=o>0&&(i.w/2+s.left-r.x)/o,c=a>0&&(i.h/2+s.top-r.y)/a;return Nx(Math.max(l,c),0,.25)}function Ake(n,e){const{x:t,x2:r,y:i,y2:s}=n,o=Math.min(i,s)-e.top,a=Math.min(t,r)-e.left,l=e.bottom-Math.max(i,s),c=e.right-Math.max(t,r);return{x:Math.min(a,c),y:Math.min(o,l),dx:a<=c?1:-1,dy:o<=l?1:-1}}function g8(n,e){const{size:t,min:r,max:i,padding:s}=e,o=t/2;return t>i-r?(i+r)/2:(r>=n-s-o&&(n=r+s+o),i<=n+s+o&&(n=i-s-o),n)}function bQ(n){const e=n.options,t=e.arrowHeads&&e.arrowHeads.start,r=e.arrowHeads&&e.arrowHeads.end;return{startOpts:t,endOpts:r,startAdjust:v8(n,t),endAdjust:v8(n,r)}}function v8(n,e){if(!e||!e.display)return 0;const{length:t,width:r}=e,i=n.options.borderWidth/2,s={x:t,y:r+i};return Math.abs(GI(0,s,{x:0,y:i}))}function XI(n,e,t,r){if(!r||!r.display)return;const{length:i,width:s,fill:o,backgroundColor:a,borderColor:l}=r,c=Math.abs(e-i)+t;n.beginPath(),Gd(n,r),ga(n,r),n.moveTo(c,-s),n.lineTo(e+t,0),n.lineTo(c,s),o===!0?(n.fillStyle=a||l,n.closePath(),n.fill(),n.shadowColor="transparent"):n.shadowColor=r.borderShadowColor,n.stroke()}function Lke(n,e,t){const{x:r,y:i,x2:s,y2:o,centerX:a,centerY:l}=n,c=Math.atan2(o-i,s-r),u=zR(e.controlPoint,0),h={x:a+Il(t,u.x,!1),y:l+Il(t,u.y,!1)};return fu(h,{x:a,y:l},c)}function y8(n,{x:e,y:t},{angle:r,adjust:i},s){!s||!s.display||(n.save(),n.translate(e,t),n.rotate(r),XI(n,0,-i,s),n.restore())}function Fke(n,e,t,r){const{x:i,y:s,x2:o,y2:a,options:l}=e,{startOpts:c,endOpts:u,startAdjust:h,endAdjust:d}=bQ(e),f={x:i,y:s},m={x:o,y:a},g=d8(f,t,m,0),v=d8(f,t,m,1)-jt,y=VI(f,t,m,h/r),b=VI(f,t,m,1-d/r),w=new Path2D;n.beginPath(),w.moveTo(y.x,y.y),w.quadraticCurveTo(t.x,t.y,b.x,b.y),n.shadowColor=l.borderShadowColor,n.stroke(w),e.path=w,e.ctx=n,y8(n,y,{angle:g,adjust:h},c),y8(n,b,{angle:v,adjust:d},u)}class Cg extends bi{inRange(e,t,r,i){const s=this.options.rotation,o=(this.options.borderWidth+this.options.hitTolerance)/2;if(r!=="x"&&r!=="y")return jke({x:e,y:t},this.getProps(["width","height","centerX","centerY"],i),s,o);const{x:a,y:l,x2:c,y2:u}=this.getProps(["x","y","x2","y2"],i),h=r==="y"?{start:l,end:u}:{start:a,end:c},d=fu({x:e,y:t},this.getCenterPoint(i),dr(-s));return d[r]>=h.start-o-pc&&d[r]<=h.end+o+pc}getCenterPoint(e){return pu(this,e)}draw(e){const{width:t,height:r,centerX:i,centerY:s,options:o}=this;e.save(),Lx(e,this.getCenterPoint(),o.rotation),Gd(e,this.options),e.beginPath(),e.fillStyle=o.backgroundColor;const a=ga(e,o);e.ellipse(i,s,r/2,t/2,jt/2,0,2*jt),e.fill(),a&&(e.shadowColor=o.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,t){return gQ(e,t)}}Cg.id="ellipseAnnotation";Cg.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},Vd.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Cg.defaultRoutes={borderColor:"color",backgroundColor:"color"};Cg.descriptors={label:{_fallback:!0}};function jke(n,e,t,r){const{width:i,height:s,centerX:o,centerY:a}=e,l=i/2,c=s/2;if(l<=0||c<=0)return!1;const u=dr(t||0),h=Math.cos(u),d=Math.sin(u),f=Math.pow(h*(n.x-o)+d*(n.y-a),2),m=Math.pow(d*(n.x-o)-h*(n.y-a),2);return f/Math.pow(l+r,2)+m/Math.pow(c+r,2)<=1.0001}class $x extends bi{inRange(e,t,r,i){const{x:s,y:o,x2:a,y2:l,width:c}=this.getProps(["x","y","x2","y2","width"],i),u=(this.options.borderWidth+this.options.hitTolerance)/2;return r!=="x"&&r!=="y"?RSe({x:e,y:t},this.getCenterPoint(i),c/2,u):JX(r==="y"?{start:o,end:l,value:t}:{start:s,end:a,value:e},u)}getCenterPoint(e){return pu(this,e)}draw(e){const t=this.options,r=t.borderWidth;if(t.radius<.1)return;e.save(),e.fillStyle=t.backgroundColor,Gd(e,t);const i=ga(e,t);BSe(e,this,this.centerX,this.centerY),i&&!Ax(t.pointStyle)&&(e.shadowColor=t.borderShadowColor,e.stroke()),e.restore(),t.borderWidth=r}resolveElementProperties(e,t){const r=mQ(e,t);return r.initProperties=Yd(e,r,t),r}}$x.id="pointAnnotation";$x.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};$x.defaultRoutes={borderColor:"color",backgroundColor:"color"};class Bx extends bi{inRange(e,t,r,i){if(r!=="x"&&r!=="y")return this.options.radius>=.1&&this.elements.length>1&&Bke(this.elements,e,t,i);const s=fu({x:e,y:t},this.getCenterPoint(i),dr(-this.options.rotation)),o=this.elements.map(c=>r==="y"?c.bY:c.bX),a=Math.min(...o),l=Math.max(...o);return s[r]>=a&&s[r]<=l}getCenterPoint(e){return pu(this,e)}draw(e){const{elements:t,options:r}=this;e.save(),e.beginPath(),e.fillStyle=r.backgroundColor,Gd(e,r);const i=ga(e,r);let s=!0;for(const o of t)s?(e.moveTo(o.x,o.y),s=!1):e.lineTo(o.x,o.y);e.closePath(),e.fill(),i&&(e.shadowColor=r.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,t){const r=mQ(e,t),{sides:i,rotation:s}=t,o=[],a=2*jt/i;let l=s*TR;for(let c=0;c<i;c++,l+=a){const u=$ke(r,t,l);u.initProperties=Yd(e,r,t),o.push(u)}return r.elements=o,r}}Bx.id="polygonAnnotation";Bx.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Bx.defaultRoutes={borderColor:"color",backgroundColor:"color"};function $ke({centerX:n,centerY:e},{radius:t,borderWidth:r,hitTolerance:i},s){const o=(r+i)/2,a=Math.sin(s),l=Math.cos(s),c={x:n+a*t,y:e-l*t};return{type:"point",optionScope:"point",properties:{x:c.x,y:c.y,centerX:c.x,centerY:c.y,bX:n+a*(t+o),bY:e-l*(t+o)}}}function Bke(n,e,t,r){let i=!1,s=n[n.length-1].getProps(["bX","bY"],r);for(const o of n){const a=o.getProps(["bX","bY"],r);a.bY>t!=s.bY>t&&e<(s.bX-a.bX)*(t-a.bY)/(s.bY-a.bY)+a.bX&&(i=!i),s=a}return i}const Sl={box:Vd,doughnutLabel:jx,ellipse:Cg,label:Sg,line:kg,point:$x,polygon:Bx};Object.keys(Sl).forEach(n=>{Nn.describe(`elements.${Sl[n].id}`,{_fallback:"plugins.annotation.common"})});const zke={update:Object.assign},qke=UR.concat(mb),b8=(n,e)=>wt(e)?JI(n,e):n,QI=n=>n==="color"||n==="font";function HR(n="line"){return Sl[n]?n:(console.warn(`Unknown annotation type: '${n}', defaulting to 'line'`),"line")}function Uke(n,e,t,r){const i=Hke(n,t.animations,r),s=e.annotations,o=Vke(e.elements,s);for(let a=0;a<s.length;a++){const l=s[a],c=xQ(o,a,l.type),u=l.setContext(Gke(n,c,o,l)),h=c.resolveElementProperties(n,u);h.skip=Wke(h),"elements"in h&&(Yke(c,h.elements,u,i),delete h.elements),Fi(c.x)||Object.assign(c,h),Object.assign(c,h.initProperties),h.options=wQ(u),i.update(c,h)}}function Wke(n){return isNaN(n.x)||isNaN(n.y)}function Hke(n,e,t){return t==="reset"||t==="none"||t==="resize"?zke:new FR(n,e)}function Yke(n,e,t,r){const i=n.elements||(n.elements=[]);i.length=e.length;for(let s=0;s<e.length;s++){const o=e[s],a=o.properties,l=xQ(i,s,o.type,o.initProperties),c=t[o.optionScope].override(o);a.options=wQ(c),r.update(l,a)}}function xQ(n,e,t,r){const i=Sl[HR(t)];let s=n[e];return(!s||!(s instanceof i))&&(s=n[e]=new i,Object.assign(s,r)),s}function wQ(n){const e=Sl[HR(n.type)],t={};t.id=n.id,t.type=n.type,t.drawTime=n.drawTime,Object.assign(t,JI(n,e.defaults),JI(n,e.defaultRoutes));for(const r of qke)t[r]=n[r];return t}function JI(n,e){const t={};for(const r of Object.keys(e)){const i=e[r],s=n[r];QI(r)&&xn(s)?t[r]=s.map(o=>b8(o,i)):t[r]=b8(s,i)}return t}function Gke(n,e,t,r){return e.$context||(e.$context=Object.assign(Object.create(n.getContext()),{element:e,get elements(){return t.filter(i=>i&&i.options)},id:r.id,type:"annotation"}))}function Vke(n,e){const t=e.length,r=n.length;if(r<t){const i=t-r;n.splice(r,0,...new Array(i))}else r>t&&n.splice(t,r-t);return n}var Kke="3.1.0";const Ua=new Map,x8=n=>n.type!=="doughnutLabel",Xke=UR.concat(mb);var Qke={id:"annotation",version:Kke,beforeRegister(){DSe("chart.js","4.0",Ps.version)},afterRegister(){Ps.register(Sl)},afterUnregister(){Ps.unregister(Sl)},beforeInit(n){Ua.set(n,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(n,e,t){const r=Ua.get(n),i=r.annotations=[];let s=t.annotations;wt(s)?Object.keys(s).forEach(o=>{const a=s[o];wt(a)&&(a.id=o,i.push(a))}):xn(s)&&i.push(...s),fke(i.filter(x8),n.scales)},afterDataLimits(n,e){const t=Ua.get(n);dke(n,e.scale,t.annotations.filter(x8).filter(r=>r.display&&r.adjustScaleRange))},afterUpdate(n,e,t){const r=Ua.get(n);ake(n,r,t),Uke(n,r,t,e.mode),r.visibleElements=r.elements.filter(i=>!i.skip&&i.options.display),hke(n,r,t)},beforeDatasetsDraw(n,e,t){qf(n,"beforeDatasetsDraw",t.clip)},afterDatasetsDraw(n,e,t){qf(n,"afterDatasetsDraw",t.clip)},beforeDatasetDraw(n,e,t){qf(n,e.index,t.clip)},beforeDraw(n,e,t){qf(n,"beforeDraw",t.clip)},afterDraw(n,e,t){qf(n,"afterDraw",t.clip)},beforeEvent(n,e,t){const r=Ua.get(n);lke(r,e.event,t)&&(e.changed=!0)},afterDestroy(n){Ua.delete(n)},getAnnotations(n){const e=Ua.get(n);return e?e.elements:[]},_getAnnotationElementsAtEventForMode(n,e,t){return $R(n,e,t)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:n=>!Xke.includes(n)&&n!=="init",annotations:{_allKeys:!1,_fallback:(n,e)=>`elements.${Sl[HR(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:QI,_fallback:!0},_indexable:QI}},additionalOptionScopes:[""]};function qf(n,e,t){const{ctx:r,chartArea:i}=n,s=Ua.get(n);t&&Ix(r,i);const o=Jke(s.visibleElements,e).sort((a,l)=>a.element.options.z-l.element.options.z);for(const a of o)Zke(r,i,s,a);t&&Px(r)}function Jke(n,e){const t=[];for(const r of n)if(r.options.drawTime===e&&t.push({element:r,main:!0}),r.elements&&r.elements.length)for(const i of r.elements)i.options.display&&i.options.drawTime===e&&t.push({element:i});return t}function Zke(n,e,t,r){const i=r.element;r.main?(o8(t,i,"beforeDraw"),i.draw(n,e),o8(t,i,"afterDraw")):i.draw(n,e)}Ps.register(WI,HI,sy,cp,uSe,ySe,lSe,Qke);/**
 * vis-timeline and vis-graph2d
 * https://visjs.github.io/vis-timeline/
 *
 * Create a fully customizable, interactive timeline with items and ranges.
 *
 * @version 8.5.0
 * @date    2025-12-12T13:44:42.806Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */function Qr(n,e){e===void 0&&(e={});var t=e.insertAt;if(!(!n||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",t==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}}var eCe=`.vis .overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;

  /* Must be displayed above for example selected Timeline items */
  z-index: 10;
}

.vis-active {
  box-shadow: 0 0 10px #86d5f8;
}
`;Qr(eCe);var tCe=`/* override some bootstrap styles screwing up the timelines css */

.vis [class*="span"] {
  min-height: 0;
  width: auto;
}
`;Qr(tCe);var nCe=`div.vis-configuration {
  position: relative;
  display: block;
  float: left;
  font-size: 12px;
}

div.vis-configuration-wrapper {
  display: block;
  width: 700px;
}

div.vis-configuration-wrapper::after {
  clear: both;
  content: "";
  display: block;
}

div.vis-configuration.vis-config-option-container {
  display: block;
  width: 495px;
  background-color: #ffffff;
  border: 2px solid #f7f8fa;
  border-radius: 4px;
  margin-top: 20px;
  left: 10px;
  padding-left: 5px;
}

div.vis-configuration.vis-config-button {
  display: block;
  width: 495px;
  height: 25px;
  vertical-align: middle;
  line-height: 25px;
  background-color: #f7f8fa;
  border: 2px solid #ceced0;
  border-radius: 4px;
  margin-top: 20px;
  left: 10px;
  padding-left: 5px;
  cursor: pointer;
  margin-bottom: 30px;
}

div.vis-configuration.vis-config-button.hover {
  background-color: #4588e6;
  border: 2px solid #214373;
  color: #ffffff;
}

div.vis-configuration.vis-config-item {
  display: block;
  float: left;
  width: 495px;
  height: 25px;
  vertical-align: middle;
  line-height: 25px;
}

div.vis-configuration.vis-config-item.vis-config-s2 {
  left: 10px;
  background-color: #f7f8fa;
  padding-left: 5px;
  border-radius: 3px;
}
div.vis-configuration.vis-config-item.vis-config-s3 {
  left: 20px;
  background-color: #e4e9f0;
  padding-left: 5px;
  border-radius: 3px;
}
div.vis-configuration.vis-config-item.vis-config-s4 {
  left: 30px;
  background-color: #cfd8e6;
  padding-left: 5px;
  border-radius: 3px;
}

div.vis-configuration.vis-config-header {
  font-size: 18px;
  font-weight: bold;
}

div.vis-configuration.vis-config-label {
  width: 120px;
  height: 25px;
  line-height: 25px;
}

div.vis-configuration.vis-config-label.vis-config-s3 {
  width: 110px;
}
div.vis-configuration.vis-config-label.vis-config-s4 {
  width: 100px;
}

div.vis-configuration.vis-config-colorBlock {
  top: 1px;
  width: 30px;
  height: 19px;
  border: 1px solid #444444;
  border-radius: 2px;
  padding: 0px;
  margin: 0px;
  cursor: pointer;
}

input.vis-configuration.vis-config-checkbox {
  left: -5px;
}

input.vis-configuration.vis-config-rangeinput {
  position: relative;
  top: -5px;
  width: 60px;
  /*height:13px;*/
  padding: 1px;
  margin: 0;
  pointer-events: none;
}

input.vis-configuration.vis-config-range {
  /*removes default webkit styles*/
  -webkit-appearance: none;

  /*fix for FF unable to apply focus style bug */
  border: 0px solid white;
  background-color: rgba(0, 0, 0, 0);

  /*required for proper track sizing in FF*/
  width: 300px;
  height: 20px;
}
input.vis-configuration.vis-config-range::-webkit-slider-runnable-track {
  width: 300px;
  height: 5px;
  background: #dedede; /* Old browsers */
  background: -moz-linear-gradient(top, #dedede 0%, #c8c8c8 99%); /* FF3.6+ */
  background: -webkit-gradient(
    linear,
    left top,
    left bottom,
    color-stop(0%, #dedede),
    color-stop(99%, #c8c8c8)
  ); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(
    top,
    #dedede 0%,
    #c8c8c8 99%
  ); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(
    top,
    #dedede 0%,
    #c8c8c8 99%
  ); /* Opera 11.10+ */
  background: -ms-linear-gradient(top, #dedede 0%, #c8c8c8 99%); /* IE10+ */
  background: linear-gradient(to bottom, #dedede 0%, #c8c8c8 99%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#dedede', endColorstr='#c8c8c8',GradientType=0 ); /* IE6-9 */

  border: 1px solid #999999;
  box-shadow: #aaaaaa 0px 0px 3px 0px;
  border-radius: 3px;
}
input.vis-configuration.vis-config-range::-webkit-slider-thumb {
  -webkit-appearance: none;
  border: 1px solid #14334b;
  height: 17px;
  width: 17px;
  border-radius: 50%;
  background: #3876c2; /* Old browsers */
  background: -moz-linear-gradient(top, #3876c2 0%, #385380 100%); /* FF3.6+ */
  background: -webkit-gradient(
    linear,
    left top,
    left bottom,
    color-stop(0%, #3876c2),
    color-stop(100%, #385380)
  ); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(
    top,
    #3876c2 0%,
    #385380 100%
  ); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(
    top,
    #3876c2 0%,
    #385380 100%
  ); /* Opera 11.10+ */
  background: -ms-linear-gradient(top, #3876c2 0%, #385380 100%); /* IE10+ */
  background: linear-gradient(to bottom, #3876c2 0%, #385380 100%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#3876c2', endColorstr='#385380',GradientType=0 ); /* IE6-9 */
  box-shadow: #111927 0px 0px 1px 0px;
  margin-top: -7px;
}
input.vis-configuration.vis-config-range:focus {
  outline: none;
}
input.vis-configuration.vis-config-range:focus::-webkit-slider-runnable-track {
  background: #9d9d9d; /* Old browsers */
  background: -moz-linear-gradient(top, #9d9d9d 0%, #c8c8c8 99%); /* FF3.6+ */
  background: -webkit-gradient(
    linear,
    left top,
    left bottom,
    color-stop(0%, #9d9d9d),
    color-stop(99%, #c8c8c8)
  ); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(
    top,
    #9d9d9d 0%,
    #c8c8c8 99%
  ); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(
    top,
    #9d9d9d 0%,
    #c8c8c8 99%
  ); /* Opera 11.10+ */
  background: -ms-linear-gradient(top, #9d9d9d 0%, #c8c8c8 99%); /* IE10+ */
  background: linear-gradient(to bottom, #9d9d9d 0%, #c8c8c8 99%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#9d9d9d', endColorstr='#c8c8c8',GradientType=0 ); /* IE6-9 */
}

input.vis-configuration.vis-config-range::-moz-range-track {
  width: 300px;
  height: 10px;
  background: #dedede; /* Old browsers */
  background: -moz-linear-gradient(top, #dedede 0%, #c8c8c8 99%); /* FF3.6+ */
  background: -webkit-gradient(
    linear,
    left top,
    left bottom,
    color-stop(0%, #dedede),
    color-stop(99%, #c8c8c8)
  ); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(
    top,
    #dedede 0%,
    #c8c8c8 99%
  ); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(
    top,
    #dedede 0%,
    #c8c8c8 99%
  ); /* Opera 11.10+ */
  background: -ms-linear-gradient(top, #dedede 0%, #c8c8c8 99%); /* IE10+ */
  background: linear-gradient(to bottom, #dedede 0%, #c8c8c8 99%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#dedede', endColorstr='#c8c8c8',GradientType=0 ); /* IE6-9 */

  border: 1px solid #999999;
  box-shadow: #aaaaaa 0px 0px 3px 0px;
  border-radius: 3px;
}
input.vis-configuration.vis-config-range::-moz-range-thumb {
  border: none;
  height: 16px;
  width: 16px;

  border-radius: 50%;
  background: #385380;
}

/*hide the outline behind the border*/
input.vis-configuration.vis-config-range:-moz-focusring {
  outline: 1px solid white;
  outline-offset: -1px;
}

input.vis-configuration.vis-config-range::-ms-track {
  width: 300px;
  height: 5px;

  /*remove bg colour from the track, we'll use ms-fill-lower and ms-fill-upper instead */
  background: transparent;

  /*leave room for the larger thumb to overflow with a transparent border */
  border-color: transparent;
  border-width: 6px 0;

  /*remove default tick marks*/
  color: transparent;
}
input.vis-configuration.vis-config-range::-ms-fill-lower {
  background: #777;
  border-radius: 10px;
}
input.vis-configuration.vis-config-range::-ms-fill-upper {
  background: #ddd;
  border-radius: 10px;
}
input.vis-configuration.vis-config-range::-ms-thumb {
  border: none;
  height: 16px;
  width: 16px;
  border-radius: 50%;
  background: #385380;
}
input.vis-configuration.vis-config-range:focus::-ms-fill-lower {
  background: #888;
}
input.vis-configuration.vis-config-range:focus::-ms-fill-upper {
  background: #ccc;
}

.vis-configuration-popup {
  position: absolute;
  background: rgba(57, 76, 89, 0.85);
  border: 2px solid #f2faff;
  line-height: 30px;
  height: 30px;
  width: 150px;
  text-align: center;
  color: #ffffff;
  font-size: 14px;
  border-radius: 4px;
  -webkit-transition: opacity 0.3s ease-in-out;
  -moz-transition: opacity 0.3s ease-in-out;
  transition: opacity 0.3s ease-in-out;
}
.vis-configuration-popup:after,
.vis-configuration-popup:before {
  left: 100%;
  top: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none;
}

.vis-configuration-popup:after {
  border-color: rgba(136, 183, 213, 0);
  border-left-color: rgba(57, 76, 89, 0.85);
  border-width: 8px;
  margin-top: -8px;
}
.vis-configuration-popup:before {
  border-color: rgba(194, 225, 245, 0);
  border-left-color: #f2faff;
  border-width: 12px;
  margin-top: -12px;
}
`;Qr(nCe);var rCe=`div.vis-tooltip {
  position: absolute;
  visibility: hidden;
  padding: 5px;
  white-space: nowrap;

  font-family: verdana;
  font-size: 14px;
  color: #000000;
  background-color: #f5f4ed;

  -moz-border-radius: 3px;
  -webkit-border-radius: 3px;
  border-radius: 3px;
  border: 1px solid #808074;

  box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);
  pointer-events: none;

  z-index: 5;
}
`;Qr(rCe);var iCe=`.vis-timeline {
  /*
  -webkit-transition: height .4s ease-in-out;
  transition:         height .4s ease-in-out;
  */
}

.vis-panel {
  /*
  -webkit-transition: height .4s ease-in-out, top .4s ease-in-out;
  transition:         height .4s ease-in-out, top .4s ease-in-out;
  */
}

.vis-axis {
  /*
  -webkit-transition: top .4s ease-in-out;
  transition:         top .4s ease-in-out;
  */
}

/* TODO: get animation working nicely

.vis-item {
  -webkit-transition: top .4s ease-in-out;
  transition:         top .4s ease-in-out;
}

.vis-item.line {
  -webkit-transition: height .4s ease-in-out, top .4s ease-in-out;
  transition:         height .4s ease-in-out, top .4s ease-in-out;
}
/**/
`;Qr(iCe);var sCe=`.vis-current-time {
  background-color: #ff7f6e;
  width: 2px;
  z-index: 1;
  pointer-events: none;
}

.vis-rolling-mode-btn {
  height: 40px;
  width: 40px;
  position: absolute;
  top: 7px;
  right: 20px;
  border-radius: 50%;
  font-size: 28px;
  cursor: pointer;
  opacity: 0.8;
  color: white;
  font-weight: bold;
  text-align: center;
  background: #3876c2;
}
.vis-rolling-mode-btn:before {
  content: "\\26F6";
}

.vis-rolling-mode-btn:hover {
  opacity: 1;
}
`;Qr(sCe);var oCe=`.vis-custom-time {
  background-color: #6e94ff;
  width: 2px;
  cursor: move;
  z-index: 1;
}

.vis-custom-time > .vis-custom-time-marker {
  background-color: inherit;
  color: white;
  font-size: 12px;
  white-space: nowrap;
  padding: 3px 5px;
  top: 0px;
  cursor: initial;
  z-index: inherit;
}
`;Qr(oCe);var aCe=`.vis-panel.vis-background.vis-horizontal .vis-grid.vis-horizontal {
  position: absolute;
  width: 100%;
  height: 0;
  border-bottom: 1px solid;
}

.vis-panel.vis-background.vis-horizontal .vis-grid.vis-minor {
  border-color: #e5e5e5;
}

.vis-panel.vis-background.vis-horizontal .vis-grid.vis-major {
  border-color: #bfbfbf;
}

.vis-data-axis .vis-y-axis.vis-major {
  width: 100%;
  position: absolute;
  color: #4d4d4d;
  white-space: nowrap;
}

.vis-data-axis .vis-y-axis.vis-major.vis-measure {
  padding: 0;
  margin: 0;
  border: 0;
  visibility: hidden;
  width: auto;
}

.vis-data-axis .vis-y-axis.vis-minor {
  position: absolute;
  width: 100%;
  color: #bebebe;
  white-space: nowrap;
}

.vis-data-axis .vis-y-axis.vis-minor.vis-measure {
  padding: 0;
  margin: 0;
  border: 0;
  visibility: hidden;
  width: auto;
}

.vis-data-axis .vis-y-axis.vis-title {
  position: absolute;
  color: #4d4d4d;
  white-space: nowrap;
  bottom: 20px;
  text-align: center;
}

.vis-data-axis .vis-y-axis.vis-title.vis-measure {
  padding: 0;
  margin: 0;
  visibility: hidden;
  width: auto;
}

.vis-data-axis .vis-y-axis.vis-title.vis-left {
  bottom: 0;
  -webkit-transform-origin: left top;
  -moz-transform-origin: left top;
  -ms-transform-origin: left top;
  -o-transform-origin: left top;
  transform-origin: left bottom;
  -webkit-transform: rotate(-90deg);
  -moz-transform: rotate(-90deg);
  -ms-transform: rotate(-90deg);
  -o-transform: rotate(-90deg);
  transform: rotate(-90deg);
}

.vis-data-axis .vis-y-axis.vis-title.vis-right {
  bottom: 0;
  -webkit-transform-origin: right bottom;
  -moz-transform-origin: right bottom;
  -ms-transform-origin: right bottom;
  -o-transform-origin: right bottom;
  transform-origin: right bottom;
  -webkit-transform: rotate(90deg);
  -moz-transform: rotate(90deg);
  -ms-transform: rotate(90deg);
  -o-transform: rotate(90deg);
  transform: rotate(90deg);
}

.vis-legend {
  background-color: rgba(247, 252, 255, 0.65);
  padding: 5px;
  border: 1px solid #b3b3b3;
  box-shadow: 2px 2px 10px rgba(154, 154, 154, 0.55);
}

.vis-legend-text {
  /*font-size: 10px;*/
  white-space: nowrap;
  display: inline-block;
}
`;Qr(aCe);var lCe=`.vis-item {
  position: absolute;
  color: #1a1a1a;
  border-color: #97b0f8;
  border-width: 1px;
  background-color: #d5ddf6;
  display: inline-block;
  z-index: 1;
  /*overflow: hidden;*/
}

.vis-item.vis-selected {
  border-color: #ffc200;
  background-color: #fff785;

  /* z-index must be higher than the z-index of custom time bar and current time bar */
  z-index: 2;
}

.vis-editable.vis-selected {
  cursor: move;
}

.vis-item.vis-point.vis-selected {
  background-color: #fff785;
}

.vis-item.vis-box {
  text-align: center;
  border-style: solid;
  border-radius: 2px;
}

.vis-item.vis-point {
  background: none;
}

.vis-item.vis-dot {
  position: absolute;
  padding: 0;
  border-width: 4px;
  border-style: solid;
  border-radius: 4px;
}

.vis-item.vis-range {
  border-style: solid;
  border-radius: 2px;
  box-sizing: border-box;
}

.vis-item.vis-background {
  border: none;
  background-color: rgba(213, 221, 246, 0.4);
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

.vis-item .vis-item-overflow {
  position: relative;
  width: 100%;
  height: 100%;
  padding: 0;
  margin: 0;
  overflow: hidden;
}

.vis-item-visible-frame {
  white-space: nowrap;
}

.vis-item.vis-range .vis-item-content {
  position: relative;
  display: inline-block;
}

.vis-item.vis-background .vis-item-content {
  position: absolute;
  display: inline-block;
}

.vis-item.vis-line {
  padding: 0;
  position: absolute;
  width: 0;
  border-left-width: 1px;
  border-left-style: solid;
}

.vis-item .vis-item-content {
  white-space: nowrap;
  box-sizing: border-box;
  padding: 5px;
}

.vis-item .vis-onUpdateTime-tooltip {
  position: absolute;
  background: #4f81bd;
  color: white;
  width: 200px;
  text-align: center;
  white-space: nowrap;
  padding: 5px;
  border-radius: 1px;
  transition: 0.4s;
  -o-transition: 0.4s;
  -moz-transition: 0.4s;
  -webkit-transition: 0.4s;
}

.vis-item .vis-delete,
.vis-item .vis-delete-rtl {
  position: absolute;
  top: 0px;
  width: 24px;
  height: 24px;
  box-sizing: border-box;
  padding: 0px 5px;
  cursor: pointer;

  -webkit-transition: background 0.2s linear;
  -moz-transition: background 0.2s linear;
  -ms-transition: background 0.2s linear;
  -o-transition: background 0.2s linear;
  transition: background 0.2s linear;
}

.vis-item .vis-delete {
  right: -24px;
}

.vis-item .vis-delete-rtl {
  left: -24px;
}

.vis-item .vis-delete:after,
.vis-item .vis-delete-rtl:after {
  content: "\\00D7"; /* MULTIPLICATION SIGN */
  color: red;
  font-family: arial, sans-serif;
  font-size: 22px;
  font-weight: bold;

  -webkit-transition: color 0.2s linear;
  -moz-transition: color 0.2s linear;
  -ms-transition: color 0.2s linear;
  -o-transition: color 0.2s linear;
  transition: color 0.2s linear;
}

.vis-item .vis-delete:hover,
.vis-item .vis-delete-rtl:hover {
  background: red;
}

.vis-item .vis-delete:hover:after,
.vis-item .vis-delete-rtl:hover:after {
  color: white;
}

.vis-item .vis-drag-center {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0px;
  cursor: move;
}

.vis-item.vis-range .vis-drag-left {
  position: absolute;
  width: 24px;
  max-width: 20%;
  min-width: 2px;
  height: 100%;
  top: 0;
  left: -4px;

  cursor: w-resize;
}

.vis-item.vis-range .vis-drag-right {
  position: absolute;
  width: 24px;
  max-width: 20%;
  min-width: 2px;
  height: 100%;
  top: 0;
  right: -4px;

  cursor: e-resize;
}

.vis-range.vis-item.vis-readonly .vis-drag-left,
.vis-range.vis-item.vis-readonly .vis-drag-right {
  cursor: auto;
}

.vis-item.vis-cluster {
  vertical-align: center;
  text-align: center;
  border-style: solid;
  border-radius: 2px;
}

.vis-item.vis-cluster-line {
  padding: 0;
  position: absolute;
  width: 0;
  border-left-width: 1px;
  border-left-style: solid;
}

.vis-item.vis-cluster-dot {
  position: absolute;
  padding: 0;
  border-width: 4px;
  border-style: solid;
  border-radius: 4px;
}
`;Qr(lCe);var cCe=`.vis-itemset {
  position: relative;
  padding: 0;
  margin: 0;

  box-sizing: border-box;
}

.vis-itemset .vis-background,
.vis-itemset .vis-foreground {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: visible;
}

.vis-axis {
  position: absolute;
  width: 100%;
  height: 0;
  left: 0;
  z-index: 1;
}

.vis-foreground .vis-group {
  position: relative;
  box-sizing: border-box;
  border-bottom: 1px solid #bfbfbf;
}

.vis-foreground .vis-group:last-child {
  border-bottom: none;
}

.vis-nesting-group {
  cursor: pointer;
}

.vis-label.vis-nested-group.vis-group-level-unknown-but-gte1 {
  background: #f5f5f5;
}
.vis-label.vis-nested-group.vis-group-level-0 {
  background-color: #ffffff;
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-0 .vis-inner {
  padding-left: 0;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-0 .vis-inner {
  padding-right: 0;
}
.vis-label.vis-nested-group.vis-group-level-1 {
  background-color: rgba(0, 0, 0, 0.05);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-1 .vis-inner {
  padding-left: 15px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-1 .vis-inner {
  padding-right: 15px;
}
.vis-label.vis-nested-group.vis-group-level-2 {
  background-color: rgba(0, 0, 0, 0.1);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-2 .vis-inner {
  padding-left: 30px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-2 .vis-inner {
  padding-right: 30px;
}
.vis-label.vis-nested-group.vis-group-level-3 {
  background-color: rgba(0, 0, 0, 0.15);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-3 .vis-inner {
  padding-left: 45px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-3 .vis-inner {
  padding-right: 45px;
}
.vis-label.vis-nested-group.vis-group-level-4 {
  background-color: rgba(0, 0, 0, 0.2);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-4 .vis-inner {
  padding-left: 60px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-4 .vis-inner {
  padding-right: 60px;
}
.vis-label.vis-nested-group.vis-group-level-5 {
  background-color: rgba(0, 0, 0, 0.25);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-5 .vis-inner {
  padding-left: 75px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-5 .vis-inner {
  padding-right: 75px;
}
.vis-label.vis-nested-group.vis-group-level-6 {
  background-color: rgba(0, 0, 0, 0.3);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-6 .vis-inner {
  padding-left: 90px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-6 .vis-inner {
  padding-right: 90px;
}
.vis-label.vis-nested-group.vis-group-level-7 {
  background-color: rgba(0, 0, 0, 0.35);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-7 .vis-inner {
  padding-left: 105px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-7 .vis-inner {
  padding-right: 105px;
}
.vis-label.vis-nested-group.vis-group-level-8 {
  background-color: rgba(0, 0, 0, 0.4);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-8 .vis-inner {
  padding-left: 120px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-8 .vis-inner {
  padding-right: 120px;
}
.vis-label.vis-nested-group.vis-group-level-9 {
  background-color: rgba(0, 0, 0, 0.45);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-9 .vis-inner {
  padding-left: 135px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-9 .vis-inner {
  padding-right: 135px;
}
/* default takes over beginning with level-10 (thats why we add .vis-nested-group
  to the selectors above, to have higher specifity than these rules for the defaults) */
.vis-label.vis-nested-group {
  background-color: rgba(0, 0, 0, 0.5);
}
.vis-ltr .vis-label.vis-nested-group .vis-inner {
  padding-left: 150px;
}
.vis-rtl .vis-label.vis-nested-group .vis-inner {
  padding-right: 150px;
}

.vis-group-level-unknown-but-gte1 {
  border: 1px solid red;
}

/* expanded/collapsed indicators */
.vis-label.vis-nesting-group:before,
.vis-label.vis-nesting-group:before {
  display: inline-block;
  width: 15px;
}
.vis-label.vis-nesting-group.expanded:before {
  content: "\\25BC";
}
.vis-label.vis-nesting-group.collapsed:before {
  content: "\\25B6";
}
.vis-rtl .vis-label.vis-nesting-group.collapsed:before {
  content: "\\25C0";
}
/* compensate missing expanded/collapsed indicator, but only at levels > 0 */
.vis-ltr .vis-label:not(.vis-nesting-group):not(.vis-group-level-0) {
  padding-left: 15px;
}
.vis-rtl .vis-label:not(.vis-nesting-group):not(.vis-group-level-0) {
  padding-right: 15px;
}

.vis-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 10;
}
`;Qr(cCe);var uCe=`.vis-labelset {
  position: relative;

  overflow: hidden;

  box-sizing: border-box;
}

.vis-labelset .vis-label {
  position: relative;
  left: 0;
  top: 0;
  width: 100%;
  color: #4d4d4d;

  box-sizing: border-box;
}

.vis-labelset .vis-label {
  border-bottom: 1px solid #bfbfbf;
}

.vis-labelset .vis-label.draggable {
  cursor: pointer;
}

.vis-group-is-dragging {
  background: rgba(0, 0, 0, 0.1);
}

.vis-labelset .vis-label:last-child {
  border-bottom: none;
}

.vis-labelset .vis-label .vis-inner {
  display: inline-block;
  padding: 5px;
}

.vis-labelset .vis-label .vis-inner.vis-hidden {
  padding: 0;
}
`;Qr(uCe);var hCe=`.vis-panel {
  position: absolute;

  padding: 0;
  margin: 0;

  box-sizing: border-box;
}

.vis-panel.vis-center,
.vis-panel.vis-left,
.vis-panel.vis-right,
.vis-panel.vis-top,
.vis-panel.vis-bottom {
  border: 1px #bfbfbf;
}

.vis-panel.vis-center,
.vis-panel.vis-left,
.vis-panel.vis-right {
  border-top-style: solid;
  border-bottom-style: solid;
  overflow: hidden;
}

.vis-left.vis-panel.vis-vertical-scroll,
.vis-right.vis-panel.vis-vertical-scroll {
  height: 100%;
  overflow-x: hidden;
  overflow-y: scroll;
}

.vis-left.vis-panel.vis-vertical-scroll {
  direction: rtl;
}

.vis-left.vis-panel.vis-vertical-scroll .vis-content {
  direction: ltr;
}

.vis-right.vis-panel.vis-vertical-scroll {
  direction: ltr;
}

.vis-right.vis-panel.vis-vertical-scroll .vis-content {
  direction: rtl;
}

.vis-panel.vis-center,
.vis-panel.vis-top,
.vis-panel.vis-bottom {
  border-left-style: solid;
  border-right-style: solid;
}

.vis-background {
  overflow: hidden;
}

.vis-panel > .vis-content {
  position: relative;
}

.vis-panel .vis-shadow {
  position: absolute;
  width: 100%;
  height: 1px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.8);
  /* TODO: find a nice way to ensure vis-shadows are drawn on top of items
  z-index: 1;
  */
}

.vis-panel .vis-shadow.vis-top {
  top: -1px;
  left: 0;
}

.vis-panel .vis-shadow.vis-bottom {
  bottom: -1px;
  left: 0;
}
`;Qr(hCe);var dCe=`.vis-graph-group0 {
  fill: #4f81bd;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #4f81bd;
}

.vis-graph-group1 {
  fill: #f79646;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #f79646;
}

.vis-graph-group2 {
  fill: #8c51cf;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #8c51cf;
}

.vis-graph-group3 {
  fill: #75c841;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #75c841;
}

.vis-graph-group4 {
  fill: #ff0100;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #ff0100;
}

.vis-graph-group5 {
  fill: #37d8e6;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #37d8e6;
}

.vis-graph-group6 {
  fill: #042662;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #042662;
}

.vis-graph-group7 {
  fill: #00ff26;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #00ff26;
}

.vis-graph-group8 {
  fill: #ff00ff;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #ff00ff;
}

.vis-graph-group9 {
  fill: #8f3938;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #8f3938;
}

.vis-timeline .vis-fill {
  fill-opacity: 0.1;
  stroke: none;
}

.vis-timeline .vis-bar {
  fill-opacity: 0.5;
  stroke-width: 1px;
}

.vis-timeline .vis-point {
  stroke-width: 2px;
  fill-opacity: 1;
}

.vis-timeline .vis-legend-background {
  stroke-width: 1px;
  fill-opacity: 0.9;
  fill: #ffffff;
  stroke: #c2c2c2;
}

.vis-timeline .vis-outline {
  stroke-width: 1px;
  fill-opacity: 1;
  fill: #ffffff;
  stroke: #e5e5e5;
}

.vis-timeline .vis-icon-fill {
  fill-opacity: 0.3;
  stroke: none;
}
`;Qr(dCe);var fCe=`.vis-time-axis {
  position: relative;
  overflow: hidden;
}

.vis-time-axis.vis-foreground {
  top: 0;
  left: 0;
  width: 100%;
}

.vis-time-axis.vis-background {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.vis-time-axis .vis-text {
  position: absolute;
  color: #4d4d4d;
  padding: 3px;
  overflow: hidden;
  box-sizing: border-box;

  white-space: nowrap;
}

.vis-time-axis .vis-text.vis-measure {
  position: absolute;
  padding-left: 0;
  padding-right: 0;
  margin-left: 0;
  margin-right: 0;
  visibility: hidden;
}

.vis-time-axis .vis-grid.vis-vertical {
  position: absolute;
  border-left: 1px solid;
}

.vis-time-axis .vis-grid.vis-vertical-rtl {
  position: absolute;
  border-right: 1px solid;
}

.vis-time-axis .vis-grid.vis-minor {
  border-color: #e5e5e5;
}

.vis-time-axis .vis-grid.vis-major {
  border-color: #bfbfbf;
}
`;Qr(fCe);var pCe=`.vis-timeline {
  position: relative;
  border: 1px solid #bfbfbf;
  overflow: hidden;
  padding: 0;
  margin: 0;
  box-sizing: border-box;
}

.vis-loading-screen {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
}
`;Qr(pCe);var w8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nt(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Us(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ZI={exports:{}},ay={exports:{}},mCe=ay.exports,_8;function Ws(){return _8||(_8=1,function(n,e){(function(t,r){n.exports=r()})(mCe,function(){var t;function r(){return t.apply(null,arguments)}function i(p){t=p}function s(p){return p instanceof Array||Object.prototype.toString.call(p)==="[object Array]"}function o(p){return p!=null&&Object.prototype.toString.call(p)==="[object Object]"}function a(p,x){return Object.prototype.hasOwnProperty.call(p,x)}function l(p){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(p).length===0;var x;for(x in p)if(a(p,x))return!1;return!0}function c(p){return p===void 0}function u(p){return typeof p=="number"||Object.prototype.toString.call(p)==="[object Number]"}function h(p){return p instanceof Date||Object.prototype.toString.call(p)==="[object Date]"}function d(p,x){var M=[],P,N=p.length;for(P=0;P<N;++P)M.push(x(p[P],P));return M}function f(p,x){for(var M in x)a(x,M)&&(p[M]=x[M]);return a(x,"toString")&&(p.toString=x.toString),a(x,"valueOf")&&(p.valueOf=x.valueOf),p}function m(p,x,M,P){return QD(p,x,M,P,!0).utc()}function g(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function v(p){return p._pf==null&&(p._pf=g()),p._pf}var y;Array.prototype.some?y=Array.prototype.some:y=function(p){var x=Object(this),M=x.length>>>0,P;for(P=0;P<M;P++)if(P in x&&p.call(this,x[P],P,x))return!0;return!1};function b(p){var x=null,M=!1,P=p._d&&!isNaN(p._d.getTime());if(P&&(x=v(p),M=y.call(x.parsedDateParts,function(N){return N!=null}),P=x.overflow<0&&!x.empty&&!x.invalidEra&&!x.invalidMonth&&!x.invalidWeekday&&!x.weekdayMismatch&&!x.nullInput&&!x.invalidFormat&&!x.userInvalidated&&(!x.meridiem||x.meridiem&&M),p._strict&&(P=P&&x.charsLeftOver===0&&x.unusedTokens.length===0&&x.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(p))p._isValid=P;else return P;return p._isValid}function w(p){var x=m(NaN);return p!=null?f(v(x),p):v(x).userInvalidated=!0,x}var S=r.momentProperties=[],_=!1;function E(p,x){var M,P,N,V=S.length;if(c(x._isAMomentObject)||(p._isAMomentObject=x._isAMomentObject),c(x._i)||(p._i=x._i),c(x._f)||(p._f=x._f),c(x._l)||(p._l=x._l),c(x._strict)||(p._strict=x._strict),c(x._tzm)||(p._tzm=x._tzm),c(x._isUTC)||(p._isUTC=x._isUTC),c(x._offset)||(p._offset=x._offset),c(x._pf)||(p._pf=v(x)),c(x._locale)||(p._locale=x._locale),V>0)for(M=0;M<V;M++)P=S[M],N=x[P],c(N)||(p[P]=N);return p}function C(p){E(this,p),this._d=new Date(p._d!=null?p._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),_===!1&&(_=!0,r.updateOffset(this),_=!1)}function T(p){return p instanceof C||p!=null&&p._isAMomentObject!=null}function O(p){r.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+p)}function R(p,x){var M=!0;return f(function(){if(r.deprecationHandler!=null&&r.deprecationHandler(null,p),M){var P=[],N,V,re,ze=arguments.length;for(V=0;V<ze;V++){if(N="",typeof arguments[V]=="object"){N+=`
[`+V+"] ";for(re in arguments[0])a(arguments[0],re)&&(N+=re+": "+arguments[0][re]+", ");N=N.slice(0,-2)}else N=arguments[V];P.push(N)}O(p+`
Arguments: `+Array.prototype.slice.call(P).join("")+`
`+new Error().stack),M=!1}return x.apply(this,arguments)},x)}var D={};function A(p,x){r.deprecationHandler!=null&&r.deprecationHandler(p,x),D[p]||(O(x),D[p]=!0)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null;function F(p){return typeof Function<"u"&&p instanceof Function||Object.prototype.toString.call(p)==="[object Function]"}function z(p){var x,M;for(M in p)a(p,M)&&(x=p[M],F(x)?this[M]=x:this["_"+M]=x);this._config=p,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function j(p,x){var M=f({},p),P;for(P in x)a(x,P)&&(o(p[P])&&o(x[P])?(M[P]={},f(M[P],p[P]),f(M[P],x[P])):x[P]!=null?M[P]=x[P]:delete M[P]);for(P in p)a(p,P)&&!a(x,P)&&o(p[P])&&(M[P]=f({},M[P]));return M}function L(p){p!=null&&this.set(p)}var B;Object.keys?B=Object.keys:B=function(p){var x,M=[];for(x in p)a(p,x)&&M.push(x);return M};var $={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function U(p,x,M){var P=this._calendar[p]||this._calendar.sameElse;return F(P)?P.call(x,M):P}function H(p,x,M){var P=""+Math.abs(p),N=x-P.length,V=p>=0;return(V?M?"+":"":"-")+Math.pow(10,Math.max(0,N)).toString().substr(1)+P}var K=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,J=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Z={},q={};function X(p,x,M,P){var N=P;typeof P=="string"&&(N=function(){return this[P]()}),p&&(q[p]=N),x&&(q[x[0]]=function(){return H(N.apply(this,arguments),x[1],x[2])}),M&&(q[M]=function(){return this.localeData().ordinal(N.apply(this,arguments),p)})}function G(p){return p.match(/\[[\s\S]/)?p.replace(/^\[|\]$/g,""):p.replace(/\\/g,"")}function ne(p){var x=p.match(K),M,P;for(M=0,P=x.length;M<P;M++)q[x[M]]?x[M]=q[x[M]]:x[M]=G(x[M]);return function(N){var V="",re;for(re=0;re<P;re++)V+=F(x[re])?x[re].call(N,p):x[re];return V}}function te(p,x){return p.isValid()?(x=be(x,p.localeData()),Z[x]=Z[x]||ne(x),Z[x](p)):p.localeData().invalidDate()}function be(p,x){var M=5;function P(N){return x.longDateFormat(N)||N}for(J.lastIndex=0;M>=0&&J.test(p);)p=p.replace(J,P),J.lastIndex=0,M-=1;return p}var Y={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function ee(p){var x=this._longDateFormat[p],M=this._longDateFormat[p.toUpperCase()];return x||!M?x:(this._longDateFormat[p]=M.match(K).map(function(P){return P==="MMMM"||P==="MM"||P==="DD"||P==="dddd"?P.slice(1):P}).join(""),this._longDateFormat[p])}var pe="Invalid date";function ge(){return this._invalidDate}var qe="%d",De=/\d{1,2}/;function _e(p){return this._ordinal.replace("%d",p)}var Ae={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function et(p,x,M,P){var N=this._relativeTime[M];return F(N)?N(p,x,M,P):N.replace(/%d/i,p)}function Ee(p,x){var M=this._relativeTime[p>0?"future":"past"];return F(M)?M(x):M.replace(/%s/i,x)}var Re={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Xe(p){return typeof p=="string"?Re[p]||Re[p.toLowerCase()]:void 0}function Ue(p){var x={},M,P;for(P in p)a(p,P)&&(M=Xe(P),M&&(x[M]=p[P]));return x}var ct={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Ht(p){var x=[],M;for(M in p)a(p,M)&&x.push({unit:M,priority:ct[M]});return x.sort(function(P,N){return P.priority-N.priority}),x}var fe=/\d/,ae=/\d\d/,se=/\d{3}/,Pe=/\d{4}/,Ge=/[+-]?\d{6}/,me=/\d\d?/,ve=/\d\d\d\d?/,oe=/\d\d\d\d\d\d?/,ke=/\d{1,3}/,Oe=/\d{1,4}/,ye=/[+-]?\d{1,6}/,Le=/\d+/,ot=/[+-]?\d+/,en=/Z|[+-]\d\d:?\d\d/gi,$t=/Z|[+-]\d\d(?::?\d\d)?/gi,dn=/[+-]?\d+(\.\d{1,3})?/,Pn=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,He=/^[1-9]\d?/,ht=/^([1-9]\d|\d)/,Me;Me={};function le(p,x,M){Me[p]=F(x)?x:function(P,N){return P&&M?M:x}}function lt(p,x){return a(Me,p)?Me[p](x._strict,x._locale):new RegExp(mt(p))}function mt(p){return Ie(p.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(x,M,P,N,V){return M||P||N||V}))}function Ie(p){return p.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Fe(p){return p<0?Math.ceil(p)||0:Math.floor(p)}function Ce(p){var x=+p,M=0;return x!==0&&isFinite(x)&&(M=Fe(x)),M}var Bt={};function Qe(p,x){var M,P=x,N;for(typeof p=="string"&&(p=[p]),u(x)&&(P=function(V,re){re[x]=Ce(V)}),N=p.length,M=0;M<N;M++)Bt[p[M]]=P}function Yt(p,x){Qe(p,function(M,P,N,V){N._w=N._w||{},x(M,N._w,N,V)})}function We(p,x,M){x!=null&&a(Bt,p)&&Bt[p](x,M._a,M,p)}function Ze(p){return p%4===0&&p%100!==0||p%400===0}var Ne=0,rt=1,dt=2,tt=3,xt=4,At=5,Tt=6,Gn=7,wa=8;X("Y",0,0,function(){var p=this.year();return p<=9999?H(p,4):"+"+p}),X(0,["YY",2],0,function(){return this.year()%100}),X(0,["YYYY",4],0,"year"),X(0,["YYYYY",5],0,"year"),X(0,["YYYYYY",6,!0],0,"year"),le("Y",ot),le("YY",me,ae),le("YYYY",Oe,Pe),le("YYYYY",ye,Ge),le("YYYYYY",ye,Ge),Qe(["YYYYY","YYYYYY"],Ne),Qe("YYYY",function(p,x){x[Ne]=p.length===2?r.parseTwoDigitYear(p):Ce(p)}),Qe("YY",function(p,x){x[Ne]=r.parseTwoDigitYear(p)}),Qe("Y",function(p,x){x[Ne]=parseInt(p,10)});function gr(p){return Ze(p)?366:365}r.parseTwoDigitYear=function(p){return Ce(p)+(Ce(p)>68?1900:2e3)};var Gs=kt("FullYear",!0);function _a(){return Ze(this.year())}function kt(p,x){return function(M){return M!=null?(To(this,p,M),r.updateOffset(this,x),this):vs(this,p)}}function vs(p,x){if(!p.isValid())return NaN;var M=p._d,P=p._isUTC;switch(x){case"Milliseconds":return P?M.getUTCMilliseconds():M.getMilliseconds();case"Seconds":return P?M.getUTCSeconds():M.getSeconds();case"Minutes":return P?M.getUTCMinutes():M.getMinutes();case"Hours":return P?M.getUTCHours():M.getHours();case"Date":return P?M.getUTCDate():M.getDate();case"Day":return P?M.getUTCDay():M.getDay();case"Month":return P?M.getUTCMonth():M.getMonth();case"FullYear":return P?M.getUTCFullYear():M.getFullYear();default:return NaN}}function To(p,x,M){var P,N,V,re,ze;if(!(!p.isValid()||isNaN(M))){switch(P=p._d,N=p._isUTC,x){case"Milliseconds":return void(N?P.setUTCMilliseconds(M):P.setMilliseconds(M));case"Seconds":return void(N?P.setUTCSeconds(M):P.setSeconds(M));case"Minutes":return void(N?P.setUTCMinutes(M):P.setMinutes(M));case"Hours":return void(N?P.setUTCHours(M):P.setHours(M));case"Date":return void(N?P.setUTCDate(M):P.setDate(M));case"FullYear":break;default:return}V=M,re=p.month(),ze=p.date(),ze=ze===29&&re===1&&!Ze(V)?28:ze,N?P.setUTCFullYear(V,re,ze):P.setFullYear(V,re,ze)}}function Mr(p){return p=Xe(p),F(this[p])?this[p]():this}function Sa(p,x){if(typeof p=="object"){p=Ue(p);var M=Ht(p),P,N=M.length;for(P=0;P<N;P++)this[M[P].unit](p[M[P].unit])}else if(p=Xe(p),F(this[p]))return this[p](x);return this}function ka(p,x){return(p%x+x)%x}var wn;Array.prototype.indexOf?wn=Array.prototype.indexOf:wn=function(p){var x;for(x=0;x<this.length;++x)if(this[x]===p)return x;return-1};function Ca(p,x){if(isNaN(p)||isNaN(x))return NaN;var M=ka(x,12);return p+=(x-M)/12,M===1?Ze(p)?29:28:31-M%7%2}X("M",["MM",2],"Mo",function(){return this.month()+1}),X("MMM",0,0,function(p){return this.localeData().monthsShort(this,p)}),X("MMMM",0,0,function(p){return this.localeData().months(this,p)}),le("M",me,He),le("MM",me,ae),le("MMM",function(p,x){return x.monthsShortRegex(p)}),le("MMMM",function(p,x){return x.monthsRegex(p)}),Qe(["M","MM"],function(p,x){x[rt]=Ce(p)-1}),Qe(["MMM","MMMM"],function(p,x,M,P){var N=M._locale.monthsParse(p,P,M._strict);N!=null?x[rt]=N:v(M).invalidMonth=p});var Kg="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Xg="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),cf=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Be=Pn,ft=Pn;function ut(p,x){return p?s(this._months)?this._months[p.month()]:this._months[(this._months.isFormat||cf).test(x)?"format":"standalone"][p.month()]:s(this._months)?this._months:this._months.standalone}function it(p,x){return p?s(this._monthsShort)?this._monthsShort[p.month()]:this._monthsShort[cf.test(x)?"format":"standalone"][p.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ir(p,x,M){var P,N,V,re=p.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],P=0;P<12;++P)V=m([2e3,P]),this._shortMonthsParse[P]=this.monthsShort(V,"").toLocaleLowerCase(),this._longMonthsParse[P]=this.months(V,"").toLocaleLowerCase();return M?x==="MMM"?(N=wn.call(this._shortMonthsParse,re),N!==-1?N:null):(N=wn.call(this._longMonthsParse,re),N!==-1?N:null):x==="MMM"?(N=wn.call(this._shortMonthsParse,re),N!==-1?N:(N=wn.call(this._longMonthsParse,re),N!==-1?N:null)):(N=wn.call(this._longMonthsParse,re),N!==-1?N:(N=wn.call(this._shortMonthsParse,re),N!==-1?N:null))}function _n(p,x,M){var P,N,V;if(this._monthsParseExact)return ir.call(this,p,x,M);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),P=0;P<12;P++){if(N=m([2e3,P]),M&&!this._longMonthsParse[P]&&(this._longMonthsParse[P]=new RegExp("^"+this.months(N,"").replace(".","")+"$","i"),this._shortMonthsParse[P]=new RegExp("^"+this.monthsShort(N,"").replace(".","")+"$","i")),!M&&!this._monthsParse[P]&&(V="^"+this.months(N,"")+"|^"+this.monthsShort(N,""),this._monthsParse[P]=new RegExp(V.replace(".",""),"i")),M&&x==="MMMM"&&this._longMonthsParse[P].test(p))return P;if(M&&x==="MMM"&&this._shortMonthsParse[P].test(p))return P;if(!M&&this._monthsParse[P].test(p))return P}}function on(p,x){if(!p.isValid())return p;if(typeof x=="string"){if(/^\d+$/.test(x))x=Ce(x);else if(x=p.localeData().monthsParse(x),!u(x))return p}var M=x,P=p.date();return P=P<29?P:Math.min(P,Ca(p.year(),M)),p._isUTC?p._d.setUTCMonth(M,P):p._d.setMonth(M,P),p}function Vn(p){return p!=null?(on(this,p),r.updateOffset(this,!0),this):vs(this,"Month")}function Kn(){return Ca(this.year(),this.month())}function Xn(p){return this._monthsParseExact?(a(this,"_monthsRegex")||fn.call(this),p?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=Be),this._monthsShortStrictRegex&&p?this._monthsShortStrictRegex:this._monthsShortRegex)}function Mo(p){return this._monthsParseExact?(a(this,"_monthsRegex")||fn.call(this),p?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=ft),this._monthsStrictRegex&&p?this._monthsStrictRegex:this._monthsRegex)}function fn(){function p(at,Ct){return Ct.length-at.length}var x=[],M=[],P=[],N,V,re,ze;for(N=0;N<12;N++)V=m([2e3,N]),re=Ie(this.monthsShort(V,"")),ze=Ie(this.months(V,"")),x.push(re),M.push(ze),P.push(ze),P.push(re);x.sort(p),M.sort(p),P.sort(p),this._monthsRegex=new RegExp("^("+P.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+M.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+x.join("|")+")","i")}function Vs(p,x,M,P,N,V,re){var ze;return p<100&&p>=0?(ze=new Date(p+400,x,M,P,N,V,re),isFinite(ze.getFullYear())&&ze.setFullYear(p)):ze=new Date(p,x,M,P,N,V,re),ze}function Io(p){var x,M;return p<100&&p>=0?(M=Array.prototype.slice.call(arguments),M[0]=p+400,x=new Date(Date.UTC.apply(null,M)),isFinite(x.getUTCFullYear())&&x.setUTCFullYear(p)):x=new Date(Date.UTC.apply(null,arguments)),x}function Qg(p,x,M){var P=7+x-M,N=(7+Io(p,0,P).getUTCDay()-x)%7;return-N+P-1}function qD(p,x,M,P,N){var V=(7+M-P)%7,re=Qg(p,P,N),ze=1+7*(x-1)+V+re,at,Ct;return ze<=0?(at=p-1,Ct=gr(at)+ze):ze>gr(p)?(at=p+1,Ct=ze-gr(p)):(at=p,Ct=ze),{year:at,dayOfYear:Ct}}function uf(p,x,M){var P=Qg(p.year(),x,M),N=Math.floor((p.dayOfYear()-P-1)/7)+1,V,re;return N<1?(re=p.year()-1,V=N+Po(re,x,M)):N>Po(p.year(),x,M)?(V=N-Po(p.year(),x,M),re=p.year()+1):(re=p.year(),V=N),{week:V,year:re}}function Po(p,x,M){var P=Qg(p,x,M),N=Qg(p+1,x,M);return(gr(p)-P+N)/7}X("w",["ww",2],"wo","week"),X("W",["WW",2],"Wo","isoWeek"),le("w",me,He),le("ww",me,ae),le("W",me,He),le("WW",me,ae),Yt(["w","ww","W","WW"],function(p,x,M,P){x[P.substr(0,1)]=Ce(p)});function aZ(p){return uf(p,this._week.dow,this._week.doy).week}var lZ={dow:0,doy:6};function cZ(){return this._week.dow}function uZ(){return this._week.doy}function hZ(p){var x=this.localeData().week(this);return p==null?x:this.add((p-x)*7,"d")}function dZ(p){var x=uf(this,1,4).week;return p==null?x:this.add((p-x)*7,"d")}X("d",0,"do","day"),X("dd",0,0,function(p){return this.localeData().weekdaysMin(this,p)}),X("ddd",0,0,function(p){return this.localeData().weekdaysShort(this,p)}),X("dddd",0,0,function(p){return this.localeData().weekdays(this,p)}),X("e",0,0,"weekday"),X("E",0,0,"isoWeekday"),le("d",me),le("e",me),le("E",me),le("dd",function(p,x){return x.weekdaysMinRegex(p)}),le("ddd",function(p,x){return x.weekdaysShortRegex(p)}),le("dddd",function(p,x){return x.weekdaysRegex(p)}),Yt(["dd","ddd","dddd"],function(p,x,M,P){var N=M._locale.weekdaysParse(p,P,M._strict);N!=null?x.d=N:v(M).invalidWeekday=p}),Yt(["d","e","E"],function(p,x,M,P){x[P]=Ce(p)});function fZ(p,x){return typeof p!="string"?p:isNaN(p)?(p=x.weekdaysParse(p),typeof p=="number"?p:null):parseInt(p,10)}function pZ(p,x){return typeof p=="string"?x.weekdaysParse(p)%7||7:isNaN(p)?null:p}function lw(p,x){return p.slice(x,7).concat(p.slice(0,x))}var mZ="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),UD="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),gZ="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),vZ=Pn,yZ=Pn,bZ=Pn;function xZ(p,x){var M=s(this._weekdays)?this._weekdays:this._weekdays[p&&p!==!0&&this._weekdays.isFormat.test(x)?"format":"standalone"];return p===!0?lw(M,this._week.dow):p?M[p.day()]:M}function wZ(p){return p===!0?lw(this._weekdaysShort,this._week.dow):p?this._weekdaysShort[p.day()]:this._weekdaysShort}function _Z(p){return p===!0?lw(this._weekdaysMin,this._week.dow):p?this._weekdaysMin[p.day()]:this._weekdaysMin}function SZ(p,x,M){var P,N,V,re=p.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],P=0;P<7;++P)V=m([2e3,1]).day(P),this._minWeekdaysParse[P]=this.weekdaysMin(V,"").toLocaleLowerCase(),this._shortWeekdaysParse[P]=this.weekdaysShort(V,"").toLocaleLowerCase(),this._weekdaysParse[P]=this.weekdays(V,"").toLocaleLowerCase();return M?x==="dddd"?(N=wn.call(this._weekdaysParse,re),N!==-1?N:null):x==="ddd"?(N=wn.call(this._shortWeekdaysParse,re),N!==-1?N:null):(N=wn.call(this._minWeekdaysParse,re),N!==-1?N:null):x==="dddd"?(N=wn.call(this._weekdaysParse,re),N!==-1||(N=wn.call(this._shortWeekdaysParse,re),N!==-1)?N:(N=wn.call(this._minWeekdaysParse,re),N!==-1?N:null)):x==="ddd"?(N=wn.call(this._shortWeekdaysParse,re),N!==-1||(N=wn.call(this._weekdaysParse,re),N!==-1)?N:(N=wn.call(this._minWeekdaysParse,re),N!==-1?N:null)):(N=wn.call(this._minWeekdaysParse,re),N!==-1||(N=wn.call(this._weekdaysParse,re),N!==-1)?N:(N=wn.call(this._shortWeekdaysParse,re),N!==-1?N:null))}function kZ(p,x,M){var P,N,V;if(this._weekdaysParseExact)return SZ.call(this,p,x,M);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),P=0;P<7;P++){if(N=m([2e3,1]).day(P),M&&!this._fullWeekdaysParse[P]&&(this._fullWeekdaysParse[P]=new RegExp("^"+this.weekdays(N,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[P]=new RegExp("^"+this.weekdaysShort(N,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[P]=new RegExp("^"+this.weekdaysMin(N,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[P]||(V="^"+this.weekdays(N,"")+"|^"+this.weekdaysShort(N,"")+"|^"+this.weekdaysMin(N,""),this._weekdaysParse[P]=new RegExp(V.replace(".",""),"i")),M&&x==="dddd"&&this._fullWeekdaysParse[P].test(p))return P;if(M&&x==="ddd"&&this._shortWeekdaysParse[P].test(p))return P;if(M&&x==="dd"&&this._minWeekdaysParse[P].test(p))return P;if(!M&&this._weekdaysParse[P].test(p))return P}}function CZ(p){if(!this.isValid())return p!=null?this:NaN;var x=vs(this,"Day");return p!=null?(p=fZ(p,this.localeData()),this.add(p-x,"d")):x}function EZ(p){if(!this.isValid())return p!=null?this:NaN;var x=(this.day()+7-this.localeData()._week.dow)%7;return p==null?x:this.add(p-x,"d")}function TZ(p){if(!this.isValid())return p!=null?this:NaN;if(p!=null){var x=pZ(p,this.localeData());return this.day(this.day()%7?x:x-7)}else return this.day()||7}function MZ(p){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||cw.call(this),p?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=vZ),this._weekdaysStrictRegex&&p?this._weekdaysStrictRegex:this._weekdaysRegex)}function IZ(p){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||cw.call(this),p?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=yZ),this._weekdaysShortStrictRegex&&p?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function PZ(p){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||cw.call(this),p?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=bZ),this._weekdaysMinStrictRegex&&p?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function cw(){function p(Fr,Ao){return Ao.length-Fr.length}var x=[],M=[],P=[],N=[],V,re,ze,at,Ct;for(V=0;V<7;V++)re=m([2e3,1]).day(V),ze=Ie(this.weekdaysMin(re,"")),at=Ie(this.weekdaysShort(re,"")),Ct=Ie(this.weekdays(re,"")),x.push(ze),M.push(at),P.push(Ct),N.push(ze),N.push(at),N.push(Ct);x.sort(p),M.sort(p),P.sort(p),N.sort(p),this._weekdaysRegex=new RegExp("^("+N.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+P.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+M.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+x.join("|")+")","i")}function uw(){return this.hours()%12||12}function OZ(){return this.hours()||24}X("H",["HH",2],0,"hour"),X("h",["hh",2],0,uw),X("k",["kk",2],0,OZ),X("hmm",0,0,function(){return""+uw.apply(this)+H(this.minutes(),2)}),X("hmmss",0,0,function(){return""+uw.apply(this)+H(this.minutes(),2)+H(this.seconds(),2)}),X("Hmm",0,0,function(){return""+this.hours()+H(this.minutes(),2)}),X("Hmmss",0,0,function(){return""+this.hours()+H(this.minutes(),2)+H(this.seconds(),2)});function WD(p,x){X(p,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),x)})}WD("a",!0),WD("A",!1);function HD(p,x){return x._meridiemParse}le("a",HD),le("A",HD),le("H",me,ht),le("h",me,He),le("k",me,He),le("HH",me,ae),le("hh",me,ae),le("kk",me,ae),le("hmm",ve),le("hmmss",oe),le("Hmm",ve),le("Hmmss",oe),Qe(["H","HH"],tt),Qe(["k","kk"],function(p,x,M){var P=Ce(p);x[tt]=P===24?0:P}),Qe(["a","A"],function(p,x,M){M._isPm=M._locale.isPM(p),M._meridiem=p}),Qe(["h","hh"],function(p,x,M){x[tt]=Ce(p),v(M).bigHour=!0}),Qe("hmm",function(p,x,M){var P=p.length-2;x[tt]=Ce(p.substr(0,P)),x[xt]=Ce(p.substr(P)),v(M).bigHour=!0}),Qe("hmmss",function(p,x,M){var P=p.length-4,N=p.length-2;x[tt]=Ce(p.substr(0,P)),x[xt]=Ce(p.substr(P,2)),x[At]=Ce(p.substr(N)),v(M).bigHour=!0}),Qe("Hmm",function(p,x,M){var P=p.length-2;x[tt]=Ce(p.substr(0,P)),x[xt]=Ce(p.substr(P))}),Qe("Hmmss",function(p,x,M){var P=p.length-4,N=p.length-2;x[tt]=Ce(p.substr(0,P)),x[xt]=Ce(p.substr(P,2)),x[At]=Ce(p.substr(N))});function RZ(p){return(p+"").toLowerCase().charAt(0)==="p"}var DZ=/[ap]\.?m?\.?/i,NZ=kt("Hours",!0);function AZ(p,x,M){return p>11?M?"pm":"PM":M?"am":"AM"}var YD={calendar:$,longDateFormat:Y,invalidDate:pe,ordinal:qe,dayOfMonthOrdinalParse:De,relativeTime:Ae,months:Kg,monthsShort:Xg,week:lZ,weekdays:mZ,weekdaysMin:gZ,weekdaysShort:UD,meridiemParse:DZ},pn={},hf={},df;function LZ(p,x){var M,P=Math.min(p.length,x.length);for(M=0;M<P;M+=1)if(p[M]!==x[M])return M;return P}function GD(p){return p&&p.toLowerCase().replace("_","-")}function FZ(p){for(var x=0,M,P,N,V;x<p.length;){for(V=GD(p[x]).split("-"),M=V.length,P=GD(p[x+1]),P=P?P.split("-"):null;M>0;){if(N=Jg(V.slice(0,M).join("-")),N)return N;if(P&&P.length>=M&&LZ(V,P)>=M-1)break;M--}x++}return df}function jZ(p){return!!(p&&p.match("^[^/\\\\]*$"))}function Jg(p){var x=null,M;if(pn[p]===void 0&&n&&n.exports&&jZ(p))try{x=df._abbr,M=Us,M("./locale/"+p),Ea(x)}catch{pn[p]=null}return pn[p]}function Ea(p,x){var M;return p&&(c(x)?M=Oo(p):M=hw(p,x),M?df=M:typeof console<"u"&&console.warn&&console.warn("Locale "+p+" not found. Did you forget to load it?")),df._abbr}function hw(p,x){if(x!==null){var M,P=YD;if(x.abbr=p,pn[p]!=null)A("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),P=pn[p]._config;else if(x.parentLocale!=null)if(pn[x.parentLocale]!=null)P=pn[x.parentLocale]._config;else if(M=Jg(x.parentLocale),M!=null)P=M._config;else return hf[x.parentLocale]||(hf[x.parentLocale]=[]),hf[x.parentLocale].push({name:p,config:x}),null;return pn[p]=new L(j(P,x)),hf[p]&&hf[p].forEach(function(N){hw(N.name,N.config)}),Ea(p),pn[p]}else return delete pn[p],null}function $Z(p,x){if(x!=null){var M,P,N=YD;pn[p]!=null&&pn[p].parentLocale!=null?pn[p].set(j(pn[p]._config,x)):(P=Jg(p),P!=null&&(N=P._config),x=j(N,x),P==null&&(x.abbr=p),M=new L(x),M.parentLocale=pn[p],pn[p]=M),Ea(p)}else pn[p]!=null&&(pn[p].parentLocale!=null?(pn[p]=pn[p].parentLocale,p===Ea()&&Ea(p)):pn[p]!=null&&delete pn[p]);return pn[p]}function Oo(p){var x;if(p&&p._locale&&p._locale._abbr&&(p=p._locale._abbr),!p)return df;if(!s(p)){if(x=Jg(p),x)return x;p=[p]}return FZ(p)}function BZ(){return B(pn)}function dw(p){var x,M=p._a;return M&&v(p).overflow===-2&&(x=M[rt]<0||M[rt]>11?rt:M[dt]<1||M[dt]>Ca(M[Ne],M[rt])?dt:M[tt]<0||M[tt]>24||M[tt]===24&&(M[xt]!==0||M[At]!==0||M[Tt]!==0)?tt:M[xt]<0||M[xt]>59?xt:M[At]<0||M[At]>59?At:M[Tt]<0||M[Tt]>999?Tt:-1,v(p)._overflowDayOfYear&&(x<Ne||x>dt)&&(x=dt),v(p)._overflowWeeks&&x===-1&&(x=Gn),v(p)._overflowWeekday&&x===-1&&(x=wa),v(p).overflow=x),p}var zZ=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,qZ=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,UZ=/Z|[+-]\d\d(?::?\d\d)?/,Zg=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],fw=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],WZ=/^\/?Date\((-?\d+)/i,HZ=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,YZ={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function VD(p){var x,M,P=p._i,N=zZ.exec(P)||qZ.exec(P),V,re,ze,at,Ct=Zg.length,Fr=fw.length;if(N){for(v(p).iso=!0,x=0,M=Ct;x<M;x++)if(Zg[x][1].exec(N[1])){re=Zg[x][0],V=Zg[x][2]!==!1;break}if(re==null){p._isValid=!1;return}if(N[3]){for(x=0,M=Fr;x<M;x++)if(fw[x][1].exec(N[3])){ze=(N[2]||" ")+fw[x][0];break}if(ze==null){p._isValid=!1;return}}if(!V&&ze!=null){p._isValid=!1;return}if(N[4])if(UZ.exec(N[4]))at="Z";else{p._isValid=!1;return}p._f=re+(ze||"")+(at||""),mw(p)}else p._isValid=!1}function GZ(p,x,M,P,N,V){var re=[VZ(p),Xg.indexOf(x),parseInt(M,10),parseInt(P,10),parseInt(N,10)];return V&&re.push(parseInt(V,10)),re}function VZ(p){var x=parseInt(p,10);return x<=49?2e3+x:x<=999?1900+x:x}function KZ(p){return p.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function XZ(p,x,M){if(p){var P=UD.indexOf(p),N=new Date(x[0],x[1],x[2]).getDay();if(P!==N)return v(M).weekdayMismatch=!0,M._isValid=!1,!1}return!0}function QZ(p,x,M){if(p)return YZ[p];if(x)return 0;var P=parseInt(M,10),N=P%100,V=(P-N)/100;return V*60+N}function KD(p){var x=HZ.exec(KZ(p._i)),M;if(x){if(M=GZ(x[4],x[3],x[2],x[5],x[6],x[7]),!XZ(x[1],M,p))return;p._a=M,p._tzm=QZ(x[8],x[9],x[10]),p._d=Io.apply(null,p._a),p._d.setUTCMinutes(p._d.getUTCMinutes()-p._tzm),v(p).rfc2822=!0}else p._isValid=!1}function JZ(p){var x=WZ.exec(p._i);if(x!==null){p._d=new Date(+x[1]);return}if(VD(p),p._isValid===!1)delete p._isValid;else return;if(KD(p),p._isValid===!1)delete p._isValid;else return;p._strict?p._isValid=!1:r.createFromInputFallback(p)}r.createFromInputFallback=R("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(p){p._d=new Date(p._i+(p._useUTC?" UTC":""))});function Su(p,x,M){return p??x??M}function ZZ(p){var x=new Date(r.now());return p._useUTC?[x.getUTCFullYear(),x.getUTCMonth(),x.getUTCDate()]:[x.getFullYear(),x.getMonth(),x.getDate()]}function pw(p){var x,M,P=[],N,V,re;if(!p._d){for(N=ZZ(p),p._w&&p._a[dt]==null&&p._a[rt]==null&&eee(p),p._dayOfYear!=null&&(re=Su(p._a[Ne],N[Ne]),(p._dayOfYear>gr(re)||p._dayOfYear===0)&&(v(p)._overflowDayOfYear=!0),M=Io(re,0,p._dayOfYear),p._a[rt]=M.getUTCMonth(),p._a[dt]=M.getUTCDate()),x=0;x<3&&p._a[x]==null;++x)p._a[x]=P[x]=N[x];for(;x<7;x++)p._a[x]=P[x]=p._a[x]==null?x===2?1:0:p._a[x];p._a[tt]===24&&p._a[xt]===0&&p._a[At]===0&&p._a[Tt]===0&&(p._nextDay=!0,p._a[tt]=0),p._d=(p._useUTC?Io:Vs).apply(null,P),V=p._useUTC?p._d.getUTCDay():p._d.getDay(),p._tzm!=null&&p._d.setUTCMinutes(p._d.getUTCMinutes()-p._tzm),p._nextDay&&(p._a[tt]=24),p._w&&typeof p._w.d<"u"&&p._w.d!==V&&(v(p).weekdayMismatch=!0)}}function eee(p){var x,M,P,N,V,re,ze,at,Ct;x=p._w,x.GG!=null||x.W!=null||x.E!=null?(V=1,re=4,M=Su(x.GG,p._a[Ne],uf(an(),1,4).year),P=Su(x.W,1),N=Su(x.E,1),(N<1||N>7)&&(at=!0)):(V=p._locale._week.dow,re=p._locale._week.doy,Ct=uf(an(),V,re),M=Su(x.gg,p._a[Ne],Ct.year),P=Su(x.w,Ct.week),x.d!=null?(N=x.d,(N<0||N>6)&&(at=!0)):x.e!=null?(N=x.e+V,(x.e<0||x.e>6)&&(at=!0)):N=V),P<1||P>Po(M,V,re)?v(p)._overflowWeeks=!0:at!=null?v(p)._overflowWeekday=!0:(ze=qD(M,P,N,V,re),p._a[Ne]=ze.year,p._dayOfYear=ze.dayOfYear)}r.ISO_8601=function(){},r.RFC_2822=function(){};function mw(p){if(p._f===r.ISO_8601){VD(p);return}if(p._f===r.RFC_2822){KD(p);return}p._a=[],v(p).empty=!0;var x=""+p._i,M,P,N,V,re,ze=x.length,at=0,Ct,Fr;for(N=be(p._f,p._locale).match(K)||[],Fr=N.length,M=0;M<Fr;M++)V=N[M],P=(x.match(lt(V,p))||[])[0],P&&(re=x.substr(0,x.indexOf(P)),re.length>0&&v(p).unusedInput.push(re),x=x.slice(x.indexOf(P)+P.length),at+=P.length),q[V]?(P?v(p).empty=!1:v(p).unusedTokens.push(V),We(V,P,p)):p._strict&&!P&&v(p).unusedTokens.push(V);v(p).charsLeftOver=ze-at,x.length>0&&v(p).unusedInput.push(x),p._a[tt]<=12&&v(p).bigHour===!0&&p._a[tt]>0&&(v(p).bigHour=void 0),v(p).parsedDateParts=p._a.slice(0),v(p).meridiem=p._meridiem,p._a[tt]=tee(p._locale,p._a[tt],p._meridiem),Ct=v(p).era,Ct!==null&&(p._a[Ne]=p._locale.erasConvertYear(Ct,p._a[Ne])),pw(p),dw(p)}function tee(p,x,M){var P;return M==null?x:p.meridiemHour!=null?p.meridiemHour(x,M):(p.isPM!=null&&(P=p.isPM(M),P&&x<12&&(x+=12),!P&&x===12&&(x=0)),x)}function nee(p){var x,M,P,N,V,re,ze=!1,at=p._f.length;if(at===0){v(p).invalidFormat=!0,p._d=new Date(NaN);return}for(N=0;N<at;N++)V=0,re=!1,x=E({},p),p._useUTC!=null&&(x._useUTC=p._useUTC),x._f=p._f[N],mw(x),b(x)&&(re=!0),V+=v(x).charsLeftOver,V+=v(x).unusedTokens.length*10,v(x).score=V,ze?V<P&&(P=V,M=x):(P==null||V<P||re)&&(P=V,M=x,re&&(ze=!0));f(p,M||x)}function ree(p){if(!p._d){var x=Ue(p._i),M=x.day===void 0?x.date:x.day;p._a=d([x.year,x.month,M,x.hour,x.minute,x.second,x.millisecond],function(P){return P&&parseInt(P,10)}),pw(p)}}function iee(p){var x=new C(dw(XD(p)));return x._nextDay&&(x.add(1,"d"),x._nextDay=void 0),x}function XD(p){var x=p._i,M=p._f;return p._locale=p._locale||Oo(p._l),x===null||M===void 0&&x===""?w({nullInput:!0}):(typeof x=="string"&&(p._i=x=p._locale.preparse(x)),T(x)?new C(dw(x)):(h(x)?p._d=x:s(M)?nee(p):M?mw(p):see(p),b(p)||(p._d=null),p))}function see(p){var x=p._i;c(x)?p._d=new Date(r.now()):h(x)?p._d=new Date(x.valueOf()):typeof x=="string"?JZ(p):s(x)?(p._a=d(x.slice(0),function(M){return parseInt(M,10)}),pw(p)):o(x)?ree(p):u(x)?p._d=new Date(x):r.createFromInputFallback(p)}function QD(p,x,M,P,N){var V={};return(x===!0||x===!1)&&(P=x,x=void 0),(M===!0||M===!1)&&(P=M,M=void 0),(o(p)&&l(p)||s(p)&&p.length===0)&&(p=void 0),V._isAMomentObject=!0,V._useUTC=V._isUTC=N,V._l=M,V._i=p,V._f=x,V._strict=P,iee(V)}function an(p,x,M,P){return QD(p,x,M,P,!1)}var oee=R("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var p=an.apply(null,arguments);return this.isValid()&&p.isValid()?p<this?this:p:w()}),aee=R("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var p=an.apply(null,arguments);return this.isValid()&&p.isValid()?p>this?this:p:w()});function JD(p,x){var M,P;if(x.length===1&&s(x[0])&&(x=x[0]),!x.length)return an();for(M=x[0],P=1;P<x.length;++P)(!x[P].isValid()||x[P][p](M))&&(M=x[P]);return M}function lee(){var p=[].slice.call(arguments,0);return JD("isBefore",p)}function cee(){var p=[].slice.call(arguments,0);return JD("isAfter",p)}var uee=function(){return Date.now?Date.now():+new Date},ff=["year","quarter","month","week","day","hour","minute","second","millisecond"];function hee(p){var x,M=!1,P,N=ff.length;for(x in p)if(a(p,x)&&!(wn.call(ff,x)!==-1&&(p[x]==null||!isNaN(p[x]))))return!1;for(P=0;P<N;++P)if(p[ff[P]]){if(M)return!1;parseFloat(p[ff[P]])!==Ce(p[ff[P]])&&(M=!0)}return!0}function dee(){return this._isValid}function fee(){return ys(NaN)}function e0(p){var x=Ue(p),M=x.year||0,P=x.quarter||0,N=x.month||0,V=x.week||x.isoWeek||0,re=x.day||0,ze=x.hour||0,at=x.minute||0,Ct=x.second||0,Fr=x.millisecond||0;this._isValid=hee(x),this._milliseconds=+Fr+Ct*1e3+at*6e4+ze*1e3*60*60,this._days=+re+V*7,this._months=+N+P*3+M*12,this._data={},this._locale=Oo(),this._bubble()}function t0(p){return p instanceof e0}function gw(p){return p<0?Math.round(-1*p)*-1:Math.round(p)}function pee(p,x,M){var P=Math.min(p.length,x.length),N=Math.abs(p.length-x.length),V=0,re;for(re=0;re<P;re++)Ce(p[re])!==Ce(x[re])&&V++;return V+N}function ZD(p,x){X(p,0,0,function(){var M=this.utcOffset(),P="+";return M<0&&(M=-M,P="-"),P+H(~~(M/60),2)+x+H(~~M%60,2)})}ZD("Z",":"),ZD("ZZ",""),le("Z",$t),le("ZZ",$t),Qe(["Z","ZZ"],function(p,x,M){M._useUTC=!0,M._tzm=vw($t,p)});var mee=/([\+\-]|\d\d)/gi;function vw(p,x){var M=(x||"").match(p),P,N,V;return M===null?null:(P=M[M.length-1]||[],N=(P+"").match(mee)||["-",0,0],V=+(N[1]*60)+Ce(N[2]),V===0?0:N[0]==="+"?V:-V)}function yw(p,x){var M,P;return x._isUTC?(M=x.clone(),P=(T(p)||h(p)?p.valueOf():an(p).valueOf())-M.valueOf(),M._d.setTime(M._d.valueOf()+P),r.updateOffset(M,!1),M):an(p).local()}function bw(p){return-Math.round(p._d.getTimezoneOffset())}r.updateOffset=function(){};function gee(p,x,M){var P=this._offset||0,N;if(!this.isValid())return p!=null?this:NaN;if(p!=null){if(typeof p=="string"){if(p=vw($t,p),p===null)return this}else Math.abs(p)<16&&!M&&(p=p*60);return!this._isUTC&&x&&(N=bw(this)),this._offset=p,this._isUTC=!0,N!=null&&this.add(N,"m"),P!==p&&(!x||this._changeInProgress?rN(this,ys(p-P,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?P:bw(this)}function vee(p,x){return p!=null?(typeof p!="string"&&(p=-p),this.utcOffset(p,x),this):-this.utcOffset()}function yee(p){return this.utcOffset(0,p)}function bee(p){return this._isUTC&&(this.utcOffset(0,p),this._isUTC=!1,p&&this.subtract(bw(this),"m")),this}function xee(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var p=vw(en,this._i);p!=null?this.utcOffset(p):this.utcOffset(0,!0)}return this}function wee(p){return this.isValid()?(p=p?an(p).utcOffset():0,(this.utcOffset()-p)%60===0):!1}function _ee(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function See(){if(!c(this._isDSTShifted))return this._isDSTShifted;var p={},x;return E(p,this),p=XD(p),p._a?(x=p._isUTC?m(p._a):an(p._a),this._isDSTShifted=this.isValid()&&pee(p._a,x.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function kee(){return this.isValid()?!this._isUTC:!1}function Cee(){return this.isValid()?this._isUTC:!1}function eN(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Eee=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Tee=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ys(p,x){var M=p,P=null,N,V,re;return t0(p)?M={ms:p._milliseconds,d:p._days,M:p._months}:u(p)||!isNaN(+p)?(M={},x?M[x]=+p:M.milliseconds=+p):(P=Eee.exec(p))?(N=P[1]==="-"?-1:1,M={y:0,d:Ce(P[dt])*N,h:Ce(P[tt])*N,m:Ce(P[xt])*N,s:Ce(P[At])*N,ms:Ce(gw(P[Tt]*1e3))*N}):(P=Tee.exec(p))?(N=P[1]==="-"?-1:1,M={y:zl(P[2],N),M:zl(P[3],N),w:zl(P[4],N),d:zl(P[5],N),h:zl(P[6],N),m:zl(P[7],N),s:zl(P[8],N)}):M==null?M={}:typeof M=="object"&&("from"in M||"to"in M)&&(re=Mee(an(M.from),an(M.to)),M={},M.ms=re.milliseconds,M.M=re.months),V=new e0(M),t0(p)&&a(p,"_locale")&&(V._locale=p._locale),t0(p)&&a(p,"_isValid")&&(V._isValid=p._isValid),V}ys.fn=e0.prototype,ys.invalid=fee;function zl(p,x){var M=p&&parseFloat(p.replace(",","."));return(isNaN(M)?0:M)*x}function tN(p,x){var M={};return M.months=x.month()-p.month()+(x.year()-p.year())*12,p.clone().add(M.months,"M").isAfter(x)&&--M.months,M.milliseconds=+x-+p.clone().add(M.months,"M"),M}function Mee(p,x){var M;return p.isValid()&&x.isValid()?(x=yw(x,p),p.isBefore(x)?M=tN(p,x):(M=tN(x,p),M.milliseconds=-M.milliseconds,M.months=-M.months),M):{milliseconds:0,months:0}}function nN(p,x){return function(M,P){var N,V;return P!==null&&!isNaN(+P)&&(A(x,"moment()."+x+"(period, number) is deprecated. Please use moment()."+x+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),V=M,M=P,P=V),N=ys(M,P),rN(this,N,p),this}}function rN(p,x,M,P){var N=x._milliseconds,V=gw(x._days),re=gw(x._months);p.isValid()&&(P=P??!0,re&&on(p,vs(p,"Month")+re*M),V&&To(p,"Date",vs(p,"Date")+V*M),N&&p._d.setTime(p._d.valueOf()+N*M),P&&r.updateOffset(p,V||re))}var Iee=nN(1,"add"),Pee=nN(-1,"subtract");function iN(p){return typeof p=="string"||p instanceof String}function Oee(p){return T(p)||h(p)||iN(p)||u(p)||Dee(p)||Ree(p)||p===null||p===void 0}function Ree(p){var x=o(p)&&!l(p),M=!1,P=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],N,V,re=P.length;for(N=0;N<re;N+=1)V=P[N],M=M||a(p,V);return x&&M}function Dee(p){var x=s(p),M=!1;return x&&(M=p.filter(function(P){return!u(P)&&iN(p)}).length===0),x&&M}function Nee(p){var x=o(p)&&!l(p),M=!1,P=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],N,V;for(N=0;N<P.length;N+=1)V=P[N],M=M||a(p,V);return x&&M}function Aee(p,x){var M=p.diff(x,"days",!0);return M<-6?"sameElse":M<-1?"lastWeek":M<0?"lastDay":M<1?"sameDay":M<2?"nextDay":M<7?"nextWeek":"sameElse"}function Lee(p,x){arguments.length===1&&(arguments[0]?Oee(arguments[0])?(p=arguments[0],x=void 0):Nee(arguments[0])&&(x=arguments[0],p=void 0):(p=void 0,x=void 0));var M=p||an(),P=yw(M,this).startOf("day"),N=r.calendarFormat(this,P)||"sameElse",V=x&&(F(x[N])?x[N].call(this,M):x[N]);return this.format(V||this.localeData().calendar(N,this,an(M)))}function Fee(){return new C(this)}function jee(p,x){var M=T(p)?p:an(p);return this.isValid()&&M.isValid()?(x=Xe(x)||"millisecond",x==="millisecond"?this.valueOf()>M.valueOf():M.valueOf()<this.clone().startOf(x).valueOf()):!1}function $ee(p,x){var M=T(p)?p:an(p);return this.isValid()&&M.isValid()?(x=Xe(x)||"millisecond",x==="millisecond"?this.valueOf()<M.valueOf():this.clone().endOf(x).valueOf()<M.valueOf()):!1}function Bee(p,x,M,P){var N=T(p)?p:an(p),V=T(x)?x:an(x);return this.isValid()&&N.isValid()&&V.isValid()?(P=P||"()",(P[0]==="("?this.isAfter(N,M):!this.isBefore(N,M))&&(P[1]===")"?this.isBefore(V,M):!this.isAfter(V,M))):!1}function zee(p,x){var M=T(p)?p:an(p),P;return this.isValid()&&M.isValid()?(x=Xe(x)||"millisecond",x==="millisecond"?this.valueOf()===M.valueOf():(P=M.valueOf(),this.clone().startOf(x).valueOf()<=P&&P<=this.clone().endOf(x).valueOf())):!1}function qee(p,x){return this.isSame(p,x)||this.isAfter(p,x)}function Uee(p,x){return this.isSame(p,x)||this.isBefore(p,x)}function Wee(p,x,M){var P,N,V;if(!this.isValid())return NaN;if(P=yw(p,this),!P.isValid())return NaN;switch(N=(P.utcOffset()-this.utcOffset())*6e4,x=Xe(x),x){case"year":V=n0(this,P)/12;break;case"month":V=n0(this,P);break;case"quarter":V=n0(this,P)/3;break;case"second":V=(this-P)/1e3;break;case"minute":V=(this-P)/6e4;break;case"hour":V=(this-P)/36e5;break;case"day":V=(this-P-N)/864e5;break;case"week":V=(this-P-N)/6048e5;break;default:V=this-P}return M?V:Fe(V)}function n0(p,x){if(p.date()<x.date())return-n0(x,p);var M=(x.year()-p.year())*12+(x.month()-p.month()),P=p.clone().add(M,"months"),N,V;return x-P<0?(N=p.clone().add(M-1,"months"),V=(x-P)/(P-N)):(N=p.clone().add(M+1,"months"),V=(x-P)/(N-P)),-(M+V)||0}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Hee(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Yee(p){if(!this.isValid())return null;var x=p!==!0,M=x?this.clone().utc():this;return M.year()<0||M.year()>9999?te(M,x?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):F(Date.prototype.toISOString)?x?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",te(M,"Z")):te(M,x?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Gee(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var p="moment",x="",M,P,N,V;return this.isLocal()||(p=this.utcOffset()===0?"moment.utc":"moment.parseZone",x="Z"),M="["+p+'("]',P=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",N="-MM-DD[T]HH:mm:ss.SSS",V=x+'[")]',this.format(M+P+N+V)}function Vee(p){p||(p=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var x=te(this,p);return this.localeData().postformat(x)}function Kee(p,x){return this.isValid()&&(T(p)&&p.isValid()||an(p).isValid())?ys({to:this,from:p}).locale(this.locale()).humanize(!x):this.localeData().invalidDate()}function Xee(p){return this.from(an(),p)}function Qee(p,x){return this.isValid()&&(T(p)&&p.isValid()||an(p).isValid())?ys({from:this,to:p}).locale(this.locale()).humanize(!x):this.localeData().invalidDate()}function Jee(p){return this.to(an(),p)}function sN(p){var x;return p===void 0?this._locale._abbr:(x=Oo(p),x!=null&&(this._locale=x),this)}var oN=R("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(p){return p===void 0?this.localeData():this.locale(p)});function aN(){return this._locale}var r0=1e3,ku=60*r0,i0=60*ku,lN=(365*400+97)*24*i0;function Cu(p,x){return(p%x+x)%x}function cN(p,x,M){return p<100&&p>=0?new Date(p+400,x,M)-lN:new Date(p,x,M).valueOf()}function uN(p,x,M){return p<100&&p>=0?Date.UTC(p+400,x,M)-lN:Date.UTC(p,x,M)}function Zee(p){var x,M;if(p=Xe(p),p===void 0||p==="millisecond"||!this.isValid())return this;switch(M=this._isUTC?uN:cN,p){case"year":x=M(this.year(),0,1);break;case"quarter":x=M(this.year(),this.month()-this.month()%3,1);break;case"month":x=M(this.year(),this.month(),1);break;case"week":x=M(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":x=M(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":x=M(this.year(),this.month(),this.date());break;case"hour":x=this._d.valueOf(),x-=Cu(x+(this._isUTC?0:this.utcOffset()*ku),i0);break;case"minute":x=this._d.valueOf(),x-=Cu(x,ku);break;case"second":x=this._d.valueOf(),x-=Cu(x,r0);break}return this._d.setTime(x),r.updateOffset(this,!0),this}function ete(p){var x,M;if(p=Xe(p),p===void 0||p==="millisecond"||!this.isValid())return this;switch(M=this._isUTC?uN:cN,p){case"year":x=M(this.year()+1,0,1)-1;break;case"quarter":x=M(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":x=M(this.year(),this.month()+1,1)-1;break;case"week":x=M(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":x=M(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":x=M(this.year(),this.month(),this.date()+1)-1;break;case"hour":x=this._d.valueOf(),x+=i0-Cu(x+(this._isUTC?0:this.utcOffset()*ku),i0)-1;break;case"minute":x=this._d.valueOf(),x+=ku-Cu(x,ku)-1;break;case"second":x=this._d.valueOf(),x+=r0-Cu(x,r0)-1;break}return this._d.setTime(x),r.updateOffset(this,!0),this}function tte(){return this._d.valueOf()-(this._offset||0)*6e4}function nte(){return Math.floor(this.valueOf()/1e3)}function rte(){return new Date(this.valueOf())}function ite(){var p=this;return[p.year(),p.month(),p.date(),p.hour(),p.minute(),p.second(),p.millisecond()]}function ste(){var p=this;return{years:p.year(),months:p.month(),date:p.date(),hours:p.hours(),minutes:p.minutes(),seconds:p.seconds(),milliseconds:p.milliseconds()}}function ote(){return this.isValid()?this.toISOString():null}function ate(){return b(this)}function lte(){return f({},v(this))}function cte(){return v(this).overflow}function ute(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}X("N",0,0,"eraAbbr"),X("NN",0,0,"eraAbbr"),X("NNN",0,0,"eraAbbr"),X("NNNN",0,0,"eraName"),X("NNNNN",0,0,"eraNarrow"),X("y",["y",1],"yo","eraYear"),X("y",["yy",2],0,"eraYear"),X("y",["yyy",3],0,"eraYear"),X("y",["yyyy",4],0,"eraYear"),le("N",xw),le("NN",xw),le("NNN",xw),le("NNNN",wte),le("NNNNN",_te),Qe(["N","NN","NNN","NNNN","NNNNN"],function(p,x,M,P){var N=M._locale.erasParse(p,P,M._strict);N?v(M).era=N:v(M).invalidEra=p}),le("y",Le),le("yy",Le),le("yyy",Le),le("yyyy",Le),le("yo",Ste),Qe(["y","yy","yyy","yyyy"],Ne),Qe(["yo"],function(p,x,M,P){var N;M._locale._eraYearOrdinalRegex&&(N=p.match(M._locale._eraYearOrdinalRegex)),M._locale.eraYearOrdinalParse?x[Ne]=M._locale.eraYearOrdinalParse(p,N):x[Ne]=parseInt(p,10)});function hte(p,x){var M,P,N,V=this._eras||Oo("en")._eras;for(M=0,P=V.length;M<P;++M){switch(typeof V[M].since){case"string":N=r(V[M].since).startOf("day"),V[M].since=N.valueOf();break}switch(typeof V[M].until){case"undefined":V[M].until=1/0;break;case"string":N=r(V[M].until).startOf("day").valueOf(),V[M].until=N.valueOf();break}}return V}function dte(p,x,M){var P,N,V=this.eras(),re,ze,at;for(p=p.toUpperCase(),P=0,N=V.length;P<N;++P)if(re=V[P].name.toUpperCase(),ze=V[P].abbr.toUpperCase(),at=V[P].narrow.toUpperCase(),M)switch(x){case"N":case"NN":case"NNN":if(ze===p)return V[P];break;case"NNNN":if(re===p)return V[P];break;case"NNNNN":if(at===p)return V[P];break}else if([re,ze,at].indexOf(p)>=0)return V[P]}function fte(p,x){var M=p.since<=p.until?1:-1;return x===void 0?r(p.since).year():r(p.since).year()+(x-p.offset)*M}function pte(){var p,x,M,P=this.localeData().eras();for(p=0,x=P.length;p<x;++p)if(M=this.clone().startOf("day").valueOf(),P[p].since<=M&&M<=P[p].until||P[p].until<=M&&M<=P[p].since)return P[p].name;return""}function mte(){var p,x,M,P=this.localeData().eras();for(p=0,x=P.length;p<x;++p)if(M=this.clone().startOf("day").valueOf(),P[p].since<=M&&M<=P[p].until||P[p].until<=M&&M<=P[p].since)return P[p].narrow;return""}function gte(){var p,x,M,P=this.localeData().eras();for(p=0,x=P.length;p<x;++p)if(M=this.clone().startOf("day").valueOf(),P[p].since<=M&&M<=P[p].until||P[p].until<=M&&M<=P[p].since)return P[p].abbr;return""}function vte(){var p,x,M,P,N=this.localeData().eras();for(p=0,x=N.length;p<x;++p)if(M=N[p].since<=N[p].until?1:-1,P=this.clone().startOf("day").valueOf(),N[p].since<=P&&P<=N[p].until||N[p].until<=P&&P<=N[p].since)return(this.year()-r(N[p].since).year())*M+N[p].offset;return this.year()}function yte(p){return a(this,"_erasNameRegex")||ww.call(this),p?this._erasNameRegex:this._erasRegex}function bte(p){return a(this,"_erasAbbrRegex")||ww.call(this),p?this._erasAbbrRegex:this._erasRegex}function xte(p){return a(this,"_erasNarrowRegex")||ww.call(this),p?this._erasNarrowRegex:this._erasRegex}function xw(p,x){return x.erasAbbrRegex(p)}function wte(p,x){return x.erasNameRegex(p)}function _te(p,x){return x.erasNarrowRegex(p)}function Ste(p,x){return x._eraYearOrdinalRegex||Le}function ww(){var p=[],x=[],M=[],P=[],N,V,re,ze,at,Ct=this.eras();for(N=0,V=Ct.length;N<V;++N)re=Ie(Ct[N].name),ze=Ie(Ct[N].abbr),at=Ie(Ct[N].narrow),x.push(re),p.push(ze),M.push(at),P.push(re),P.push(ze),P.push(at);this._erasRegex=new RegExp("^("+P.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+x.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+p.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+M.join("|")+")","i")}X(0,["gg",2],0,function(){return this.weekYear()%100}),X(0,["GG",2],0,function(){return this.isoWeekYear()%100});function s0(p,x){X(0,[p,p.length],0,x)}s0("gggg","weekYear"),s0("ggggg","weekYear"),s0("GGGG","isoWeekYear"),s0("GGGGG","isoWeekYear"),le("G",ot),le("g",ot),le("GG",me,ae),le("gg",me,ae),le("GGGG",Oe,Pe),le("gggg",Oe,Pe),le("GGGGG",ye,Ge),le("ggggg",ye,Ge),Yt(["gggg","ggggg","GGGG","GGGGG"],function(p,x,M,P){x[P.substr(0,2)]=Ce(p)}),Yt(["gg","GG"],function(p,x,M,P){x[P]=r.parseTwoDigitYear(p)});function kte(p){return hN.call(this,p,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Cte(p){return hN.call(this,p,this.isoWeek(),this.isoWeekday(),1,4)}function Ete(){return Po(this.year(),1,4)}function Tte(){return Po(this.isoWeekYear(),1,4)}function Mte(){var p=this.localeData()._week;return Po(this.year(),p.dow,p.doy)}function Ite(){var p=this.localeData()._week;return Po(this.weekYear(),p.dow,p.doy)}function hN(p,x,M,P,N){var V;return p==null?uf(this,P,N).year:(V=Po(p,P,N),x>V&&(x=V),Pte.call(this,p,x,M,P,N))}function Pte(p,x,M,P,N){var V=qD(p,x,M,P,N),re=Io(V.year,0,V.dayOfYear);return this.year(re.getUTCFullYear()),this.month(re.getUTCMonth()),this.date(re.getUTCDate()),this}X("Q",0,"Qo","quarter"),le("Q",fe),Qe("Q",function(p,x){x[rt]=(Ce(p)-1)*3});function Ote(p){return p==null?Math.ceil((this.month()+1)/3):this.month((p-1)*3+this.month()%3)}X("D",["DD",2],"Do","date"),le("D",me,He),le("DD",me,ae),le("Do",function(p,x){return p?x._dayOfMonthOrdinalParse||x._ordinalParse:x._dayOfMonthOrdinalParseLenient}),Qe(["D","DD"],dt),Qe("Do",function(p,x){x[dt]=Ce(p.match(me)[0])});var dN=kt("Date",!0);X("DDD",["DDDD",3],"DDDo","dayOfYear"),le("DDD",ke),le("DDDD",se),Qe(["DDD","DDDD"],function(p,x,M){M._dayOfYear=Ce(p)});function Rte(p){var x=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return p==null?x:this.add(p-x,"d")}X("m",["mm",2],0,"minute"),le("m",me,ht),le("mm",me,ae),Qe(["m","mm"],xt);var Dte=kt("Minutes",!1);X("s",["ss",2],0,"second"),le("s",me,ht),le("ss",me,ae),Qe(["s","ss"],At);var Nte=kt("Seconds",!1);X("S",0,0,function(){return~~(this.millisecond()/100)}),X(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),X(0,["SSS",3],0,"millisecond"),X(0,["SSSS",4],0,function(){return this.millisecond()*10}),X(0,["SSSSS",5],0,function(){return this.millisecond()*100}),X(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),X(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),X(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),X(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),le("S",ke,fe),le("SS",ke,ae),le("SSS",ke,se);var Ta,fN;for(Ta="SSSS";Ta.length<=9;Ta+="S")le(Ta,Le);function Ate(p,x){x[Tt]=Ce(("0."+p)*1e3)}for(Ta="S";Ta.length<=9;Ta+="S")Qe(Ta,Ate);fN=kt("Milliseconds",!1),X("z",0,0,"zoneAbbr"),X("zz",0,0,"zoneName");function Lte(){return this._isUTC?"UTC":""}function Fte(){return this._isUTC?"Coordinated Universal Time":""}var we=C.prototype;we.add=Iee,we.calendar=Lee,we.clone=Fee,we.diff=Wee,we.endOf=ete,we.format=Vee,we.from=Kee,we.fromNow=Xee,we.to=Qee,we.toNow=Jee,we.get=Mr,we.invalidAt=cte,we.isAfter=jee,we.isBefore=$ee,we.isBetween=Bee,we.isSame=zee,we.isSameOrAfter=qee,we.isSameOrBefore=Uee,we.isValid=ate,we.lang=oN,we.locale=sN,we.localeData=aN,we.max=aee,we.min=oee,we.parsingFlags=lte,we.set=Sa,we.startOf=Zee,we.subtract=Pee,we.toArray=ite,we.toObject=ste,we.toDate=rte,we.toISOString=Yee,we.inspect=Gee,typeof Symbol<"u"&&Symbol.for!=null&&(we[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),we.toJSON=ote,we.toString=Hee,we.unix=nte,we.valueOf=tte,we.creationData=ute,we.eraName=pte,we.eraNarrow=mte,we.eraAbbr=gte,we.eraYear=vte,we.year=Gs,we.isLeapYear=_a,we.weekYear=kte,we.isoWeekYear=Cte,we.quarter=we.quarters=Ote,we.month=Vn,we.daysInMonth=Kn,we.week=we.weeks=hZ,we.isoWeek=we.isoWeeks=dZ,we.weeksInYear=Mte,we.weeksInWeekYear=Ite,we.isoWeeksInYear=Ete,we.isoWeeksInISOWeekYear=Tte,we.date=dN,we.day=we.days=CZ,we.weekday=EZ,we.isoWeekday=TZ,we.dayOfYear=Rte,we.hour=we.hours=NZ,we.minute=we.minutes=Dte,we.second=we.seconds=Nte,we.millisecond=we.milliseconds=fN,we.utcOffset=gee,we.utc=yee,we.local=bee,we.parseZone=xee,we.hasAlignedHourOffset=wee,we.isDST=_ee,we.isLocal=kee,we.isUtcOffset=Cee,we.isUtc=eN,we.isUTC=eN,we.zoneAbbr=Lte,we.zoneName=Fte,we.dates=R("dates accessor is deprecated. Use date instead.",dN),we.months=R("months accessor is deprecated. Use month instead",Vn),we.years=R("years accessor is deprecated. Use year instead",Gs),we.zone=R("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",vee),we.isDSTShifted=R("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",See);function jte(p){return an(p*1e3)}function $te(){return an.apply(null,arguments).parseZone()}function pN(p){return p}var Lt=L.prototype;Lt.calendar=U,Lt.longDateFormat=ee,Lt.invalidDate=ge,Lt.ordinal=_e,Lt.preparse=pN,Lt.postformat=pN,Lt.relativeTime=et,Lt.pastFuture=Ee,Lt.set=z,Lt.eras=hte,Lt.erasParse=dte,Lt.erasConvertYear=fte,Lt.erasAbbrRegex=bte,Lt.erasNameRegex=yte,Lt.erasNarrowRegex=xte,Lt.months=ut,Lt.monthsShort=it,Lt.monthsParse=_n,Lt.monthsRegex=Mo,Lt.monthsShortRegex=Xn,Lt.week=aZ,Lt.firstDayOfYear=uZ,Lt.firstDayOfWeek=cZ,Lt.weekdays=xZ,Lt.weekdaysMin=_Z,Lt.weekdaysShort=wZ,Lt.weekdaysParse=kZ,Lt.weekdaysRegex=MZ,Lt.weekdaysShortRegex=IZ,Lt.weekdaysMinRegex=PZ,Lt.isPM=RZ,Lt.meridiem=AZ;function o0(p,x,M,P){var N=Oo(),V=m().set(P,x);return N[M](V,p)}function mN(p,x,M){if(u(p)&&(x=p,p=void 0),p=p||"",x!=null)return o0(p,x,M,"month");var P,N=[];for(P=0;P<12;P++)N[P]=o0(p,P,M,"month");return N}function _w(p,x,M,P){typeof p=="boolean"?(u(x)&&(M=x,x=void 0),x=x||""):(x=p,M=x,p=!1,u(x)&&(M=x,x=void 0),x=x||"");var N=Oo(),V=p?N._week.dow:0,re,ze=[];if(M!=null)return o0(x,(M+V)%7,P,"day");for(re=0;re<7;re++)ze[re]=o0(x,(re+V)%7,P,"day");return ze}function Bte(p,x){return mN(p,x,"months")}function zte(p,x){return mN(p,x,"monthsShort")}function qte(p,x,M){return _w(p,x,M,"weekdays")}function Ute(p,x,M){return _w(p,x,M,"weekdaysShort")}function Wte(p,x,M){return _w(p,x,M,"weekdaysMin")}Ea("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(p){var x=p%10,M=Ce(p%100/10)===1?"th":x===1?"st":x===2?"nd":x===3?"rd":"th";return p+M}}),r.lang=R("moment.lang is deprecated. Use moment.locale instead.",Ea),r.langData=R("moment.langData is deprecated. Use moment.localeData instead.",Oo);var Ro=Math.abs;function Hte(){var p=this._data;return this._milliseconds=Ro(this._milliseconds),this._days=Ro(this._days),this._months=Ro(this._months),p.milliseconds=Ro(p.milliseconds),p.seconds=Ro(p.seconds),p.minutes=Ro(p.minutes),p.hours=Ro(p.hours),p.months=Ro(p.months),p.years=Ro(p.years),this}function gN(p,x,M,P){var N=ys(x,M);return p._milliseconds+=P*N._milliseconds,p._days+=P*N._days,p._months+=P*N._months,p._bubble()}function Yte(p,x){return gN(this,p,x,1)}function Gte(p,x){return gN(this,p,x,-1)}function vN(p){return p<0?Math.floor(p):Math.ceil(p)}function Vte(){var p=this._milliseconds,x=this._days,M=this._months,P=this._data,N,V,re,ze,at;return p>=0&&x>=0&&M>=0||p<=0&&x<=0&&M<=0||(p+=vN(Sw(M)+x)*864e5,x=0,M=0),P.milliseconds=p%1e3,N=Fe(p/1e3),P.seconds=N%60,V=Fe(N/60),P.minutes=V%60,re=Fe(V/60),P.hours=re%24,x+=Fe(re/24),at=Fe(yN(x)),M+=at,x-=vN(Sw(at)),ze=Fe(M/12),M%=12,P.days=x,P.months=M,P.years=ze,this}function yN(p){return p*4800/146097}function Sw(p){return p*146097/4800}function Kte(p){if(!this.isValid())return NaN;var x,M,P=this._milliseconds;if(p=Xe(p),p==="month"||p==="quarter"||p==="year")switch(x=this._days+P/864e5,M=this._months+yN(x),p){case"month":return M;case"quarter":return M/3;case"year":return M/12}else switch(x=this._days+Math.round(Sw(this._months)),p){case"week":return x/7+P/6048e5;case"day":return x+P/864e5;case"hour":return x*24+P/36e5;case"minute":return x*1440+P/6e4;case"second":return x*86400+P/1e3;case"millisecond":return Math.floor(x*864e5)+P;default:throw new Error("Unknown unit "+p)}}function Do(p){return function(){return this.as(p)}}var bN=Do("ms"),Xte=Do("s"),Qte=Do("m"),Jte=Do("h"),Zte=Do("d"),ene=Do("w"),tne=Do("M"),nne=Do("Q"),rne=Do("y"),ine=bN;function sne(){return ys(this)}function one(p){return p=Xe(p),this.isValid()?this[p+"s"]():NaN}function ql(p){return function(){return this.isValid()?this._data[p]:NaN}}var ane=ql("milliseconds"),lne=ql("seconds"),cne=ql("minutes"),une=ql("hours"),hne=ql("days"),dne=ql("months"),fne=ql("years");function pne(){return Fe(this.days()/7)}var No=Math.round,Eu={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function mne(p,x,M,P,N){return N.relativeTime(x||1,!!M,p,P)}function gne(p,x,M,P){var N=ys(p).abs(),V=No(N.as("s")),re=No(N.as("m")),ze=No(N.as("h")),at=No(N.as("d")),Ct=No(N.as("M")),Fr=No(N.as("w")),Ao=No(N.as("y")),Ma=V<=M.ss&&["s",V]||V<M.s&&["ss",V]||re<=1&&["m"]||re<M.m&&["mm",re]||ze<=1&&["h"]||ze<M.h&&["hh",ze]||at<=1&&["d"]||at<M.d&&["dd",at];return M.w!=null&&(Ma=Ma||Fr<=1&&["w"]||Fr<M.w&&["ww",Fr]),Ma=Ma||Ct<=1&&["M"]||Ct<M.M&&["MM",Ct]||Ao<=1&&["y"]||["yy",Ao],Ma[2]=x,Ma[3]=+p>0,Ma[4]=P,mne.apply(null,Ma)}function vne(p){return p===void 0?No:typeof p=="function"?(No=p,!0):!1}function yne(p,x){return Eu[p]===void 0?!1:x===void 0?Eu[p]:(Eu[p]=x,p==="s"&&(Eu.ss=x-1),!0)}function bne(p,x){if(!this.isValid())return this.localeData().invalidDate();var M=!1,P=Eu,N,V;return typeof p=="object"&&(x=p,p=!1),typeof p=="boolean"&&(M=p),typeof x=="object"&&(P=Object.assign({},Eu,x),x.s!=null&&x.ss==null&&(P.ss=x.s-1)),N=this.localeData(),V=gne(this,!M,P,N),M&&(V=N.pastFuture(+this,V)),N.postformat(V)}var kw=Math.abs;function Tu(p){return(p>0)-(p<0)||+p}function a0(){if(!this.isValid())return this.localeData().invalidDate();var p=kw(this._milliseconds)/1e3,x=kw(this._days),M=kw(this._months),P,N,V,re,ze=this.asSeconds(),at,Ct,Fr,Ao;return ze?(P=Fe(p/60),N=Fe(P/60),p%=60,P%=60,V=Fe(M/12),M%=12,re=p?p.toFixed(3).replace(/\.?0+$/,""):"",at=ze<0?"-":"",Ct=Tu(this._months)!==Tu(ze)?"-":"",Fr=Tu(this._days)!==Tu(ze)?"-":"",Ao=Tu(this._milliseconds)!==Tu(ze)?"-":"",at+"P"+(V?Ct+V+"Y":"")+(M?Ct+M+"M":"")+(x?Fr+x+"D":"")+(N||P||p?"T":"")+(N?Ao+N+"H":"")+(P?Ao+P+"M":"")+(p?Ao+re+"S":"")):"P0D"}var Mt=e0.prototype;Mt.isValid=dee,Mt.abs=Hte,Mt.add=Yte,Mt.subtract=Gte,Mt.as=Kte,Mt.asMilliseconds=bN,Mt.asSeconds=Xte,Mt.asMinutes=Qte,Mt.asHours=Jte,Mt.asDays=Zte,Mt.asWeeks=ene,Mt.asMonths=tne,Mt.asQuarters=nne,Mt.asYears=rne,Mt.valueOf=ine,Mt._bubble=Vte,Mt.clone=sne,Mt.get=one,Mt.milliseconds=ane,Mt.seconds=lne,Mt.minutes=cne,Mt.hours=une,Mt.days=hne,Mt.weeks=pne,Mt.months=dne,Mt.years=fne,Mt.humanize=bne,Mt.toISOString=a0,Mt.toString=a0,Mt.toJSON=a0,Mt.locale=sN,Mt.localeData=aN,Mt.toIsoString=R("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",a0),Mt.lang=oN,X("X",0,0,"unix"),X("x",0,0,"valueOf"),le("x",ot),le("X",dn),Qe("X",function(p,x,M){M._d=new Date(parseFloat(p)*1e3)}),Qe("x",function(p,x,M){M._d=new Date(Ce(p))});//! moment.js
return r.version="2.30.1",i(an),r.fn=we,r.min=lee,r.max=cee,r.now=uee,r.utc=m,r.unix=jte,r.months=Bte,r.isDate=h,r.locale=Ea,r.invalid=w,r.duration=ys,r.isMoment=T,r.weekdays=qte,r.parseZone=$te,r.localeData=Oo,r.isDuration=t0,r.monthsShort=zte,r.weekdaysMin=Wte,r.defineLocale=hw,r.updateLocale=$Z,r.locales=BZ,r.weekdaysShort=Ute,r.normalizeUnits=Xe,r.relativeTimeRounding=vne,r.relativeTimeThreshold=yne,r.calendarFormat=Aee,r.prototype=we,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r})}(ay)),ay.exports}var gCe=ZI.exports,S8;function vCe(){return S8||(S8=1,function(n,e){(function(t,r){r(typeof Us=="function"?Ws():t.moment)})(gCe,function(t){//! moment.js locale configuration
function r(s,o,a,l){var c={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[s+" Tage",s+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[s+" Monate",s+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[s+" Jahre",s+" Jahren"]};return o?c[a][0]:c[a][1]}var i=t.defineLocale("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:r,mm:"%d Minuten",h:r,hh:"%d Stunden",d:r,dd:r,w:r,ww:"%d Wochen",M:r,MM:r,y:r,yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return i})}()),ZI.exports}vCe();var eP={exports:{}},yCe=eP.exports,k8;function bCe(){return k8||(k8=1,function(n,e){(function(t,r){r(typeof Us=="function"?Ws():t.moment)})(yCe,function(t){//! moment.js locale configuration
var r="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),i="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),s=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],o=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,a=t.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(l,c){return l?/-MMM-/.test(c)?i[l.month()]:r[l.month()]:r},monthsRegex:o,monthsShortRegex:o,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:s,longMonthsParse:s,shortMonthsParse:s,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(this.hours()!==1?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(this.hours()!==1?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(this.hours()!==1?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(this.hours()!==1?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(this.hours()!==1?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4},invalidDate:"Fecha invlida"});return a})}()),eP.exports}bCe();var tP={exports:{}},xCe=tP.exports,C8;function wCe(){return C8||(C8=1,function(n,e){(function(t,r){r(typeof Us=="function"?Ws():t.moment)})(xCe,function(t){//! moment.js locale configuration
var r=/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i,i=/(janv\.?|fvr\.?|mars|avr\.?|mai|juin|juil\.?|aot|sept\.?|oct\.?|nov\.?|dc\.?)/i,s=/(janv\.?|fvr\.?|mars|avr\.?|mai|juin|juil\.?|aot|sept\.?|oct\.?|nov\.?|dc\.?|janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i,o=[/^janv/i,/^fvr/i,/^mars/i,/^avr/i,/^mai/i,/^juin/i,/^juil/i,/^aot/i,/^sept/i,/^oct/i,/^nov/i,/^dc/i],a=t.defineLocale("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsRegex:s,monthsShortRegex:s,monthsStrictRegex:r,monthsShortStrictRegex:i,monthsParse:o,longMonthsParse:o,shortMonthsParse:o,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",w:"une semaine",ww:"%d semaines",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(l,c){switch(c){case"D":return l+(l===1?"er":"");default:case"M":case"Q":case"DDD":case"d":return l+(l===1?"er":"e");case"w":case"W":return l+(l===1?"re":"e")}},week:{dow:1,doy:4}});return a})}()),tP.exports}wCe();var nP={exports:{}},_Ce=nP.exports,E8;function SCe(){return E8||(E8=1,function(n,e){(function(t,r){r(typeof Us=="function"?Ws():t.moment)})(_Ce,function(t){//! moment.js locale configuration
var r=t.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:function(){return"[Oggi a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"},nextDay:function(){return"[Domani a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"},nextWeek:function(){return"dddd [a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"},lastDay:function(){return"[Ieri a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"},lastWeek:function(){switch(this.day()){case 0:return"[La scorsa] dddd [a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT";default:return"[Lo scorso] dddd [a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"}},sameElse:"L"},relativeTime:{future:"tra %s",past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",w:"una settimana",ww:"%d settimane",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});return r})}()),nP.exports}SCe();var rP={exports:{}},kCe=rP.exports,T8;function CCe(){return T8||(T8=1,function(n,e){(function(t,r){r(typeof Us=="function"?Ws():t.moment)})(kCe,function(t){//! moment.js locale configuration
var r=t.defineLocale("ja",{eras:[{since:"2019-05-01",offset:1,name:"",narrow:"",abbr:"R"},{since:"1989-01-08",until:"2019-04-30",offset:1,name:"",narrow:"",abbr:"H"},{since:"1926-12-25",until:"1989-01-07",offset:1,name:"",narrow:"",abbr:"S"},{since:"1912-07-30",until:"1926-12-24",offset:1,name:"",narrow:"",abbr:"T"},{since:"1873-01-01",until:"1912-07-29",offset:6,name:"",narrow:"",abbr:"M"},{since:"0001-01-01",until:"1873-12-31",offset:1,name:"",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"",narrow:"BC",abbr:"BC"}],eraYearOrdinalRegex:/(|\d+)/,eraYearOrdinalParse:function(i,s){return s[1]===""?1:parseInt(s[1]||i,10)},months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMD dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMD(ddd) HH:mm"},meridiemParse:/|/i,isPM:function(i){return i===""},meridiem:function(i,s,o){return i<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:function(i){return i.week()!==this.week()?"[]dddd LT":"dddd LT"},lastDay:"[] LT",lastWeek:function(i){return this.week()!==i.week()?"[]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(i,s){switch(s){case"y":return i===1?"":i+"";case"d":case"D":case"DDD":return i+"";default:return i}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}});return r})}()),rP.exports}CCe();var iP={exports:{}},ECe=iP.exports,M8;function TCe(){return M8||(M8=1,function(n,e){(function(t,r){r(typeof Us=="function"?Ws():t.moment)})(ECe,function(t){//! moment.js locale configuration
var r="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),i="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),s=[/^jan/i,/^feb/i,/^(maart|mrt\.?)$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],o=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,a=t.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(l,c){return l?/-MMM-/.test(c)?i[l.month()]:r[l.month()]:r},monthsRegex:o,monthsShortRegex:o,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:s,longMonthsParse:s,shortMonthsParse:s,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",w:"n week",ww:"%d weken",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(l){return l+(l===1||l===8||l>=20?"ste":"de")},week:{dow:1,doy:4}});return a})}()),iP.exports}TCe();var sP={exports:{}},MCe=sP.exports,I8;function ICe(){return I8||(I8=1,function(n,e){(function(t,r){r(typeof Us=="function"?Ws():t.moment)})(MCe,function(t){//! moment.js locale configuration
var r="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),i="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_"),s=[/^sty/i,/^lut/i,/^mar/i,/^kwi/i,/^maj/i,/^cze/i,/^lip/i,/^sie/i,/^wrz/i,/^pa/i,/^lis/i,/^gru/i];function o(c){return c%10<5&&c%10>1&&~~(c/10)%10!==1}function a(c,u,h){var d=c+" ";switch(h){case"ss":return d+(o(c)?"sekundy":"sekund");case"m":return u?"minuta":"minut";case"mm":return d+(o(c)?"minuty":"minut");case"h":return u?"godzina":"godzin";case"hh":return d+(o(c)?"godziny":"godzin");case"ww":return d+(o(c)?"tygodnie":"tygodni");case"MM":return d+(o(c)?"miesice":"miesicy");case"yy":return d+(o(c)?"lata":"lat")}}var l=t.defineLocale("pl",{months:function(c,u){return c?/D MMMM/.test(u)?i[c.month()]:r[c.month()]:r},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),monthsParse:s,longMonthsParse:s,shortMonthsParse:s,weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_r_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedziel o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W rod o] LT";case 6:return"[W sobot o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:a,m:a,mm:a,h:a,hh:a,d:"1 dzie",dd:"%d dni",w:"tydzie",ww:a,M:"miesic",MM:a,y:"rok",yy:a},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return l})}()),sP.exports}ICe();var oP={exports:{}},PCe=oP.exports,P8;function OCe(){return P8||(P8=1,function(n,e){(function(t,r){r(typeof Us=="function"?Ws():t.moment)})(PCe,function(t){//! moment.js locale configuration
function r(a,l){var c=a.split("_");return l%10===1&&l%100!==11?c[0]:l%10>=2&&l%10<=4&&(l%100<10||l%100>=20)?c[1]:c[2]}function i(a,l,c){var u={ss:l?"__":"__",mm:l?"__":"__",hh:"__",dd:"__",ww:"__",MM:"__",yy:"__"};return c==="m"?l?"":"":a+" "+r(u[c],+a)}var s=[/^/i,/^/i,/^/i,/^/i,/^[]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],o=t.defineLocale("ru",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:{format:"._._._.____._._._._.".split("_"),standalone:"._.__.____._._._._.".split("_")},weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/\[ ?[] ?(?:||)? ?] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:s,longMonthsParse:s,shortMonthsParse:s,monthsRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsShortRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsStrictRegex:/^([]|[]|?|[]|[]|[]|[]|?|[]|[]|[]|[])/i,monthsShortStrictRegex:/^(\.|?\.|[.]|\.|[]|[.]|[.]|\.|?\.|\.|?\.|\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., H:mm",LLLL:"dddd, D MMMM YYYY ., H:mm"},calendar:{sameDay:"[, ] LT",nextDay:"[, ] LT",lastDay:"[, ] LT",nextWeek:function(a){if(a.week()!==this.week())switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}else return this.day()===2?"[] dddd, [] LT":"[] dddd, [] LT"},lastWeek:function(a){if(a.week()!==this.week())switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}else return this.day()===2?"[] dddd, [] LT":"[] dddd, [] LT"},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:i,m:i,mm:i,h:"",hh:i,d:"",dd:i,w:"",ww:i,M:"",MM:i,y:"",yy:i},meridiemParse:/|||/i,isPM:function(a){return/^(|)$/.test(a)},meridiem:function(a,l,c){return a<4?"":a<12?"":a<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(a,l){switch(l){case"M":case"d":case"DDD":return a+"-";case"D":return a+"-";case"w":case"W":return a+"-";default:return a}},week:{dow:1,doy:4}});return o})}()),oP.exports}OCe();var aP={exports:{}},RCe=aP.exports,O8;function DCe(){return O8||(O8=1,function(n,e){(function(t,r){r(typeof Us=="function"?Ws():t.moment)})(RCe,function(t){//! moment.js locale configuration
var r={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'nc",4:"'nc",100:"'nc",6:"'nc",9:"'uncu",10:"'uncu",30:"'uncu",60:"'nc",90:"'nc"},i=t.defineLocale("tr",{months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pzt_Sal_ar_Per_Cum_Cmt".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),meridiem:function(s,o,a){return s<12?a?"":"":a?"s":"S"},meridiemParse:/||s|S/,isPM:function(s){return s==="s"||s==="S"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[yarn saat] LT",nextWeek:"[gelecek] dddd [saat] LT",lastDay:"[dn] LT",lastWeek:"[geen] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",ss:"%d saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",w:"bir hafta",ww:"%d hafta",M:"bir ay",MM:"%d ay",y:"bir yl",yy:"%d yl"},ordinal:function(s,o){switch(o){case"d":case"D":case"Do":case"DD":return s;default:if(s===0)return s+"'nc";var a=s%10,l=s%100-a,c=s>=100?100:null;return s+(r[a]||r[l]||r[c])}},week:{dow:1,doy:7}});return i})}()),aP.exports}DCe();var lP={exports:{}},NCe=lP.exports,R8;function ACe(){return R8||(R8=1,function(n,e){(function(t,r){r(typeof Us=="function"?Ws():t.moment)})(NCe,function(t){//! moment.js locale configuration
function r(l,c){var u=l.split("_");return c%10===1&&c%100!==11?u[0]:c%10>=2&&c%10<=4&&(c%100<10||c%100>=20)?u[1]:u[2]}function i(l,c,u){var h={ss:c?"__":"__",mm:c?"__":"__",hh:c?"__":"__",dd:"__",MM:"__",yy:"__"};return u==="m"?c?"":"":u==="h"?c?"":"":l+" "+r(h[u],+l)}function s(l,c){var u={nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")},h;return l===!0?u.nominative.slice(1,7).concat(u.nominative.slice(0,1)):l?(h=/(\[[]\]) ?dddd/.test(c)?"accusative":/\[?(?:|)? ?\] ?dddd/.test(c)?"genitive":"nominative",u[h][l.day()]):u.nominative}function o(l){return function(){return l+""+(this.hours()===11?"":"")+"] LT"}}var a=t.defineLocale("uk",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:s,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:o("[ "),nextDay:o("[ "),lastDay:o("[ "),nextWeek:o("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return o("[] dddd [").call(this);case 1:case 2:case 4:return o("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:i,m:i,mm:i,h:"",hh:i,d:"",dd:i,M:"",MM:i,y:"",yy:i},meridiemParse:/|||/,isPM:function(l){return/^(|)$/.test(l)},meridiem:function(l,c,u){return l<4?"":l<12?"":l<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(l,c){switch(c){case"M":case"d":case"DDD":case"w":case"W":return l+"-";case"D":return l+"-";default:return l}},week:{dow:1,doy:7}});return a})}()),lP.exports}ACe();var D8={},Uf,N8;function Ln(){if(N8)return Uf;N8=1;var n=function(e){return e&&e.Math===Math&&e};return Uf=n(typeof globalThis=="object"&&globalThis)||n(typeof window=="object"&&window)||n(typeof self=="object"&&self)||n(typeof w8=="object"&&w8)||n(typeof Uf=="object"&&Uf)||function(){return this}()||Function("return this")(),Uf}var w_,A8;function Pt(){return A8||(A8=1,w_=function(n){try{return!!n()}catch{return!0}}),w_}var __,L8;function Eg(){if(L8)return __;L8=1;var n=Pt();return __=!n(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),__}var S_,F8;function zx(){if(F8)return S_;F8=1;var n=Eg(),e=Function.prototype,t=e.apply,r=e.call;return S_=typeof Reflect=="object"&&Reflect.apply||(n?r.bind(t):function(){return r.apply(t,arguments)}),S_}var k_,j8;function Nt(){if(j8)return k_;j8=1;var n=Eg(),e=Function.prototype,t=e.call,r=n&&e.bind.bind(t,t);return k_=n?r:function(i){return function(){return t.apply(i,arguments)}},k_}var C_,$8;function Co(){if($8)return C_;$8=1;var n=Nt(),e=n({}.toString),t=n("".slice);return C_=function(r){return t(e(r),8,-1)},C_}var E_,B8;function YR(){if(B8)return E_;B8=1;var n=Co(),e=Nt();return E_=function(t){if(n(t)==="Function")return e(t)},E_}var T_,z8;function pr(){if(z8)return T_;z8=1;var n=typeof document=="object"&&document.all;return T_=typeof n>"u"&&n!==void 0?function(e){return typeof e=="function"||e===n}:function(e){return typeof e=="function"},T_}var M_={},I_,q8;function Yn(){if(q8)return I_;q8=1;var n=Pt();return I_=!n(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),I_}var P_,U8;function xi(){if(U8)return P_;U8=1;var n=Eg(),e=Function.prototype.call;return P_=n?e.bind(e):function(){return e.apply(e,arguments)},P_}var O_={},W8;function qx(){if(W8)return O_;W8=1;var n={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,t=e&&!n.call({1:2},1);return O_.f=t?function(i){var s=e(this,i);return!!s&&s.enumerable}:n,O_}var R_,H8;function Tg(){return H8||(H8=1,R_=function(n,e){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:e}}),R_}var D_,Y8;function Ux(){if(Y8)return D_;Y8=1;var n=Nt(),e=Pt(),t=Co(),r=Object,i=n("".split);return D_=e(function(){return!r("z").propertyIsEnumerable(0)})?function(s){return t(s)==="String"?i(s,""):r(s)}:r,D_}var N_,G8;function Mg(){return G8||(G8=1,N_=function(n){return n==null}),N_}var A_,V8;function ya(){if(V8)return A_;V8=1;var n=Mg(),e=TypeError;return A_=function(t){if(n(t))throw new e("Can't call method on "+t);return t},A_}var L_,K8;function Hs(){if(K8)return L_;K8=1;var n=Ux(),e=ya();return L_=function(t){return n(e(t))},L_}var F_,X8;function Lr(){if(X8)return F_;X8=1;var n=pr();return F_=function(e){return typeof e=="object"?e!==null:n(e)},F_}var j_,Q8;function sn(){return Q8||(Q8=1,j_={}),j_}var $_,J8;function qi(){if(J8)return $_;J8=1;var n=sn(),e=Ln(),t=pr(),r=function(i){return t(i)?i:void 0};return $_=function(i,s){return arguments.length<2?r(n[i])||r(e[i]):n[i]&&n[i][s]||e[i]&&e[i][s]},$_}var B_,Z8;function hn(){if(Z8)return B_;Z8=1;var n=Nt();return B_=n({}.isPrototypeOf),B_}var z_,e6;function Kd(){if(e6)return z_;e6=1;var n=Ln(),e=n.navigator,t=e&&e.userAgent;return z_=t?String(t):"",z_}var q_,t6;function Ig(){if(t6)return q_;t6=1;var n=Ln(),e=Kd(),t=n.process,r=n.Deno,i=t&&t.versions||r&&r.version,s=i&&i.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),q_=a,q_}var U_,n6;function Xd(){if(n6)return U_;n6=1;var n=Ig(),e=Pt(),t=Ln(),r=t.String;return U_=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!r(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&n&&n<41}),U_}var W_,r6;function _Q(){if(r6)return W_;r6=1;var n=Xd();return W_=n&&!Symbol.sham&&typeof Symbol.iterator=="symbol",W_}var H_,i6;function Pg(){if(i6)return H_;i6=1;var n=qi(),e=pr(),t=hn(),r=_Q(),i=Object;return H_=r?function(s){return typeof s=="symbol"}:function(s){var o=n("Symbol");return e(o)&&t(o.prototype,i(s))},H_}var Y_,s6;function Qd(){if(s6)return Y_;s6=1;var n=String;return Y_=function(e){try{return n(e)}catch{return"Object"}},Y_}var G_,o6;function Eo(){if(o6)return G_;o6=1;var n=pr(),e=Qd(),t=TypeError;return G_=function(r){if(n(r))return r;throw new t(e(r)+" is not a function")},G_}var V_,a6;function GR(){if(a6)return V_;a6=1;var n=Eo(),e=Mg();return V_=function(t,r){var i=t[r];return e(i)?void 0:n(i)},V_}var K_,l6;function LCe(){if(l6)return K_;l6=1;var n=xi(),e=pr(),t=Lr(),r=TypeError;return K_=function(i,s){var o,a;if(s==="string"&&e(o=i.toString)&&!t(a=n(o,i))||e(o=i.valueOf)&&!t(a=n(o,i))||s!=="string"&&e(o=i.toString)&&!t(a=n(o,i)))return a;throw new r("Can't convert object to primitive value")},K_}var X_={exports:{}},Q_,c6;function Jd(){return c6||(c6=1,Q_=!0),Q_}var J_,u6;function FCe(){if(u6)return J_;u6=1;var n=Ln(),e=Object.defineProperty;return J_=function(t,r){try{e(n,t,{value:r,configurable:!0,writable:!0})}catch{n[t]=r}return r},J_}var h6;function VR(){if(h6)return X_.exports;h6=1;var n=Jd(),e=Ln(),t=FCe(),r="__core-js_shared__",i=X_.exports=e[r]||t(r,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:n?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),X_.exports}var Z_,d6;function Zd(){if(d6)return Z_;d6=1;var n=VR();return Z_=function(e,t){return n[e]||(n[e]=t||{})},Z_}var eS,f6;function wi(){if(f6)return eS;f6=1;var n=ya(),e=Object;return eS=function(t){return e(n(t))},eS}var tS,p6;function mr(){if(p6)return tS;p6=1;var n=Nt(),e=wi(),t=n({}.hasOwnProperty);return tS=Object.hasOwn||function(i,s){return t(e(i),s)},tS}var nS,m6;function Wx(){if(m6)return nS;m6=1;var n=Nt(),e=0,t=Math.random(),r=n(1.1.toString);return nS=function(i){return"Symbol("+(i===void 0?"":i)+")_"+r(++e+t,36)},nS}var rS,g6;function Zn(){if(g6)return rS;g6=1;var n=Ln(),e=Zd(),t=mr(),r=Wx(),i=Xd(),s=_Q(),o=n.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||r;return rS=function(c){return t(a,c)||(a[c]=i&&t(o,c)?o[c]:l("Symbol."+c)),a[c]},rS}var iS,v6;function SQ(){if(v6)return iS;v6=1;var n=xi(),e=Lr(),t=Pg(),r=GR(),i=LCe(),s=Zn(),o=TypeError,a=s("toPrimitive");return iS=function(l,c){if(!e(l)||t(l))return l;var u=r(l,a),h;if(u){if(c===void 0&&(c="default"),h=n(u,l,c),!e(h)||t(h))return h;throw new o("Can't convert object to primitive value")}return c===void 0&&(c="number"),i(l,c)},iS}var sS,y6;function KR(){if(y6)return sS;y6=1;var n=SQ(),e=Pg();return sS=function(t){var r=n(t,"string");return e(r)?r:r+""},sS}var oS,b6;function kQ(){if(b6)return oS;b6=1;var n=Ln(),e=Lr(),t=n.document,r=e(t)&&e(t.createElement);return oS=function(i){return r?t.createElement(i):{}},oS}var aS,x6;function CQ(){if(x6)return aS;x6=1;var n=Yn(),e=Pt(),t=kQ();return aS=!n&&!e(function(){return Object.defineProperty(t("div"),"a",{get:function(){return 7}}).a!==7}),aS}var w6;function Hx(){if(w6)return M_;w6=1;var n=Yn(),e=xi(),t=qx(),r=Tg(),i=Hs(),s=KR(),o=mr(),a=CQ(),l=Object.getOwnPropertyDescriptor;return M_.f=n?l:function(u,h){if(u=i(u),h=s(h),a)try{return l(u,h)}catch{}if(o(u,h))return r(!e(t.f,u,h),u[h])},M_}var lS,_6;function jCe(){if(_6)return lS;_6=1;var n=Pt(),e=pr(),t=/#|\.prototype\./,r=function(l,c){var u=s[i(l)];return u===a?!0:u===o?!1:e(c)?n(c):!!c},i=r.normalize=function(l){return String(l).replace(t,".").toLowerCase()},s=r.data={},o=r.NATIVE="N",a=r.POLYFILL="P";return lS=r,lS}var cS,S6;function Og(){if(S6)return cS;S6=1;var n=YR(),e=Eo(),t=Eg(),r=n(n.bind);return cS=function(i,s){return e(i),s===void 0?i:t?r(i,s):function(){return i.apply(s,arguments)}},cS}var uS={},hS,k6;function EQ(){if(k6)return hS;k6=1;var n=Yn(),e=Pt();return hS=n&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),hS}var dS,C6;function ba(){if(C6)return dS;C6=1;var n=Lr(),e=String,t=TypeError;return dS=function(r){if(n(r))return r;throw new t(e(r)+" is not an object")},dS}var E6;function ps(){if(E6)return uS;E6=1;var n=Yn(),e=CQ(),t=EQ(),r=ba(),i=KR(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",c="configurable",u="writable";return uS.f=n?t?function(d,f,m){if(r(d),f=i(f),r(m),typeof d=="function"&&f==="prototype"&&"value"in m&&u in m&&!m[u]){var g=a(d,f);g&&g[u]&&(d[f]=m.value,m={configurable:c in m?m[c]:g[c],enumerable:l in m?m[l]:g[l],writable:!1})}return o(d,f,m)}:o:function(d,f,m){if(r(d),f=i(f),r(m),e)try{return o(d,f,m)}catch{}if("get"in m||"set"in m)throw new s("Accessors not supported");return"value"in m&&(d[f]=m.value),d},uS}var fS,T6;function ef(){if(T6)return fS;T6=1;var n=Yn(),e=ps(),t=Tg();return fS=n?function(r,i,s){return e.f(r,i,t(1,s))}:function(r,i,s){return r[i]=s,r},fS}var pS,M6;function Je(){if(M6)return pS;M6=1;var n=Ln(),e=zx(),t=YR(),r=pr(),i=Hx().f,s=jCe(),o=sn(),a=Og(),l=ef(),c=mr(),u=function(h){var d=function(f,m,g){if(this instanceof d){switch(arguments.length){case 0:return new h;case 1:return new h(f);case 2:return new h(f,m)}return new h(f,m,g)}return e(h,this,arguments)};return d.prototype=h.prototype,d};return pS=function(h,d){var f=h.target,m=h.global,g=h.stat,v=h.proto,y=m?n:g?n[f]:n[f]&&n[f].prototype,b=m?o:o[f]||l(o,f,{})[f],w=b.prototype,S,_,E,C,T,O,R,D,A;for(C in d)S=s(m?C:f+(g?".":"#")+C,h.forced),_=!S&&y&&c(y,C),O=b[C],_&&(h.dontCallGetSet?(A=i(y,C),R=A&&A.value):R=y[C]),T=_&&R?R:d[C],!(!S&&!v&&typeof O==typeof T)&&(h.bind&&_?D=a(T,n):h.wrap&&_?D=u(T):v&&r(T)?D=t(T):D=T,(h.sham||T&&T.sham||O&&O.sham)&&l(D,"sham",!0),l(b,C,D),v&&(E=f+"Prototype",c(o,E)||l(o,E,{}),l(o[E],C,T),h.real&&w&&(S||!w[C])&&l(w,C,T)))},pS}var mS,I6;function Nl(){if(I6)return mS;I6=1;var n=Co();return mS=Array.isArray||function(t){return n(t)==="Array"},mS}var gS,P6;function $Ce(){if(P6)return gS;P6=1;var n=Math.ceil,e=Math.floor;return gS=Math.trunc||function(r){var i=+r;return(i>0?e:n)(i)},gS}var vS,O6;function tf(){if(O6)return vS;O6=1;var n=$Ce();return vS=function(e){var t=+e;return t!==t||t===0?0:n(t)},vS}var yS,R6;function TQ(){if(R6)return yS;R6=1;var n=tf(),e=Math.min;return yS=function(t){var r=n(t);return r>0?e(r,9007199254740991):0},yS}var bS,D6;function Ys(){if(D6)return bS;D6=1;var n=TQ();return bS=function(e){return n(e.length)},bS}var xS,N6;function XR(){if(N6)return xS;N6=1;var n=TypeError,e=9007199254740991;return xS=function(t){if(t>e)throw n("Maximum allowed index exceeded");return t},xS}var wS,A6;function Yx(){if(A6)return wS;A6=1;var n=Yn(),e=ps(),t=Tg();return wS=function(r,i,s){n?e.f(r,i,t(0,s)):r[i]=s},wS}var _S,L6;function QR(){if(L6)return _S;L6=1;var n=Zn(),e=n("toStringTag"),t={};return t[e]="z",_S=String(t)==="[object z]",_S}var SS,F6;function Al(){if(F6)return SS;F6=1;var n=QR(),e=pr(),t=Co(),r=Zn(),i=r("toStringTag"),s=Object,o=t(function(){return arguments}())==="Arguments",a=function(l,c){try{return l[c]}catch{}};return SS=n?t:function(l){var c,u,h;return l===void 0?"Undefined":l===null?"Null":typeof(u=a(c=s(l),i))=="string"?u:o?t(c):(h=t(c))==="Object"&&e(c.callee)?"Arguments":h},SS}var kS,j6;function BCe(){if(j6)return kS;j6=1;var n=Nt(),e=pr(),t=VR(),r=n(Function.toString);return e(t.inspectSource)||(t.inspectSource=function(i){return r(i)}),kS=t.inspectSource,kS}var CS,$6;function MQ(){if($6)return CS;$6=1;var n=Nt(),e=Pt(),t=pr(),r=Al(),i=qi(),s=BCe(),o=function(){},a=i("Reflect","construct"),l=/^\s*(?:class|function)\b/,c=n(l.exec),u=!l.test(o),h=function(m){if(!t(m))return!1;try{return a(o,[],m),!0}catch{return!1}},d=function(m){if(!t(m))return!1;switch(r(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return u||!!c(l,s(m))}catch{return!0}};return d.sham=!0,CS=!a||e(function(){var f;return h(h.call)||!h(Object)||!h(function(){f=!0})||f})?d:h,CS}var ES,B6;function zCe(){if(B6)return ES;B6=1;var n=Nl(),e=MQ(),t=Lr(),r=Zn(),i=r("species"),s=Array;return ES=function(o){var a;return n(o)&&(a=o.constructor,e(a)&&(a===s||n(a.prototype))?a=void 0:t(a)&&(a=a[i],a===null&&(a=void 0))),a===void 0?s:a},ES}var TS,z6;function Gx(){if(z6)return TS;z6=1;var n=zCe();return TS=function(e,t){return new(n(e))(t===0?0:t)},TS}var MS,q6;function Rg(){if(q6)return MS;q6=1;var n=Pt(),e=Zn(),t=Ig(),r=e("species");return MS=function(i){return t>=51||!n(function(){var s=[],o=s.constructor={};return o[r]=function(){return{foo:1}},s[i](Boolean).foo!==1})},MS}var U6;function IQ(){if(U6)return D8;U6=1;var n=Je(),e=Pt(),t=Nl(),r=Lr(),i=wi(),s=Ys(),o=XR(),a=Yx(),l=Gx(),c=Rg(),u=Zn(),h=Ig(),d=u("isConcatSpreadable"),f=h>=51||!e(function(){var v=[];return v[d]=!1,v.concat()[0]!==v}),m=function(v){if(!r(v))return!1;var y=v[d];return y!==void 0?!!y:t(v)},g=!f||!c("concat");return n({target:"Array",proto:!0,arity:1,forced:g},{concat:function(y){var b=i(this),w=l(b,0),S=0,_,E,C,T,O;for(_=-1,C=arguments.length;_<C;_++)if(O=_===-1?b:arguments[_],m(O))for(T=s(O),o(S+T),E=0;E<T;E++,S++)E in O&&a(w,S,O[E]);else o(S+1),a(w,S++,O);return w.length=S,w}}),D8}var W6={},H6={},IS,Y6;function ms(){if(Y6)return IS;Y6=1;var n=Al(),e=String;return IS=function(t){if(n(t)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(t)},IS}var PS={},OS,G6;function Vx(){if(G6)return OS;G6=1;var n=tf(),e=Math.max,t=Math.min;return OS=function(r,i){var s=n(r);return s<0?e(s+i,0):t(s,i)},OS}var RS,V6;function JR(){if(V6)return RS;V6=1;var n=Hs(),e=Vx(),t=Ys(),r=function(i){return function(s,o,a){var l=n(s),c=t(l);if(c===0)return!i&&-1;var u=e(a,c),h;if(i&&o!==o){for(;c>u;)if(h=l[u++],h!==h)return!0}else for(;c>u;u++)if((i||u in l)&&l[u]===o)return i||u||0;return!i&&-1}};return RS={includes:r(!0),indexOf:r(!1)},RS}var DS,K6;function Dg(){return K6||(K6=1,DS={}),DS}var NS,X6;function PQ(){if(X6)return NS;X6=1;var n=Nt(),e=mr(),t=Hs(),r=JR().indexOf,i=Dg(),s=n([].push);return NS=function(o,a){var l=t(o),c=0,u=[],h;for(h in l)!e(i,h)&&e(l,h)&&s(u,h);for(;a.length>c;)e(l,h=a[c++])&&(~r(u,h)||s(u,h));return u},NS}var AS,Q6;function ZR(){return Q6||(Q6=1,AS=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),AS}var LS,J6;function Ng(){if(J6)return LS;J6=1;var n=PQ(),e=ZR();return LS=Object.keys||function(r){return n(r,e)},LS}var Z6;function eD(){if(Z6)return PS;Z6=1;var n=Yn(),e=EQ(),t=ps(),r=ba(),i=Hs(),s=Ng();return PS.f=n&&!e?Object.defineProperties:function(a,l){r(a);for(var c=i(l),u=s(l),h=u.length,d=0,f;h>d;)t.f(a,f=u[d++],c[f]);return a},PS}var FS,eF;function qCe(){if(eF)return FS;eF=1;var n=qi();return FS=n("document","documentElement"),FS}var jS,tF;function Kx(){if(tF)return jS;tF=1;var n=Zd(),e=Wx(),t=n("keys");return jS=function(r){return t[r]||(t[r]=e(r))},jS}var $S,nF;function Ag(){if(nF)return $S;nF=1;var n=ba(),e=eD(),t=ZR(),r=Dg(),i=qCe(),s=kQ(),o=Kx(),a=">",l="<",c="prototype",u="script",h=o("IE_PROTO"),d=function(){},f=function(b){return l+u+a+b+l+"/"+u+a},m=function(b){b.write(f("")),b.close();var w=b.parentWindow.Object;return b=null,w},g=function(){var b=s("iframe"),w="java"+u+":",S;return b.style.display="none",i.appendChild(b),b.src=String(w),S=b.contentWindow.document,S.open(),S.write(f("document.F=Object")),S.close(),S.F},v,y=function(){try{v=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&v?m(v):g():m(v);for(var b=t.length;b--;)delete y[c][t[b]];return y()};return r[h]=!0,$S=Object.create||function(w,S){var _;return w!==null?(d[c]=n(w),_=new d,d[c]=null,_[h]=w):_=y(),S===void 0?_:e.f(_,S)},$S}var BS={},rF;function Xx(){if(rF)return BS;rF=1;var n=PQ(),e=ZR(),t=e.concat("length","prototype");return BS.f=Object.getOwnPropertyNames||function(i){return n(i,t)},BS}var zS={},qS,iF;function nf(){if(iF)return qS;iF=1;var n=Nt();return qS=n([].slice),qS}var sF;function OQ(){if(sF)return zS;sF=1;var n=Co(),e=Hs(),t=Xx().f,r=nf(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return t(o)}catch{return r(i)}};return zS.f=function(a){return i&&n(a)==="Window"?s(a):t(e(a))},zS}var US={},oF;function Qx(){return oF||(oF=1,US.f=Object.getOwnPropertySymbols),US}var WS,aF;function Lg(){if(aF)return WS;aF=1;var n=ef();return WS=function(e,t,r,i){return i&&i.enumerable?e[t]=r:n(e,t,r),e},WS}var HS,lF;function tD(){if(lF)return HS;lF=1;var n=ps();return HS=function(e,t,r){return n.f(e,t,r)},HS}var YS={},cF;function Jx(){if(cF)return YS;cF=1;var n=Zn();return YS.f=n,YS}var GS,uF;function In(){if(uF)return GS;uF=1;var n=sn(),e=mr(),t=Jx(),r=ps().f;return GS=function(i){var s=n.Symbol||(n.Symbol={});e(s,i)||r(s,i,{value:t.f(i)})},GS}var VS,hF;function RQ(){if(hF)return VS;hF=1;var n=xi(),e=qi(),t=Zn(),r=Lg();return VS=function(){var i=e("Symbol"),s=i&&i.prototype,o=s&&s.valueOf,a=t("toPrimitive");s&&!s[a]&&r(s,a,function(l){return n(o,this)},{arity:1})},VS}var KS,dF;function UCe(){if(dF)return KS;dF=1;var n=QR(),e=Al();return KS=n?{}.toString:function(){return"[object "+e(this)+"]"},KS}var XS,fF;function mu(){if(fF)return XS;fF=1;var n=QR(),e=ps().f,t=ef(),r=mr(),i=UCe(),s=Zn(),o=s("toStringTag");return XS=function(a,l,c,u){var h=c?a:a&&a.prototype;h&&(r(h,o)||e(h,o,{configurable:!0,value:l}),u&&!n&&t(h,"toString",i))},XS}var QS,pF;function WCe(){if(pF)return QS;pF=1;var n=Ln(),e=pr(),t=n.WeakMap;return QS=e(t)&&/native code/.test(String(t)),QS}var JS,mF;function Fg(){if(mF)return JS;mF=1;var n=WCe(),e=Ln(),t=Lr(),r=ef(),i=mr(),s=VR(),o=Kx(),a=Dg(),l="Object already initialized",c=e.TypeError,u=e.WeakMap,h,d,f,m=function(b){return f(b)?d(b):h(b,{})},g=function(b){return function(w){var S;if(!t(w)||(S=d(w)).type!==b)throw new c("Incompatible receiver, "+b+" required");return S}};if(n||s.state){var v=s.state||(s.state=new u);v.get=v.get,v.has=v.has,v.set=v.set,h=function(b,w){if(v.has(b))throw new c(l);return w.facade=b,v.set(b,w),w},d=function(b){return v.get(b)||{}},f=function(b){return v.has(b)}}else{var y=o("state");a[y]=!0,h=function(b,w){if(i(b,y))throw new c(l);return w.facade=b,r(b,y,w),w},d=function(b){return i(b,y)?b[y]:{}},f=function(b){return i(b,y)}}return JS={set:h,get:d,has:f,enforce:m,getterFor:g},JS}var ZS,gF;function Ll(){if(gF)return ZS;gF=1;var n=Og(),e=Nt(),t=Ux(),r=wi(),i=Ys(),s=Gx(),o=e([].push),a=function(l){var c=l===1,u=l===2,h=l===3,d=l===4,f=l===6,m=l===7,g=l===5||f;return function(v,y,b,w){for(var S=r(v),_=t(S),E=i(_),C=n(y,b),T=0,O=w||s,R=c?O(v,E):u||m?O(v,0):void 0,D,A;E>T;T++)if((g||T in _)&&(D=_[T],A=C(D,T,S),l))if(c)R[T]=A;else if(A)switch(l){case 3:return!0;case 5:return D;case 6:return T;case 2:o(R,D)}else switch(l){case 4:return!1;case 7:o(R,D)}return f?-1:h||d?d:R}};return ZS={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},ZS}var vF;function HCe(){if(vF)return H6;vF=1;var n=Je(),e=Ln(),t=xi(),r=Nt(),i=Jd(),s=Yn(),o=Xd(),a=Pt(),l=mr(),c=hn(),u=ba(),h=Hs(),d=KR(),f=ms(),m=Tg(),g=Ag(),v=Ng(),y=Xx(),b=OQ(),w=Qx(),S=Hx(),_=ps(),E=eD(),C=qx(),T=Lg(),O=tD(),R=Zd(),D=Kx(),A=Dg(),F=Wx(),z=Zn(),j=Jx(),L=In(),B=RQ(),$=mu(),U=Fg(),H=Ll().forEach,K=D("hidden"),J="Symbol",Z="prototype",q=U.set,X=U.getterFor(J),G=Object[Z],ne=e.Symbol,te=ne&&ne[Z],be=e.RangeError,Y=e.TypeError,ee=e.QObject,pe=S.f,ge=_.f,qe=b.f,De=C.f,_e=r([].push),Ae=R("symbols"),et=R("op-symbols"),Ee=R("wks"),Re=!ee||!ee[Z]||!ee[Z].findChild,Xe=function(ve,oe,ke){var Oe=pe(G,oe);Oe&&delete G[oe],ge(ve,oe,ke),Oe&&ve!==G&&ge(G,oe,Oe)},Ue=s&&a(function(){return g(ge({},"a",{get:function(){return ge(this,"a",{value:7}).a}})).a!==7})?Xe:ge,ct=function(ve,oe){var ke=Ae[ve]=g(te);return q(ke,{type:J,tag:ve,description:oe}),s||(ke.description=oe),ke},Ht=function(oe,ke,Oe){oe===G&&Ht(et,ke,Oe),u(oe);var ye=d(ke);return u(Oe),l(Ae,ye)?(Oe.enumerable?(l(oe,K)&&oe[K][ye]&&(oe[K][ye]=!1),Oe=g(Oe,{enumerable:m(0,!1)})):(l(oe,K)||ge(oe,K,m(1,g(null))),oe[K][ye]=!0),Ue(oe,ye,Oe)):ge(oe,ye,Oe)},fe=function(oe,ke){u(oe);var Oe=h(ke),ye=v(Oe).concat(me(Oe));return H(ye,function(Le){(!s||t(se,Oe,Le))&&Ht(oe,Le,Oe[Le])}),oe},ae=function(oe,ke){return ke===void 0?g(oe):fe(g(oe),ke)},se=function(oe){var ke=d(oe),Oe=t(De,this,ke);return this===G&&l(Ae,ke)&&!l(et,ke)?!1:Oe||!l(this,ke)||!l(Ae,ke)||l(this,K)&&this[K][ke]?Oe:!0},Pe=function(oe,ke){var Oe=h(oe),ye=d(ke);if(!(Oe===G&&l(Ae,ye)&&!l(et,ye))){var Le=pe(Oe,ye);return Le&&l(Ae,ye)&&!(l(Oe,K)&&Oe[K][ye])&&(Le.enumerable=!0),Le}},Ge=function(oe){var ke=qe(h(oe)),Oe=[];return H(ke,function(ye){!l(Ae,ye)&&!l(A,ye)&&_e(Oe,ye)}),Oe},me=function(ve){var oe=ve===G,ke=qe(oe?et:h(ve)),Oe=[];return H(ke,function(ye){l(Ae,ye)&&(!oe||l(G,ye))&&_e(Oe,Ae[ye])}),Oe};return o||(ne=function(){if(c(te,this))throw new Y("Symbol is not a constructor");var oe=!arguments.length||arguments[0]===void 0?void 0:f(arguments[0]),ke=F(oe),Oe=function(ye){var Le=this===void 0?e:this;Le===G&&t(Oe,et,ye),l(Le,K)&&l(Le[K],ke)&&(Le[K][ke]=!1);var ot=m(1,ye);try{Ue(Le,ke,ot)}catch(en){if(!(en instanceof be))throw en;Xe(Le,ke,ot)}};return s&&Re&&Ue(G,ke,{configurable:!0,set:Oe}),ct(ke,oe)},te=ne[Z],T(te,"toString",function(){return X(this).tag}),T(ne,"withoutSetter",function(ve){return ct(F(ve),ve)}),C.f=se,_.f=Ht,E.f=fe,S.f=Pe,y.f=b.f=Ge,w.f=me,j.f=function(ve){return ct(z(ve),ve)},s&&(O(te,"description",{configurable:!0,get:function(){return X(this).description}}),i||T(G,"propertyIsEnumerable",se,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:ne}),H(v(Ee),function(ve){L(ve)}),n({target:J,stat:!0,forced:!o},{useSetter:function(){Re=!0},useSimple:function(){Re=!1}}),n({target:"Object",stat:!0,forced:!o,sham:!s},{create:ae,defineProperty:Ht,defineProperties:fe,getOwnPropertyDescriptor:Pe}),n({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Ge}),B(),$(ne,J),A[K]=!0,H6}var yF={},ek,bF;function DQ(){if(bF)return ek;bF=1;var n=Xd();return ek=n&&!!Symbol.for&&!!Symbol.keyFor,ek}var xF;function YCe(){if(xF)return yF;xF=1;var n=Je(),e=qi(),t=mr(),r=ms(),i=Zd(),s=DQ(),o=i("string-to-symbol-registry"),a=i("symbol-to-string-registry");return n({target:"Symbol",stat:!0,forced:!s},{for:function(l){var c=r(l);if(t(o,c))return o[c];var u=e("Symbol")(c);return o[c]=u,a[u]=c,u}}),yF}var wF={},_F;function GCe(){if(_F)return wF;_F=1;var n=Je(),e=mr(),t=Pg(),r=Qd(),i=Zd(),s=DQ(),o=i("symbol-to-string-registry");return n({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!t(l))throw new TypeError(r(l)+" is not a symbol");if(e(o,l))return o[l]}}),wF}var SF={},tk,kF;function VCe(){if(kF)return tk;kF=1;var n=Nt(),e=Nl(),t=pr(),r=Co(),i=ms(),s=n([].push);return tk=function(o){if(t(o))return o;if(e(o)){for(var a=o.length,l=[],c=0;c<a;c++){var u=o[c];typeof u=="string"?s(l,u):(typeof u=="number"||r(u)==="Number"||r(u)==="String")&&s(l,i(u))}var h=l.length,d=!0;return function(f,m){if(d)return d=!1,m;if(e(this))return m;for(var g=0;g<h;g++)if(l[g]===f)return m}}},tk}var CF;function NQ(){if(CF)return SF;CF=1;var n=Je(),e=qi(),t=zx(),r=xi(),i=Nt(),s=Pt(),o=pr(),a=Pg(),l=nf(),c=VCe(),u=Xd(),h=String,d=e("JSON","stringify"),f=i(/./.exec),m=i("".charAt),g=i("".charCodeAt),v=i("".replace),y=i(1.1.toString),b=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,S=/^[\uDC00-\uDFFF]$/,_=!u||s(function(){var O=e("Symbol")("stringify detection");return d([O])!=="[null]"||d({a:O})!=="{}"||d(Object(O))!=="{}"}),E=s(function(){return d("\uDF06\uD834")!=='"\\udf06\\ud834"'||d("\uDEAD")!=='"\\udead"'}),C=function(O,R){var D=l(arguments),A=c(R);if(!(!o(A)&&(O===void 0||a(O))))return D[1]=function(F,z){if(o(A)&&(z=r(A,this,h(F),z)),!a(z))return z},t(d,null,D)},T=function(O,R,D){var A=m(D,R-1),F=m(D,R+1);return f(w,O)&&!f(S,F)||f(S,O)&&!f(w,A)?"\\u"+y(g(O,0),16):O};return d&&n({target:"JSON",stat:!0,arity:3,forced:_||E},{stringify:function(R,D,A){var F=l(arguments),z=t(_?C:d,null,F);return E&&typeof z=="string"?v(z,b,T):z}}),SF}var EF={},TF;function KCe(){if(TF)return EF;TF=1;var n=Je(),e=Xd(),t=Pt(),r=Qx(),i=wi(),s=!e||t(function(){r.f(1)});return n({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=r.f;return l?l(i(a)):[]}}),EF}var MF;function AQ(){return MF||(MF=1,HCe(),YCe(),GCe(),NQ(),KCe()),W6}var IF={},PF;function LQ(){if(PF)return IF;PF=1;var n=In();return n("asyncDispose"),IF}var OF={},RF;function XCe(){if(RF)return OF;RF=1;var n=In();return n("asyncIterator"),OF}var DF={},NF;function FQ(){if(NF)return DF;NF=1;var n=In();return n("dispose"),DF}var AF={},LF;function QCe(){if(LF)return AF;LF=1;var n=In();return n("hasInstance"),AF}var FF={},jF;function JCe(){if(jF)return FF;jF=1;var n=In();return n("isConcatSpreadable"),FF}var $F={},BF;function jQ(){if(BF)return $F;BF=1;var n=In();return n("iterator"),$F}var zF={},qF;function ZCe(){if(qF)return zF;qF=1;var n=In();return n("match"),zF}var UF={},WF;function e2e(){if(WF)return UF;WF=1;var n=In();return n("matchAll"),UF}var HF={},YF;function t2e(){if(YF)return HF;YF=1;var n=In();return n("replace"),HF}var GF={},VF;function n2e(){if(VF)return GF;VF=1;var n=In();return n("search"),GF}var KF={},XF;function r2e(){if(XF)return KF;XF=1;var n=In();return n("species"),KF}var QF={},JF;function i2e(){if(JF)return QF;JF=1;var n=In();return n("split"),QF}var ZF={},e9;function $Q(){if(e9)return ZF;e9=1;var n=In(),e=RQ();return n("toPrimitive"),e(),ZF}var t9={},n9;function s2e(){if(n9)return t9;n9=1;var n=qi(),e=In(),t=mu();return e("toStringTag"),t(n("Symbol"),"Symbol"),t9}var r9={},i9;function o2e(){if(i9)return r9;i9=1;var n=In();return n("unscopables"),r9}var s9={},o9;function a2e(){if(o9)return s9;o9=1;var n=Ln(),e=mu();return e(n.JSON,"JSON",!0),s9}var nk,a9;function l2e(){if(a9)return nk;a9=1,IQ(),AQ(),LQ(),XCe(),FQ(),QCe(),JCe(),jQ(),ZCe(),e2e(),t2e(),n2e(),r2e(),i2e(),$Q(),s2e(),o2e(),a2e();var n=sn();return nk=n.Symbol,nk}var l9={},rk,c9;function jg(){return c9||(c9=1,rk=function(){}),rk}var ik,u9;function rf(){return u9||(u9=1,ik={}),ik}var sk,h9;function c2e(){if(h9)return sk;h9=1;var n=Yn(),e=mr(),t=Function.prototype,r=n&&Object.getOwnPropertyDescriptor,i=e(t,"name"),s=i&&(function(){}).name==="something",o=i&&(!n||n&&r(t,"name").configurable);return sk={EXISTS:i,PROPER:s,CONFIGURABLE:o},sk}var ok,d9;function BQ(){if(d9)return ok;d9=1;var n=Pt();return ok=!n(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),ok}var ak,f9;function Zx(){if(f9)return ak;f9=1;var n=mr(),e=pr(),t=wi(),r=Kx(),i=BQ(),s=r("IE_PROTO"),o=Object,a=o.prototype;return ak=i?o.getPrototypeOf:function(l){var c=t(l);if(n(c,s))return c[s];var u=c.constructor;return e(u)&&c instanceof u?u.prototype:c instanceof o?a:null},ak}var lk,p9;function zQ(){if(p9)return lk;p9=1;var n=Pt(),e=pr(),t=Lr(),r=Ag(),i=Zx(),s=Lg(),o=Zn(),a=Jd(),l=o("iterator"),c=!1,u,h,d;[].keys&&(d=[].keys(),"next"in d?(h=i(i(d)),h!==Object.prototype&&(u=h)):c=!0);var f=!t(u)||n(function(){var m={};return u[l].call(m)!==m});return f?u={}:a&&(u=r(u)),e(u[l])||s(u,l,function(){return this}),lk={IteratorPrototype:u,BUGGY_SAFARI_ITERATORS:c},lk}var ck,m9;function u2e(){if(m9)return ck;m9=1;var n=zQ().IteratorPrototype,e=Ag(),t=Tg(),r=mu(),i=rf(),s=function(){return this};return ck=function(o,a,l,c){var u=a+" Iterator";return o.prototype=e(n,{next:t(+!c,l)}),r(o,u,!1,!0),i[u]=s,o},ck}var uk,g9;function h2e(){if(g9)return uk;g9=1;var n=Nt(),e=Eo();return uk=function(t,r,i){try{return n(e(Object.getOwnPropertyDescriptor(t,r)[i]))}catch{}},uk}var hk,v9;function d2e(){if(v9)return hk;v9=1;var n=Lr();return hk=function(e){return n(e)||e===null},hk}var dk,y9;function f2e(){if(y9)return dk;y9=1;var n=d2e(),e=String,t=TypeError;return dk=function(r){if(n(r))return r;throw new t("Can't set "+e(r)+" as a prototype")},dk}var fk,b9;function p2e(){if(b9)return fk;b9=1;var n=h2e(),e=Lr(),t=ya(),r=f2e();return fk=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},o;try{o=n(Object.prototype,"__proto__","set"),o(s,[]),i=s instanceof Array}catch{}return function(l,c){return t(l),r(c),e(l)&&(i?o(l,c):l.__proto__=c),l}}():void 0),fk}var pk,x9;function nD(){if(x9)return pk;x9=1;var n=Je(),e=xi(),t=Jd(),r=c2e(),i=pr(),s=u2e(),o=Zx(),a=p2e(),l=mu(),c=ef(),u=Lg(),h=Zn(),d=rf(),f=zQ(),m=r.PROPER,g=r.CONFIGURABLE,v=f.IteratorPrototype,y=f.BUGGY_SAFARI_ITERATORS,b=h("iterator"),w="keys",S="values",_="entries",E=function(){return this};return pk=function(C,T,O,R,D,A,F){s(O,T,R);var z=function(q){if(q===D&&U)return U;if(!y&&q&&q in B)return B[q];switch(q){case w:return function(){return new O(this,q)};case S:return function(){return new O(this,q)};case _:return function(){return new O(this,q)}}return function(){return new O(this)}},j=T+" Iterator",L=!1,B=C.prototype,$=B[b]||B["@@iterator"]||D&&B[D],U=!y&&$||z(D),H=T==="Array"&&B.entries||$,K,J,Z;if(H&&(K=o(H.call(new C)),K!==Object.prototype&&K.next&&(!t&&o(K)!==v&&(a?a(K,v):i(K[b])||u(K,b,E)),l(K,j,!0,!0),t&&(d[j]=E))),m&&D===S&&$&&$.name!==S&&(!t&&g?c(B,"name",S):(L=!0,U=function(){return e($,this)})),D)if(J={values:z(S),keys:A?U:z(w),entries:z(_)},F)for(Z in J)(y||L||!(Z in B))&&u(B,Z,J[Z]);else n({target:T,proto:!0,forced:y||L},J);return(!t||F)&&B[b]!==U&&u(B,b,U,{name:D}),d[T]=U,J},pk}var mk,w9;function rD(){return w9||(w9=1,mk=function(n,e){return{value:n,done:e}}),mk}var gk,_9;function Fl(){if(_9)return gk;_9=1;var n=Hs(),e=jg(),t=rf(),r=Fg(),i=ps().f,s=nD(),o=rD(),a=Jd(),l=Yn(),c="Array Iterator",u=r.set,h=r.getterFor(c);gk=s(Array,"Array",function(f,m){u(this,{type:c,target:n(f),index:0,kind:m})},function(){var f=h(this),m=f.target,g=f.index++;if(!m||g>=m.length)return f.target=null,o(void 0,!0);switch(f.kind){case"keys":return o(g,!1);case"values":return o(m[g],!1)}return o([g,m[g]],!1)},"values");var d=t.Arguments=t.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&d.name!=="values")try{i(d,"name",{value:"values"})}catch{}return gk}var vk,S9;function m2e(){return S9||(S9=1,vk={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),vk}var k9;function jl(){if(k9)return l9;k9=1,Fl();var n=m2e(),e=Ln(),t=mu(),r=rf();for(var i in n)t(e[i],i),r[i]=r.Array;return l9}var yk,C9;function qQ(){if(C9)return yk;C9=1;var n=l2e();return jl(),yk=n,yk}var bk,E9;function g2e(){return E9||(E9=1,bk=qQ()),bk}var v2e=g2e(),y2e=nt(v2e),T9={},M9;function b2e(){if(M9)return T9;M9=1;var n=Je(),e=Nl(),t=MQ(),r=Lr(),i=Vx(),s=Ys(),o=Hs(),a=Yx(),l=Zn(),c=Rg(),u=nf(),h=c("slice"),d=l("species"),f=Array,m=Math.max;return n({target:"Array",proto:!0,forced:!h},{slice:function(v,y){var b=o(this),w=s(b),S=i(v,w),_=i(y===void 0?w:y,w),E,C,T;if(e(b)&&(E=b.constructor,t(E)&&(E===f||e(E.prototype))?E=void 0:r(E)&&(E=E[d],E===null&&(E=void 0)),E===f||E===void 0))return u(b,S,_);for(C=new(E===void 0?f:E)(m(_-S,0)),T=0;S<_;S++,T++)S in b&&a(C,T,b[S]);return C.length=T,C}}),T9}var xk,I9;function Fn(){if(I9)return xk;I9=1;var n=Ln(),e=sn();return xk=function(t,r){var i=e[t+"Prototype"],s=i&&i[r];if(s)return s;var o=n[t],a=o&&o.prototype;return a&&a[r]},xk}var wk,P9;function x2e(){if(P9)return wk;P9=1,b2e();var n=Fn();return wk=n("Array","slice"),wk}var _k,O9;function w2e(){if(O9)return _k;O9=1;var n=hn(),e=x2e(),t=Array.prototype;return _k=function(r){var i=r.slice;return r===t||n(t,r)&&i===t.slice?e:i},_k}var Sk,R9;function _2e(){if(R9)return Sk;R9=1;var n=w2e();return Sk=n,Sk}var kk,D9;function S2e(){return D9||(D9=1,kk=_2e()),kk}var k2e=S2e(),sf=nt(k2e),N9={},Ck,A9;function UQ(){if(A9)return Ck;A9=1;var n=qi(),e=Nt(),t=Xx(),r=Qx(),i=ba(),s=e([].concat);return Ck=n("Reflect","ownKeys")||function(a){var l=t.f(i(a)),c=r.f;return c?s(l,c(a)):l},Ck}var L9;function C2e(){if(L9)return N9;L9=1;var n=Je(),e=UQ();return n({target:"Reflect",stat:!0},{ownKeys:e}),N9}var Ek,F9;function E2e(){if(F9)return Ek;F9=1,C2e();var n=sn();return Ek=n.Reflect.ownKeys,Ek}var Tk,j9;function T2e(){if(j9)return Tk;j9=1;var n=E2e();return Tk=n,Tk}var Mk,$9;function M2e(){return $9||($9=1,Mk=T2e()),Mk}var I2e=M2e(),P2e=nt(I2e),B9={},z9;function O2e(){if(z9)return B9;z9=1;var n=Je(),e=Nl();return n({target:"Array",stat:!0},{isArray:e}),B9}var Ik,q9;function R2e(){if(q9)return Ik;q9=1,O2e();var n=sn();return Ik=n.Array.isArray,Ik}var Pk,U9;function D2e(){if(U9)return Pk;U9=1;var n=R2e();return Pk=n,Pk}var Ok,W9;function N2e(){return W9||(W9=1,Ok=D2e()),Ok}var A2e=N2e(),It=nt(A2e),H9={},Y9;function L2e(){if(Y9)return H9;Y9=1;var n=Je(),e=Ll().map,t=Rg(),r=t("map");return n({target:"Array",proto:!0,forced:!r},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),H9}var Rk,G9;function F2e(){if(G9)return Rk;G9=1,L2e();var n=Fn();return Rk=n("Array","map"),Rk}var Dk,V9;function j2e(){if(V9)return Dk;V9=1;var n=hn(),e=F2e(),t=Array.prototype;return Dk=function(r){var i=r.map;return r===t||n(t,r)&&i===t.map?e:i},Dk}var Nk,K9;function $2e(){if(K9)return Nk;K9=1;var n=j2e();return Nk=n,Nk}var Ak,X9;function B2e(){return X9||(X9=1,Ak=$2e()),Ak}var z2e=B2e(),Ut=nt(z2e),Q9={},J9;function q2e(){if(J9)return Q9;J9=1;var n=Je(),e=wi(),t=Ng(),r=Pt(),i=r(function(){t(1)});return n({target:"Object",stat:!0,forced:i},{keys:function(o){return t(e(o))}}),Q9}var Lk,Z9;function U2e(){if(Z9)return Lk;Z9=1,q2e();var n=sn();return Lk=n.Object.keys,Lk}var Fk,e7;function W2e(){if(e7)return Fk;e7=1;var n=U2e();return Fk=n,Fk}var jk,t7;function H2e(){return t7||(t7=1,jk=W2e()),jk}var Y2e=H2e(),rr=nt(Y2e),n7={},r7;function G2e(){if(r7)return n7;r7=1;var n=Je(),e=Nt(),t=Date,r=e(t.prototype.getTime);return n({target:"Date",stat:!0},{now:function(){return r(new t)}}),n7}var $k,i7;function V2e(){if(i7)return $k;i7=1,G2e();var n=sn();return $k=n.Date.now,$k}var Bk,s7;function K2e(){if(s7)return Bk;s7=1;var n=V2e();return Bk=n,Bk}var zk,o7;function X2e(){return o7||(o7=1,zk=K2e()),zk}var Q2e=X2e(),Ei=nt(Q2e),a7={},qk,l7;function J2e(){if(l7)return qk;l7=1;var n=Nt(),e=Eo(),t=Lr(),r=mr(),i=nf(),s=Eg(),o=Function,a=n([].concat),l=n([].join),c={},u=function(h,d,f){if(!r(c,d)){for(var m=[],g=0;g<d;g++)m[g]="a["+g+"]";c[d]=o("C,a","return new C("+l(m,",")+")")}return c[d](h,f)};return qk=s?o.bind:function(d){var f=e(this),m=f.prototype,g=i(arguments,1),v=function(){var b=a(g,i(arguments));return this instanceof v?u(f,b.length,b):f.apply(d,b)};return t(m)&&(v.prototype=m),v},qk}var c7;function Z2e(){if(c7)return a7;c7=1;var n=Je(),e=J2e();return n({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),a7}var Uk,u7;function eEe(){if(u7)return Uk;u7=1,Z2e();var n=Fn();return Uk=n("Function","bind"),Uk}var Wk,h7;function tEe(){if(h7)return Wk;h7=1;var n=hn(),e=eEe(),t=Function.prototype;return Wk=function(r){var i=r.bind;return r===t||n(t,r)&&i===t.bind?e:i},Wk}var Hk,d7;function nEe(){if(d7)return Hk;d7=1;var n=tEe();return Hk=n,Hk}var Yk,f7;function rEe(){return f7||(f7=1,Yk=nEe()),Yk}var iEe=rEe(),ue=nt(iEe),p7={},Gk,m7;function of(){if(m7)return Gk;m7=1;var n=Pt();return Gk=function(e,t){var r=[][e];return!!r&&n(function(){r.call(null,t||function(){return 1},1)})},Gk}var Vk,g7;function sEe(){if(g7)return Vk;g7=1;var n=Ll().forEach,e=of(),t=e("forEach");return Vk=t?[].forEach:function(i){return n(this,i,arguments.length>1?arguments[1]:void 0)},Vk}var v7;function oEe(){if(v7)return p7;v7=1;var n=Je(),e=sEe();return n({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),p7}var Kk,y7;function aEe(){if(y7)return Kk;y7=1,oEe();var n=Fn();return Kk=n("Array","forEach"),Kk}var Xk,b7;function lEe(){if(b7)return Xk;b7=1;var n=aEe();return Xk=n,Xk}var Qk,x7;function cEe(){if(x7)return Qk;x7=1;var n=Al(),e=mr(),t=hn(),r=lEe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return Qk=function(o){var a=o.forEach;return o===i||t(i,o)&&a===i.forEach||e(s,n(o))?r:a},Qk}var Jk,w7;function uEe(){return w7||(w7=1,Jk=cEe()),Jk}var hEe=uEe(),je=nt(hEe),_7={},S7;function dEe(){if(S7)return _7;S7=1;var n=Je(),e=Nt(),t=Nl(),r=e([].reverse),i=[1,2];return n({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return t(this)&&(this.length=this.length),r(this)}}),_7}var Zk,k7;function fEe(){if(k7)return Zk;k7=1,dEe();var n=Fn();return Zk=n("Array","reverse"),Zk}var eC,C7;function pEe(){if(C7)return eC;C7=1;var n=hn(),e=fEe(),t=Array.prototype;return eC=function(r){var i=r.reverse;return r===t||n(t,r)&&i===t.reverse?e:i},eC}var tC,E7;function mEe(){if(E7)return tC;E7=1;var n=pEe();return tC=n,tC}var nC,T7;function gEe(){return T7||(T7=1,nC=mEe()),nC}var vEe=gEe(),yEe=nt(vEe),M7={},rC,I7;function bEe(){if(I7)return rC;I7=1;var n=Yn(),e=Nl(),t=TypeError,r=Object.getOwnPropertyDescriptor,i=n&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return rC=i?function(s,o){if(e(s)&&!r(s,"length").writable)throw new t("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},rC}var iC,P7;function WQ(){if(P7)return iC;P7=1;var n=Qd(),e=TypeError;return iC=function(t,r){if(!delete t[r])throw new e("Cannot delete property "+n(r)+" of "+n(t))},iC}var O7;function xEe(){if(O7)return M7;O7=1;var n=Je(),e=wi(),t=Vx(),r=tf(),i=Ys(),s=bEe(),o=XR(),a=Gx(),l=Yx(),c=WQ(),u=Rg(),h=u("splice"),d=Math.max,f=Math.min;return n({target:"Array",proto:!0,forced:!h},{splice:function(g,v){var y=e(this),b=i(y),w=t(g,b),S=arguments.length,_,E,C,T,O,R;for(S===0?_=E=0:S===1?(_=0,E=b-w):(_=S-2,E=f(d(r(v),0),b-w)),o(b+_-E),C=a(y,E),T=0;T<E;T++)O=w+T,O in y&&l(C,T,y[O]);if(C.length=E,_<E){for(T=w;T<b-E;T++)O=T+E,R=T+_,O in y?y[R]=y[O]:c(y,R);for(T=b;T>b-E+_;T--)c(y,T-1)}else if(_>E)for(T=b-E;T>w;T--)O=T+E-1,R=T+_-1,O in y?y[R]=y[O]:c(y,R);for(T=0;T<_;T++)y[T+w]=arguments[T+2];return s(y,b-E+_),C}}),M7}var sC,R7;function wEe(){if(R7)return sC;R7=1,xEe();var n=Fn();return sC=n("Array","splice"),sC}var oC,D7;function _Ee(){if(D7)return oC;D7=1;var n=hn(),e=wEe(),t=Array.prototype;return oC=function(r){var i=r.splice;return r===t||n(t,r)&&i===t.splice?e:i},oC}var aC,N7;function SEe(){if(N7)return aC;N7=1;var n=_Ee();return aC=n,aC}var lC,A7;function kEe(){return A7||(A7=1,lC=SEe()),lC}var CEe=kEe(),Wr=nt(CEe),L7={},cC,F7;function EEe(){if(F7)return cC;F7=1;var n=Yn(),e=Nt(),t=xi(),r=Pt(),i=Ng(),s=Qx(),o=qx(),a=wi(),l=Ux(),c=Object.assign,u=Object.defineProperty,h=e([].concat);return cC=!c||r(function(){if(n&&c({b:1},c(u({},"a",{enumerable:!0,get:function(){u(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var d={},f={},m=Symbol("assign detection"),g="abcdefghijklmnopqrst";return d[m]=7,g.split("").forEach(function(v){f[v]=v}),c({},d)[m]!==7||i(c({},f)).join("")!==g})?function(f,m){for(var g=a(f),v=arguments.length,y=1,b=s.f,w=o.f;v>y;)for(var S=l(arguments[y++]),_=b?h(i(S),b(S)):i(S),E=_.length,C=0,T;E>C;)T=_[C++],(!n||t(w,S,T))&&(g[T]=S[T]);return g}:c,cC}var j7;function TEe(){if(j7)return L7;j7=1;var n=Je(),e=EEe();return n({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),L7}var uC,$7;function MEe(){if($7)return uC;$7=1,TEe();var n=sn();return uC=n.Object.assign,uC}var hC,B7;function IEe(){if(B7)return hC;B7=1;var n=MEe();return hC=n,hC}var dC,z7;function PEe(){return z7||(z7=1,dC=IEe()),dC}var OEe=PEe(),Pl=nt(OEe),q7={},U7;function REe(){if(U7)return q7;U7=1;var n=Je(),e=JR().includes,t=Pt(),r=jg(),i=t(function(){return!Array(1).includes()});return n({target:"Array",proto:!0,forced:i},{includes:function(o){return e(this,o,arguments.length>1?arguments[1]:void 0)}}),r("includes"),q7}var fC,W7;function DEe(){if(W7)return fC;W7=1,REe();var n=Fn();return fC=n("Array","includes"),fC}var H7={},pC,Y7;function NEe(){if(Y7)return pC;Y7=1;var n=Lr(),e=Co(),t=Zn(),r=t("match");return pC=function(i){var s;return n(i)&&((s=i[r])!==void 0?!!s:e(i)==="RegExp")},pC}var mC,G7;function AEe(){if(G7)return mC;G7=1;var n=NEe(),e=TypeError;return mC=function(t){if(n(t))throw new e("The method doesn't accept regular expressions");return t},mC}var gC,V7;function LEe(){if(V7)return gC;V7=1;var n=Zn(),e=n("match");return gC=function(t){var r=/./;try{"/./"[t](r)}catch{try{return r[e]=!1,"/./"[t](r)}catch{}}return!1},gC}var K7;function FEe(){if(K7)return H7;K7=1;var n=Je(),e=Nt(),t=AEe(),r=ya(),i=ms(),s=LEe(),o=e("".indexOf);return n({target:"String",proto:!0,forced:!s("includes")},{includes:function(l){return!!~o(i(r(this)),i(t(l)),arguments.length>1?arguments[1]:void 0)}}),H7}var vC,X7;function jEe(){if(X7)return vC;X7=1,FEe();var n=Fn();return vC=n("String","includes"),vC}var yC,Q7;function $Ee(){if(Q7)return yC;Q7=1;var n=hn(),e=DEe(),t=jEe(),r=Array.prototype,i=String.prototype;return yC=function(s){var o=s.includes;return s===r||n(r,s)&&o===r.includes?e:typeof s=="string"||s===i||n(i,s)&&o===i.includes?t:o},yC}var bC,J7;function BEe(){if(J7)return bC;J7=1;var n=$Ee();return bC=n,bC}var xC,Z7;function zEe(){return Z7||(Z7=1,xC=BEe()),xC}var qEe=zEe(),Cd=nt(qEe),ej={},tj;function UEe(){if(tj)return ej;tj=1;var n=Je(),e=Pt(),t=wi(),r=Zx(),i=BQ(),s=e(function(){r(1)});return n({target:"Object",stat:!0,forced:s,sham:!i},{getPrototypeOf:function(a){return r(t(a))}}),ej}var wC,nj;function WEe(){if(nj)return wC;nj=1,UEe();var n=sn();return wC=n.Object.getPrototypeOf,wC}var _C,rj;function HEe(){if(rj)return _C;rj=1;var n=WEe();return _C=n,_C}var SC,ij;function YEe(){return ij||(ij=1,SC=HEe()),SC}var GEe=YEe(),sj=nt(GEe),kC,oj;function VEe(){if(oj)return kC;oj=1,IQ();var n=Fn();return kC=n("Array","concat"),kC}var CC,aj;function KEe(){if(aj)return CC;aj=1;var n=hn(),e=VEe(),t=Array.prototype;return CC=function(r){var i=r.concat;return r===t||n(t,r)&&i===t.concat?e:i},CC}var EC,lj;function XEe(){if(lj)return EC;lj=1;var n=KEe();return EC=n,EC}var TC,cj;function QEe(){return cj||(cj=1,TC=XEe()),TC}var JEe=QEe(),$n=nt(JEe),uj={},hj;function ZEe(){if(hj)return uj;hj=1;var n=Je(),e=Ll().filter,t=Rg(),r=t("filter");return n({target:"Array",proto:!0,forced:!r},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),uj}var MC,dj;function eTe(){if(dj)return MC;dj=1,ZEe();var n=Fn();return MC=n("Array","filter"),MC}var IC,fj;function tTe(){if(fj)return IC;fj=1;var n=hn(),e=eTe(),t=Array.prototype;return IC=function(r){var i=r.filter;return r===t||n(t,r)&&i===t.filter?e:i},IC}var PC,pj;function nTe(){if(pj)return PC;pj=1;var n=tTe();return PC=n,PC}var OC,mj;function rTe(){return mj||(mj=1,OC=nTe()),OC}var iTe=rTe(),yt=nt(iTe),gj={},RC,vj;function HQ(){if(vj)return RC;vj=1;var n=Yn(),e=Pt(),t=Nt(),r=Zx(),i=Ng(),s=Hs(),o=qx().f,a=t(o),l=t([].push),c=n&&e(function(){var h=Object.create(null);return h[2]=2,!a(h,2)}),u=function(h){return function(d){for(var f=s(d),m=i(f),g=c&&r(f)===null,v=m.length,y=0,b=[],w;v>y;)w=m[y++],(!n||(g?w in f:a(f,w)))&&l(b,h?[w,f[w]]:f[w]);return b}};return RC={entries:u(!0),values:u(!1)},RC}var yj;function sTe(){if(yj)return gj;yj=1;var n=Je(),e=HQ().values;return n({target:"Object",stat:!0},{values:function(r){return e(r)}}),gj}var DC,bj;function oTe(){if(bj)return DC;bj=1,sTe();var n=sn();return DC=n.Object.values,DC}var NC,xj;function aTe(){if(xj)return NC;xj=1;var n=oTe();return NC=n,NC}var AC,wj;function lTe(){return wj||(wj=1,AC=aTe()),AC}var cTe=lTe(),iD=nt(cTe),_j={},LC,Sj;function sD(){return Sj||(Sj=1,LC=`	
\v\f\r \u2028\u2029\uFEFF`),LC}var FC,kj;function YQ(){if(kj)return FC;kj=1;var n=Nt(),e=ya(),t=ms(),r=sD(),i=n("".replace),s=RegExp("^["+r+"]+"),o=RegExp("(^|[^"+r+"])["+r+"]+$"),a=function(l){return function(c){var u=t(e(c));return l&1&&(u=i(u,s,"")),l&2&&(u=i(u,o,"$1")),u}};return FC={start:a(1),end:a(2),trim:a(3)},FC}var jC,Cj;function uTe(){if(Cj)return jC;Cj=1;var n=Ln(),e=Pt(),t=Nt(),r=ms(),i=YQ().trim,s=sD(),o=n.parseInt,a=n.Symbol,l=a&&a.iterator,c=/^[+-]?0x/i,u=t(c.exec),h=o(s+"08")!==8||o(s+"0x16")!==22||l&&!e(function(){o(Object(l))});return jC=h?function(f,m){var g=i(r(f));return o(g,m>>>0||(u(c,g)?16:10))}:o,jC}var Ej;function hTe(){if(Ej)return _j;Ej=1;var n=Je(),e=uTe();return n({global:!0,forced:parseInt!==e},{parseInt:e}),_j}var $C,Tj;function dTe(){if(Tj)return $C;Tj=1,hTe();var n=sn();return $C=n.parseInt,$C}var BC,Mj;function fTe(){if(Mj)return BC;Mj=1;var n=dTe();return BC=n,BC}var zC,Ij;function pTe(){return Ij||(Ij=1,zC=fTe()),zC}var mTe=pTe(),Ti=nt(mTe),Pj={},Oj;function gTe(){if(Oj)return Pj;Oj=1;var n=Je(),e=YR(),t=JR().indexOf,r=of(),i=e([].indexOf),s=!!i&&1/i([1],1,-0)<0,o=s||!r("indexOf");return n({target:"Array",proto:!0,forced:o},{indexOf:function(l){var c=arguments.length>1?arguments[1]:void 0;return s?i(this,l,c)||0:t(this,l,c)}}),Pj}var qC,Rj;function vTe(){if(Rj)return qC;Rj=1,gTe();var n=Fn();return qC=n("Array","indexOf"),qC}var UC,Dj;function yTe(){if(Dj)return UC;Dj=1;var n=hn(),e=vTe(),t=Array.prototype;return UC=function(r){var i=r.indexOf;return r===t||n(t,r)&&i===t.indexOf?e:i},UC}var WC,Nj;function bTe(){if(Nj)return WC;Nj=1;var n=yTe();return WC=n,WC}var HC,Aj;function xTe(){return Aj||(Aj=1,HC=bTe()),HC}var wTe=xTe(),Xt=nt(wTe),Lj={},Fj;function _Te(){if(Fj)return Lj;Fj=1;var n=Je(),e=HQ().entries;return n({target:"Object",stat:!0},{entries:function(r){return e(r)}}),Lj}var YC,jj;function STe(){if(jj)return YC;jj=1,_Te();var n=sn();return YC=n.Object.entries,YC}var GC,$j;function kTe(){if($j)return GC;$j=1;var n=STe();return GC=n,GC}var VC,Bj;function CTe(){return Bj||(Bj=1,VC=kTe()),VC}var ETe=CTe(),TTe=nt(ETe),zj={},qj;function MTe(){if(qj)return zj;qj=1;var n=Je(),e=Yn(),t=Ag();return n({target:"Object",stat:!0,sham:!e},{create:t}),zj}var KC,Uj;function ITe(){if(Uj)return KC;Uj=1,MTe();var n=sn(),e=n.Object;return KC=function(r,i){return e.create(r,i)},KC}var XC,Wj;function PTe(){if(Wj)return XC;Wj=1;var n=ITe();return XC=n,XC}var QC,Hj;function OTe(){return Hj||(Hj=1,QC=PTe()),QC}var RTe=OTe(),$g=nt(RTe),Yj={},JC,Gj;function GQ(){if(Gj)return JC;Gj=1;var n=tf(),e=ms(),t=ya(),r=RangeError;return JC=function(s){var o=e(t(this)),a="",l=n(s);if(l<0||l===1/0)throw new r("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},JC}var ZC,Vj;function DTe(){if(Vj)return ZC;Vj=1;var n=Nt(),e=TQ(),t=ms(),r=GQ(),i=ya(),s=n(r),o=n("".slice),a=Math.ceil,l=function(c){return function(u,h,d){var f=t(i(u)),m=e(h),g=f.length,v=d===void 0?" ":t(d),y,b;return m<=g||v===""?f:(y=m-g,b=s(v,a(y/v.length)),b.length>y&&(b=o(b,0,y)),c?f+b:b+f)}};return ZC={start:l(!1),end:l(!0)},ZC}var e2,Kj;function NTe(){if(Kj)return e2;Kj=1;var n=Nt(),e=Pt(),t=DTe().start,r=RangeError,i=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=n(o.getTime),c=n(o.getUTCDate),u=n(o.getUTCFullYear),h=n(o.getUTCHours),d=n(o.getUTCMilliseconds),f=n(o.getUTCMinutes),m=n(o.getUTCMonth),g=n(o.getUTCSeconds);return e2=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!i(l(this)))throw new r("Invalid time value");var y=this,b=u(y),w=d(y),S=b<0?"-":b>9999?"+":"";return S+t(s(b),S?6:4,0)+"-"+t(m(y)+1,2,0)+"-"+t(c(y),2,0)+"T"+t(h(y),2,0)+":"+t(f(y),2,0)+":"+t(g(y),2,0)+"."+t(w,3,0)+"Z"}:a,e2}var Xj;function ATe(){if(Xj)return Yj;Xj=1;var n=Je(),e=xi(),t=wi(),r=SQ(),i=NTe(),s=Co(),o=Pt(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return n({target:"Date",proto:!0,forced:a},{toJSON:function(c){var u=t(this),h=r(u,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in u)&&s(u)==="Date"?e(i,u):u.toISOString()}}),Yj}var t2,Qj;function LTe(){if(Qj)return t2;Qj=1,ATe(),NQ();var n=sn(),e=zx();return n.JSON||(n.JSON={stringify:JSON.stringify}),t2=function(r,i,s){return e(n.JSON.stringify,null,arguments)},t2}var n2,Jj;function FTe(){if(Jj)return n2;Jj=1;var n=LTe();return n2=n,n2}var r2,Zj;function jTe(){return Zj||(Zj=1,r2=FTe()),r2}var $Te=jTe(),ii=nt($Te),e$={},t$={},i2,n$;function VQ(){if(n$)return i2;n$=1;var n=Ln(),e=Kd(),t=Co(),r=function(i){return e.slice(0,i.length)===i};return i2=function(){return r("Bun/")?"BUN":r("Cloudflare-Workers")?"CLOUDFLARE":r("Deno/")?"DENO":r("Node.js/")?"NODE":n.Bun&&typeof Bun.version=="string"?"BUN":n.Deno&&typeof Deno.version=="object"?"DENO":t(n.process)==="process"?"NODE":n.window&&n.document?"BROWSER":"REST"}(),i2}var s2,r$;function BTe(){if(r$)return s2;r$=1;var n=TypeError;return s2=function(e,t){if(e<t)throw new n("Not enough arguments");return e},s2}var o2,i$;function KQ(){if(i$)return o2;i$=1;var n=Ln(),e=zx(),t=pr(),r=VQ(),i=Kd(),s=nf(),o=BTe(),a=n.Function,l=/MSIE .\./.test(i)||r==="BUN"&&function(){var c=n.Bun.version.split(".");return c.length<3||c[0]==="0"&&(c[1]<3||c[1]==="3"&&c[2]==="0")}();return o2=function(c,u){var h=u?2:1;return l?function(d,f){var m=o(arguments.length,1)>h,g=t(d)?d:a(d),v=m?s(arguments,h):[],y=m?function(){e(g,this,v)}:g;return u?c(y,f):c(y)}:c},o2}var s$;function zTe(){if(s$)return t$;s$=1;var n=Je(),e=Ln(),t=KQ(),r=t(e.setInterval,!0);return n({global:!0,bind:!0,forced:e.setInterval!==r},{setInterval:r}),t$}var o$={},a$;function qTe(){if(a$)return o$;a$=1;var n=Je(),e=Ln(),t=KQ(),r=t(e.setTimeout,!0);return n({global:!0,bind:!0,forced:e.setTimeout!==r},{setTimeout:r}),o$}var l$;function XQ(){return l$||(l$=1,zTe(),qTe()),e$}var a2,c$;function UTe(){if(c$)return a2;c$=1,XQ();var n=sn();return a2=n.setTimeout,a2}var l2,u$;function WTe(){return u$||(u$=1,l2=UTe()),l2}var HTe=WTe(),fi=nt(HTe),h$={},c2,d$;function YTe(){if(d$)return c2;d$=1;var n=wi(),e=Vx(),t=Ys();return c2=function(i){for(var s=n(this),o=t(s),a=arguments.length,l=e(a>1?arguments[1]:void 0,o),c=a>2?arguments[2]:void 0,u=c===void 0?o:e(c,o);u>l;)s[l++]=i;return s},c2}var f$;function GTe(){if(f$)return h$;f$=1;var n=Je(),e=YTe(),t=jg();return n({target:"Array",proto:!0},{fill:e}),t("fill"),h$}var u2,p$;function VTe(){if(p$)return u2;p$=1,GTe();var n=Fn();return u2=n("Array","fill"),u2}var h2,m$;function KTe(){if(m$)return h2;m$=1;var n=hn(),e=VTe(),t=Array.prototype;return h2=function(r){var i=r.fill;return r===t||n(t,r)&&i===t.fill?e:i},h2}var d2,g$;function XTe(){if(g$)return d2;g$=1;var n=KTe();return d2=n,d2}var f2,v$;function QTe(){return v$||(v$=1,f2=XTe()),f2}var JTe=QTe(),QQ=nt(JTe),p2={exports:{}},y$;function ZTe(){return y$||(y$=1,function(n){n.exports=e;function e(r){if(r)return t(r)}function t(r){for(var i in e.prototype)r[i]=e.prototype[i];return r}e.prototype.on=e.prototype.addEventListener=function(r,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(i),this},e.prototype.once=function(r,i){function s(){this.off(r,s),i.apply(this,arguments)}return s.fn=i,this.on(r,s),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(r,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+r];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===i||o.fn===i){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+r],this},e.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+r],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,i)}return this},e.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]},e.prototype.hasListeners=function(r){return!!this.listeners(r).length}}(p2)),p2.exports}var eMe=ZTe(),oD=nt(eMe);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function $s(){return $s=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$s.apply(this,arguments)}function gs(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}function wv(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}var cP;typeof Object.assign!="function"?cP=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])}return t}:cP=Object.assign;var eu=cP,b$=["","webkit","Moz","MS","ms","o"],tMe=typeof document>"u"?{style:{}}:document.createElement("div"),nMe="function",oh=Math.round,tu=Math.abs,aD=Date.now;function ew(n,e){for(var t,r,i=e[0].toUpperCase()+e.slice(1),s=0;s<b$.length;){if(t=b$[s],r=t?t+i:e,r in n)return r;s++}}var aa;typeof window>"u"?aa={}:aa=window;var JQ=ew(tMe.style,"touchAction"),ZQ=JQ!==void 0;function rMe(){if(!ZQ)return!1;var n={},e=aa.CSS&&aa.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return n[t]=e?aa.CSS.supports("touch-action",t):!0}),n}var eJ="compute",tJ="auto",uP="manipulation",Ac="none",qm="pan-x",Um="pan-y",_v=rMe(),iMe=/mobile|tablet|ip(ad|hone|od)|android/i,nJ="ontouchstart"in aa,sMe=ew(aa,"PointerEvent")!==void 0,oMe=nJ&&iMe.test(navigator.userAgent),Bg="touch",aMe="pen",lD="mouse",lMe="kinect",cMe=25,Vr=1,gu=2,Jn=4,vi=8,gb=1,zg=2,qg=4,Ug=8,Ed=16,xo=zg|qg,Lc=Ug|Ed,rJ=xo|Lc,iJ=["x","y"],vb=["clientX","clientY"];function la(n,e,t){var r;if(n)if(n.forEach)n.forEach(e,t);else if(n.length!==void 0)for(r=0;r<n.length;)e.call(t,n[r],r,n),r++;else for(r in n)n.hasOwnProperty(r)&&e.call(t,n[r],r,n)}function tw(n,e){return typeof n===nMe?n.apply(e&&e[0]||void 0,e):n}function mc(n,e){return n.indexOf(e)>-1}function uMe(n){if(mc(n,Ac))return Ac;var e=mc(n,qm),t=mc(n,Um);return e&&t?Ac:e||t?e?qm:Um:mc(n,uP)?uP:tJ}var sJ=function(){function n(t,r){this.manager=t,this.set(r)}var e=n.prototype;return e.set=function(r){r===eJ&&(r=this.compute()),ZQ&&this.manager.element.style&&_v[r]&&(this.manager.element.style[JQ]=r),this.actions=r.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var r=[];return la(this.manager.recognizers,function(i){tw(i.options.enable,[i])&&(r=r.concat(i.getTouchAction()))}),uMe(r.join(" "))},e.preventDefaults=function(r){var i=r.srcEvent,s=r.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,a=mc(o,Ac)&&!_v[Ac],l=mc(o,Um)&&!_v[Um],c=mc(o,qm)&&!_v[qm];if(a){var u=r.pointers.length===1,h=r.distance<2,d=r.deltaTime<250;if(u&&h&&d)return}if(!(c&&l)&&(a||l&&s&xo||c&&s&Lc))return this.preventSrc(i)},e.preventSrc=function(r){this.manager.session.prevented=!0,r.preventDefault()},n}();function cD(n,e){for(;n;){if(n===e)return!0;n=n.parentNode}return!1}function oJ(n){var e=n.length;if(e===1)return{x:oh(n[0].clientX),y:oh(n[0].clientY)};for(var t=0,r=0,i=0;i<e;)t+=n[i].clientX,r+=n[i].clientY,i++;return{x:oh(t/e),y:oh(r/e)}}function x$(n){for(var e=[],t=0;t<n.pointers.length;)e[t]={clientX:oh(n.pointers[t].clientX),clientY:oh(n.pointers[t].clientY)},t++;return{timeStamp:aD(),pointers:e,center:oJ(e),deltaX:n.deltaX,deltaY:n.deltaY}}function yb(n,e,t){t||(t=iJ);var r=e[t[0]]-n[t[0]],i=e[t[1]]-n[t[1]];return Math.sqrt(r*r+i*i)}function hP(n,e,t){t||(t=iJ);var r=e[t[0]]-n[t[0]],i=e[t[1]]-n[t[1]];return Math.atan2(i,r)*180/Math.PI}function aJ(n,e){return n===e?gb:tu(n)>=tu(e)?n<0?zg:qg:e<0?Ug:Ed}function hMe(n,e){var t=e.center,r=n.offsetDelta||{},i=n.prevDelta||{},s=n.prevInput||{};(e.eventType===Vr||s.eventType===Jn)&&(i=n.prevDelta={x:s.deltaX||0,y:s.deltaY||0},r=n.offsetDelta={x:t.x,y:t.y}),e.deltaX=i.x+(t.x-r.x),e.deltaY=i.y+(t.y-r.y)}function lJ(n,e,t){return{x:e/n||0,y:t/n||0}}function dMe(n,e){return yb(e[0],e[1],vb)/yb(n[0],n[1],vb)}function fMe(n,e){return hP(e[1],e[0],vb)+hP(n[1],n[0],vb)}function pMe(n,e){var t=n.lastInterval||e,r=e.timeStamp-t.timeStamp,i,s,o,a;if(e.eventType!==vi&&(r>cMe||t.velocity===void 0)){var l=e.deltaX-t.deltaX,c=e.deltaY-t.deltaY,u=lJ(r,l,c);s=u.x,o=u.y,i=tu(u.x)>tu(u.y)?u.x:u.y,a=aJ(l,c),n.lastInterval=e}else i=t.velocity,s=t.velocityX,o=t.velocityY,a=t.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=a}function mMe(n,e){var t=n.session,r=e.pointers,i=r.length;t.firstInput||(t.firstInput=x$(e)),i>1&&!t.firstMultiple?t.firstMultiple=x$(e):i===1&&(t.firstMultiple=!1);var s=t.firstInput,o=t.firstMultiple,a=o?o.center:s.center,l=e.center=oJ(r);e.timeStamp=aD(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=hP(a,l),e.distance=yb(a,l),hMe(t,e),e.offsetDirection=aJ(e.deltaX,e.deltaY);var c=lJ(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=tu(c.x)>tu(c.y)?c.x:c.y,e.scale=o?dMe(o.pointers,r):1,e.rotation=o?fMe(o.pointers,r):0,e.maxPointers=t.prevInput?e.pointers.length>t.prevInput.maxPointers?e.pointers.length:t.prevInput.maxPointers:e.pointers.length,pMe(t,e);var u=n.element,h=e.srcEvent,d;h.composedPath?d=h.composedPath()[0]:h.path?d=h.path[0]:d=h.target,cD(d,u)&&(u=d),e.target=u}function gMe(n,e,t){var r=t.pointers.length,i=t.changedPointers.length,s=e&Vr&&r-i===0,o=e&(Jn|vi)&&r-i===0;t.isFirst=!!s,t.isFinal=!!o,s&&(n.session={}),t.eventType=e,mMe(n,t),n.emit("hammer.input",t),n.recognize(t),n.session.prevInput=t}function Wm(n){return n.trim().split(/\s+/g)}function Lp(n,e,t){la(Wm(e),function(r){n.addEventListener(r,t,!1)})}function Fp(n,e,t){la(Wm(e),function(r){n.removeEventListener(r,t,!1)})}function w$(n){var e=n.ownerDocument||n;return e.defaultView||e.parentWindow||window}var af=function(){function n(t,r){var i=this;this.manager=t,this.callback=r,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(s){tw(t.options.enable,[t])&&i.handler(s)},this.init()}var e=n.prototype;return e.handler=function(){},e.init=function(){this.evEl&&Lp(this.element,this.evEl,this.domHandler),this.evTarget&&Lp(this.target,this.evTarget,this.domHandler),this.evWin&&Lp(w$(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Fp(this.element,this.evEl,this.domHandler),this.evTarget&&Fp(this.target,this.evTarget,this.domHandler),this.evWin&&Fp(w$(this.element),this.evWin,this.domHandler)},n}();function nu(n,e,t){if(n.indexOf&&!t)return n.indexOf(e);for(var r=0;r<n.length;){if(t&&n[r][t]==e||!t&&n[r]===e)return r;r++}return-1}var vMe={pointerdown:Vr,pointermove:gu,pointerup:Jn,pointercancel:vi,pointerout:vi},yMe={2:Bg,3:aMe,4:lD,5:lMe},cJ="pointerdown",uJ="pointermove pointerup pointercancel";aa.MSPointerEvent&&!aa.PointerEvent&&(cJ="MSPointerDown",uJ="MSPointerMove MSPointerUp MSPointerCancel");var hJ=function(n){gs(e,n);function e(){var r,i=e.prototype;return i.evEl=cJ,i.evWin=uJ,r=n.apply(this,arguments)||this,r.store=r.manager.session.pointerEvents=[],r}var t=e.prototype;return t.handler=function(i){var s=this.store,o=!1,a=i.type.toLowerCase().replace("ms",""),l=vMe[a],c=yMe[i.pointerType]||i.pointerType,u=c===Bg,h=nu(s,i.pointerId,"pointerId");l&Vr&&(i.button===0||u)?h<0&&(s.push(i),h=s.length-1):l&(Jn|vi)&&(o=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,l,{pointers:s,changedPointers:[i],pointerType:c,srcEvent:i}),o&&s.splice(h,1))},e}(af);function Hm(n){return Array.prototype.slice.call(n,0)}function uD(n,e,t){for(var r=[],i=[],s=0;s<n.length;){var o=e?n[s][e]:n[s];nu(i,o)<0&&r.push(n[s]),i[s]=o,s++}return t&&(e?r=r.sort(function(a,l){return a[e]>l[e]}):r=r.sort()),r}var bMe={touchstart:Vr,touchmove:gu,touchend:Jn,touchcancel:vi},xMe="touchstart touchmove touchend touchcancel",hD=function(n){gs(e,n);function e(){var r;return e.prototype.evTarget=xMe,r=n.apply(this,arguments)||this,r.targetIds={},r}var t=e.prototype;return t.handler=function(i){var s=bMe[i.type],o=wMe.call(this,i,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Bg,srcEvent:i})},e}(af);function wMe(n,e){var t=Hm(n.touches),r=this.targetIds;if(e&(Vr|gu)&&t.length===1)return r[t[0].identifier]=!0,[t,t];var i,s,o=Hm(n.changedTouches),a=[],l=this.target;if(s=t.filter(function(c){return cD(c.target,l)}),e===Vr)for(i=0;i<s.length;)r[s[i].identifier]=!0,i++;for(i=0;i<o.length;)r[o[i].identifier]&&a.push(o[i]),e&(Jn|vi)&&delete r[o[i].identifier],i++;if(a.length)return[uD(s.concat(a),"identifier",!0),a]}var _Me={mousedown:Vr,mousemove:gu,mouseup:Jn},SMe="mousedown",kMe="mousemove mouseup",dD=function(n){gs(e,n);function e(){var r,i=e.prototype;return i.evEl=SMe,i.evWin=kMe,r=n.apply(this,arguments)||this,r.pressed=!1,r}var t=e.prototype;return t.handler=function(i){var s=_Me[i.type];s&Vr&&i.button===0&&(this.pressed=!0),s&gu&&i.which!==1&&(s=Jn),this.pressed&&(s&Jn&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:lD,srcEvent:i}))},e}(af),CMe=2500,_$=25;function S$(n){var e=n.changedPointers,t=e[0];if(t.identifier===this.primaryTouch){var r={x:t.clientX,y:t.clientY},i=this.lastTouches;this.lastTouches.push(r);var s=function(){var a=i.indexOf(r);a>-1&&i.splice(a,1)};setTimeout(s,CMe)}}function EMe(n,e){n&Vr?(this.primaryTouch=e.changedPointers[0].identifier,S$.call(this,e)):n&(Jn|vi)&&S$.call(this,e)}function TMe(n){for(var e=n.srcEvent.clientX,t=n.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],s=Math.abs(e-i.x),o=Math.abs(t-i.y);if(s<=_$&&o<=_$)return!0}return!1}var dJ=function(){var n=function(e){gs(t,e);function t(i,s){var o;return o=e.call(this,i,s)||this,o.handler=function(a,l,c){var u=c.pointerType===Bg,h=c.pointerType===lD;if(!(h&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(u)EMe.call(wv(wv(o)),l,c);else if(h&&TMe.call(wv(wv(o)),c))return;o.callback(a,l,c)}},o.touch=new hD(o.manager,o.handler),o.mouse=new dD(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var r=t.prototype;return r.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t}(af);return n}();function MMe(n){var e,t=n.options.inputClass;return t?e=t:sMe?e=hJ:oMe?e=hD:nJ?e=dJ:e=dD,new e(n,gMe)}function ah(n,e,t){return Array.isArray(n)?(la(n,t[e],t),!0):!1}var ly=1,cs=2,Td=4,kl=8,ca=kl,Ym=16,po=32,IMe=1;function PMe(){return IMe++}function Sv(n,e){var t=e.manager;return t?t.get(n):n}function k$(n){return n&Ym?"cancel":n&kl?"end":n&Td?"move":n&cs?"start":""}var Wg=function(){function n(t){t===void 0&&(t={}),this.options=$s({enable:!0},t),this.id=PMe(),this.manager=null,this.state=ly,this.simultaneous={},this.requireFail=[]}var e=n.prototype;return e.set=function(r){return eu(this.options,r),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(r){if(ah(r,"recognizeWith",this))return this;var i=this.simultaneous;return r=Sv(r,this),i[r.id]||(i[r.id]=r,r.recognizeWith(this)),this},e.dropRecognizeWith=function(r){return ah(r,"dropRecognizeWith",this)?this:(r=Sv(r,this),delete this.simultaneous[r.id],this)},e.requireFailure=function(r){if(ah(r,"requireFailure",this))return this;var i=this.requireFail;return r=Sv(r,this),nu(i,r)===-1&&(i.push(r),r.requireFailure(this)),this},e.dropRequireFailure=function(r){if(ah(r,"dropRequireFailure",this))return this;r=Sv(r,this);var i=nu(this.requireFail,r);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(r){return!!this.simultaneous[r.id]},e.emit=function(r){var i=this,s=this.state;function o(a){i.manager.emit(a,r)}s<kl&&o(i.options.event+k$(s)),o(i.options.event),r.additionalEvent&&o(r.additionalEvent),s>=kl&&o(i.options.event+k$(s))},e.tryEmit=function(r){if(this.canEmit())return this.emit(r);this.state=po},e.canEmit=function(){for(var r=0;r<this.requireFail.length;){if(!(this.requireFail[r].state&(po|ly)))return!1;r++}return!0},e.recognize=function(r){var i=eu({},r);if(!tw(this.options.enable,[this,i])){this.reset(),this.state=po;return}this.state&(ca|Ym|po)&&(this.state=ly),this.state=this.process(i),this.state&(cs|Td|kl|Ym)&&this.tryEmit(i)},e.process=function(r){},e.getTouchAction=function(){},e.reset=function(){},n}(),dP=function(n){gs(e,n);function e(r){var i;return r===void 0&&(r={}),i=n.call(this,$s({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},r))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var t=e.prototype;return t.getTouchAction=function(){return[uP]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime<o.time;if(this.reset(),i.eventType&Vr&&this.count===0)return this.failTimeout();if(l&&c&&a){if(i.eventType!==Jn)return this.failTimeout();var u=this.pTime?i.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||yb(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!u?this.count=1:this.count+=1,this._input=i;var d=this.count%o.taps;if(d===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=ca,s.tryEmit()},o.interval),cs):ca}return po},t.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=po},this.options.interval),po},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===ca&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Wg),Md=function(n){gs(e,n);function e(r){return r===void 0&&(r={}),n.call(this,$s({pointers:1},r))||this}var t=e.prototype;return t.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},t.process=function(i){var s=this.state,o=i.eventType,a=s&(cs|Td),l=this.attrTest(i);return a&&(o&vi||!l)?s|Ym:a||l?o&Jn?s|kl:s&cs?s|Td:cs:po},e}(Wg);function fJ(n){return n===Ed?"down":n===Ug?"up":n===zg?"left":n===qg?"right":""}var fD=function(n){gs(e,n);function e(r){var i;return r===void 0&&(r={}),i=n.call(this,$s({event:"pan",threshold:10,pointers:1,direction:rJ},r))||this,i.pX=null,i.pY=null,i}var t=e.prototype;return t.getTouchAction=function(){var i=this.options.direction,s=[];return i&xo&&s.push(Um),i&Lc&&s.push(qm),s},t.directionTest=function(i){var s=this.options,o=!0,a=i.distance,l=i.direction,c=i.deltaX,u=i.deltaY;return l&s.direction||(s.direction&xo?(l=c===0?gb:c<0?zg:qg,o=c!==this.pX,a=Math.abs(i.deltaX)):(l=u===0?gb:u<0?Ug:Ed,o=u!==this.pY,a=Math.abs(i.deltaY))),i.direction=l,o&&a>s.threshold&&l&s.direction},t.attrTest=function(i){return Md.prototype.attrTest.call(this,i)&&(this.state&cs||!(this.state&cs)&&this.directionTest(i))},t.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=fJ(i.direction);s&&(i.additionalEvent=this.options.event+s),n.prototype.emit.call(this,i)},e}(Md),pJ=function(n){gs(e,n);function e(r){return r===void 0&&(r={}),n.call(this,$s({event:"swipe",threshold:10,velocity:.3,direction:xo|Lc,pointers:1},r))||this}var t=e.prototype;return t.getTouchAction=function(){return fD.prototype.getTouchAction.call(this)},t.attrTest=function(i){var s=this.options.direction,o;return s&(xo|Lc)?o=i.overallVelocity:s&xo?o=i.overallVelocityX:s&Lc&&(o=i.overallVelocityY),n.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&tu(o)>this.options.velocity&&i.eventType&Jn},t.emit=function(i){var s=fJ(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(Md),mJ=function(n){gs(e,n);function e(r){return r===void 0&&(r={}),n.call(this,$s({event:"pinch",threshold:0,pointers:2},r))||this}var t=e.prototype;return t.getTouchAction=function(){return[Ac]},t.attrTest=function(i){return n.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&cs)},t.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}n.prototype.emit.call(this,i)},e}(Md),gJ=function(n){gs(e,n);function e(r){return r===void 0&&(r={}),n.call(this,$s({event:"rotate",threshold:0,pointers:2},r))||this}var t=e.prototype;return t.getTouchAction=function(){return[Ac]},t.attrTest=function(i){return n.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&cs)},e}(Md),vJ=function(n){gs(e,n);function e(r){var i;return r===void 0&&(r={}),i=n.call(this,$s({event:"press",pointers:1,time:251,threshold:9},r))||this,i._timer=null,i._input=null,i}var t=e.prototype;return t.getTouchAction=function(){return[tJ]},t.process=function(i){var s=this,o=this.options,a=i.pointers.length===o.pointers,l=i.distance<o.threshold,c=i.deltaTime>o.time;if(this._input=i,!l||!a||i.eventType&(Jn|vi)&&!c)this.reset();else if(i.eventType&Vr)this.reset(),this._timer=setTimeout(function(){s.state=ca,s.tryEmit()},o.time);else if(i.eventType&Jn)return ca;return po},t.reset=function(){clearTimeout(this._timer)},t.emit=function(i){this.state===ca&&(i&&i.eventType&Jn?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=aD(),this.manager.emit(this.options.event,this._input)))},e}(Wg),yJ={domEvents:!1,touchAction:eJ,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},C$=[[gJ,{enable:!1}],[mJ,{enable:!1},["rotate"]],[pJ,{direction:xo}],[fD,{direction:xo},["swipe"]],[dP],[dP,{event:"doubletap",taps:2},["tap"]],[vJ]],OMe=1,E$=2;function T$(n,e){var t=n.element;if(t.style){var r;la(n.options.cssProps,function(i,s){r=ew(t.style,s),e?(n.oldCssProps[r]=t.style[r],t.style[r]=i):t.style[r]=n.oldCssProps[r]||""}),e||(n.oldCssProps={})}}function RMe(n,e){var t=document.createEvent("Event");t.initEvent(n,!0,!0),t.gesture=e,e.target.dispatchEvent(t)}var M$=function(){function n(t,r){var i=this;this.options=eu({},yJ,r||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=MMe(this),this.touchAction=new sJ(this,this.options.touchAction),T$(this,!0),la(this.options.recognizers,function(s){var o=i.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=n.prototype;return e.set=function(r){return eu(this.options,r),r.touchAction&&this.touchAction.update(),r.inputTarget&&(this.input.destroy(),this.input.target=r.inputTarget,this.input.init()),this},e.stop=function(r){this.session.stopped=r?E$:OMe},e.recognize=function(r){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(r);var s,o=this.recognizers,a=i.curRecognizer;(!a||a&&a.state&ca)&&(i.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],i.stopped!==E$&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(r):s.reset(),!a&&s.state&(cs|Td|kl)&&(i.curRecognizer=s,a=s),l++}},e.get=function(r){if(r instanceof Wg)return r;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===r)return i[s];return null},e.add=function(r){if(ah(r,"add",this))return this;var i=this.get(r.options.event);return i&&this.remove(i),this.recognizers.push(r),r.manager=this,this.touchAction.update(),r},e.remove=function(r){if(ah(r,"remove",this))return this;var i=this.get(r);if(r){var s=this.recognizers,o=nu(s,i);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(r,i){if(r===void 0||i===void 0)return this;var s=this.handlers;return la(Wm(r),function(o){s[o]=s[o]||[],s[o].push(i)}),this},e.off=function(r,i){if(r===void 0)return this;var s=this.handlers;return la(Wm(r),function(o){i?s[o]&&s[o].splice(nu(s[o],i),1):delete s[o]}),this},e.emit=function(r,i){this.options.domEvents&&RMe(r,i);var s=this.handlers[r]&&this.handlers[r].slice();if(!(!s||!s.length)){i.type=r,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},e.destroy=function(){this.element&&T$(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},n}(),DMe={touchstart:Vr,touchmove:gu,touchend:Jn,touchcancel:vi},NMe="touchstart",AMe="touchstart touchmove touchend touchcancel",LMe=function(n){gs(e,n);function e(){var r,i=e.prototype;return i.evTarget=NMe,i.evWin=AMe,r=n.apply(this,arguments)||this,r.started=!1,r}var t=e.prototype;return t.handler=function(i){var s=DMe[i.type];if(s===Vr&&(this.started=!0),!!this.started){var o=FMe.call(this,i,s);s&(Jn|vi)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Bg,srcEvent:i})}},e}(af);function FMe(n,e){var t=Hm(n.touches),r=Hm(n.changedTouches);return e&(Jn|vi)&&(t=uD(t.concat(r),"identifier",!0)),[t,r]}function bJ(n,e,t){var r="DEPRECATED METHOD: "+e+`
`+t+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,r,s),n.apply(this,arguments)}}var xJ=bJ(function(n,e,t){for(var r=Object.keys(e),i=0;i<r.length;)(!t||t&&n[r[i]]===void 0)&&(n[r[i]]=e[r[i]]),i++;return n},"extend","Use `assign`."),jMe=bJ(function(n,e){return xJ(n,e,!0)},"merge","Use `assign`.");function $Me(n,e,t){var r=e.prototype,i;i=n.prototype=Object.create(r),i.constructor=n,i._super=r,t&&eu(i,t)}function I$(n,e){return function(){return n.apply(e,arguments)}}var pD=function(){var n=function(t,r){return r===void 0&&(r={}),new M$(t,$s({recognizers:C$.concat()},r))};return n.VERSION="2.0.17-rc",n.DIRECTION_ALL=rJ,n.DIRECTION_DOWN=Ed,n.DIRECTION_LEFT=zg,n.DIRECTION_RIGHT=qg,n.DIRECTION_UP=Ug,n.DIRECTION_HORIZONTAL=xo,n.DIRECTION_VERTICAL=Lc,n.DIRECTION_NONE=gb,n.DIRECTION_DOWN=Ed,n.INPUT_START=Vr,n.INPUT_MOVE=gu,n.INPUT_END=Jn,n.INPUT_CANCEL=vi,n.STATE_POSSIBLE=ly,n.STATE_BEGAN=cs,n.STATE_CHANGED=Td,n.STATE_ENDED=kl,n.STATE_RECOGNIZED=ca,n.STATE_CANCELLED=Ym,n.STATE_FAILED=po,n.Manager=M$,n.Input=af,n.TouchAction=sJ,n.TouchInput=hD,n.MouseInput=dD,n.PointerEventInput=hJ,n.TouchMouseInput=dJ,n.SingleTouchInput=LMe,n.Recognizer=Wg,n.AttrRecognizer=Md,n.Tap=dP,n.Pan=fD,n.Swipe=pJ,n.Pinch=mJ,n.Rotate=gJ,n.Press=vJ,n.on=Lp,n.off=Fp,n.each=la,n.merge=jMe,n.extend=xJ,n.bindFn=I$,n.assign=eu,n.inherit=$Me,n.bindFn=I$,n.prefixed=ew,n.toArray=Hm,n.inArray=nu,n.uniqueArray=uD,n.splitStr=Wm,n.boolOrFn=tw,n.hasParent=cD,n.addEventListeners=Lp,n.removeEventListeners=Fp,n.defaults=eu({},yJ,{preset:C$}),n}();pD.defaults;const mD=y2e("DELETE");function wJ(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return gD({},n,...t)}function gD(){const n=bb(...arguments);return SJ(n),n}function bb(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];if(e.length<2)return e[0];if(e.length>2)return bb(gD(e[0],e[1]),...sf(e).call(e,2));const r=e[0],i=e[1];if(r instanceof Date&&i instanceof Date)return r.setTime(i.getTime()),r;for(const s of P2e(i))Object.prototype.propertyIsEnumerable.call(i,s)&&(i[s]===mD?delete r[s]:r[s]!==null&&i[s]!==null&&typeof r[s]=="object"&&typeof i[s]=="object"&&!It(r[s])&&!It(i[s])?r[s]=bb(r[s],i[s]):r[s]=_J(i[s]));return r}function _J(n){return It(n)?Ut(n).call(n,e=>_J(e)):typeof n=="object"&&n!==null?n instanceof Date?new Date(n.getTime()):bb({},n):n}function SJ(n){for(const e of rr(n))n[e]===mD?delete n[e]:typeof n[e]=="object"&&n[e]!==null&&SJ(n[e])}function BMe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return zMe(e.length?e:[Ei()])}function zMe(n){let[e,t,r]=qMe(n),i=1;const s=()=>{const o=2091639*e+i*23283064365386963e-26;return e=t,t=r,r=o-(i=o|0)};return s.uint32=()=>s()*4294967296,s.fract53=()=>s()+(s()*2097152|0)*11102230246251565e-32,s.algorithm="Alea",s.seed=n,s.version="0.9",s}function qMe(){const n=UMe();let e=n(" "),t=n(" "),r=n(" ");for(let i=0;i<arguments.length;i++)e-=n(i<0||arguments.length<=i?void 0:arguments[i]),e<0&&(e+=1),t-=n(i<0||arguments.length<=i?void 0:arguments[i]),t<0&&(t+=1),r-=n(i<0||arguments.length<=i?void 0:arguments[i]),r<0&&(r+=1);return[e,t,r]}function UMe(){let n=4022871197;return function(e){const t=e.toString();for(let r=0;r<t.length;r++){n+=t.charCodeAt(r);let i=.02519603282416938*n;n=i>>>0,i-=n,i*=n,n=i>>>0,i-=n,n+=i*4294967296}return(n>>>0)*23283064365386963e-26}}function WMe(){const n=()=>{};return{on:n,off:n,destroy:n,emit:n,get(){return{set:n}}}}const vD=typeof window<"u"?window.Hammer||pD:function(){return WMe()};function mo(n){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:n,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const t=vD(this._dom.overlay);t.on("tap",ue(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{t.destroy()});const r=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];je(r).call(r,i=>{t.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{HMe(i.target,n)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}oD(mo.prototype);mo.current=null;mo.prototype.destroy=function(){this.deactivate();for(const t of yEe(n=Wr(e=this._cleanupQueue).call(e,0)).call(n)){var n,e;t()}};mo.prototype.activate=function(){mo.current&&mo.current.deactivate(),mo.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};mo.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};mo.prototype._onTapOverlay=function(n){this.activate(),n.srcEvent.stopPropagation()};function HMe(n,e){for(;n;){if(n===e)return!0;n=n.parentNode}return!1}const YMe=/^\/?Date\((-?\d+)/i,GMe=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,VMe=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,KMe=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,XMe=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function jp(n){return n instanceof Number||typeof n=="number"}function kJ(n){if(n)for(;n.hasChildNodes()===!0;){const e=n.firstChild;e&&(kJ(e),n.removeChild(e))}}function Mi(n){return n instanceof String||typeof n=="string"}function fP(n){return typeof n=="object"&&n!==null}function QMe(n){if(n instanceof Date)return!0;if(Mi(n)){if(YMe.exec(n))return!0;if(!isNaN(Date.parse(n)))return!0}return!1}function ru(n,e,t,r){let i=!1;r===!0&&(i=e[t]===null&&n[t]!==void 0),i?delete n[t]:n[t]=e[t]}function CJ(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(const r in n)if(e[r]!==void 0)if(e[r]===null||typeof e[r]!="object")ru(n,e,r,t);else{const i=n[r],s=e[r];fP(i)&&fP(s)&&CJ(i,s,t)}}const JMe=Pl;function ZMe(n,e){if(!It(n))throw new Error("Array with property names expected as first argument");for(var t=arguments.length,r=new Array(t>2?t-2:0),i=2;i<t;i++)r[i-2]=arguments[i];for(const s of r)for(let o=0;o<n.length;o++){const a=n[o];s&&Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}function eIe(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(It(t))throw new TypeError("Arrays are not supported by deepExtend");for(let i=0;i<n.length;i++){const s=n[i];if(Object.prototype.hasOwnProperty.call(t,s))if(t[s]&&t[s].constructor===Object)e[s]===void 0&&(e[s]={}),e[s].constructor===Object?Gm(e[s],t[s],!1,r):ru(e,t,s,r);else{if(It(t[s]))throw new TypeError("Arrays are not supported by deepExtend");ru(e,t,s,r)}}return e}function tIe(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(It(t))throw new TypeError("Arrays are not supported by deepExtend");for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&!Cd(n).call(n,i))if(t[i]&&t[i].constructor===Object)e[i]===void 0&&(e[i]={}),e[i].constructor===Object?Gm(e[i],t[i]):ru(e,t,i,r);else if(It(t[i])){e[i]=[];for(let s=0;s<t[i].length;s++)e[i].push(t[i][s])}else ru(e,t,i,r);return e}function Gm(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)||t===!0)if(typeof e[s]=="object"&&e[s]!==null&&sj(e[s])===Object.prototype)n[s]===void 0?n[s]=Gm({},e[s],t):typeof n[s]=="object"&&n[s]!==null&&sj(n[s])===Object.prototype?Gm(n[s],e[s],t):ru(n,e,s,r);else if(It(e[s])){var i;n[s]=sf(i=e[s]).call(i)}else ru(n,e,s,r);return n}function nIe(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!=e[t])return!1;return!0}function dp(n){const e=typeof n;return e==="object"?n===null?"null":n instanceof Boolean?"Boolean":n instanceof Number?"Number":n instanceof String?"String":It(n)?"Array":n instanceof Date?"Date":"Object":e==="number"?"Number":e==="boolean"?"Boolean":e==="string"?"String":e===void 0?"undefined":e}function Vm(n,e){return[...n,e]}function EJ(n){return sf(n).call(n)}function rIe(n){return n.getBoundingClientRect().left}function iIe(n){return n.getBoundingClientRect().right}function sIe(n){return n.getBoundingClientRect().top}function oIe(n,e){let t=n.className.split(" ");const r=e.split(" ");t=$n(t).call(t,yt(r).call(r,function(i){return!Cd(t).call(t,i)})),n.className=t.join(" ")}function aIe(n,e){let t=n.className.split(" ");const r=e.split(" ");t=yt(t).call(t,function(i){return!Cd(r).call(r,i)}),n.className=t.join(" ")}function lIe(n,e){if(It(n)){const t=n.length;for(let r=0;r<t;r++)e(n[r],r,n)}else for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(n[t],t,n)}const cIe=iD;function uIe(n,e,t){return n[e]!==t?(n[e]=t,!0):!1}function hIe(n){let e=!1;return()=>{e||(e=!0,requestAnimationFrame(()=>{e=!1,n()}))}}function dIe(n){n||(n=window.event),n&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}function fIe(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event,e=null;return n&&(n.target?e=n.target:n.srcElement&&(e=n.srcElement)),!(e instanceof Element)||e.nodeType!=null&&e.nodeType==3&&(e=e.parentNode,!(e instanceof Element))?null:e}function pIe(n,e){let t=n;for(;t;){if(t===e)return!0;if(t.parentNode)t=t.parentNode;else return!1}return!1}const mIe={asBoolean(n,e){return typeof n=="function"&&(n=n()),n!=null?n!=!1:e||null},asNumber(n,e){return typeof n=="function"&&(n=n()),n!=null?Number(n)||e||null:e||null},asString(n,e){return typeof n=="function"&&(n=n()),n!=null?String(n):e||null},asSize(n,e){return typeof n=="function"&&(n=n()),Mi(n)?n:jp(n)?n+"px":e||null},asElement(n,e){return typeof n=="function"&&(n=n()),n||e||null}};function nw(n){let e;switch(n.length){case 3:case 4:return e=VMe.exec(n),e?{r:Ti(e[1]+e[1],16),g:Ti(e[2]+e[2],16),b:Ti(e[3]+e[3],16)}:null;case 6:case 7:return e=GMe.exec(n),e?{r:Ti(e[1],16),g:Ti(e[2],16),b:Ti(e[3],16)}:null;default:return null}}function gIe(n,e){if(Cd(n).call(n,"rgba"))return n;if(Cd(n).call(n,"rgb")){const t=n.substr(Xt(n).call(n,"(")+1).replace(")","").split(",");return"rgba("+t[0]+","+t[1]+","+t[2]+","+e+")"}else{const t=nw(n);return t==null?n:"rgba("+t.r+","+t.g+","+t.b+","+e+")"}}function yD(n,e,t){var r;return"#"+sf(r=((1<<24)+(n<<16)+(e<<8)+t).toString(16)).call(r,1)}function vIe(n,e){if(Mi(n)){let r=n;if(xD(r)){var t;const i=Ut(t=r.substr(4).substr(0,r.length-5).split(",")).call(t,function(s){return Ti(s)});r=yD(i[0],i[1],i[2])}if(bD(r)===!0){const i=MJ(r),s={h:i.h,s:i.s*.8,v:Math.min(1,i.v*1.02)},o={h:i.h,s:Math.min(1,i.s*1.25),v:i.v*.8},a=pP(o.h,o.s,o.v),l=pP(s.h,s.s,s.v);return{background:r,border:a,highlight:{background:l,border:a},hover:{background:l,border:a}}}else return{background:r,border:r,highlight:{background:r,border:r},hover:{background:r,border:r}}}else return e?{background:n.background||e.background,border:n.border||e.border,highlight:Mi(n.highlight)?{border:n.highlight,background:n.highlight}:{background:n.highlight&&n.highlight.background||e.highlight.background,border:n.highlight&&n.highlight.border||e.highlight.border},hover:Mi(n.hover)?{border:n.hover,background:n.hover}:{border:n.hover&&n.hover.border||e.hover.border,background:n.hover&&n.hover.background||e.hover.background}}:{background:n.background||void 0,border:n.border||void 0,highlight:Mi(n.highlight)?{border:n.highlight,background:n.highlight}:{background:n.highlight&&n.highlight.background||void 0,border:n.highlight&&n.highlight.border||void 0},hover:Mi(n.hover)?{border:n.hover,background:n.hover}:{border:n.hover&&n.hover.border||void 0,background:n.hover&&n.hover.background||void 0}}}function lh(n,e,t){n=n/255,e=e/255,t=t/255;const r=Math.min(n,Math.min(e,t)),i=Math.max(n,Math.max(e,t));if(r===i)return{h:0,s:0,v:r};const s=n===r?e-t:t===r?n-e:t-n,a=60*((n===r?3:t===r?1:5)-s/(i-r))/360,l=(i-r)/i;return{h:a,s:l,v:i}}function TJ(n){const e=document.createElement("div"),t={};e.style.cssText=n;for(let r=0;r<e.style.length;++r)t[e.style[r]]=e.style.getPropertyValue(e.style[r]);return t}function yIe(n,e){const t=TJ(e);for(const[r,i]of TTe(t))n.style.setProperty(r,i)}function bIe(n,e){const t=TJ(e);for(const r of rr(t))n.style.removeProperty(r)}function $p(n,e,t){let r,i,s;const o=Math.floor(n*6),a=n*6-o,l=t*(1-e),c=t*(1-a*e),u=t*(1-(1-a)*e);switch(o%6){case 0:r=t,i=u,s=l;break;case 1:r=c,i=t,s=l;break;case 2:r=l,i=t,s=u;break;case 3:r=l,i=c,s=t;break;case 4:r=u,i=l,s=t;break;case 5:r=t,i=l,s=c;break}return{r:Math.floor(r*255),g:Math.floor(i*255),b:Math.floor(s*255)}}function pP(n,e,t){const r=$p(n,e,t);return yD(r.r,r.g,r.b)}function MJ(n){const e=nw(n);if(!e)throw new TypeError("'".concat(n,"' is not a valid color."));return lh(e.r,e.g,e.b)}function bD(n){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n)}function xD(n){return KMe.test(n)}function IJ(n){return XMe.test(n)}function xIe(n,e){if(e!==null&&typeof e=="object"){const t=$g(e);for(let r=0;r<n.length;r++)Object.prototype.hasOwnProperty.call(e,n[r])&&typeof e[n[r]]=="object"&&(t[n[r]]=wD(e[n[r]]));return t}else return null}function wD(n){if(n===null||typeof n!="object")return null;if(n instanceof Element)return n;const e=$g(n);for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&typeof n[t]=="object"&&(e[t]=wD(n[t]));return e}function wIe(n,e){for(let t=0;t<n.length;t++){const r=n[t];let i;for(i=t;i>0&&e(r,n[i-1])<0;i--)n[i]=n[i-1];n[i]=r}return n}function _Ie(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=function(f){return f!=null},s=function(f){return f!==null&&typeof f=="object"},o=function(f){for(const m in f)if(Object.prototype.hasOwnProperty.call(f,m))return!1;return!0};if(!s(n))throw new Error("Parameter mergeTarget must be an object");if(!s(e))throw new Error("Parameter options must be an object");if(!i(t))throw new Error("Parameter option must have a value");if(!s(r))throw new Error("Parameter globalOptions must be an object");const a=function(f,m,g){s(f[g])||(f[g]={});const v=m[g],y=f[g];for(const b in v)Object.prototype.hasOwnProperty.call(v,b)&&(y[b]=v[b])},l=e[t],u=s(r)&&!o(r)?r[t]:void 0,h=u?u.enabled:void 0;if(l===void 0)return;if(typeof l=="boolean"){s(n[t])||(n[t]={}),n[t].enabled=l;return}if(l===null&&!s(n[t]))if(i(u))n[t]=$g(u);else return;if(!s(l))return;let d=!0;l.enabled!==void 0?d=l.enabled:h!==void 0&&(d=u.enabled),a(n,e,t),n[t].enabled=d}function SIe(n,e,t,r){let s=0,o=0,a=n.length-1;for(;o<=a&&s<1e4;){const l=Math.floor((o+a)/2),c=n[l],u=r===void 0?c[t]:c[t][r],h=e(u);if(h==0)return l;h==-1?o=l+1:a=l-1,s++}return-1}function kIe(n,e,t,r,i){let o=0,a=0,l=n.length-1,c,u,h,d;for(i=i??function(f,m){return f==m?0:f<m?-1:1};a<=l&&o<1e4;){if(d=Math.floor(.5*(l+a)),c=n[Math.max(0,d-1)][t],u=n[d][t],h=n[Math.min(n.length-1,d+1)][t],i(u,e)==0)return d;if(i(c,e)<0&&i(u,e)>0)return r=="before"?Math.max(0,d-1):d;if(i(u,e)<0&&i(h,e)>0)return r=="before"?d:Math.min(n.length-1,d+1);i(u,e)<0?a=d+1:l=d-1,o++}return-1}const CIe={linear(n){return n},easeInQuad(n){return n*n},easeOutQuad(n){return n*(2-n)},easeInOutQuad(n){return n<.5?2*n*n:-1+(4-2*n)*n},easeInCubic(n){return n*n*n},easeOutCubic(n){return--n*n*n+1},easeInOutCubic(n){return n<.5?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1},easeInQuart(n){return n*n*n*n},easeOutQuart(n){return 1- --n*n*n*n},easeInOutQuart(n){return n<.5?8*n*n*n*n:1-8*--n*n*n*n},easeInQuint(n){return n*n*n*n*n},easeOutQuint(n){return 1+--n*n*n*n*n},easeInOutQuint(n){return n<.5?16*n*n*n*n*n:1+16*--n*n*n*n*n}};function EIe(){const n=document.createElement("p");n.style.width="100%",n.style.height="200px";const e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(n),document.body.appendChild(e);const t=n.offsetWidth;e.style.overflow="scroll";let r=n.offsetWidth;return t==r&&(r=e.clientWidth),document.body.removeChild(e),t-r}function TIe(n,e){let t;It(e)||(e=[e]);for(const r of n)if(r){t=r[e[0]];for(let i=1;i<e.length;i++)t&&(t=t[e[i]]);if(typeof t<"u")break}return t}const MIe={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};let PJ=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return MIe[e]}setColor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e==="none")return;let r;const i=this._isColorString(e);if(i!==void 0&&(e=i),Mi(e)===!0){if(xD(e)===!0){const s=e.substr(4).substr(0,e.length-5).split(",");r={r:s[0],g:s[1],b:s[2],a:1}}else if(IJ(e)===!0){const s=e.substr(5).substr(0,e.length-6).split(",");r={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(bD(e)===!0){const s=nw(e);r={r:s.r,g:s.g,b:s.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){const s=e.a!==void 0?e.a:"1.0";r={r:e.r,g:e.g,b:e.b,a:s}}if(r===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+ii(e));this._setColor(r,t)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0&&(this.previousColor=Pl({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",fi(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)===!0&&(this.initialColor=Pl({},e)),this.color=e;const r=lh(e.r,e.g,e.b),i=2*Math.PI,s=this.r*r.s,o=this.centerCoordinates.x+s*Math.sin(i*r.h),a=this.centerCoordinates.y+s*Math.cos(i*r.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=a-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){const t=lh(this.color.r,this.color.g,this.color.b);t.v=e/100;const r=$p(t.h,t.s,t.v);r.a=this.color.a,this.color=r,this._updatePicker()}_updatePicker(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color;const t=lh(e.r,e.g,e.b),r=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1)),r.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const i=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;r.clearRect(0,0,i,s),r.putImageData(this.hueCircle,0,0),r.fillStyle="rgba(0,0,0,"+(1-t.v)+")",r.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),QQ(r).call(r),this.brightnessRange.value=100*t.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){var e,t,r,i;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){const o=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{const o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);const s=this;this.opacityRange.onchange=function(){s._setOpacity(this.value)},this.opacityRange.oninput=function(){s._setOpacity(this.value)},this.brightnessRange.onchange=function(){s._setBrightness(this.value)},this.brightnessRange.oninput=function(){s._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=ue(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=ue(t=this._apply).call(t,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=ue(r=this._save).call(r,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=ue(i=this._loadLast).call(i,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new vD(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",e=>{e.isFirst&&this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){const e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const t=this.colorPickerCanvas.clientWidth,r=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,t,r);let i,s,o,a;this.centerCoordinates={x:t*.5,y:r*.5},this.r=.49*t;const l=2*Math.PI/360,c=1/360,u=1/this.r;let h;for(o=0;o<360;o++)for(a=0;a<this.r;a++)i=this.centerCoordinates.x+a*Math.sin(l*o),s=this.centerCoordinates.y+a*Math.cos(l*o),h=$p(o*c,a*u,1),e.fillStyle="rgb("+h.r+","+h.g+","+h.b+")",e.fillRect(i-.5,s-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,t,r)}this.generated=!0}_moveSelector(e){const t=this.colorPickerDiv.getBoundingClientRect(),r=e.center.x-t.left,i=e.center.y-t.top,s=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=r-o,l=i-s,c=Math.atan2(a,l),u=.98*Math.min(Math.sqrt(a*a+l*l),o),h=Math.cos(c)*u+s,d=Math.sin(c)*u+o;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=d-.5*this.colorPickerSelector.clientWidth+"px";let f=c/(2*Math.PI);f=f<0?f+1:f;const m=u/this.r,g=lh(this.color.r,this.color.g,this.color.b);g.h=f,g.s=m;const v=$p(g.h,g.s,g.v);v.a=this.color.a,this.color=v,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}};function mP(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];if(e.length<1)throw new TypeError("Invalid arguments.");if(e.length===1)return document.createTextNode(e[0]);{const r=document.createElement(e[0]);return r.appendChild(mP(...sf(e).call(e,1))),r}}let IIe=class{constructor(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:()=>!1;this.parent=e,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.hideOption=s,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},Pl(this.options,this.defaultOptions),this.configureOptions=r,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new PJ(i),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let t=!0;if(typeof e=="string")this.options.filter=e;else if(It(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),yt(e)!==void 0&&(this.options.filter=yt(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(t=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,t=e):typeof e=="function"&&(this.options.filter=e,t=!0);yt(this.options)===!1&&(t=!1),this.options.enabled=t}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];const e=yt(this.options);let t=0,r=!1;for(const i in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,i)&&(this.allowCreation=!1,r=!1,typeof e=="function"?(r=e(i,[]),r=r||this._handleObject(this.configureOptions[i],[i],!0)):(e===!0||Xt(e).call(e,i)!==-1)&&(r=!0),r!==!1&&(this.allowCreation=!0,t>0&&this._makeItem([]),this._makeHeader(i),this._handleObject(this.configureOptions[i],[i])),t++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(let e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(let e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let t=this.moduleOptions;for(let r=0;r<e.length;r++)if(t[e[r]]!==void 0)t=t[e[r]];else{t=void 0;break}return t}_makeItem(e){if(this.allowCreation===!0){const s=document.createElement("div");s.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return je(r).call(r,o=>{s.appendChild(o)}),this.domElements.push(s),this.domElements.length}return 0}_makeHeader(e){const t=document.createElement("div");t.className="vis-configuration vis-config-header",t.innerText=e,this._makeItem([],t)}_makeLabel(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=document.createElement("div");if(i.className="vis-configuration vis-config-label vis-config-s"+t.length,r===!0){for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(mP("i","b",e))}else i.innerText=e+":";return i}_makeDropdown(e,t,r){const i=document.createElement("select");i.className="vis-configuration vis-config-select";let s=0;t!==void 0&&Xt(e).call(e,t)!==-1&&(s=Xt(e).call(e,t));for(let l=0;l<e.length;l++){const c=document.createElement("option");c.value=e[l],l===s&&(c.selected="selected"),c.innerText=e[l],i.appendChild(c)}const o=this;i.onchange=function(){o._update(this.value,r)};const a=this._makeLabel(r[r.length-1],r);this._makeItem(r,a,i)}_makeRange(e,t,r){const i=e[0],s=e[1],o=e[2],a=e[3],l=document.createElement("input");l.className="vis-configuration vis-config-range";try{l.type="range",l.min=s,l.max=o}catch{}l.step=a;let c="",u=0;t!==void 0?(t<0&&t*1.2<s?(l.min=Math.ceil(t*1.2),u=l.min,c="range increased"):t/1.2<s&&(l.min=Math.ceil(t/1.2),u=l.min,c="range increased"),t*1.2>o&&o!==1&&(l.max=Math.ceil(t*1.2),u=l.max,c="range increased"),l.value=t):l.value=i;const h=document.createElement("input");h.className="vis-configuration vis-config-rangeinput",h.value=l.value;const d=this;l.onchange=function(){h.value=this.value,d._update(Number(this.value),r)},l.oninput=function(){h.value=this.value};const f=this._makeLabel(r[r.length-1],r),m=this._makeItem(r,f,l,h);c!==""&&this.popupHistory[m]!==u&&(this.popupHistory[m]=u,this._setupPopup(c,m))}_makeButton(){if(this.options.showButton===!0){const e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,t){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){const r=document.createElement("div");r.id="vis-configuration-popup",r.className="vis-configuration-popup",r.innerText=e,r.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:r,index:t}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){const t=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=t.left+"px",this.popupDiv.html.style.top=t.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=fi(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=fi(()=>{this._removePopup()},1800)}}_makeCheckbox(e,t,r){const i=document.createElement("input");i.type="checkbox",i.className="vis-configuration vis-config-checkbox",i.checked=e,t!==void 0&&(i.checked=t,t!==e&&(typeof e=="object"?t!==e.enabled&&this.changedOptions.push({path:r,value:t}):this.changedOptions.push({path:r,value:t})));const s=this;i.onchange=function(){s._update(this.checked,r)};const o=this._makeLabel(r[r.length-1],r);this._makeItem(r,o,i)}_makeTextInput(e,t,r){const i=document.createElement("input");i.type="text",i.className="vis-configuration vis-config-text",i.value=t,t!==e&&this.changedOptions.push({path:r,value:t});const s=this;i.onchange=function(){s._update(this.value,r)};const o=this._makeLabel(r[r.length-1],r);this._makeItem(r,o,i)}_makeColorField(e,t,r){const i=e[1],s=document.createElement("div");t=t===void 0?i:t,t!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=t):s.className="vis-configuration vis-config-colorBlock none",t=t===void 0?i:t,s.onclick=()=>{this._showColorPicker(t,s,r)};const o=this._makeLabel(r[r.length-1],r);this._makeItem(r,o,s)}_showColorPicker(e,t,r){t.onclick=function(){},this.colorPicker.insertTo(t),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(i=>{const s="rgba("+i.r+","+i.g+","+i.b+","+i.a+")";t.style.backgroundColor=s,this._update(s,r)}),this.colorPicker.setCloseCallback(()=>{t.onclick=()=>{this._showColorPicker(e,t,r)}})}_handleObject(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=!1;const s=yt(this.options);let o=!1;for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){i=!0;const l=e[a],c=Vm(t,a);if(typeof s=="function"&&(i=s(a,t),i===!1&&!It(l)&&typeof l!="string"&&typeof l!="boolean"&&l instanceof Object&&(this.allowCreation=!1,i=this._handleObject(l,c,!0),this.allowCreation=r===!1)),i!==!1){o=!0;const u=this._getValue(c);if(It(l))this._handleArray(l,u,c);else if(typeof l=="string")this._makeTextInput(l,u,c);else if(typeof l=="boolean")this._makeCheckbox(l,u,c);else if(l instanceof Object){if(!this.hideOption(t,a,this.moduleOptions))if(l.enabled!==void 0){const h=Vm(c,"enabled"),d=this._getValue(h);if(d===!0){const f=this._makeLabel(a,c,!0);this._makeItem(c,f),o=this._handleObject(l,c)||o}else this._makeCheckbox(l,d,c)}else{const h=this._makeLabel(a,c,!0);this._makeItem(c,h),o=this._handleObject(l,c)||o}}else console.error("dont know how to handle",l,a,c)}}return o}_handleArray(e,t,r){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,t,r),e[1]!==t&&this.changedOptions.push({path:r,value:t})):typeof e[0]=="string"?(this._makeDropdown(e,t,r),e[0]!==t&&this.changedOptions.push({path:r,value:t})):typeof e[0]=="number"&&(this._makeRange(e,t,r),e[0]!==t&&this.changedOptions.push({path:r,value:Number(t)}))}_update(e,t){const r=this._constructOptions(e,t);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",r),this.initialized=!0,this.parent.setOptions(r)}_constructOptions(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let s=0;s<t.length;s++)t[s]!=="global"&&(i[t[s]]===void 0&&(i[t[s]]={}),s!==t.length-1?i=i[t[s]]:i[t[s]]=e);return r}_printOptions(){const e=this.getOptions();for(;this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(mP("pre","const options = "+ii(e,null,2)))}getOptions(){const e={};for(let t=0;t<this.changedOptions.length;t++)this._constructOptions(this.changedOptions[t].value,this.changedOptions[t].path,e);return e}},PIe=class{constructor(e,t){this.container=e,this.overflowMethod=t||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,t){this.x=Ti(e),this.y=Ti(t)}setText(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}show(e){if(e===void 0&&(e=!0),e===!0){const t=this.frame.clientHeight,r=this.frame.clientWidth,i=this.frame.parentNode.clientHeight,s=this.frame.parentNode.clientWidth;let o=0,a=0;if(this.overflowMethod=="flip"){let l=!1,c=!0;this.y-t<this.padding&&(c=!1),this.x+r>s-this.padding&&(l=!0),l?o=this.x-r:o=this.x,c?a=this.y-t:a=this.y}else a=this.y-t,a+t+this.padding>i&&(a=i-t-this.padding),a<this.padding&&(a=this.padding),o=this.x,o+r+this.padding>s&&(o=s-r-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=a+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}},Wf=!1,P$;const gP="background: #FFeeee; color: #dd0000";let OIe=class On{static validate(e,t,r){Wf=!1,P$=t;let i=t;return r!==void 0&&(i=t[r]),On.parse(e,i,[]),Wf}static parse(e,t,r){for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&On.check(i,e,t,r)}static check(e,t,r,i){if(r[e]===void 0&&r.__any__===void 0){On.getSuggestion(e,r,i);return}let s=e,o=!0;r[e]===void 0&&r.__any__!==void 0&&(s="__any__",o=On.getType(t[e])==="object");let a=r[s];o&&a.__type__!==void 0&&(a=a.__type__),On.checkFields(e,t,r,s,a,i)}static checkFields(e,t,r,i,s,o){const a=function(u){console.error("%c"+u+On.printLocation(o,e),gP)},l=On.getType(t[e]),c=s[l];c!==void 0?On.getType(c)==="array"&&Xt(c).call(c,t[e])===-1?(a('Invalid option detected in "'+e+'". Allowed values are:'+On.print(c)+' not "'+t[e]+'". '),Wf=!0):l==="object"&&i!=="__any__"&&(o=Vm(o,e),On.parse(t[e],r[i],o)):s.any===void 0&&(a('Invalid type received for "'+e+'". Expected: '+On.print(rr(s))+". Received ["+l+'] "'+t[e]+'"'),Wf=!0)}static getType(e){const t=typeof e;return t==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":It(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":t==="number"?"number":t==="boolean"?"boolean":t==="string"?"string":t===void 0?"undefined":t}static getSuggestion(e,t,r){const i=On.findInOptions(e,t,r,!1),s=On.findInOptions(e,P$,[],!0),o=8,a=4;let l;i.indexMatch!==void 0?l=" in "+On.printLocation(i.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+i.indexMatch+`"?

`:s.distance<=a&&i.distance>s.distance?l=" in "+On.printLocation(i.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+On.printLocation(s.path,s.closestMatch,""):i.distance<=o?l='. Did you mean "'+i.closestMatch+'"?'+On.printLocation(i.path,e):l=". Did you mean one of these: "+On.print(rr(t))+On.printLocation(r,e),console.error('%cUnknown option detected: "'+e+'"'+l,gP),Wf=!0}static findInOptions(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=1e9,o="",a=[];const l=e.toLowerCase();let c;for(const h in t){let d;if(t[h].__type__!==void 0&&i===!0){const f=On.findInOptions(e,t[h],Vm(r,h));s>f.distance&&(o=f.closestMatch,a=f.path,s=f.distance,c=f.indexMatch)}else{var u;Xt(u=h.toLowerCase()).call(u,l)!==-1&&(c=h),d=On.levenshteinDistance(e,h),s>d&&(o=h,a=EJ(r),s=d)}}return{closestMatch:o,path:a,distance:s,indexMatch:c}}static printLocation(e,t){let i=`

`+(arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`)+`options = {
`;for(let s=0;s<e.length;s++){for(let o=0;o<s+1;o++)i+="  ";i+=e[s]+`: {
`}for(let s=0;s<e.length+1;s++)i+="  ";i+=t+`
`;for(let s=0;s<e.length+1;s++){for(let o=0;o<e.length-s;o++)i+="  ";i+=`}
`}return i+`

`}static print(e){return ii(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(e,t){if(e.length===0)return t.length;if(t.length===0)return e.length;const r=[];let i;for(i=0;i<=t.length;i++)r[i]=[i];let s;for(s=0;s<=e.length;s++)r[0][s]=s;for(i=1;i<=t.length;i++)for(s=1;s<=e.length;s++)t.charAt(i-1)==e.charAt(s-1)?r[i][s]=r[i-1][s-1]:r[i][s]=Math.min(r[i-1][s-1]+1,Math.min(r[i][s-1]+1,r[i-1][s]+1));return r[t.length][e.length]}};const RIe=mo,DIe=PJ,NIe=IIe,AIe=vD,LIe=PIe,FIe=gP,jIe=OIe;var $Ie=Object.freeze({__proto__:null,Activator:RIe,Alea:BMe,ColorPicker:DIe,Configurator:NIe,DELETE:mD,HSVToHex:pP,HSVToRGB:$p,Hammer:AIe,Popup:LIe,RGBToHSV:lh,RGBToHex:yD,VALIDATOR_PRINT_STYLE:FIe,Validator:jIe,addClassName:oIe,addCssText:yIe,binarySearchCustom:SIe,binarySearchValue:kIe,bridgeObject:wD,copyAndExtendArray:Vm,copyArray:EJ,deepExtend:Gm,deepObjectAssign:gD,easingFunctions:CIe,equalArray:nIe,extend:JMe,fillIfDefined:CJ,forEach:lIe,getAbsoluteLeft:rIe,getAbsoluteRight:iIe,getAbsoluteTop:sIe,getScrollBarWidth:EIe,getTarget:fIe,getType:dp,hasParent:pIe,hexToHSV:MJ,hexToRGB:nw,insertSort:wIe,isDate:QMe,isNumber:jp,isObject:fP,isString:Mi,isValidHex:bD,isValidRGB:xD,isValidRGBA:IJ,mergeOptions:_Ie,option:mIe,overrideOpacity:gIe,parseColor:vIe,preventDefault:dIe,pureDeepObjectAssign:wJ,recursiveDOMDelete:kJ,removeClassName:aIe,removeCssText:bIe,selectiveBridgeObject:xIe,selectiveDeepExtend:eIe,selectiveExtend:ZMe,selectiveNotDeepExtend:tIe,throttle:hIe,toArray:cIe,topMost:TIe,updateProperty:uIe});function Ka(n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(n[e].redundant=n[e].used,n[e].used=[])}function Ji(n){for(var e in n){if(!Object.prototype.hasOwnProperty.call(n,e))continue;const r=n[e];for(var t=0;t<r.redundant.length;t++)r.redundant[t].parentNode.removeChild(r.redundant[t]);r.redundant=[]}}function BIe(n){Ka(n),Ji(n),Ka(n)}function Ns(n,e,t){var r;return Object.prototype.hasOwnProperty.call(e,n)?e[n].redundant.length>0?(r=e[n].redundant[0],e[n].redundant.shift()):(r=document.createElementNS("http://www.w3.org/2000/svg",n),t.appendChild(r)):(r=document.createElementNS("http://www.w3.org/2000/svg",n),e[n]={used:[],redundant:[]},t.appendChild(r)),e[n].used.push(r),r}function m2(n,e,t,r){var i;return Object.prototype.hasOwnProperty.call(e,n)?e[n].redundant.length>0?(i=e[n].redundant[0],e[n].redundant.shift()):(i=document.createElement(n),r!==void 0?t.insertBefore(i,r):t.appendChild(i)):(i=document.createElement(n),e[n]={used:[],redundant:[]},r!==void 0?t.insertBefore(i,r):t.appendChild(i)),e[n].used.push(i),i}function Id(n,e,t,r,i,s){var o;if(t.style=="circle"?(o=Ns("circle",r,i),o.setAttributeNS(null,"cx",n),o.setAttributeNS(null,"cy",e),o.setAttributeNS(null,"r",.5*t.size)):(o=Ns("rect",r,i),o.setAttributeNS(null,"x",n-.5*t.size),o.setAttributeNS(null,"y",e-.5*t.size),o.setAttributeNS(null,"width",t.size),o.setAttributeNS(null,"height",t.size)),t.styles!==void 0&&o.setAttributeNS(null,"style",t.styles),o.setAttributeNS(null,"class",t.className+" vis-point"),s){var a=Ns("text",r,i);s.xOffset&&(n=n+s.xOffset),s.yOffset&&(e=e+s.yOffset),s.content&&(a.textContent=s.content),s.className&&a.setAttributeNS(null,"class",s.className+" vis-label"),a.setAttributeNS(null,"x",n),a.setAttributeNS(null,"y",e)}return o}function vP(n,e,t,r,i,s,o,a){if(r!=0){r<0&&(r*=-1,e-=r);var l=Ns("rect",s,o);l.setAttributeNS(null,"x",n-.5*t),l.setAttributeNS(null,"y",e),l.setAttributeNS(null,"width",t),l.setAttributeNS(null,"height",r),l.setAttributeNS(null,"class",i),a&&l.setAttributeNS(null,"style",a)}}function zIe(){try{return navigator?navigator.languages&&navigator.languages.length?navigator.languages:navigator.userLanguage||navigator.language||navigator.browserLanguage||"en":"en"}catch{return"en"}}var g2,O$;function qIe(){if(O$)return g2;O$=1,AQ();var n=sn();return g2=n.Object.getOwnPropertySymbols,g2}var v2,R$;function UIe(){if(R$)return v2;R$=1;var n=qIe();return v2=n,v2}var y2,D$;function WIe(){return D$||(D$=1,y2=UIe()),y2}var HIe=WIe(),xb=nt(HIe),b2={exports:{}},N$={},A$;function YIe(){if(A$)return N$;A$=1;var n=Je(),e=Pt(),t=Hs(),r=Hx().f,i=Yn(),s=!i||e(function(){r(1)});return n({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(a,l){return r(t(a),l)}}),N$}var L$;function GIe(){if(L$)return b2.exports;L$=1,YIe();var n=sn(),e=n.Object,t=b2.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(t.sham=!0),b2.exports}var x2,F$;function VIe(){if(F$)return x2;F$=1;var n=GIe();return x2=n,x2}var w2,j$;function KIe(){return j$||(j$=1,w2=VIe()),w2}var XIe=KIe(),rw=nt(XIe),$$={},B$;function QIe(){if(B$)return $$;B$=1;var n=Je(),e=Yn(),t=UQ(),r=Hs(),i=Hx(),s=Yx();return n({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=r(a),c=i.f,u=t(l),h={},d=0,f,m;u.length>d;)m=c(l,f=u[d++]),m!==void 0&&s(h,f,m);return h}}),$$}var _2,z$;function JIe(){if(z$)return _2;z$=1,QIe();var n=sn();return _2=n.Object.getOwnPropertyDescriptors,_2}var S2,q$;function ZIe(){if(q$)return S2;q$=1;var n=JIe();return S2=n,S2}var k2,U$;function ePe(){return U$||(U$=1,k2=ZIe()),k2}var tPe=ePe(),wb=nt(tPe),C2={exports:{}},W$={},H$;function nPe(){if(H$)return W$;H$=1;var n=Je(),e=Yn(),t=eD().f;return n({target:"Object",stat:!0,forced:Object.defineProperties!==t,sham:!e},{defineProperties:t}),W$}var Y$;function rPe(){if(Y$)return C2.exports;Y$=1,nPe();var n=sn(),e=n.Object,t=C2.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(t.sham=!0),C2.exports}var E2,G$;function iPe(){if(G$)return E2;G$=1;var n=rPe();return E2=n,E2}var T2,V$;function sPe(){return V$||(V$=1,T2=iPe()),T2}var oPe=sPe(),OJ=nt(oPe),M2={exports:{}},K$={},X$;function aPe(){if(X$)return K$;X$=1;var n=Je(),e=Yn(),t=ps().f;return n({target:"Object",stat:!0,forced:Object.defineProperty!==t,sham:!e},{defineProperty:t}),K$}var Q$;function lPe(){if(Q$)return M2.exports;Q$=1,aPe();var n=sn(),e=n.Object,t=M2.exports=function(i,s,o){return e.defineProperty(i,s,o)};return e.defineProperty.sham&&(t.sham=!0),M2.exports}var I2,J$;function RJ(){if(J$)return I2;J$=1;var n=lPe();return I2=n,I2}var P2,Z$;function cPe(){if(Z$)return P2;Z$=1;var n=RJ();return P2=n,P2}var O2,eB;function uPe(){if(eB)return O2;eB=1;var n=cPe();return O2=n,O2}var R2,tB;function hPe(){return tB||(tB=1,R2=uPe()),R2}var dPe=hPe(),fPe=nt(dPe),nB={},rB;function pPe(){if(rB)return nB;rB=1;var n=Zn(),e=ps().f,t=n("metadata"),r=Function.prototype;return r[t]===void 0&&e(r,t,{value:null}),nB}var iB={},sB;function mPe(){return sB||(sB=1,LQ()),iB}var oB={},aB;function gPe(){return aB||(aB=1,FQ()),oB}var lB={},cB;function vPe(){if(cB)return lB;cB=1;var n=In();return n("metadata"),lB}var D2,uB;function yPe(){if(uB)return D2;uB=1;var n=qQ();return pPe(),mPe(),gPe(),vPe(),D2=n,D2}var hB={},N2,dB;function DJ(){if(dB)return N2;dB=1;var n=qi(),e=Nt(),t=n("Symbol"),r=t.keyFor,i=e(t.prototype.valueOf);return N2=t.isRegisteredSymbol||function(o){try{return r(i(o))!==void 0}catch{return!1}},N2}var fB;function bPe(){if(fB)return hB;fB=1;var n=Je(),e=DJ();return n({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),hB}var pB={},A2,mB;function NJ(){if(mB)return A2;mB=1;for(var n=Zd(),e=qi(),t=Nt(),r=Pg(),i=Zn(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=t(s.prototype.valueOf),c=n("wks"),u=0,h=a(s),d=h.length;u<d;u++)try{var f=h[u];r(s[f])&&i(f)}catch{}return A2=function(g){if(o&&o(g))return!0;try{for(var v=l(g),y=0,b=a(c),w=b.length;y<w;y++)if(c[b[y]]==v)return!0}catch{}return!1},A2}var gB;function xPe(){if(gB)return pB;gB=1;var n=Je(),e=NJ();return n({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),pB}var vB={},yB;function wPe(){if(yB)return vB;yB=1;var n=In();return n("customMatcher"),vB}var bB={},xB;function _Pe(){if(xB)return bB;xB=1;var n=In();return n("observable"),bB}var wB={},_B;function SPe(){if(_B)return wB;_B=1;var n=Je(),e=DJ();return n({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),wB}var SB={},kB;function kPe(){if(kB)return SB;kB=1;var n=Je(),e=NJ();return n({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),SB}var CB={},EB;function CPe(){if(EB)return CB;EB=1;var n=In();return n("matcher"),CB}var TB={},MB;function EPe(){if(MB)return TB;MB=1;var n=In();return n("metadataKey"),TB}var IB={},PB;function TPe(){if(PB)return IB;PB=1;var n=In();return n("patternMatch"),IB}var OB={},RB;function MPe(){if(RB)return OB;RB=1;var n=In();return n("replaceAll"),OB}var L2,DB;function IPe(){if(DB)return L2;DB=1;var n=yPe();return bPe(),xPe(),wPe(),_Pe(),SPe(),kPe(),CPe(),EPe(),TPe(),MPe(),L2=n,L2}var F2,NB;function PPe(){return NB||(NB=1,F2=IPe()),F2}var OPe=PPe(),kv=nt(OPe),AB={},j2,LB;function RPe(){if(LB)return j2;LB=1;var n=Nt(),e=tf(),t=ms(),r=ya(),i=n("".charAt),s=n("".charCodeAt),o=n("".slice),a=function(l){return function(c,u){var h=t(r(c)),d=e(u),f=h.length,m,g;return d<0||d>=f?l?"":void 0:(m=s(h,d),m<55296||m>56319||d+1===f||(g=s(h,d+1))<56320||g>57343?l?i(h,d):m:l?o(h,d,d+2):(m-55296<<10)+(g-56320)+65536)}};return j2={codeAt:a(!1),charAt:a(!0)},j2}var FB;function iw(){if(FB)return AB;FB=1;var n=RPe().charAt,e=ms(),t=Fg(),r=nD(),i=rD(),s="String Iterator",o=t.set,a=t.getterFor(s);return r(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var c=a(this),u=c.string,h=c.index,d;return h>=u.length?i(void 0,!0):(d=n(u,h),c.index+=d.length,i(d,!1))}),AB}var $2,jB;function DPe(){if(jB)return $2;jB=1,Fl(),iw(),jQ();var n=Jx();return $2=n.f("iterator"),$2}var B2,$B;function AJ(){if($B)return B2;$B=1;var n=DPe();return jl(),B2=n,B2}var z2,BB;function NPe(){if(BB)return z2;BB=1;var n=AJ();return z2=n,z2}var q2,zB;function APe(){if(zB)return q2;zB=1;var n=NPe();return q2=n,q2}var U2,qB;function LPe(){return qB||(qB=1,U2=APe()),U2}var FPe=LPe(),jPe=nt(FPe);function Km(n){"@babel/helpers - typeof";return Km=typeof kv=="function"&&typeof jPe=="symbol"?function(e){return typeof e}:function(e){return e&&typeof kv=="function"&&e.constructor===kv&&e!==kv.prototype?"symbol":typeof e},Km(n)}var W2,UB;function $Pe(){if(UB)return W2;UB=1,$Q();var n=Jx();return W2=n.f("toPrimitive"),W2}var H2,WB;function BPe(){if(WB)return H2;WB=1;var n=$Pe();return H2=n,H2}var Y2,HB;function zPe(){if(HB)return Y2;HB=1;var n=BPe();return Y2=n,Y2}var G2,YB;function qPe(){if(YB)return G2;YB=1;var n=zPe();return G2=n,G2}var V2,GB;function UPe(){return GB||(GB=1,V2=qPe()),V2}var WPe=UPe(),HPe=nt(WPe);function YPe(n,e){if(Km(n)!="object"||!n)return n;var t=n[HPe];if(t!==void 0){var r=t.call(n,e);if(Km(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function GPe(n){var e=YPe(n,"string");return Km(e)=="symbol"?e:e+""}function Cn(n,e,t){return(e=GPe(e))in n?fPe(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var VB={},K2,KB;function VPe(){if(KB)return K2;KB=1;var n=Eo(),e=wi(),t=Ux(),r=Ys(),i=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,c,u,h){var d=e(l),f=t(d),m=r(d);if(n(c),m===0&&u<2)throw new i(s);var g=a?m-1:0,v=a?-1:1;if(u<2)for(;;){if(g in f){h=f[g],g+=v;break}if(g+=v,a?g<0:m<=g)throw new i(s)}for(;a?g>=0:m>g;g+=v)g in f&&(h=c(h,f[g],g,d));return h}};return K2={left:o(!1),right:o(!0)},K2}var X2,XB;function KPe(){if(XB)return X2;XB=1;var n=VQ();return X2=n==="NODE",X2}var QB;function XPe(){if(QB)return VB;QB=1;var n=Je(),e=VPe().left,t=of(),r=Ig(),i=KPe(),s=!i&&r>79&&r<83,o=s||!t("reduce");return n({target:"Array",proto:!0,forced:o},{reduce:function(l){var c=arguments.length;return e(this,l,c,c>1?arguments[1]:void 0)}}),VB}var Q2,JB;function QPe(){if(JB)return Q2;JB=1,XPe();var n=Fn();return Q2=n("Array","reduce"),Q2}var J2,ZB;function JPe(){if(ZB)return J2;ZB=1;var n=hn(),e=QPe(),t=Array.prototype;return J2=function(r){var i=r.reduce;return r===t||n(t,r)&&i===t.reduce?e:i},J2}var Z2,ez;function ZPe(){if(ez)return Z2;ez=1;var n=JPe();return Z2=n,Z2}var eE,tz;function eOe(){return tz||(tz=1,eE=ZPe()),eE}var tOe=eOe(),sw=nt(tOe),nz={},tE,rz;function nOe(){if(rz)return tE;rz=1;var n=Nl(),e=Ys(),t=XR(),r=Og(),i=function(s,o,a,l,c,u,h,d){for(var f=c,m=0,g=h?r(h,d):!1,v,y;m<l;)m in a&&(v=g?g(a[m],m,o):a[m],u>0&&n(v)?(y=e(v),f=i(s,o,v,y,f,u-1)-1):(t(f+1),s[f]=v),f++),m++;return f};return tE=i,tE}var iz;function rOe(){if(iz)return nz;iz=1;var n=Je(),e=nOe(),t=Eo(),r=wi(),i=Ys(),s=Gx();return n({target:"Array",proto:!0},{flatMap:function(a){var l=r(this),c=i(l),u;return t(a),u=s(l,0),u.length=e(u,l,l,c,0,1,a,arguments.length>1?arguments[1]:void 0),u}}),nz}var sz={},oz;function iOe(){if(oz)return sz;oz=1;var n=jg();return n("flatMap"),sz}var nE,az;function sOe(){if(az)return nE;az=1,rOe(),iOe();var n=Fn();return nE=n("Array","flatMap"),nE}var rE,lz;function oOe(){if(lz)return rE;lz=1;var n=hn(),e=sOe(),t=Array.prototype;return rE=function(r){var i=r.flatMap;return r===t||n(t,r)&&i===t.flatMap?e:i},rE}var iE,cz;function aOe(){if(cz)return iE;cz=1;var n=oOe();return iE=n,iE}var sE,uz;function lOe(){return uz||(uz=1,sE=aOe()),sE}var cOe=lOe(),uOe=nt(cOe),oE,hz;function hOe(){return hz||(hz=1,oE=AJ()),oE}var dOe=hOe(),ch=nt(dOe),dz={},fz={},aE={exports:{}},lE,pz;function fOe(){if(pz)return lE;pz=1;var n=Pt();return lE=n(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),lE}var cE,mz;function pOe(){if(mz)return cE;mz=1;var n=Pt(),e=Lr(),t=Co(),r=fOe(),i=Object.isExtensible,s=n(function(){});return cE=s||r?function(a){return!e(a)||r&&t(a)==="ArrayBuffer"?!1:i?i(a):!0}:i,cE}var uE,gz;function mOe(){if(gz)return uE;gz=1;var n=Pt();return uE=!n(function(){return Object.isExtensible(Object.preventExtensions({}))}),uE}var vz;function LJ(){if(vz)return aE.exports;vz=1;var n=Je(),e=Nt(),t=Dg(),r=Lr(),i=mr(),s=ps().f,o=Xx(),a=OQ(),l=pOe(),c=Wx(),u=mOe(),h=!1,d=c("meta"),f=0,m=function(S){s(S,d,{value:{objectID:"O"+f++,weakData:{}}})},g=function(S,_){if(!r(S))return typeof S=="symbol"?S:(typeof S=="string"?"S":"P")+S;if(!i(S,d)){if(!l(S))return"F";if(!_)return"E";m(S)}return S[d].objectID},v=function(S,_){if(!i(S,d)){if(!l(S))return!0;if(!_)return!1;m(S)}return S[d].weakData},y=function(S){return u&&h&&l(S)&&!i(S,d)&&m(S),S},b=function(){w.enable=function(){},h=!0;var S=o.f,_=e([].splice),E={};E[d]=1,S(E).length&&(o.f=function(C){for(var T=S(C),O=0,R=T.length;O<R;O++)if(T[O]===d){_(T,O,1);break}return T},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=aE.exports={enable:b,fastKey:g,getWeakData:v,onFreeze:y};return t[d]=!0,aE.exports}var hE,yz;function gOe(){if(yz)return hE;yz=1;var n=Zn(),e=rf(),t=n("iterator"),r=Array.prototype;return hE=function(i){return i!==void 0&&(e.Array===i||r[t]===i)},hE}var dE,bz;function FJ(){if(bz)return dE;bz=1;var n=Al(),e=GR(),t=Mg(),r=rf(),i=Zn(),s=i("iterator");return dE=function(o){if(!t(o))return e(o,s)||e(o,"@@iterator")||r[n(o)]},dE}var fE,xz;function jJ(){if(xz)return fE;xz=1;var n=xi(),e=Eo(),t=ba(),r=Qd(),i=FJ(),s=TypeError;return fE=function(o,a){var l=arguments.length<2?i(o):a;if(e(l))return t(n(l,o));throw new s(r(o)+" is not iterable")},fE}var pE,wz;function _D(){if(wz)return pE;wz=1;var n=xi(),e=ba(),t=GR();return pE=function(r,i,s){var o,a;e(r);try{if(o=t(r,"return"),!o){if(i==="throw")throw s;return s}o=n(o,r)}catch(l){a=!0,o=l}if(i==="throw")throw s;if(a)throw o;return e(o),s},pE}var mE,_z;function SD(){if(_z)return mE;_z=1;var n=Og(),e=xi(),t=ba(),r=Qd(),i=gOe(),s=Ys(),o=hn(),a=jJ(),l=FJ(),c=_D(),u=TypeError,h=function(f,m){this.stopped=f,this.result=m},d=h.prototype;return mE=function(f,m,g){var v=g&&g.that,y=!!(g&&g.AS_ENTRIES),b=!!(g&&g.IS_RECORD),w=!!(g&&g.IS_ITERATOR),S=!!(g&&g.INTERRUPTED),_=n(m,v),E,C,T,O,R,D,A,F=function(j){return E&&c(E,"normal"),new h(!0,j)},z=function(j){return y?(t(j),S?_(j[0],j[1],F):_(j[0],j[1])):S?_(j,F):_(j)};if(b)E=f.iterator;else if(w)E=f;else{if(C=l(f),!C)throw new u(r(f)+" is not iterable");if(i(C)){for(T=0,O=s(f);O>T;T++)if(R=z(f[T]),R&&o(d,R))return R;return new h(!1)}E=a(f,C)}for(D=b?f.next:E.next;!(A=e(D,E)).done;){try{R=z(A.value)}catch(j){c(E,"throw",j)}if(typeof R=="object"&&R&&o(d,R))return R}return new h(!1)},mE}var gE,Sz;function $J(){if(Sz)return gE;Sz=1;var n=hn(),e=TypeError;return gE=function(t,r){if(n(r,t))return t;throw new e("Incorrect invocation")},gE}var vE,kz;function BJ(){if(kz)return vE;kz=1;var n=Je(),e=Ln(),t=LJ(),r=Pt(),i=ef(),s=SD(),o=$J(),a=pr(),l=Lr(),c=Mg(),u=mu(),h=ps().f,d=Ll().forEach,f=Yn(),m=Fg(),g=m.set,v=m.getterFor;return vE=function(y,b,w){var S=y.indexOf("Map")!==-1,_=y.indexOf("Weak")!==-1,E=S?"set":"add",C=e[y],T=C&&C.prototype,O={},R;if(!f||!a(C)||!(_||T.forEach&&!r(function(){new C().entries().next()})))R=w.getConstructor(b,y,S,E),t.enable();else{R=b(function(F,z){g(o(F,D),{type:y,collection:new C}),c(z)||s(z,F[E],{that:F,AS_ENTRIES:S})});var D=R.prototype,A=v(y);d(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(F){var z=F==="add"||F==="set";F in T&&!(_&&F==="clear")&&i(D,F,function(j,L){var B=A(this).collection;if(!z&&_&&!l(j))return F==="get"?void 0:!1;var $=B[F](j===0?0:j,L);return z?this:$})}),_||h(D,"size",{configurable:!0,get:function(){return A(this).collection.size}})}return u(R,y,!1,!0),O[y]=R,n({global:!0,forced:!0},O),_||w.setStrong(R,y,S),R},vE}var yE,Cz;function vOe(){if(Cz)return yE;Cz=1;var n=Lg();return yE=function(e,t,r){for(var i in t)r&&r.unsafe&&e[i]?e[i]=t[i]:n(e,i,t[i],r);return e},yE}var bE,Ez;function yOe(){if(Ez)return bE;Ez=1;var n=qi(),e=tD(),t=Zn(),r=Yn(),i=t("species");return bE=function(s){var o=n(s);r&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},bE}var xE,Tz;function zJ(){if(Tz)return xE;Tz=1;var n=Ag(),e=tD(),t=vOe(),r=Og(),i=$J(),s=Mg(),o=SD(),a=nD(),l=rD(),c=yOe(),u=Yn(),h=LJ().fastKey,d=Fg(),f=d.set,m=d.getterFor;return xE={getConstructor:function(g,v,y,b){var w=g(function(T,O){i(T,S),f(T,{type:v,index:n(null),first:null,last:null,size:0}),u||(T.size=0),s(O)||o(O,T[b],{that:T,AS_ENTRIES:y})}),S=w.prototype,_=m(v),E=function(T,O,R){var D=_(T),A=C(T,O),F,z;return A?A.value=R:(D.last=A={index:z=h(O,!0),key:O,value:R,previous:F=D.last,next:null,removed:!1},D.first||(D.first=A),F&&(F.next=A),u?D.size++:T.size++,z!=="F"&&(D.index[z]=A)),T},C=function(T,O){var R=_(T),D=h(O),A;if(D!=="F")return R.index[D];for(A=R.first;A;A=A.next)if(A.key===O)return A};return t(S,{clear:function(){for(var O=this,R=_(O),D=R.first;D;)D.removed=!0,D.previous&&(D.previous=D.previous.next=null),D=D.next;R.first=R.last=null,R.index=n(null),u?R.size=0:O.size=0},delete:function(T){var O=this,R=_(O),D=C(O,T);if(D){var A=D.next,F=D.previous;delete R.index[D.index],D.removed=!0,F&&(F.next=A),A&&(A.previous=F),R.first===D&&(R.first=A),R.last===D&&(R.last=F),u?R.size--:O.size--}return!!D},forEach:function(O){for(var R=_(this),D=r(O,arguments.length>1?arguments[1]:void 0),A;A=A?A.next:R.first;)for(D(A.value,A.key,this);A&&A.removed;)A=A.previous},has:function(O){return!!C(this,O)}}),t(S,y?{get:function(O){var R=C(this,O);return R&&R.value},set:function(O,R){return E(this,O===0?0:O,R)}}:{add:function(O){return E(this,O=O===0?0:O,O)}}),u&&e(S,"size",{configurable:!0,get:function(){return _(this).size}}),w},setStrong:function(g,v,y){var b=v+" Iterator",w=m(v),S=m(b);a(g,v,function(_,E){f(this,{type:b,target:_,state:w(_),kind:E,last:null})},function(){for(var _=S(this),E=_.kind,C=_.last;C&&C.removed;)C=C.previous;return!_.target||!(_.last=C=C?C.next:_.state.first)?(_.target=null,l(void 0,!0)):l(E==="keys"?C.key:E==="values"?C.value:[C.key,C.value],!1)},y?"entries":"values",!y,!0),c(v)}},xE}var Mz;function bOe(){if(Mz)return fz;Mz=1;var n=BJ(),e=zJ();return n("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},e),fz}var Iz;function xOe(){return Iz||(Iz=1,bOe()),dz}var Pz={},wE,Oz;function qJ(){return Oz||(Oz=1,wE=function(n,e){return e===1?function(t,r){return t[n](r)}:function(t,r,i){return t[n](r,i)}}),wE}var _E,Rz;function wOe(){if(Rz)return _E;Rz=1;var n=qi(),e=qJ(),t=n("Map");return _E={Map:t,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:t.prototype},_E}var Dz;function _Oe(){if(Dz)return Pz;Dz=1;var n=Je(),e=Nt(),t=Eo(),r=ya(),i=SD(),s=wOe(),o=Jd(),a=Pt(),l=s.Map,c=s.has,u=s.get,h=s.set,d=e([].push),f=o||a(function(){return l.groupBy("ab",function(m){return m}).get("a").length!==1});return n({target:"Map",stat:!0,forced:o||f},{groupBy:function(g,v){r(g),t(v);var y=new l,b=0;return i(g,function(w){var S=v(w,b++);c(y,S)?d(u(y,S),w):h(y,S,[w])}),y}}),Pz}var SE,Nz;function SOe(){if(Nz)return SE;Nz=1,Fl(),xOe(),_Oe(),iw();var n=sn();return SE=n.Map,SE}var kE,Az;function kOe(){if(Az)return kE;Az=1;var n=SOe();return jl(),kE=n,kE}var CE,Lz;function COe(){return Lz||(Lz=1,CE=kOe()),CE}var EOe=COe(),UJ=nt(EOe),Fz={},jz={},$z;function TOe(){if($z)return jz;$z=1;var n=BJ(),e=zJ();return n("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},e),jz}var Bz;function MOe(){return Bz||(Bz=1,TOe()),Fz}var zz={},EE,qz;function vu(){if(qz)return EE;qz=1;var n=Qd(),e=TypeError;return EE=function(t){if(typeof t=="object"&&"size"in t&&"has"in t&&"add"in t&&"delete"in t&&"keys"in t)return t;throw new e(n(t)+" is not a set")},EE}var TE,Uz;function yu(){if(Uz)return TE;Uz=1;var n=qi(),e=qJ(),t=n("Set"),r=t.prototype;return TE={Set:t,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:r},TE}var ME,Wz;function bu(){if(Wz)return ME;Wz=1;var n=xi();return ME=function(e,t,r){for(var i=r?e:e.iterator,s=e.next,o,a;!(o=n(s,i)).done;)if(a=t(o.value),a!==void 0)return a},ME}var IE,Hz;function Hg(){if(Hz)return IE;Hz=1;var n=bu();return IE=function(e,t,r){return r?n(e.keys(),t,!0):e.forEach(t)},IE}var PE,Yz;function kD(){if(Yz)return PE;Yz=1;var n=yu(),e=Hg(),t=n.Set,r=n.add;return PE=function(i){var s=new t;return e(i,function(o){r(s,o)}),s},PE}var OE,Gz;function Yg(){return Gz||(Gz=1,OE=function(n){return n.size}),OE}var RE,Vz;function IOe(){return Vz||(Vz=1,RE=function(n){return{iterator:n,next:n.next,done:!1}}),RE}var DE,Kz;function xu(){if(Kz)return DE;Kz=1;var n=Eo(),e=ba(),t=xi(),r=tf(),i=IOe(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,c=function(u,h){this.set=u,this.size=l(h,0),this.has=n(u.has),this.keys=n(u.keys)};return c.prototype={getIterator:function(){return i(e(t(this.keys,this.set)))},includes:function(u){return t(this.has,this.set,u)}},DE=function(u){e(u);var h=+u.size;if(h!==h)throw new a(s);var d=r(h);if(d<0)throw new o(s);return new c(u,d)},DE}var NE,Xz;function POe(){if(Xz)return NE;Xz=1;var n=vu(),e=yu(),t=kD(),r=Yg(),i=xu(),s=Hg(),o=bu(),a=e.has,l=e.remove;return NE=function(u){var h=n(this),d=i(u),f=t(h);return r(h)<=d.size?s(h,function(m){d.includes(m)&&l(f,m)}):o(d.getIterator(),function(m){a(f,m)&&l(f,m)}),f},NE}var AE,Qz;function wu(){return Qz||(Qz=1,AE=function(){return!1}),AE}var Jz;function OOe(){if(Jz)return zz;Jz=1;var n=Je(),e=POe(),t=Pt(),r=wu(),i=!r("difference",function(o){return o.size===0}),s=i||t(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var c=l++>1;return a.has(1)&&a.clear(),{done:c,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return n({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),zz}var Zz={},LE,eq;function ROe(){if(eq)return LE;eq=1;var n=vu(),e=yu(),t=Yg(),r=xu(),i=Hg(),s=bu(),o=e.Set,a=e.add,l=e.has;return LE=function(u){var h=n(this),d=r(u),f=new o;return t(h)>d.size?s(d.getIterator(),function(m){l(h,m)&&a(f,m)}):i(h,function(m){d.includes(m)&&a(f,m)}),f},LE}var tq;function DOe(){if(tq)return Zz;tq=1;var n=Je(),e=Pt(),t=ROe(),r=wu(),i=!r("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return n({target:"Set",proto:!0,real:!0,forced:i},{intersection:t}),Zz}var nq={},FE,rq;function NOe(){if(rq)return FE;rq=1;var n=vu(),e=yu().has,t=Yg(),r=xu(),i=Hg(),s=bu(),o=_D();return FE=function(l){var c=n(this),u=r(l);if(t(c)<=u.size)return i(c,function(d){if(u.includes(d))return!1},!0)!==!1;var h=u.getIterator();return s(h,function(d){if(e(c,d))return o(h,"normal",!1)})!==!1},FE}var iq;function AOe(){if(iq)return nq;iq=1;var n=Je(),e=NOe(),t=wu(),r=!t("isDisjointFrom",function(i){return!i});return n({target:"Set",proto:!0,real:!0,forced:r},{isDisjointFrom:e}),nq}var sq={},jE,oq;function LOe(){if(oq)return jE;oq=1;var n=vu(),e=Yg(),t=Hg(),r=xu();return jE=function(s){var o=n(this),a=r(s);return e(o)>a.size?!1:t(o,function(l){if(!a.includes(l))return!1},!0)!==!1},jE}var aq;function FOe(){if(aq)return sq;aq=1;var n=Je(),e=LOe(),t=wu(),r=!t("isSubsetOf",function(i){return i});return n({target:"Set",proto:!0,real:!0,forced:r},{isSubsetOf:e}),sq}var lq={},$E,cq;function jOe(){if(cq)return $E;cq=1;var n=vu(),e=yu().has,t=Yg(),r=xu(),i=bu(),s=_D();return $E=function(a){var l=n(this),c=r(a);if(t(l)<c.size)return!1;var u=c.getIterator();return i(u,function(h){if(!e(l,h))return s(u,"normal",!1)})!==!1},$E}var uq;function $Oe(){if(uq)return lq;uq=1;var n=Je(),e=jOe(),t=wu(),r=!t("isSupersetOf",function(i){return!i});return n({target:"Set",proto:!0,real:!0,forced:r},{isSupersetOf:e}),lq}var hq={},BE,dq;function BOe(){if(dq)return BE;dq=1;var n=vu(),e=yu(),t=kD(),r=xu(),i=bu(),s=e.add,o=e.has,a=e.remove;return BE=function(c){var u=n(this),h=r(c).getIterator(),d=t(u);return i(h,function(f){o(u,f)?a(d,f):s(d,f)}),d},BE}var zE,fq;function WJ(){return fq||(fq=1,zE=function(n){try{var e=new Set,t={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},r=e[n](t);return r.size===1&&r.values().next().value===4}catch{return!1}}),zE}var pq;function zOe(){if(pq)return hq;pq=1;var n=Je(),e=BOe(),t=WJ(),r=wu(),i=!r("symmetricDifference")||!t("symmetricDifference");return n({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),hq}var mq={},qE,gq;function qOe(){if(gq)return qE;gq=1;var n=vu(),e=yu().add,t=kD(),r=xu(),i=bu();return qE=function(o){var a=n(this),l=r(o).getIterator(),c=t(a);return i(l,function(u){e(c,u)}),c},qE}var vq;function UOe(){if(vq)return mq;vq=1;var n=Je(),e=qOe(),t=WJ(),r=wu(),i=!r("union")||!t("union");return n({target:"Set",proto:!0,real:!0,forced:i},{union:e}),mq}var UE,yq;function WOe(){if(yq)return UE;yq=1,Fl(),MOe(),OOe(),DOe(),AOe(),FOe(),$Oe(),zOe(),UOe(),iw();var n=sn();return UE=n.Set,UE}var WE,bq;function HOe(){if(bq)return WE;bq=1;var n=WOe();return jl(),WE=n,WE}var HE,xq;function YOe(){return xq||(xq=1,HE=HOe()),HE}var GOe=YOe(),Fc=nt(GOe),YE,wq;function VOe(){if(wq)return YE;wq=1,Fl(),iw();var n=jJ();return YE=n,YE}var GE,_q;function KOe(){if(_q)return GE;_q=1;var n=VOe();return jl(),GE=n,GE}var VE,Sq;function XOe(){if(Sq)return VE;Sq=1;var n=KOe();return VE=n,VE}var KE,kq;function QOe(){if(kq)return KE;kq=1;var n=XOe();return KE=n,KE}var XE,Cq;function JOe(){return Cq||(Cq=1,XE=QOe()),XE}var QE,Eq;function ZOe(){return Eq||(Eq=1,QE=JOe()),QE}var eRe=ZOe(),JE=nt(eRe),Tq={},ZE,Mq;function tRe(){if(Mq)return ZE;Mq=1;var n=nf(),e=Math.floor,t=function(r,i){var s=r.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=r[o];l&&i(r[l-1],a)>0;)r[l]=r[--l];l!==o++&&(r[l]=a)}else for(var c=e(s/2),u=t(n(r,0,c),i),h=t(n(r,c),i),d=u.length,f=h.length,m=0,g=0;m<d||g<f;)r[m+g]=m<d&&g<f?i(u[m],h[g])<=0?u[m++]:h[g++]:m<d?u[m++]:h[g++];return r};return ZE=t,ZE}var eT,Iq;function nRe(){if(Iq)return eT;Iq=1;var n=Kd(),e=n.match(/firefox\/(\d+)/i);return eT=!!e&&+e[1],eT}var tT,Pq;function rRe(){if(Pq)return tT;Pq=1;var n=Kd();return tT=/MSIE|Trident/.test(n),tT}var nT,Oq;function iRe(){if(Oq)return nT;Oq=1;var n=Kd(),e=n.match(/AppleWebKit\/(\d+)\./);return nT=!!e&&+e[1],nT}var Rq;function sRe(){if(Rq)return Tq;Rq=1;var n=Je(),e=Nt(),t=Eo(),r=wi(),i=Ys(),s=WQ(),o=ms(),a=Pt(),l=tRe(),c=of(),u=nRe(),h=rRe(),d=Ig(),f=iRe(),m=[],g=e(m.sort),v=e(m.push),y=a(function(){m.sort(void 0)}),b=a(function(){m.sort(null)}),w=c("sort"),S=!a(function(){if(d)return d<70;if(!(u&&u>3)){if(h)return!0;if(f)return f<603;var C="",T,O,R,D;for(T=65;T<76;T++){switch(O=String.fromCharCode(T),T){case 66:case 69:case 70:case 72:R=3;break;case 68:case 71:R=4;break;default:R=2}for(D=0;D<47;D++)m.push({k:O+D,v:R})}for(m.sort(function(A,F){return F.v-A.v}),D=0;D<m.length;D++)O=m[D].k.charAt(0),C.charAt(C.length-1)!==O&&(C+=O);return C!=="DGBEFHACIJK"}}),_=y||!b||!w||!S,E=function(C){return function(T,O){return O===void 0?-1:T===void 0?1:C!==void 0?+C(T,O)||0:o(T)>o(O)?1:-1}};return n({target:"Array",proto:!0,forced:_},{sort:function(T){T!==void 0&&t(T);var O=r(this);if(S)return T===void 0?g(O):g(O,T);var R=[],D=i(O),A,F;for(F=0;F<D;F++)F in O&&v(R,O[F]);for(l(R,E(T)),A=i(R),F=0;F<A;)O[F]=R[F++];for(;F<D;)s(O,F++);return O}}),Tq}var rT,Dq;function oRe(){if(Dq)return rT;Dq=1,sRe();var n=Fn();return rT=n("Array","sort"),rT}var iT,Nq;function aRe(){if(Nq)return iT;Nq=1;var n=hn(),e=oRe(),t=Array.prototype;return iT=function(r){var i=r.sort;return r===t||n(t,r)&&i===t.sort?e:i},iT}var sT,Aq;function lRe(){if(Aq)return sT;Aq=1;var n=aRe();return sT=n,sT}var oT,Lq;function cRe(){return Lq||(Lq=1,oT=lRe()),oT}var uRe=cRe(),Un=nt(uRe),Fq={},jq;function hRe(){if(jq)return Fq;jq=1;var n=Je(),e=Ll().some,t=of(),r=t("some");return n({target:"Array",proto:!0,forced:!r},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),Fq}var aT,$q;function dRe(){if($q)return aT;$q=1,hRe();var n=Fn();return aT=n("Array","some"),aT}var lT,Bq;function fRe(){if(Bq)return lT;Bq=1;var n=hn(),e=dRe(),t=Array.prototype;return lT=function(r){var i=r.some;return r===t||n(t,r)&&i===t.some?e:i},lT}var cT,zq;function pRe(){if(zq)return cT;zq=1;var n=fRe();return cT=n,cT}var uT,qq;function mRe(){return qq||(qq=1,uT=pRe()),uT}var gRe=mRe(),CD=nt(gRe),hT,Uq;function vRe(){if(Uq)return hT;Uq=1,Fl();var n=Fn();return hT=n("Array","keys"),hT}var dT,Wq;function yRe(){if(Wq)return dT;Wq=1;var n=vRe();return dT=n,dT}var fT,Hq;function bRe(){if(Hq)return fT;Hq=1,jl();var n=Al(),e=mr(),t=hn(),r=yRe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return fT=function(o){var a=o.keys;return o===i||t(i,o)&&a===i.keys||e(s,n(o))?r:a},fT}var pT,Yq;function xRe(){return Yq||(Yq=1,pT=bRe()),pT}var wRe=xRe(),Lu=nt(wRe),mT,Gq;function _Re(){if(Gq)return mT;Gq=1,Fl();var n=Fn();return mT=n("Array","values"),mT}var gT,Vq;function SRe(){if(Vq)return gT;Vq=1;var n=_Re();return gT=n,gT}var vT,Kq;function kRe(){if(Kq)return vT;Kq=1,jl();var n=Al(),e=mr(),t=hn(),r=SRe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return vT=function(o){var a=o.values;return o===i||t(i,o)&&a===i.values||e(s,n(o))?r:a},vT}var yT,Xq;function CRe(){return Xq||(Xq=1,yT=kRe()),yT}var ERe=CRe(),Qq=nt(ERe),bT,Jq;function TRe(){if(Jq)return bT;Jq=1,Fl();var n=Fn();return bT=n("Array","entries"),bT}var xT,Zq;function MRe(){if(Zq)return xT;Zq=1;var n=TRe();return xT=n,xT}var wT,eU;function IRe(){if(eU)return wT;eU=1,jl();var n=Al(),e=mr(),t=hn(),r=MRe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return wT=function(o){var a=o.entries;return o===i||t(i,o)&&a===i.entries||e(s,n(o))?r:a},wT}var _T,tU;function PRe(){return tU||(tU=1,_T=IRe()),_T}var ORe=PRe(),RRe=nt(ORe),ST,nU;function DRe(){return nU||(nU=1,ST=RJ()),ST}var NRe=DRe(),ED=nt(NRe);const yr=[];for(let n=0;n<256;++n)yr.push((n+256).toString(16).slice(1));function ARe(n,e=0){return(yr[n[e+0]]+yr[n[e+1]]+yr[n[e+2]]+yr[n[e+3]]+"-"+yr[n[e+4]]+yr[n[e+5]]+"-"+yr[n[e+6]]+yr[n[e+7]]+"-"+yr[n[e+8]]+yr[n[e+9]]+"-"+yr[n[e+10]]+yr[n[e+11]]+yr[n[e+12]]+yr[n[e+13]]+yr[n[e+14]]+yr[n[e+15]]).toLowerCase()}let kT;const LRe=new Uint8Array(16);function FRe(){if(!kT){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");kT=crypto.getRandomValues.bind(crypto)}return kT(LRe)}const jRe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var rU={randomUUID:jRe};function $Re(n,e,t){var i;n=n||{};const r=n.random??((i=n.rng)==null?void 0:i.call(n))??FRe();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,ARe(r)}function jc(n,e,t){return rU.randomUUID&&!n?rU.randomUUID():$Re(n)}function iU(n,e){var t=rr(n);if(xb){var r=xb(n);e&&(r=yt(r).call(r,function(i){return rw(n,i).enumerable})),t.push.apply(t,r)}return t}function sU(n){for(var e=1;e<arguments.length;e++){var t,r,i=arguments[e]!=null?arguments[e]:{};e%2?je(t=iU(Object(i),!0)).call(t,function(s){Cn(n,s,i[s])}):wb?OJ(n,wb(i)):je(r=iU(Object(i))).call(r,function(s){ED(n,s,rw(i,s))})}return n}function BRe(n){return new qRe(n)}class zRe{constructor(e,t,r){var i,s,o;Cn(this,"_source",void 0),Cn(this,"_transformers",void 0),Cn(this,"_target",void 0),Cn(this,"_listeners",{add:ue(i=this._add).call(i,this),remove:ue(s=this._remove).call(s,this),update:ue(o=this._update).call(o,this)}),this._source=e,this._transformers=t,this._target=r}all(){return this._target.update(this._transformItems(this._source.get())),this}start(){return this._source.on("add",this._listeners.add),this._source.on("remove",this._listeners.remove),this._source.on("update",this._listeners.update),this}stop(){return this._source.off("add",this._listeners.add),this._source.off("remove",this._listeners.remove),this._source.off("update",this._listeners.update),this}_transformItems(e){var t;return sw(t=this._transformers).call(t,(r,i)=>i(r),e)}_add(e,t){t!=null&&this._target.add(this._transformItems(this._source.get(t.items)))}_update(e,t){t!=null&&this._target.update(this._transformItems(this._source.get(t.items)))}_remove(e,t){t!=null&&this._target.remove(this._transformItems(t.oldData))}}class qRe{constructor(e){Cn(this,"_source",void 0),Cn(this,"_transformers",[]),this._source=e}filter(e){return this._transformers.push(t=>yt(t).call(t,e)),this}map(e){return this._transformers.push(t=>Ut(t).call(t,e)),this}flatMap(e){return this._transformers.push(t=>uOe(t).call(t,e)),this}to(e){return new zRe(this._source,this._transformers,e)}}function oU(n){return typeof n=="string"||typeof n=="number"}class TD{constructor(e){Cn(this,"delay",void 0),Cn(this,"max",void 0),Cn(this,"_queue",[]),Cn(this,"_timeout",null),Cn(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(e)}setOptions(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}static extend(e,t){const r=new TD(t);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=()=>{r.flush()};const i=[{name:"flush",original:void 0}];if(t&&t.replace)for(let s=0;s<t.replace.length;s++){const o=t.replace[s];i.push({name:o,original:e[o]}),r.replace(e,o)}return r._extended={object:e,methods:i},r}destroy(){if(this.flush(),this._extended){const e=this._extended.object,t=this._extended.methods;for(let r=0;r<t.length;r++){const i=t[r];i.original?e[i.name]=i.original:delete e[i.name]}this._extended=null}}replace(e,t){const r=this,i=e[t];if(!i)throw new Error("Method "+t+" undefined");e[t]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];r.queue({args:o,fn:i,context:this})}}queue(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=fi(()=>{this.flush()},this.delay))}flush(){var e,t;je(e=Wr(t=this._queue).call(t,0)).call(e,r=>{r.fn.apply(r.context||r.fn,r.args||[])})}}class _b{constructor(){Cn(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),Cn(this,"subscribe",_b.prototype.on),Cn(this,"unsubscribe",_b.prototype.off)}_trigger(e,t,r){var i;if(e==="*")throw new Error("Cannot trigger event *");je(i=[...this._subscribers[e],...this._subscribers["*"]]).call(i,s=>{s(e,t,r??null)})}on(e,t){typeof t=="function"&&this._subscribers[e].push(t)}off(e,t){var r;this._subscribers[e]=yt(r=this._subscribers[e]).call(r,i=>i!==t)}}class gc{constructor(e){Cn(this,"_pairs",void 0),this._pairs=e}*[ch](){for(const[e,t]of this._pairs)yield[e,t]}*entries(){for(const[e,t]of this._pairs)yield[e,t]}*keys(){for(const[e]of this._pairs)yield e}*values(){for(const[,e]of this._pairs)yield e}toIdArray(){var e;return Ut(e=[...this._pairs]).call(e,t=>t[0])}toItemArray(){var e;return Ut(e=[...this._pairs]).call(e,t=>t[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const e=$g(null);for(const[t,r]of this._pairs)e[t]=r;return e}toMap(){return new UJ(this._pairs)}toIdSet(){return new Fc(this.toIdArray())}toItemSet(){return new Fc(this.toItemArray())}cache(){return new gc([...this._pairs])}distinct(e){const t=new Fc;for(const[r,i]of this._pairs)t.add(e(i,r));return t}filter(e){const t=this._pairs;return new gc({*[ch](){for(const[r,i]of t)e(i,r)&&(yield[r,i])}})}forEach(e){for(const[t,r]of this._pairs)e(r,t)}map(e){const t=this._pairs;return new gc({*[ch](){for(const[r,i]of t)yield[r,e(i,r)]}})}max(e){const t=JE(this._pairs);let r=t.next();if(r.done)return null;let i=r.value[1],s=e(r.value[1],r.value[0]);for(;!(r=t.next()).done;){const[o,a]=r.value,l=e(a,o);l>s&&(s=l,i=a)}return i}min(e){const t=JE(this._pairs);let r=t.next();if(r.done)return null;let i=r.value[1],s=e(r.value[1],r.value[0]);for(;!(r=t.next()).done;){const[o,a]=r.value,l=e(a,o);l<s&&(s=l,i=a)}return i}reduce(e,t){for(const[r,i]of this._pairs)t=e(t,i,r);return t}sort(e){return new gc({[ch]:()=>{var t;return JE(Un(t=[...this._pairs]).call(t,(r,i)=>{let[s,o]=r,[a,l]=i;return e(o,l,s,a)}))}})}}function URe(n,e){return n[e]==null&&(n[e]=jc()),n}class MD extends _b{get idProp(){return this._idProp}constructor(e,t){super(),Cn(this,"flush",void 0),Cn(this,"length",void 0),Cn(this,"_options",void 0),Cn(this,"_data",void 0),Cn(this,"_idProp",void 0),Cn(this,"_queue",null),e&&!It(e)&&(t=e,e=[]),this._options=t||{},this._data=new UJ,this.length=0,this._idProp=this._options.fieldId||"id",e&&e.length&&this.add(e),this.setOptions(t)}setOptions(e){e&&e.queue!==void 0&&(e.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=TD.extend(this,{replace:["add","update","remove"]})),e.queue&&typeof e.queue=="object"&&this._queue.setOptions(e.queue)))}add(e,t){const r=[];let i;if(It(e)){const s=Ut(e).call(e,o=>o[this._idProp]);if(CD(s).call(s,o=>this._data.has(o)))throw new Error("A duplicate id was found in the parameter array.");for(let o=0,a=e.length;o<a;o++)i=this._addItem(e[o]),r.push(i)}else if(e&&typeof e=="object")i=this._addItem(e),r.push(i);else throw new Error("Unknown dataType");return r.length&&this._trigger("add",{items:r},t),r}update(e,t){const r=[],i=[],s=[],o=[],a=this._idProp,l=c=>{const u=c[a];if(u!=null&&this._data.has(u)){const h=c,d=Pl({},this._data.get(u)),f=this._updateItem(h);i.push(f),o.push(h),s.push(d)}else{const h=this._addItem(c);r.push(h)}};if(It(e))for(let c=0,u=e.length;c<u;c++)e[c]&&typeof e[c]=="object"?l(e[c]):console.warn("Ignoring input item, which is not an object at index "+c);else if(e&&typeof e=="object")l(e);else throw new Error("Unknown dataType");if(r.length&&this._trigger("add",{items:r},t),i.length){const c={items:i,oldData:s,data:o};this._trigger("update",c,t)}return $n(r).call(r,i)}updateOnly(e,t){var r;It(e)||(e=[e]);const i=Ut(r=Ut(e).call(e,s=>{const o=this._data.get(s[this._idProp]);if(o==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:o,update:s}})).call(r,s=>{let{oldData:o,update:a}=s;const l=o[this._idProp],c=wJ(o,a);return this._data.set(l,c),{id:l,oldData:o,updatedData:c}});if(i.length){const s={items:Ut(i).call(i,o=>o.id),oldData:Ut(i).call(i,o=>o.oldData),data:Ut(i).call(i,o=>o.updatedData)};return this._trigger("update",s,t),s.items}else return[]}get(e,t){let r,i,s;oU(e)?(r=e,s=t):It(e)?(i=e,s=t):s=e;const o=s&&s.returnType==="Object"?"Object":"Array",a=s&&yt(s),l=[];let c,u,h;if(r!=null)c=this._data.get(r),c&&a&&!a(c)&&(c=void 0);else if(i!=null)for(let f=0,m=i.length;f<m;f++)c=this._data.get(i[f]),c!=null&&(!a||a(c))&&l.push(c);else{var d;u=[...Lu(d=this._data).call(d)];for(let f=0,m=u.length;f<m;f++)h=u[f],c=this._data.get(h),c!=null&&(!a||a(c))&&l.push(c)}if(s&&s.order&&r==null&&this._sort(l,s.order),s&&s.fields){const f=s.fields;if(r!=null&&c!=null)c=this._filterFields(c,f);else for(let m=0,g=l.length;m<g;m++)l[m]=this._filterFields(l[m],f)}if(o=="Object"){const f={};for(let m=0,g=l.length;m<g;m++){const v=l[m],y=v[this._idProp];f[y]=v}return f}else return r!=null?c??null:l}getIds(e){const t=this._data,r=e&&yt(e),i=e&&e.order,s=[...Lu(t).call(t)],o=[];if(r)if(i){const a=[];for(let l=0,c=s.length;l<c;l++){const u=s[l],h=this._data.get(u);h!=null&&r(h)&&a.push(h)}this._sort(a,i);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],u=this._data.get(c);u!=null&&r(u)&&o.push(u[this._idProp])}else if(i){const a=[];for(let l=0,c=s.length;l<c;l++){const u=s[l];a.push(t.get(u))}this._sort(a,i);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],u=t.get(c);u!=null&&o.push(u[this._idProp])}return o}getDataSet(){return this}forEach(e,t){const r=t&&yt(t),i=this._data,s=[...Lu(i).call(i)];if(t&&t.order){const o=this.get(t);for(let a=0,l=o.length;a<l;a++){const c=o[a],u=c[this._idProp];e(c,u)}}else for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this._data.get(l);c!=null&&(!r||r(c))&&e(c,l)}}map(e,t){const r=t&&yt(t),i=[],s=this._data,o=[...Lu(s).call(s)];for(let a=0,l=o.length;a<l;a++){const c=o[a],u=this._data.get(c);u!=null&&(!r||r(u))&&i.push(e(u,c))}return t&&t.order&&this._sort(i,t.order),i}_filterFields(e,t){var r;return e&&sw(r=It(t)?t:rr(t)).call(r,(i,s)=>(i[s]=e[s],i),{})}_sort(e,t){if(typeof t=="string"){const r=t;Un(e).call(e,(i,s)=>{const o=i[r],a=s[r];return o>a?1:o<a?-1:0})}else if(typeof t=="function")Un(e).call(e,t);else throw new TypeError("Order must be a function or a string")}remove(e,t){const r=[],i=[],s=It(e)?e:[e];for(let o=0,a=s.length;o<a;o++){const l=this._remove(s[o]);if(l){const c=l[this._idProp];c!=null&&(r.push(c),i.push(l))}}return r.length&&this._trigger("remove",{items:r,oldData:i},t),r}_remove(e){let t;if(oU(e)?t=e:e&&typeof e=="object"&&(t=e[this._idProp]),t!=null&&this._data.has(t)){const r=this._data.get(t)||null;return this._data.delete(t),--this.length,r}return null}clear(e){var t;const r=[...Lu(t=this._data).call(t)],i=[];for(let s=0,o=r.length;s<o;s++)i.push(this._data.get(r[s]));return this._data.clear(),this.length=0,this._trigger("remove",{items:r,oldData:i},e),r}max(e){let t=null,r=null;for(const s of Qq(i=this._data).call(i)){var i;const o=s[e];typeof o=="number"&&(r==null||o>r)&&(t=s,r=o)}return t||null}min(e){let t=null,r=null;for(const s of Qq(i=this._data).call(i)){var i;const o=s[e];typeof o=="number"&&(r==null||o<r)&&(t=s,r=o)}return t||null}distinct(e){const t=this._data,r=[...Lu(t).call(t)],i=[];let s=0;for(let o=0,a=r.length;o<a;o++){const l=r[o],u=t.get(l)[e];let h=!1;for(let d=0;d<s;d++)if(i[d]==u){h=!0;break}!h&&u!==void 0&&(i[s]=u,s++)}return i}_addItem(e){const t=URe(e,this._idProp),r=t[this._idProp];if(this._data.has(r))throw new Error("Cannot add item: item with id "+r+" already exists");return this._data.set(r,t),++this.length,r}_updateItem(e){const t=e[this._idProp];if(t==null)throw new Error("Cannot update item: item has no id (item: "+ii(e)+")");const r=this._data.get(t);if(!r)throw new Error("Cannot update item: no item with id "+t+" found");return this._data.set(t,sU(sU({},r),e)),t}stream(e){if(e){const r=this._data;return new gc({*[ch](){for(const i of e){const s=r.get(i);s!=null&&(yield[i,s])}}})}else{var t;return new gc({[ch]:ue(t=RRe(this._data)).call(t,this._data)})}}}function WRe(n,e){return typeof e=="object"&&e!==null&&n===e.idProp&&typeof e.add=="function"&&typeof e.clear=="function"&&typeof e.distinct=="function"&&typeof je(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof Ut(e)=="function"&&typeof e.max=="function"&&typeof e.min=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.remove=="function"&&typeof e.setOptions=="function"&&typeof e.stream=="function"&&typeof e.update=="function"&&typeof e.updateOnly=="function"}function HRe(n,e){return typeof e=="object"&&e!==null&&n===e.idProp&&typeof je(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof Ut(e)=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.stream=="function"&&WRe(n,e.getDataSet())}var YRe=Ws(),Ki=nt(YRe);const li=typeof window<"u"&&window.moment||Ki;var Cv={exports:{}},mn={},Ev={exports:{}},Kl={},aU;function HJ(){if(aU)return Kl;aU=1;function n(){var s={};return s["align-content"]=!1,s["align-items"]=!1,s["align-self"]=!1,s["alignment-adjust"]=!1,s["alignment-baseline"]=!1,s.all=!1,s["anchor-point"]=!1,s.animation=!1,s["animation-delay"]=!1,s["animation-direction"]=!1,s["animation-duration"]=!1,s["animation-fill-mode"]=!1,s["animation-iteration-count"]=!1,s["animation-name"]=!1,s["animation-play-state"]=!1,s["animation-timing-function"]=!1,s.azimuth=!1,s["backface-visibility"]=!1,s.background=!0,s["background-attachment"]=!0,s["background-clip"]=!0,s["background-color"]=!0,s["background-image"]=!0,s["background-origin"]=!0,s["background-position"]=!0,s["background-repeat"]=!0,s["background-size"]=!0,s["baseline-shift"]=!1,s.binding=!1,s.bleed=!1,s["bookmark-label"]=!1,s["bookmark-level"]=!1,s["bookmark-state"]=!1,s.border=!0,s["border-bottom"]=!0,s["border-bottom-color"]=!0,s["border-bottom-left-radius"]=!0,s["border-bottom-right-radius"]=!0,s["border-bottom-style"]=!0,s["border-bottom-width"]=!0,s["border-collapse"]=!0,s["border-color"]=!0,s["border-image"]=!0,s["border-image-outset"]=!0,s["border-image-repeat"]=!0,s["border-image-slice"]=!0,s["border-image-source"]=!0,s["border-image-width"]=!0,s["border-left"]=!0,s["border-left-color"]=!0,s["border-left-style"]=!0,s["border-left-width"]=!0,s["border-radius"]=!0,s["border-right"]=!0,s["border-right-color"]=!0,s["border-right-style"]=!0,s["border-right-width"]=!0,s["border-spacing"]=!0,s["border-style"]=!0,s["border-top"]=!0,s["border-top-color"]=!0,s["border-top-left-radius"]=!0,s["border-top-right-radius"]=!0,s["border-top-style"]=!0,s["border-top-width"]=!0,s["border-width"]=!0,s.bottom=!1,s["box-decoration-break"]=!0,s["box-shadow"]=!0,s["box-sizing"]=!0,s["box-snap"]=!0,s["box-suppress"]=!0,s["break-after"]=!0,s["break-before"]=!0,s["break-inside"]=!0,s["caption-side"]=!1,s.chains=!1,s.clear=!0,s.clip=!1,s["clip-path"]=!1,s["clip-rule"]=!1,s.color=!0,s["color-interpolation-filters"]=!0,s["column-count"]=!1,s["column-fill"]=!1,s["column-gap"]=!1,s["column-rule"]=!1,s["column-rule-color"]=!1,s["column-rule-style"]=!1,s["column-rule-width"]=!1,s["column-span"]=!1,s["column-width"]=!1,s.columns=!1,s.contain=!1,s.content=!1,s["counter-increment"]=!1,s["counter-reset"]=!1,s["counter-set"]=!1,s.crop=!1,s.cue=!1,s["cue-after"]=!1,s["cue-before"]=!1,s.cursor=!1,s.direction=!1,s.display=!0,s["display-inside"]=!0,s["display-list"]=!0,s["display-outside"]=!0,s["dominant-baseline"]=!1,s.elevation=!1,s["empty-cells"]=!1,s.filter=!1,s.flex=!1,s["flex-basis"]=!1,s["flex-direction"]=!1,s["flex-flow"]=!1,s["flex-grow"]=!1,s["flex-shrink"]=!1,s["flex-wrap"]=!1,s.float=!1,s["float-offset"]=!1,s["flood-color"]=!1,s["flood-opacity"]=!1,s["flow-from"]=!1,s["flow-into"]=!1,s.font=!0,s["font-family"]=!0,s["font-feature-settings"]=!0,s["font-kerning"]=!0,s["font-language-override"]=!0,s["font-size"]=!0,s["font-size-adjust"]=!0,s["font-stretch"]=!0,s["font-style"]=!0,s["font-synthesis"]=!0,s["font-variant"]=!0,s["font-variant-alternates"]=!0,s["font-variant-caps"]=!0,s["font-variant-east-asian"]=!0,s["font-variant-ligatures"]=!0,s["font-variant-numeric"]=!0,s["font-variant-position"]=!0,s["font-weight"]=!0,s.grid=!1,s["grid-area"]=!1,s["grid-auto-columns"]=!1,s["grid-auto-flow"]=!1,s["grid-auto-rows"]=!1,s["grid-column"]=!1,s["grid-column-end"]=!1,s["grid-column-start"]=!1,s["grid-row"]=!1,s["grid-row-end"]=!1,s["grid-row-start"]=!1,s["grid-template"]=!1,s["grid-template-areas"]=!1,s["grid-template-columns"]=!1,s["grid-template-rows"]=!1,s["hanging-punctuation"]=!1,s.height=!0,s.hyphens=!1,s.icon=!1,s["image-orientation"]=!1,s["image-resolution"]=!1,s["ime-mode"]=!1,s["initial-letters"]=!1,s["inline-box-align"]=!1,s["justify-content"]=!1,s["justify-items"]=!1,s["justify-self"]=!1,s.left=!1,s["letter-spacing"]=!0,s["lighting-color"]=!0,s["line-box-contain"]=!1,s["line-break"]=!1,s["line-grid"]=!1,s["line-height"]=!1,s["line-snap"]=!1,s["line-stacking"]=!1,s["line-stacking-ruby"]=!1,s["line-stacking-shift"]=!1,s["line-stacking-strategy"]=!1,s["list-style"]=!0,s["list-style-image"]=!0,s["list-style-position"]=!0,s["list-style-type"]=!0,s.margin=!0,s["margin-bottom"]=!0,s["margin-left"]=!0,s["margin-right"]=!0,s["margin-top"]=!0,s["marker-offset"]=!1,s["marker-side"]=!1,s.marks=!1,s.mask=!1,s["mask-box"]=!1,s["mask-box-outset"]=!1,s["mask-box-repeat"]=!1,s["mask-box-slice"]=!1,s["mask-box-source"]=!1,s["mask-box-width"]=!1,s["mask-clip"]=!1,s["mask-image"]=!1,s["mask-origin"]=!1,s["mask-position"]=!1,s["mask-repeat"]=!1,s["mask-size"]=!1,s["mask-source-type"]=!1,s["mask-type"]=!1,s["max-height"]=!0,s["max-lines"]=!1,s["max-width"]=!0,s["min-height"]=!0,s["min-width"]=!0,s["move-to"]=!1,s["nav-down"]=!1,s["nav-index"]=!1,s["nav-left"]=!1,s["nav-right"]=!1,s["nav-up"]=!1,s["object-fit"]=!1,s["object-position"]=!1,s.opacity=!1,s.order=!1,s.orphans=!1,s.outline=!1,s["outline-color"]=!1,s["outline-offset"]=!1,s["outline-style"]=!1,s["outline-width"]=!1,s.overflow=!1,s["overflow-wrap"]=!1,s["overflow-x"]=!1,s["overflow-y"]=!1,s.padding=!0,s["padding-bottom"]=!0,s["padding-left"]=!0,s["padding-right"]=!0,s["padding-top"]=!0,s.page=!1,s["page-break-after"]=!1,s["page-break-before"]=!1,s["page-break-inside"]=!1,s["page-policy"]=!1,s.pause=!1,s["pause-after"]=!1,s["pause-before"]=!1,s.perspective=!1,s["perspective-origin"]=!1,s.pitch=!1,s["pitch-range"]=!1,s["play-during"]=!1,s.position=!1,s["presentation-level"]=!1,s.quotes=!1,s["region-fragment"]=!1,s.resize=!1,s.rest=!1,s["rest-after"]=!1,s["rest-before"]=!1,s.richness=!1,s.right=!1,s.rotation=!1,s["rotation-point"]=!1,s["ruby-align"]=!1,s["ruby-merge"]=!1,s["ruby-position"]=!1,s["shape-image-threshold"]=!1,s["shape-outside"]=!1,s["shape-margin"]=!1,s.size=!1,s.speak=!1,s["speak-as"]=!1,s["speak-header"]=!1,s["speak-numeral"]=!1,s["speak-punctuation"]=!1,s["speech-rate"]=!1,s.stress=!1,s["string-set"]=!1,s["tab-size"]=!1,s["table-layout"]=!1,s["text-align"]=!0,s["text-align-last"]=!0,s["text-combine-upright"]=!0,s["text-decoration"]=!0,s["text-decoration-color"]=!0,s["text-decoration-line"]=!0,s["text-decoration-skip"]=!0,s["text-decoration-style"]=!0,s["text-emphasis"]=!0,s["text-emphasis-color"]=!0,s["text-emphasis-position"]=!0,s["text-emphasis-style"]=!0,s["text-height"]=!0,s["text-indent"]=!0,s["text-justify"]=!0,s["text-orientation"]=!0,s["text-overflow"]=!0,s["text-shadow"]=!0,s["text-space-collapse"]=!0,s["text-transform"]=!0,s["text-underline-position"]=!0,s["text-wrap"]=!0,s.top=!1,s.transform=!1,s["transform-origin"]=!1,s["transform-style"]=!1,s.transition=!1,s["transition-delay"]=!1,s["transition-duration"]=!1,s["transition-property"]=!1,s["transition-timing-function"]=!1,s["unicode-bidi"]=!1,s["vertical-align"]=!1,s.visibility=!1,s["voice-balance"]=!1,s["voice-duration"]=!1,s["voice-family"]=!1,s["voice-pitch"]=!1,s["voice-range"]=!1,s["voice-rate"]=!1,s["voice-stress"]=!1,s["voice-volume"]=!1,s.volume=!1,s["white-space"]=!1,s.widows=!1,s.width=!0,s["will-change"]=!1,s["word-break"]=!0,s["word-spacing"]=!0,s["word-wrap"]=!0,s["wrap-flow"]=!1,s["wrap-through"]=!1,s["writing-mode"]=!1,s["z-index"]=!1,s}function e(s,o,a){}function t(s,o,a){}var r=/javascript\s*\:/img;function i(s,o){return r.test(o)?"":o}return Kl.whiteList=n(),Kl.getDefaultWhiteList=n,Kl.onAttr=e,Kl.onIgnoreAttr=t,Kl.safeAttrValue=i,Kl}var CT,lU;function YJ(){return lU||(lU=1,CT={indexOf:function(n,e){var t,r;if(Array.prototype.indexOf)return n.indexOf(e);for(t=0,r=n.length;t<r;t++)if(n[t]===e)return t;return-1},forEach:function(n,e,t){var r,i;if(Array.prototype.forEach)return n.forEach(e,t);for(r=0,i=n.length;r<i;r++)e.call(t,n[r],r,n)},trim:function(n){return String.prototype.trim?n.trim():n.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(n){return String.prototype.trimRight?n.trimRight():n.replace(/(\s*$)/g,"")}}),CT}var ET,cU;function GRe(){if(cU)return ET;cU=1;var n=YJ();function e(t,r){t=n.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,s=!1,o=0,a=0,l="";function c(){if(!s){var d=n.trim(t.slice(o,a)),f=d.indexOf(":");if(f!==-1){var m=n.trim(d.slice(0,f)),g=n.trim(d.slice(f+1));if(m){var v=r(o,l.length,m,g,d);v&&(l+=v+"; ")}}}o=a+1}for(;a<i;a++){var u=t[a];if(u==="/"&&t[a+1]==="*"){var h=t.indexOf("*/",a+2);if(h===-1)break;a=h+1,o=a+1,s=!1}else u==="("?s=!0:u===")"?s=!1:u===";"?s||c():u===`
`&&c()}return n.trim(l)}return ET=e,ET}var TT,uU;function VRe(){if(uU)return TT;uU=1;var n=HJ(),e=GRe();YJ();function t(s){return s==null}function r(s){var o={};for(var a in s)o[a]=s[a];return o}function i(s){s=r(s||{}),s.whiteList=s.whiteList||n.whiteList,s.onAttr=s.onAttr||n.onAttr,s.onIgnoreAttr=s.onIgnoreAttr||n.onIgnoreAttr,s.safeAttrValue=s.safeAttrValue||n.safeAttrValue,this.options=s}return i.prototype.process=function(s){if(s=s||"",s=s.toString(),!s)return"";var o=this,a=o.options,l=a.whiteList,c=a.onAttr,u=a.onIgnoreAttr,h=a.safeAttrValue,d=e(s,function(f,m,g,v,y){var b=l[g],w=!1;if(b===!0?w=b:typeof b=="function"?w=b(v):b instanceof RegExp&&(w=b.test(v)),w!==!0&&(w=!1),v=h(g,v),!!v){var S={position:m,sourcePosition:f,source:y,isWhite:w};if(w){var _=c(g,v,S);return t(_)?g+":"+v:_}else{var _=u(g,v,S);if(!t(_))return _}}});return d},TT=i,TT}var hU;function yP(){return hU||(hU=1,function(n,e){var t=HJ(),r=VRe();function i(o,a){var l=new r(a);return l.process(o)}e=n.exports=i,e.FilterCSS=r;for(var s in t)e[s]=t[s];typeof window<"u"&&(window.filterCSS=n.exports)}(Ev,Ev.exports)),Ev.exports}var MT,dU;function ID(){return dU||(dU=1,MT={indexOf:function(n,e){var t,r;if(Array.prototype.indexOf)return n.indexOf(e);for(t=0,r=n.length;t<r;t++)if(n[t]===e)return t;return-1},forEach:function(n,e,t){var r,i;if(Array.prototype.forEach)return n.forEach(e,t);for(r=0,i=n.length;r<i;r++)e.call(t,n[r],r,n)},trim:function(n){return String.prototype.trim?n.trim():n.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(n){var e=/\s|\n|\t/,t=e.exec(n);return t?t.index:-1}}),MT}var fU;function GJ(){if(fU)return mn;fU=1;var n=yP().FilterCSS,e=yP().getDefaultWhiteList,t=ID();function r(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var i=new n;function s(L,B,$){}function o(L,B,$){}function a(L,B,$){}function l(L,B,$){}function c(L){return L.replace(h,"&lt;").replace(d,"&gt;")}function u(L,B,$,U){if($=R($),B==="href"||B==="src"){if($=t.trim($),$==="#")return"#";if(!($.substr(0,7)==="http://"||$.substr(0,8)==="https://"||$.substr(0,7)==="mailto:"||$.substr(0,4)==="tel:"||$.substr(0,11)==="data:image/"||$.substr(0,6)==="ftp://"||$.substr(0,2)==="./"||$.substr(0,3)==="../"||$[0]==="#"||$[0]==="/"))return""}else if(B==="background"){if(b.lastIndex=0,b.test($))return""}else if(B==="style"){if(w.lastIndex=0,w.test($)||(S.lastIndex=0,S.test($)&&(b.lastIndex=0,b.test($))))return"";U!==!1&&(U=U||i,$=U.process($))}return $=D($),$}var h=/</g,d=/>/g,f=/"/g,m=/&quot;/g,g=/&#([a-zA-Z0-9]*);?/gim,v=/&colon;?/gim,y=/&newline;?/gim,b=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,w=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,S=/u\s*r\s*l\s*\(.*/gi;function _(L){return L.replace(f,"&quot;")}function E(L){return L.replace(m,'"')}function C(L){return L.replace(g,function($,U){return U[0]==="x"||U[0]==="X"?String.fromCharCode(parseInt(U.substr(1),16)):String.fromCharCode(parseInt(U,10))})}function T(L){return L.replace(v,":").replace(y," ")}function O(L){for(var B="",$=0,U=L.length;$<U;$++)B+=L.charCodeAt($)<32?" ":L.charAt($);return t.trim(B)}function R(L){return L=E(L),L=C(L),L=T(L),L=O(L),L}function D(L){return L=_(L),L=c(L),L}function A(){return""}function F(L,B){typeof B!="function"&&(B=function(){});var $=!Array.isArray(L);function U(J){return $?!0:t.indexOf(L,J)!==-1}var H=[],K=!1;return{onIgnoreTag:function(J,Z,q){if(U(J))if(q.isClosing){var X="[/removed]",G=q.position+X.length;return H.push([K!==!1?K:q.position,G]),K=!1,X}else return K||(K=q.position),"[removed]";else return B(J,Z,q)},remove:function(J){var Z="",q=0;return t.forEach(H,function(X){Z+=J.slice(q,X[0]),q=X[1]}),Z+=J.slice(q),Z}}}function z(L){for(var B="",$=0;$<L.length;){var U=L.indexOf("<!--",$);if(U===-1){B+=L.slice($);break}B+=L.slice($,U);var H=L.indexOf("-->",U);if(H===-1)break;$=H+3}return B}function j(L){var B=L.split("");return B=B.filter(function($){var U=$.charCodeAt(0);return U===127?!1:U<=31?U===10||U===13:!0}),B.join("")}return mn.whiteList=r(),mn.getDefaultWhiteList=r,mn.onTag=s,mn.onIgnoreTag=o,mn.onTagAttr=a,mn.onIgnoreTagAttr=l,mn.safeAttrValue=u,mn.escapeHtml=c,mn.escapeQuote=_,mn.unescapeQuote=E,mn.escapeHtmlEntities=C,mn.escapeDangerHtml5Entities=T,mn.clearNonPrintableCharacter=O,mn.friendlyAttrValue=R,mn.escapeAttrValue=D,mn.onIgnoreTagStripAll=A,mn.StripTagBody=F,mn.stripCommentTag=z,mn.stripBlankChar=j,mn.attributeWrapSign='"',mn.cssFilter=i,mn.getDefaultCSSWhiteList=e,mn}var Tv={},pU;function VJ(){if(pU)return Tv;pU=1;var n=ID();function e(h){var d=n.spaceIndex(h),f;return d===-1?f=h.slice(1,-1):f=h.slice(1,d+1),f=n.trim(f).toLowerCase(),f.slice(0,1)==="/"&&(f=f.slice(1)),f.slice(-1)==="/"&&(f=f.slice(0,-1)),f}function t(h){return h.slice(0,2)==="</"}function r(h,d,f){var m="",g=0,v=!1,y=!1,b=0,w=h.length,S="",_="";e:for(b=0;b<w;b++){var E=h.charAt(b);if(v===!1){if(E==="<"){v=b;continue}}else if(y===!1){if(E==="<"){m+=f(h.slice(g,b)),v=b,g=b;continue}if(E===">"||b===w-1){m+=f(h.slice(g,v)),_=h.slice(v,b+1),S=e(_),m+=d(v,m.length,S,_,t(_)),g=b+1,v=!1;continue}if(E==='"'||E==="'")for(var C=1,T=h.charAt(b-C);T.trim()===""||T==="=";){if(T==="="){y=E;continue e}T=h.charAt(b-++C)}}else if(E===y){y=!1;continue}}return g<w&&(m+=f(h.substr(g))),m}var i=/[^a-zA-Z0-9\\_:.-]/gim;function s(h,d){var f=0,m=0,g=[],v=!1,y=h.length;function b(C,T){if(C=n.trim(C),C=C.replace(i,"").toLowerCase(),!(C.length<1)){var O=d(C,T||"");O&&g.push(O)}}for(var w=0;w<y;w++){var S=h.charAt(w),_,E;if(v===!1&&S==="="){v=h.slice(f,w),f=w+1,m=h.charAt(f)==='"'||h.charAt(f)==="'"?f:a(h,w+1);continue}if(v!==!1&&w===m){if(E=h.indexOf(S,w+1),E===-1)break;_=n.trim(h.slice(m+1,E)),b(v,_),v=!1,w=E,f=w+1;continue}if(/\s|\n|\t/.test(S))if(h=h.replace(/\s|\n|\t/g," "),v===!1)if(E=o(h,w),E===-1){_=n.trim(h.slice(f,w)),b(_),v=!1,f=w+1;continue}else{w=E-1;continue}else if(E=l(h,w-1),E===-1){_=n.trim(h.slice(f,w)),_=u(_),b(v,_),v=!1,f=w+1;continue}else continue}return f<h.length&&(v===!1?b(h.slice(f)):b(v,u(n.trim(h.slice(f))))),n.trim(g.join(" "))}function o(h,d){for(;d<h.length;d++){var f=h[d];if(f!==" ")return f==="="?d:-1}}function a(h,d){for(;d<h.length;d++){var f=h[d];if(f!==" ")return f==="'"||f==='"'?d:-1}}function l(h,d){for(;d>0;d--){var f=h[d];if(f!==" ")return f==="="?d:-1}}function c(h){return h[0]==='"'&&h[h.length-1]==='"'||h[0]==="'"&&h[h.length-1]==="'"}function u(h){return c(h)?h.substr(1,h.length-2):h}return Tv.parseTag=r,Tv.parseAttr=s,Tv}var IT,mU;function KRe(){if(mU)return IT;mU=1;var n=yP().FilterCSS,e=GJ(),t=VJ(),r=t.parseTag,i=t.parseAttr,s=ID();function o(h){return h==null}function a(h){var d=s.spaceIndex(h);if(d===-1)return{html:"",closing:h[h.length-2]==="/"};h=s.trim(h.slice(d+1,-1));var f=h[h.length-1]==="/";return f&&(h=s.trim(h.slice(0,-1))),{html:h,closing:f}}function l(h){var d={};for(var f in h)d[f]=h[f];return d}function c(h){var d={};for(var f in h)Array.isArray(h[f])?d[f.toLowerCase()]=h[f].map(function(m){return m.toLowerCase()}):d[f.toLowerCase()]=h[f];return d}function u(h){h=l(h||{}),h.stripIgnoreTag&&(h.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),h.onIgnoreTag=e.onIgnoreTagStripAll),h.whiteList||h.allowList?h.whiteList=c(h.whiteList||h.allowList):h.whiteList=e.whiteList,this.attributeWrapSign=h.singleQuotedAttributeValue===!0?"'":e.attributeWrapSign,h.onTag=h.onTag||e.onTag,h.onTagAttr=h.onTagAttr||e.onTagAttr,h.onIgnoreTag=h.onIgnoreTag||e.onIgnoreTag,h.onIgnoreTagAttr=h.onIgnoreTagAttr||e.onIgnoreTagAttr,h.safeAttrValue=h.safeAttrValue||e.safeAttrValue,h.escapeHtml=h.escapeHtml||e.escapeHtml,this.options=h,h.css===!1?this.cssFilter=!1:(h.css=h.css||{},this.cssFilter=new n(h.css))}return u.prototype.process=function(h){if(h=h||"",h=h.toString(),!h)return"";var d=this,f=d.options,m=f.whiteList,g=f.onTag,v=f.onIgnoreTag,y=f.onTagAttr,b=f.onIgnoreTagAttr,w=f.safeAttrValue,S=f.escapeHtml,_=d.attributeWrapSign,E=d.cssFilter;f.stripBlankChar&&(h=e.stripBlankChar(h)),f.allowCommentTag||(h=e.stripCommentTag(h));var C=!1;f.stripIgnoreTagBody&&(C=e.StripTagBody(f.stripIgnoreTagBody,v),v=C.onIgnoreTag);var T=r(h,function(O,R,D,A,F){var z={sourcePosition:O,position:R,isClosing:F,isWhite:Object.prototype.hasOwnProperty.call(m,D)},j=g(D,A,z);if(!o(j))return j;if(z.isWhite){if(z.isClosing)return"</"+D+">";var L=a(A),B=m[D],$=i(L.html,function(U,H){var K=s.indexOf(B,U)!==-1,J=y(D,U,H,K);return o(J)?K?(H=w(D,U,H,E),H?U+"="+_+H+_:U):(J=b(D,U,H,K),o(J)?void 0:J):J});return A="<"+D,$&&(A+=" "+$),L.closing&&(A+=" /"),A+=">",A}else return j=v(D,A,z),o(j)?S(A):j},S);return C&&(T=C.remove(T)),T},IT=u,IT}var gU;function XRe(){return gU||(gU=1,function(n,e){var t=GJ(),r=VJ(),i=KRe();function s(a,l){var c=new i(l);return c.process(a)}e=n.exports=s,e.filterXSS=s,e.FilterXSS=i,function(){for(var a in t)e[a]=t[a];for(var l in r)e[l]=r[l]}(),typeof window<"u"&&(window.filterXSS=n.exports);function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=n.exports)}(Cv,Cv.exports)),Cv.exports}var QRe=XRe(),JRe=nt(QRe);function vU(n,e){var t=rr(n);if(xb){var r=xb(n);e&&(r=yt(r).call(r,function(i){return rw(n,i).enumerable})),t.push.apply(t,r)}return t}function yU(n){for(var e=1;e<arguments.length;e++){var t,r,i=arguments[e]!=null?arguments[e]:{};e%2?je(t=vU(Object(i),!0)).call(t,function(s){Cn(n,s,i[s])}):wb?OJ(n,wb(i)):je(r=vU(Object(i))).call(r,function(s){ED(n,s,rw(i,s))})}return n}function iu(n){var e;if(!n)return!1;let t=(e=n.idProp)!==null&&e!==void 0?e:n._idProp;return t?HRe(t,n):!1}const PT=/^\/?Date\((-?\d+)/i,ZRe=/^\d+$/;function PD(n,e){let t;if(n!==void 0){if(n===null)return null;if(!e)return n;if(typeof e!="string"&&!(e instanceof String))throw new Error("Type must be a string");switch(e){case"boolean":case"Boolean":return!!n;case"number":case"Number":return Mi(n)&&!isNaN(Date.parse(n))?Ki(n).valueOf():Number(n.valueOf());case"string":case"String":return String(n);case"Date":try{return PD(n,"Moment").toDate()}catch(r){throw r instanceof TypeError?new TypeError("Cannot convert object of type "+dp(n)+" to type "+e):r}case"Moment":if(jp(n))return Ki(n);if(n instanceof Date)return Ki(n.valueOf());if(Ki.isMoment(n))return Ki(n);if(Mi(n))return t=PT.exec(n),t?Ki(Number(t[1])):(t=ZRe.exec(n),Ki(t?Number(n):n));throw new TypeError("Cannot convert object of type "+dp(n)+" to type "+e);case"ISODate":if(jp(n))return new Date(n);if(n instanceof Date)return n.toISOString();if(Ki.isMoment(n))return n.toDate().toISOString();if(Mi(n))return t=PT.exec(n),t?new Date(Number(t[1])).toISOString():Ki(n).format();throw new Error("Cannot convert object of type "+dp(n)+" to type ISODate");case"ASPDate":if(jp(n))return"/Date("+n+")/";if(n instanceof Date||Ki.isMoment(n))return"/Date("+n.valueOf()+")/";if(Mi(n)){t=PT.exec(n);let r;return t?r=new Date(Number(t[1])).valueOf():r=new Date(n).valueOf(),"/Date("+r+")/"}else throw new Error("Cannot convert object of type "+dp(n)+" to type ASPDate");default:throw new Error("Unknown type ".concat(e))}}}function Sb(n){var e,t,r,i,s,o;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{start:"Date",end:"Date"};const l=n._idProp,c=new MD({fieldId:l}),u=Ut(e=BRe(n)).call(e,h=>{var d;return sw(d=rr(h)).call(d,(f,m)=>(f[m]=PD(h[m],a[m]),f),{})}).to(c);return u.all().start(),{add:function(){return n.getDataSet().add(...arguments)},remove:function(){return n.getDataSet().remove(...arguments)},update:function(){return n.getDataSet().update(...arguments)},updateOnly:function(){return n.getDataSet().updateOnly(...arguments)},clear:function(){return n.getDataSet().clear(...arguments)},forEach:ue(t=je(c)).call(t,c),get:ue(r=c.get).call(r,c),getIds:ue(i=c.getIds).call(i,c),off:ue(s=c.off).call(s,c),on:ue(o=c.on).call(o,c),get length(){return c.length},idProp:l,type:a,rawDS:n,coercedDS:c,dispose:()=>u.stop()}}const KJ=n=>{const e=new JRe.FilterXSS(n);return t=>typeof t=="string"?e.process(t):t},eDe=n=>n;let bP=KJ();const tDe=n=>{n&&(n.disabled===!0?(bP=eDe,console.warn("You disabled XSS protection for vis-Timeline. I sure hope you know what you're doing!")):n.filterOptions&&(bP=KJ(n.filterOptions)))},W=yU(yU({},$Ie),{},{convert:PD,setupXSSProtection:tDe});ED(W,"xss",{get:function(){return bP}});var bU={},OT,xU;function nDe(){if(xU)return OT;xU=1;var n=Ln(),e=Pt(),t=Nt(),r=ms(),i=YQ().trim,s=sD(),o=t("".charAt),a=n.parseFloat,l=n.Symbol,c=l&&l.iterator,u=1/a(s+"-0")!==-1/0||c&&!e(function(){a(Object(c))});return OT=u?function(d){var f=i(r(d)),m=a(f);return m===0&&o(f,0)==="-"?-0:m}:a,OT}var wU;function rDe(){if(wU)return bU;wU=1;var n=Je(),e=nDe();return n({global:!0,forced:parseFloat!==e},{parseFloat:e}),bU}var RT,_U;function iDe(){if(_U)return RT;_U=1,rDe();var n=sn();return RT=n.parseFloat,RT}var DT,SU;function sDe(){if(SU)return DT;SU=1;var n=iDe();return DT=n,DT}var NT,kU;function oDe(){return kU||(kU=1,NT=sDe()),NT}var aDe=oDe(),kb=nt(aDe);class $l{constructor(){this.options=null,this.props=null}setOptions(e){e&&W.extend(this.options,e)}redraw(){return!1}destroy(){}_isResized(){const e=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,e}}var CU={},EU;function lDe(){if(EU)return CU;EU=1;var n=Je(),e=GQ();return n({target:"String",proto:!0},{repeat:e}),CU}var AT,TU;function cDe(){if(TU)return AT;TU=1,lDe();var n=Fn();return AT=n("String","repeat"),AT}var LT,MU;function uDe(){if(MU)return LT;MU=1;var n=hn(),e=cDe(),t=String.prototype;return LT=function(r){var i=r.repeat;return typeof r=="string"||r===t||n(t,r)&&i===t.repeat?e:i},LT}var FT,IU;function hDe(){if(IU)return FT;IU=1;var n=uDe();return FT=n,FT}var jT,PU;function dDe(){return PU||(PU=1,jT=hDe()),jT}var fDe=dDe(),zu=nt(fDe);function OD(n,e,t){if(t&&!It(t))return OD(n,e,[t]);if(e.hiddenDates=[],t&&It(t)==!0){var r;for(let i=0;i<t.length;i++)if(zu(t[i])===void 0){const s={};s.start=n(t[i].start).toDate().valueOf(),s.end=n(t[i].end).toDate().valueOf(),e.hiddenDates.push(s)}Un(r=e.hiddenDates).call(r,(i,s)=>i.start-s.start)}}function Cb(n,e,t){if(t&&!It(t))return Cb(n,e,[t]);if(t&&e.domProps.centerContainer.width!==void 0){OD(n,e,t);const r=n(e.range.start),i=n(e.range.end),o=(e.range.end-e.range.start)/e.domProps.centerContainer.width;for(let h=0;h<t.length;h++)if(zu(t[h])!==void 0){let d=n(t[h].start),f=n(t[h].end);if(d._d=="Invalid Date")throw new Error("Supplied start date is not valid: ".concat(t[h].start));if(f._d=="Invalid Date")throw new Error("Supplied end date is not valid: ".concat(t[h].end));if(f-d>=4*o){let g=0,v=i.clone();switch(zu(t[h])){case"daily":d.day()!=f.day()&&(g=1),d=d.dayOfYear(r.dayOfYear()).year(r.year()).subtract(7,"days"),f=f.dayOfYear(r.dayOfYear()).year(r.year()).subtract(7-g,"days"),v.add(1,"weeks");break;case"weekly":{const y=f.diff(d,"days"),b=d.day();d=d.date(r.date()).month(r.month()).year(r.year()),f=d.clone(),d=d.day(b).subtract(1,"weeks"),f=f.day(b).add(y,"days").subtract(1,"weeks"),v.add(1,"weeks");break}case"monthly":d.month()!=f.month()&&(g=1),d=d.month(r.month()).year(r.year()).subtract(1,"months"),f=f.month(r.month()).year(r.year()).subtract(1,"months").add(g,"months"),v.add(1,"months");break;case"yearly":d.year()!=f.year()&&(g=1),d=d.year(r.year()).subtract(1,"years"),f=f.year(r.year()).subtract(1,"years").add(g,"years"),v.add(1,"years");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",zu(t[h]));return}for(;d<v;)switch(e.hiddenDates.push({start:d.valueOf(),end:f.valueOf()}),zu(t[h])){case"daily":d=d.add(1,"days"),f=f.add(1,"days");break;case"weekly":d=d.add(1,"weeks"),f=f.add(1,"weeks");break;case"monthly":d=d.add(1,"months"),f=f.add(1,"months");break;case"yearly":d=d.add(1,"y"),f=f.add(1,"y");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",zu(t[h]));return}e.hiddenDates.push({start:d.valueOf(),end:f.valueOf()})}}pDe(e);const a=Tb(e.range.start,e.hiddenDates),l=Tb(e.range.end,e.hiddenDates);let c=e.range.start,u=e.range.end;a.hidden==!0&&(c=e.range.startToFront==!0?a.startDate-1:a.endDate+1),l.hidden==!0&&(u=e.range.endToFront==!0?l.startDate-1:l.endDate+1),(a.hidden==!0||l.hidden==!0)&&e.range._applyRange(c,u)}}function pDe(n){var e;const t=n.hiddenDates,r=[];for(var i=0;i<t.length;i++)for(let s=0;s<t.length;s++)i!=s&&t[s].remove!=!0&&t[i].remove!=!0&&(t[s].start>=t[i].start&&t[s].end<=t[i].end?t[s].remove=!0:t[s].start>=t[i].start&&t[s].start<=t[i].end?(t[i].end=t[s].end,t[s].remove=!0):t[s].end>=t[i].start&&t[s].end<=t[i].end&&(t[i].start=t[s].start,t[s].remove=!0));for(i=0;i<t.length;i++)t[i].remove!==!0&&r.push(t[i]);n.hiddenDates=r,Un(e=n.hiddenDates).call(e,(s,o)=>s.start-o.start)}function mDe(n,e,t){let r=!1;const i=e.current.valueOf();for(let o=0;o<e.hiddenDates.length;o++){const a=e.hiddenDates[o].start;var s=e.hiddenDates[o].end;if(i>=a&&i<s){r=!0;break}}if(r==!0&&i<e._end.valueOf()&&i!=t){const o=n(t),a=n(s);o.year()!=a.year()?e.switchedYear=!0:o.month()!=a.month()?e.switchedMonth=!0:o.dayOfYear()!=a.dayOfYear()&&(e.switchedDay=!0),e.current=a}}function OU(n,e,t){let r;if(n.body.hiddenDates.length==0)return r=n.range.conversion(t),(e.valueOf()-r.offset)*r.scale;{const i=Tb(e,n.body.hiddenDates);i.hidden==!0&&(e=i.startDate);const s=Bp(n.body.hiddenDates,n.range.start,n.range.end);if(e<n.range.start){r=n.range.conversion(t,s);const o=gDe(n.body.hiddenDates,e,r.offset);return e=n.options.moment(e).toDate().valueOf(),e=e+o,-(r.offset-e.valueOf())*r.scale}else if(e>n.range.end){const o={start:n.range.start,end:e};return e=DU(n.options.moment,n.body.hiddenDates,o,e),r=n.range.conversion(t,s),(e.valueOf()-r.offset)*r.scale}else return e=DU(n.options.moment,n.body.hiddenDates,n.range,e),r=n.range.conversion(t,s),(e.valueOf()-r.offset)*r.scale}}function RU(n,e,t){if(n.body.hiddenDates.length==0){const r=n.range.conversion(t);return new Date(e/r.scale+r.offset)}else{const r=Bp(n.body.hiddenDates,n.range.start,n.range.end),s=(n.range.end-n.range.start-r)*e/t,o=vDe(n.body.hiddenDates,n.range,s);return new Date(o+s+n.range.start)}}function Bp(n,e,t){let r=0;for(let i=0;i<n.length;i++){const s=n[i].start,o=n[i].end;s>=e&&o<t&&(r+=o-s)}return r}function gDe(n,e,t){let r=0;for(let i=0;i<n.length;i++){const s=n[i].start,o=n[i].end;s>=e&&o<=t&&(r+=o-s)}return r}function DU(n,e,t,r){return r=n(r).toDate().valueOf(),r-=Eb(n,e,t,r),r}function Eb(n,e,t,r){let i=0;r=n(r).toDate().valueOf();for(let s=0;s<e.length;s++){const o=e[s].start,a=e[s].end;o>=t.start&&a<t.end&&r>=a&&(i+=a-o)}return i}function vDe(n,e,t){let r=0,i=0,s=e.start;for(let o=0;o<n.length;o++){const a=n[o].start,l=n[o].end;if(a>=e.start&&l<e.end){if(i+=a-s,s=l,i>=t)break;r+=l-a}}return r}function nc(n,e,t,r){const i=Tb(e,n);return i.hidden==!0?t<0?r==!0?i.startDate-(i.endDate-e)-1:i.startDate-1:r==!0?i.endDate+(e-i.startDate)+1:i.endDate+1:e}function Tb(n,e){for(let i=0;i<e.length;i++){var t=e[i].start,r=e[i].end;if(n>=t&&n<r)return{hidden:!0,startDate:t,endDate:r}}return{hidden:!1,startDate:t,endDate:r}}class RD extends $l{constructor(e,t){var r,i,s,o,a,l,c;super();const u=li().hours(0).minutes(0).seconds(0).milliseconds(0),h=u.clone().add(-3,"days").valueOf(),d=u.clone().add(3,"days").valueOf();this.millisecondsPerPixelCache=void 0,t===void 0?(this.start=h,this.end=d):(this.start=t.start||h,this.end=t.end||d),this.rolling=!1,this.body=e,this.deltaDifference=0,this.scaleOffset=0,this.startToFront=!1,this.endToFront=!0,this.defaultOptions={rtl:!1,start:null,end:null,moment:li,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:1e3*60*60*24*365*1e4,rollingMode:{follow:!1,offset:.5}},this.options=W.extend({},this.defaultOptions),this.props={touch:{}},this.animationTimer=null,this.body.emitter.on("panstart",ue(r=this._onDragStart).call(r,this)),this.body.emitter.on("panmove",ue(i=this._onDrag).call(i,this)),this.body.emitter.on("panend",ue(s=this._onDragEnd).call(s,this)),this.body.emitter.on("mousewheel",ue(o=this._onMouseWheel).call(o,this)),this.body.emitter.on("touch",ue(a=this._onTouch).call(a,this)),this.body.emitter.on("pinch",ue(l=this._onPinch).call(l,this)),this.body.dom.rollingModeBtn.addEventListener("click",ue(c=this.startRolling).call(c,this)),this.setOptions(t)}setOptions(e){if(e){const t=["animation","direction","min","max","zoomMin","zoomMax","moveable","zoomable","moment","activate","hiddenDates","zoomKey","zoomFriction","rtl","showCurrentTime","rollingMode","horizontalScroll","horizontalScrollKey","horizontalScrollInvert","verticalScroll"];W.selectiveExtend(t,this.options,e),e.rollingMode&&e.rollingMode.follow&&this.startRolling(),("start"in e||"end"in e)&&this.setRange(e.start,e.end)}}startRolling(){const e=this;function t(){e.stopRolling(),e.rolling=!0;let r=e.end-e.start;const i=W.convert(new Date,"Date").valueOf(),s=e.options.rollingMode&&e.options.rollingMode.offset||.5,o=i-r*s,a=i+r*(1-s),l={animation:!1};e.setRange(o,a,l),r=1/e.conversion(e.body.domProps.center.width).scale/10,r<30&&(r=30),r>1e3&&(r=1e3),e.body.dom.rollingModeBtn.style.visibility="hidden",e.currentTimeTimer=fi(t,r)}t()}stopRolling(){this.currentTimeTimer!==void 0&&(clearTimeout(this.currentTimeTimer),this.rolling=!1,this.body.dom.rollingModeBtn.style.visibility="visible")}setRange(e,t,r,i,s){r||(r={}),r.byUser!==!0&&(r.byUser=!1);const o=this,a=e!=null?W.convert(e,"Date").valueOf():null,l=t!=null?W.convert(t,"Date").valueOf():null;if(this._cancelAnimation(),this.millisecondsPerPixelCache=void 0,r.animation){const h=this.start,d=this.end,f=typeof r.animation=="object"&&"duration"in r.animation?r.animation.duration:500,m=typeof r.animation=="object"&&"easingFunction"in r.animation?r.animation.easingFunction:"easeInOutQuad",g=W.easingFunctions[m];if(!g){var c;throw new Error($n(c="Unknown easing function ".concat(ii(m),". Choose from: ")).call(c,rr(W.easingFunctions).join(", ")))}const v=Ei();let y=!1;const b=()=>{if(!o.props.touch.dragging){const S=Ei()-v,_=g(S/f),E=S>f,C=E||a===null?a:h+(a-h)*_,T=E||l===null?l:d+(l-d)*_;u=o._applyRange(C,T),Cb(o.options.moment,o.body,o.options.hiddenDates),y=y||u;const O={start:new Date(o.start),end:new Date(o.end),byUser:r.byUser,event:r.event};if(s&&s(_,u,E),u&&o.body.emitter.emit("rangechange",O),E){if(y&&(o.body.emitter.emit("rangechanged",O),i))return i()}else o.animationTimer=fi(b,20)}};return b()}else{var u=this._applyRange(a,l);if(Cb(this.options.moment,this.body,this.options.hiddenDates),u){const h={start:new Date(this.start),end:new Date(this.end),byUser:r.byUser,event:r.event};if(this.body.emitter.emit("rangechange",h),clearTimeout(o.timeoutID),o.timeoutID=fi(()=>{o.body.emitter.emit("rangechanged",h)},200),i)return i()}}}getMillisecondsPerPixel(){return this.millisecondsPerPixelCache===void 0&&(this.millisecondsPerPixelCache=(this.end-this.start)/this.body.dom.center.clientWidth),this.millisecondsPerPixelCache}_cancelAnimation(){this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=null)}_applyRange(e,t){let r=e!=null?W.convert(e,"Date").valueOf():this.start,i=t!=null?W.convert(t,"Date").valueOf():this.end;const s=this.options.max!=null?W.convert(this.options.max,"Date").valueOf():null,o=this.options.min!=null?W.convert(this.options.min,"Date").valueOf():null;let a;if(isNaN(r)||r===null)throw new Error('Invalid start "'.concat(e,'"'));if(isNaN(i)||i===null)throw new Error('Invalid end "'.concat(t,'"'));if(i<r&&(i=r),o!==null&&r<o&&(a=o-r,r+=a,i+=a,s!=null&&i>s&&(i=s)),s!==null&&i>s&&(a=i-s,r-=a,i-=a,o!=null&&r<o&&(r=o)),this.options.zoomMin!==null){let c=kb(this.options.zoomMin);c<0&&(c=0),i-r<c&&(this.end-this.start===c&&r>=this.start-.5&&i<=this.end?(r=this.start,i=this.end):(a=c-(i-r),r-=a/2,i+=a/2))}if(this.options.zoomMax!==null){let c=kb(this.options.zoomMax);c<0&&(c=0),i-r>c&&(this.end-this.start===c&&r<this.start&&i>this.end?(r=this.start,i=this.end):(a=i-r-c,r+=a/2,i-=a/2))}const l=this.start!=r||this.end!=i;return!(r>=this.start&&r<=this.end||i>=this.start&&i<=this.end)&&!(this.start>=r&&this.start<=i||this.end>=r&&this.end<=i)&&this.body.emitter.emit("checkRangedItems"),this.start=r,this.end=i,l}getRange(){return{start:this.start,end:this.end}}conversion(e,t){return RD.conversion(this.start,this.end,e,t)}static conversion(e,t,r,i){return i===void 0&&(i=0),r!=0&&t-e!=0?{offset:e,scale:r/(t-e-i)}:{offset:0,scale:1}}_onDragStart(e){this.deltaDifference=0,this.previousDelta=0,this.options.moveable&&this._isInsideRange(e)&&this.props.touch.allowDragging&&(this.stopRolling(),this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))}_onDrag(e){if(!e||!this.props.touch.dragging||!this.options.moveable||!this.props.touch.allowDragging)return;const t=this.options.direction;NU(t);let r=t=="horizontal"?e.deltaX:e.deltaY;r-=this.deltaDifference;let i=this.props.touch.end-this.props.touch.start;const s=Bp(this.body.hiddenDates,this.start,this.end);i-=s;const o=t=="horizontal"?this.body.domProps.center.width:this.body.domProps.center.height;let a;this.options.rtl?a=r/o*i:a=-r/o*i;const l=this.props.touch.start+a,c=this.props.touch.end+a,u=nc(this.body.hiddenDates,l,this.previousDelta-r,!0),h=nc(this.body.hiddenDates,c,this.previousDelta-r,!0);if(u!=l||h!=c){this.deltaDifference+=r,this.props.touch.start=u,this.props.touch.end=h,this._onDrag(e);return}this.previousDelta=r,this._applyRange(l,c);const d=new Date(this.start),f=new Date(this.end);this.body.emitter.emit("rangechange",{start:d,end:f,byUser:!0,event:e}),this.body.emitter.emit("panmove")}_onDragEnd(e){this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0,event:e}))}_onMouseWheel(e){let t=0;if(e.wheelDelta?t=e.wheelDelta/120:e.detail?t=-e.detail/3:e.deltaY&&(t=-e.deltaY/3),!(this.options.zoomKey&&!e[this.options.zoomKey]&&this.options.zoomable||!this.options.zoomable&&this.options.moveable)&&this.options.zoomable&&this.options.moveable&&this._isInsideRange(e)&&t){const r=this.options.zoomFriction||5;let i;t<0?i=1-t/r:i=1/(1+t/r);let s;if(this.rolling){const o=this.options.rollingMode&&this.options.rollingMode.offset||.5;s=this.start+(this.end-this.start)*o}else{const o=this.getPointer({x:e.clientX,y:e.clientY},this.body.dom.center);s=this._pointerToDate(o)}this.zoom(i,s,t,e),e.preventDefault()}}_onTouch(e){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.props.touch.centerDate=null,this.scaleOffset=0,this.deltaDifference=0,W.preventDefault(e)}_onPinch(e){if(!(this.options.zoomable&&this.options.moveable))return;W.preventDefault(e),this.props.touch.allowDragging=!1,this.props.touch.center||(this.props.touch.center=this.getPointer(e.center,this.body.dom.center),this.props.touch.centerDate=this._pointerToDate(this.props.touch.center)),this.stopRolling();const t=1/(e.scale+this.scaleOffset),r=this.props.touch.centerDate,i=Bp(this.body.hiddenDates,this.start,this.end),s=Eb(this.options.moment,this.body.hiddenDates,this,r),o=i-s;let a=r-s+(this.props.touch.start-(r-s))*t,l=r+o+(this.props.touch.end-(r+o))*t;this.startToFront=1-t<=0,this.endToFront=t-1<=0;const c=nc(this.body.hiddenDates,a,1-t,!0),u=nc(this.body.hiddenDates,l,t-1,!0);(c!=a||u!=l)&&(this.props.touch.start=c,this.props.touch.end=u,this.scaleOffset=1-e.scale,a=c,l=u);const h={animation:!1,byUser:!0,event:e};this.setRange(a,l,h),this.startToFront=!1,this.endToFront=!0}_isInsideRange(e){const t=e.center?e.center.x:e.clientX,r=this.body.dom.centerContainer.getBoundingClientRect(),i=this.options.rtl?t-r.left:r.right-t,s=this.body.util.toTime(i);return s>=this.start&&s<=this.end}_pointerToDate(e){let t;const r=this.options.direction;if(NU(r),r=="horizontal")return this.body.util.toTime(e.x).valueOf();{const i=this.body.domProps.center.height;return t=this.conversion(i),e.y/t.scale+t.offset}}getPointer(e,t){const r=t.getBoundingClientRect();return this.options.rtl?{x:r.right-e.x,y:e.y-r.top}:{x:e.x-r.left,y:e.y-r.top}}zoom(e,t,r,i){t==null&&(t=(this.start+this.end)/2);const s=Bp(this.body.hiddenDates,this.start,this.end),o=Eb(this.options.moment,this.body.hiddenDates,this,t),a=s-o;let l=t-o+(this.start-(t-o))*e,c=t+a+(this.end-(t+a))*e;this.startToFront=!(r>0),this.endToFront=!(-r>0);const u=nc(this.body.hiddenDates,l,r,!0),h=nc(this.body.hiddenDates,c,-r,!0);(u!=l||h!=c)&&(l=u,c=h);const d={animation:!1,byUser:!0,event:i};this.setRange(l,c,d),this.startToFront=!1,this.endToFront=!0}move(e){const t=this.end-this.start,r=this.start+t*e,i=this.end+t*e;this.start=r,this.end=i}moveTo(e){const r=(this.start+this.end)/2-e,i=this.start-r,s=this.end-r,o={animation:!1,byUser:!0,event:null};this.setRange(i,s,o)}destroy(){this.stopRolling()}}function NU(n){if(n!="horizontal"&&n!="vertical")throw new TypeError('Unknown direction "'.concat(n,'". Choose "horizontal" or "vertical".'))}var $T,AU;function yDe(){if(AU)return $T;AU=1,XQ();var n=sn();return $T=n.setInterval,$T}var BT,LU;function bDe(){return LU||(LU=1,BT=yDe()),BT}var xDe=bDe(),wDe=nt(xDe),Hf=null;function xP(n,e){var t=e||{preventDefault:!1};if(n.Manager){var r=n,i=function(c,u){var h=Object.create(t);return u&&r.assign(h,u),xP(new r(c,h),h)};return r.assign(i,r),i.Manager=function(c,u){var h=Object.create(t);return u&&r.assign(h,u),xP(new r.Manager(c,h),h)},i}var s=Object.create(n),o=n.element;o.hammer||(o.hammer=[]),o.hammer.push(s),n.on("hammer.input",function(c){(t.preventDefault===!0||t.preventDefault===c.pointerType)&&c.preventDefault(),c.isFirst&&(Hf=c.target)}),s._handlers={},s.on=function(c,u){return a(c).forEach(function(h){var d=s._handlers[h];d||(s._handlers[h]=d=[],n.on(h,l)),d.push(u)}),s},s.off=function(c,u){return a(c).forEach(function(h){var d=s._handlers[h];d&&(d=u?d.filter(function(f){return f!==u}):[],d.length>0?s._handlers[h]=d:(n.off(h,l),delete s._handlers[h]))}),s},s.emit=function(c,u){Hf=u.target,n.emit(c,u)},s.destroy=function(){var c=n.element.hammer,u=c.indexOf(s);u!==-1&&c.splice(u,1),c.length||delete n.element.hammer,s._handlers={},n.destroy()};function a(c){return c.match(/[^ ]+/g)}function l(c){if(c.type!=="hammer.input"){if(c.srcEvent._handled||(c.srcEvent._handled={}),c.srcEvent._handled[c.type])return;c.srcEvent._handled[c.type]=!0}var u=!1;c.stopPropagation=function(){u=!0};var h=c.srcEvent.stopPropagation.bind(c.srcEvent);typeof h=="function"&&(c.srcEvent.stopPropagation=function(){h(),c.stopPropagation()}),c.firstTarget=Hf;for(var d=Hf.isConnected?Hf:c.target;d&&!u;){var f=d.hammer;if(f){for(var m,g=0;g<f.length;g++)if(m=f[g]._handlers[c.type],m)for(var v=0;v<m.length&&!u;v++)m[v](c)}d=d.parentNode}}return s}function _De(){const n=()=>{};return{on:n,off:n,destroy:n,emit:n,get(){return{set:n}}}}let wP;if(typeof window<"u"){const n=window.Hammer||pD;wP=xP(n,{preventDefault:"mouse"})}else wP=function(){return _De()};var Ur=wP;function XJ(n,e){e.inputHandler=function(t){t.isFirst&&e(t)},n.on("hammer.input",e.inputHandler)}function SDe(n,e){return e.inputHandler=function(t){t.isFinal&&e(t)},n.on("hammer.input",e.inputHandler)}function kDe(n){const e="pan-y";return n.getTouchAction=function(){return[e]},n}class su{constructor(e,t,r,i,s){this.moment=s&&s.moment||li,this.options=s||{},this.current=this.moment(),this._start=this.moment(),this._end=this.moment(),this.autoScale=!0,this.scale="day",this.step=1,this.setRange(e,t,r),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,It(i)?this.hiddenDates=i:i!=null?this.hiddenDates=[i]:this.hiddenDates=[],this.format=su.FORMAT}setMoment(e){this.moment=e,this.current=this.moment(this.current.valueOf()),this._start=this.moment(this._start.valueOf()),this._end=this.moment(this._end.valueOf())}setFormat(e){const t=W.deepExtend({},su.FORMAT);this.format=W.deepExtend(t,e)}setRange(e,t,r){if(!(e instanceof Date)||!(t instanceof Date))throw"No legal start or end date in method setRange";this._start=e!=null?this.moment(e.valueOf()):Ei(),this._end=t!=null?this.moment(t.valueOf()):Ei(),this.autoScale&&this.setMinimumStep(r)}start(){this.current=this._start.clone(),this.roundToMinor()}roundToMinor(){switch(this.scale=="week"&&this.current.weekday(0),this.scale){case"year":this.current=this.current.year(this.step*Math.floor(this.current.year()/this.step)).month(0);case"month":this.current=this.current.date(1);case"week":case"day":case"weekday":this.current=this.current.hours(0);case"hour":this.current=this.current.minutes(0);case"minute":this.current=this.current.seconds(0);case"second":this.current=this.current.milliseconds(0)}if(this.step!=1){let e=this.current.clone();switch(this.scale){case"millisecond":this.current=this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case"second":this.current=this.current.subtract(this.current.seconds()%this.step,"seconds");break;case"minute":this.current=this.current.subtract(this.current.minutes()%this.step,"minutes");break;case"hour":this.current=this.current.subtract(this.current.hours()%this.step,"hours");break;case"weekday":case"day":this.current=this.current.subtract((this.current.date()-1)%this.step,"day");break;case"week":this.current=this.current.subtract(this.current.week()%this.step,"week");break;case"month":this.current=this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current=this.current.subtract(this.current.year()%this.step,"year");break}e.isSame(this.current)||(this.current=this.moment(nc(this.hiddenDates,this.current.valueOf(),-1,!0)))}}hasNext(){return this.current.valueOf()<=this._end.valueOf()}next(){const e=this.current.valueOf();switch(this.scale){case"millisecond":this.current=this.current.add(this.step,"millisecond");break;case"second":this.current=this.current.add(this.step,"second");break;case"minute":this.current=this.current.add(this.step,"minute");break;case"hour":this.current=this.current.add(this.step,"hour"),this.current.month()<6?this.current=this.current.subtract(this.current.hours()%this.step,"hour"):this.current.hours()%this.step!==0&&(this.current=this.current.add(this.step-this.current.hours()%this.step,"hour"));break;case"weekday":case"day":this.current=this.current.add(this.step,"day");break;case"week":if(this.current.weekday()!==0)this.current=this.current.weekday(0).add(this.step,"week");else if(this.options.showMajorLabels===!1)this.current=this.current.add(this.step,"week");else{const t=this.current.clone();t.add(1,"week"),t.isSame(this.current,"month")?this.current=this.current.add(this.step,"week"):this.current=this.current.add(this.step,"week").date(1)}break;case"month":this.current=this.current.add(this.step,"month");break;case"year":this.current=this.current.add(this.step,"year");break}if(this.step!=1)switch(this.scale){case"millisecond":this.current.milliseconds()>0&&this.current.milliseconds()<this.step&&(this.current=this.current.milliseconds(0));break;case"second":this.current.seconds()>0&&this.current.seconds()<this.step&&(this.current=this.current.seconds(0));break;case"minute":this.current.minutes()>0&&this.current.minutes()<this.step&&(this.current=this.current.minutes(0));break;case"hour":this.current.hours()>0&&this.current.hours()<this.step&&(this.current=this.current.hours(0));break;case"weekday":case"day":this.current.date()<this.step+1&&(this.current=this.current.date(1));break;case"week":this.current.week()<this.step&&(this.current=this.current.week(1));break;case"month":this.current.month()<this.step&&(this.current=this.current.month(0));break}this.current.valueOf()==e&&(this.current=this._end.clone()),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,mDe(this.moment,this,e)}getCurrent(){return this.current.clone()}setScale(e){e&&typeof e.scale=="string"&&(this.scale=e.scale,this.step=e.step>0?e.step:1,this.autoScale=!1)}setAutoScale(e){this.autoScale=e}setMinimumStep(e){if(e==null)return;const t=1e3*60*60*24*30*12,r=1e3*60*60*24*30,i=1e3*60*60*24,s=1e3*60*60,o=1e3*60,a=1e3,l=1;t*1e3>e&&(this.scale="year",this.step=1e3),t*500>e&&(this.scale="year",this.step=500),t*100>e&&(this.scale="year",this.step=100),t*50>e&&(this.scale="year",this.step=50),t*10>e&&(this.scale="year",this.step=10),t*5>e&&(this.scale="year",this.step=5),t>e&&(this.scale="year",this.step=1),r*3>e&&(this.scale="month",this.step=3),r>e&&(this.scale="month",this.step=1),i*7>e&&this.options.showWeekScale&&(this.scale="week",this.step=1),i*2>e&&(this.scale="day",this.step=2),i>e&&(this.scale="day",this.step=1),i/2>e&&(this.scale="weekday",this.step=1),s*4>e&&(this.scale="hour",this.step=4),s>e&&(this.scale="hour",this.step=1),o*15>e&&(this.scale="minute",this.step=15),o*10>e&&(this.scale="minute",this.step=10),o*5>e&&(this.scale="minute",this.step=5),o>e&&(this.scale="minute",this.step=1),a*15>e&&(this.scale="second",this.step=15),a*10>e&&(this.scale="second",this.step=10),a*5>e&&(this.scale="second",this.step=5),a>e&&(this.scale="second",this.step=1),l*200>e&&(this.scale="millisecond",this.step=200),l*100>e&&(this.scale="millisecond",this.step=100),l*50>e&&(this.scale="millisecond",this.step=50),l*10>e&&(this.scale="millisecond",this.step=10),l*5>e&&(this.scale="millisecond",this.step=5),l>e&&(this.scale="millisecond",this.step=1)}static snap(e,t,r){let i=li(e);if(t=="year"){const s=i.year()+Math.round(i.month()/12);i=i.year(Math.round(s/r)*r).month(0).date(0).hours(0).minutes(0).seconds(0).milliseconds(0)}else if(t=="month")i.date()>15?i=i.date(1).add(1,"month"):i=i.date(1),i=i.hours(0).minutes(0).seconds(0).milliseconds(0);else if(t=="week")i.weekday()>2?i=i.weekday(0).add(1,"week"):i=i.weekday(0),i=i.hours(0).minutes(0).seconds(0).milliseconds(0);else if(t=="day"){switch(r){case 5:case 2:i=i.hours(Math.round(i.hours()/24)*24);break;default:i=i.hours(Math.round(i.hours()/12)*12);break}i=i.minutes(0).seconds(0).milliseconds(0)}else if(t=="weekday"){switch(r){case 5:case 2:i=i.hours(Math.round(i.hours()/12)*12);break;default:i=i.hours(Math.round(i.hours()/6)*6);break}i=i.minutes(0).seconds(0).milliseconds(0)}else if(t=="hour"){switch(r){case 4:i=i.minutes(Math.round(i.minutes()/60)*60);break;default:i=i.minutes(Math.round(i.minutes()/30)*30);break}i=i.seconds(0).milliseconds(0)}else if(t=="minute"){switch(r){case 15:case 10:i=i.minutes(Math.round(i.minutes()/5)*5).seconds(0);break;case 5:i=i.seconds(Math.round(i.seconds()/60)*60);break;default:i=i.seconds(Math.round(i.seconds()/30)*30);break}i=i.milliseconds(0)}else if(t=="second")switch(r){case 15:case 10:i=i.seconds(Math.round(i.seconds()/5)*5).milliseconds(0);break;case 5:i=i.milliseconds(Math.round(i.milliseconds()/1e3)*1e3);break;default:i=i.milliseconds(Math.round(i.milliseconds()/500)*500);break}else if(t=="millisecond"){const s=r>5?r/2:1;i=i.milliseconds(Math.round(i.milliseconds()/s)*s)}return i}isMajor(){if(this.switchedYear==!0)switch(this.scale){case"year":case"month":case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(this.switchedMonth==!0)switch(this.scale){case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(this.switchedDay==!0)switch(this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}const e=this.moment(this.current);switch(this.scale){case"millisecond":return e.milliseconds()==0;case"second":return e.seconds()==0;case"minute":return e.hours()==0&&e.minutes()==0;case"hour":return e.hours()==0;case"weekday":case"day":return this.options.showWeekScale?e.isoWeekday()==1:e.date()==1;case"week":return e.date()==1;case"month":return e.month()==0;case"year":return!1;default:return!1}}getLabelMinor(e){if(e==null&&(e=this.current),e instanceof Date&&(e=this.moment(e)),typeof this.format.minorLabels=="function")return this.format.minorLabels(e,this.scale,this.step);const t=this.format.minorLabels[this.scale];switch(this.scale){case"week":if(e.date()===1&&e.weekday()!==0)return"";default:return t&&t.length>0?this.moment(e).format(t):""}}getLabelMajor(e){if(e==null&&(e=this.current),e instanceof Date&&(e=this.moment(e)),typeof this.format.majorLabels=="function")return this.format.majorLabels(e,this.scale,this.step);const t=this.format.majorLabels[this.scale];return t&&t.length>0?this.moment(e).format(t):""}getClassName(){var e;const t=this.moment,r=this.moment(this.current),i=r.locale?r.locale("en"):r.lang("en"),s=this.step,o=[];function a(d){return d/s%2==0?" vis-even":" vis-odd"}function l(d){return d.isSame(Ei(),"day")?" vis-today":d.isSame(t().add(1,"day"),"day")?" vis-tomorrow":d.isSame(t().add(-1,"day"),"day")?" vis-yesterday":""}function c(d){return d.isSame(Ei(),"week")?" vis-current-week":""}function u(d){return d.isSame(Ei(),"month")?" vis-current-month":""}function h(d){return d.isSame(Ei(),"year")?" vis-current-year":""}switch(this.scale){case"millisecond":o.push(l(i)),o.push(a(i.milliseconds()));break;case"second":o.push(l(i)),o.push(a(i.seconds()));break;case"minute":o.push(l(i)),o.push(a(i.minutes()));break;case"hour":o.push($n(e="vis-h".concat(i.hours())).call(e,this.step==4?"-h"+(i.hours()+4):"")),o.push(l(i)),o.push(a(i.hours()));break;case"weekday":o.push("vis-".concat(i.format("dddd").toLowerCase())),o.push(l(i)),o.push(c(i)),o.push(a(i.date()));break;case"day":o.push("vis-day".concat(i.date())),o.push("vis-".concat(i.format("MMMM").toLowerCase())),o.push(l(i)),o.push(u(i)),o.push(this.step<=2?l(i):""),o.push(this.step<=2?"vis-".concat(i.format("dddd").toLowerCase()):""),o.push(a(i.date()-1));break;case"week":o.push("vis-week".concat(i.format("w"))),o.push(c(i)),o.push(a(i.week()));break;case"month":o.push("vis-".concat(i.format("MMMM").toLowerCase())),o.push(u(i)),o.push(a(i.month()));break;case"year":o.push("vis-year".concat(i.year())),o.push(h(i)),o.push(a(i.year()));break}return yt(o).call(o,String).join(" ")}}su.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}};class _P extends $l{constructor(e,t){super(),this.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},this.props={range:{start:0,end:0,minimumStep:0},lineTop:0},this.defaultOptions={orientation:{axis:"bottom"},showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,maxMinorChars:7,format:W.extend({},su.FORMAT),moment:li,timeAxis:null},this.options=W.extend({},this.defaultOptions),this.body=e,this._create(),this.setOptions(t)}setOptions(e){e&&(W.selectiveExtend(["showMinorLabels","showMajorLabels","showWeekScale","maxMinorChars","hiddenDates","timeAxis","moment","rtl"],this.options,e),W.selectiveDeepExtend(["format"],this.options,e),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation.axis=e.orientation:typeof e.orientation=="object"&&"axis"in e.orientation&&(this.options.orientation.axis=e.orientation.axis)),"locale"in e&&(typeof li.locale=="function"?li.locale(e.locale):li.lang(e.locale)))}_create(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="vis-time-axis vis-foreground",this.dom.background.className="vis-time-axis vis-background"}destroy(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null}redraw(){const e=this.props,t=this.dom.foreground,r=this.dom.background,i=this.options.orientation.axis=="top"?this.body.dom.top:this.body.dom.bottom,s=t.parentNode!==i;this._calculateCharSize();const o=this.options.showMinorLabels&&this.options.orientation.axis!=="none",a=this.options.showMajorLabels&&this.options.orientation.axis!=="none";e.minorLabelHeight=o?e.minorCharHeight:0,e.majorLabelHeight=a?e.majorCharHeight:0,e.height=e.minorLabelHeight+e.majorLabelHeight,e.width=t.offsetWidth,e.minorLineHeight=this.body.domProps.root.height-e.majorLabelHeight-(this.options.orientation.axis=="top"?this.body.domProps.bottom.height:this.body.domProps.top.height),e.minorLineWidth=1,e.majorLineHeight=e.minorLineHeight+e.majorLabelHeight,e.majorLineWidth=1;const l=t.nextSibling,c=r.nextSibling;return t.parentNode&&t.parentNode.removeChild(t),r.parentNode&&r.parentNode.removeChild(r),t.style.height="".concat(this.props.height,"px"),this._repaintLabels(),l?i.insertBefore(t,l):i.appendChild(t),c?this.body.dom.backgroundVertical.insertBefore(r,c):this.body.dom.backgroundVertical.appendChild(r),this._isResized()||s}_repaintLabels(){const e=this.options.orientation.axis,t=W.convert(this.body.range.start,"Number"),r=W.convert(this.body.range.end,"Number"),i=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf();let s=i-Eb(this.options.moment,this.body.hiddenDates,this.body.range,i);s-=this.body.util.toTime(0).valueOf();const o=new su(new Date(t),new Date(r),s,this.body.hiddenDates,this.options);o.setMoment(this.options.moment),this.options.format&&o.setFormat(this.options.format),this.options.timeAxis&&o.setScale(this.options.timeAxis),this.step=o;const a=this.dom;a.redundant.lines=a.lines,a.redundant.majorTexts=a.majorTexts,a.redundant.minorTexts=a.minorTexts,a.lines=[],a.majorTexts=[],a.minorTexts=[];let l,c,u,h,d,f,m=0,g,v,y,b=0;const w=1e3;let S;for(o.start(),c=o.getCurrent(),h=this.body.util.toScreen(c);o.hasNext()&&b<w;){switch(b++,d=o.isMajor(),S=o.getClassName(),l=c,u=h,o.next(),c=o.getCurrent(),h=this.body.util.toScreen(c),g=m,m=h-u,o.scale){case"week":f=!0;break;default:f=m>=g*.4;break}if(this.options.showMinorLabels&&f){var _=this._repaintMinorText(u,o.getLabelMinor(l),e,S);_.style.width="".concat(m,"px")}d&&this.options.showMajorLabels?(u>0&&(y==null&&(y=u),_=this._repaintMajorText(u,o.getLabelMajor(l),e,S)),v=this._repaintMajorLine(u,m,e,S)):f?v=this._repaintMinorLine(u,m,e,S):v&&(v.style.width="".concat(Ti(v.style.width)+m,"px"))}if(b===w&&!FU&&(console.warn("Something is wrong with the Timeline scale. Limited drawing of grid lines to ".concat(w," lines.")),FU=!0),this.options.showMajorLabels){const E=this.body.util.toTime(0),C=o.getLabelMajor(E),T=C.length*(this.props.majorCharWidth||10)+10;(y==null||T<y)&&this._repaintMajorText(0,C,e,S)}je(W).call(W,this.dom.redundant,E=>{for(;E.length;){const C=E.pop();C&&C.parentNode&&C.parentNode.removeChild(C)}})}_repaintMinorText(e,t,r,i){let s=this.dom.redundant.minorTexts.shift();if(!s){const a=document.createTextNode("");s=document.createElement("div"),s.appendChild(a),this.dom.foreground.appendChild(s)}this.dom.minorTexts.push(s),s.innerHTML=W.xss(t);let o=r=="top"?this.props.majorLabelHeight:0;return this._setXY(s,e,o),s.className="vis-text vis-minor ".concat(i),s}_repaintMajorText(e,t,r,i){let s=this.dom.redundant.majorTexts.shift();if(!s){const a=document.createElement("div");s=document.createElement("div"),s.appendChild(a),this.dom.foreground.appendChild(s)}s.childNodes[0].innerHTML=W.xss(t),s.className="vis-text vis-major ".concat(i);let o=r=="top"?0:this.props.minorLabelHeight;return this._setXY(s,e,o),this.dom.majorTexts.push(s),s}_setXY(e,t,r){var i;const s=this.options.rtl?t*-1:t;e.style.transform=$n(i="translate(".concat(s,"px, ")).call(i,r,"px)")}_repaintMinorLine(e,t,r,i){var s;let o=this.dom.redundant.lines.shift();o||(o=document.createElement("div"),this.dom.background.appendChild(o)),this.dom.lines.push(o);const a=this.props;o.style.width="".concat(t,"px"),o.style.height="".concat(a.minorLineHeight,"px");let l=r=="top"?a.majorLabelHeight:this.body.domProps.top.height,c=e-a.minorLineWidth/2;return this._setXY(o,c,l),o.className=$n(s="vis-grid ".concat(this.options.rtl?"vis-vertical-rtl":"vis-vertical"," vis-minor ")).call(s,i),o}_repaintMajorLine(e,t,r,i){var s;let o=this.dom.redundant.lines.shift();o||(o=document.createElement("div"),this.dom.background.appendChild(o)),this.dom.lines.push(o);const a=this.props;o.style.width="".concat(t,"px"),o.style.height="".concat(a.majorLineHeight,"px");let l=r=="top"?0:this.body.domProps.top.height,c=e-a.majorLineWidth/2;return this._setXY(o,c,l),o.className=$n(s="vis-grid ".concat(this.options.rtl?"vis-vertical-rtl":"vis-vertical"," vis-major ")).call(s,i),o}_calculateCharSize(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="vis-text vis-minor vis-measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="vis-text vis-major vis-measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth}}var FU=!1;function CDe(n){var e=window,t={},r={keydown:{},keyup:{}},i={},s;for(s=97;s<=122;s++)i[String.fromCharCode(s)]={code:65+(s-97),shift:!1};for(s=65;s<=90;s++)i[String.fromCharCode(s)]={code:s,shift:!0};for(s=0;s<=9;s++)i[""+s]={code:48+s,shift:!1};for(s=1;s<=12;s++)i["F"+s]={code:111+s,shift:!1};for(s=0;s<=9;s++)i["num"+s]={code:96+s,shift:!1};i["num*"]={code:106,shift:!1},i["num+"]={code:107,shift:!1},i["num-"]={code:109,shift:!1},i["num/"]={code:111,shift:!1},i["num."]={code:110,shift:!1},i.left={code:37,shift:!1},i.up={code:38,shift:!1},i.right={code:39,shift:!1},i.down={code:40,shift:!1},i.space={code:32,shift:!1},i.enter={code:13,shift:!1},i.shift={code:16,shift:void 0},i.esc={code:27,shift:!1},i.backspace={code:8,shift:!1},i.tab={code:9,shift:!1},i.ctrl={code:17,shift:!1},i.alt={code:18,shift:!1},i.delete={code:46,shift:!1},i.pageup={code:33,shift:!1},i.pagedown={code:34,shift:!1},i["="]={code:187,shift:!1},i["-"]={code:189,shift:!1},i["]"]={code:221,shift:!1},i["["]={code:219,shift:!1};var o=function(c){l(c,"keydown")},a=function(c){l(c,"keyup")},l=function(c,u){if(r[u][c.keyCode]!==void 0)for(var h=r[u][c.keyCode],d=0;d<h.length;d++)(h[d].shift===void 0||h[d].shift==!0&&c.shiftKey==!0||h[d].shift==!1&&c.shiftKey==!1)&&h[d].fn(c)};return t.bind=function(c,u,h){if(h===void 0&&(h="keydown"),i[c]===void 0)throw new Error("unsupported key: "+c);r[h][i[c].code]===void 0&&(r[h][i[c].code]=[]),r[h][i[c].code].push({fn:u,shift:i[c].shift})},t.bindAll=function(c,u){u===void 0&&(u="keydown");for(var h in i)i.hasOwnProperty(h)&&t.bind(h,c,u)},t.getKey=function(c){for(var u in i)if(i.hasOwnProperty(u)){if(c.shiftKey==!0&&i[u].shift==!0&&c.keyCode==i[u].code)return u;if(c.shiftKey==!1&&i[u].shift==!1&&c.keyCode==i[u].code)return u;if(c.keyCode==i[u].code&&u=="shift")return u}return"unknown key, currently not supported"},t.unbind=function(c,u,h){if(h===void 0&&(h="keydown"),i[c]===void 0)throw new Error("unsupported key: "+c);if(u!==void 0){var d=[],f=r[h][i[c].code];if(f!==void 0)for(var m=0;m<f.length;m++)f[m].fn==u&&f[m].shift==i[c].shift||d.push(r[h][i[c].code][m]);r[h][i[c].code]=d}else r[h][i[c].code]=[]},t.reset=function(){r={keydown:{},keyup:{}}},t.destroy=function(){r={keydown:{},keyup:{}},e.removeEventListener("keydown",o,!0),e.removeEventListener("keyup",a,!0)},e.addEventListener("keydown",o,!0),e.addEventListener("keyup",a,!0),t}function as(n){var e,t;this.active=!1,this.dom={container:n},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=Ur(this.dom.overlay),this.hammer.on("tap",ue(e=this._onTapOverlay).call(e,this));var r=this,i=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];je(i).call(i,function(s){r.hammer.on(s,function(o){o.stopPropagation()})}),document&&document.body&&(this.onClick=function(s){EDe(s.target,n)||r.deactivate()},document.body.addEventListener("click",this.onClick)),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=CDe(),this.escListener=ue(t=this.deactivate).call(t,this)}oD(as.prototype);as.current=null;as.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=null,this.hammer.destroy(),this.hammer=null};as.prototype.activate=function(){var n;as.current&&as.current.deactivate(),as.current=this,this.active=!0,this.dom.overlay.style.display="none",W.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),ue(n=this.keycharm).call(n,"esc",this.escListener)};as.prototype.deactivate=function(){as.current===this&&(as.current=null),this.active=!1,this.dom.overlay.style.display="",W.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")};as.prototype._onTapOverlay=function(n){this.activate(),n.stopPropagation()};function EDe(n,e){for(;n;){if(n===e)return!0;n=n.parentNode}return!1}const DD={current:"current",time:"time",deleteSelected:"Delete selected"},TDe=DD,MDe=DD,ND={current:"attuale",time:"tempo",deleteSelected:"Cancella la selezione"},IDe=ND,PDe=ND,AD={current:"huidige",time:"tijd",deleteSelected:"Selectie verwijderen"},ODe=AD,RDe=AD,LD={current:"Aktuelle",time:"Zeit",deleteSelected:"Lsche Auswahl"},DDe=LD,NDe=LD,Gg={current:"actuel",time:"heure",deleteSelected:"Effacer la selection"},ADe=Gg,LDe=Gg,FDe=Gg,jDe=Gg,QJ={current:"actual",time:"hora",deleteSelected:"Eliminar seleccin"},$De=QJ,JJ={current:"",time:"",deleteSelected:" "},BDe=JJ,ZJ={current:"",time:"",deleteSelected:" "},zDe=ZJ,eZ={current:"aktualny",time:"czas",deleteSelected:"Usu wybrane"},qDe=eZ,FD={current:"atual",time:"data",deleteSelected:"Apagar selecionado"},UDe=FD,WDe=FD,tZ={current:"gncel",time:"zaman",deleteSelected:"Seileni sil"},HDe=tZ,nZ={current:"",time:"",deleteSelected:""},YDe=nZ,rZ={current:"nuvarande",time:"tid",deleteSelected:"Radera valda"},GDe=rZ,ow={current:"nvrende",time:"tid",deleteSelected:"Slett valgte"},VDe=ow,KDe=ow,XDe=ow,iZ={current:"einamas",time:"laikas",deleteSelected:"Paalinti pasirinkt"},QDe=iZ,Pd={en:DD,en_EN:TDe,en_US:MDe,it:ND,it_IT:IDe,it_CH:PDe,nl:AD,nl_NL:ODe,nl_BE:RDe,de:LD,de_DE:DDe,de_CH:NDe,fr:Gg,fr_FR:ADe,fr_CA:LDe,fr_BE:FDe,fr_CH:jDe,es:QJ,es_ES:$De,uk:JJ,uk_UA:BDe,ru:ZJ,ru_RU:zDe,pl:eZ,pl_PL:qDe,pt:FD,pt_BR:UDe,pt_PT:WDe,tr:tZ,tr_TR:HDe,ja:nZ,ja_JP:YDe,lt:iZ,lt_LT:QDe,sv:rZ,sv_SE:GDe,nb:ow,nn:KDe,nb_NO:VDe,nn_NO:XDe};class sZ extends $l{constructor(e,t){var r;super(),this.body=e,this.defaultOptions={moment:li,locales:Pd,locale:"en",id:void 0,title:void 0},this.options=W.extend({},this.defaultOptions),this.setOptions(t),this.options.locales=W.extend({},Pd,this.options.locales);const i=this.defaultOptions.locales[this.defaultOptions.locale];je(r=rr(this.options.locales)).call(r,s=>{this.options.locales[s]=W.extend({},i,this.options.locales[s])}),t&&t.time!=null?this.customTime=t.time:this.customTime=new Date,this.eventParams={},this._create()}setOptions(e){e&&W.selectiveExtend(["moment","locale","locales","id","title","rtl","snap"],this.options,e)}_create(){var e,t,r;const i=document.createElement("div");i["custom-time"]=this,i.className="vis-custom-time ".concat(this.options.id||""),i.style.position="absolute",i.style.top="0px",i.style.height="100%",this.bar=i;const s=document.createElement("div");s.style.position="relative",s.style.top="0px",this.options.rtl?s.style.right="-10px":s.style.left="-10px",s.style.height="100%",s.style.width="20px";function o(a){this.body.range._onMouseWheel(a)}s.addEventListener?(s.addEventListener("mousewheel",ue(o).call(o,this),!1),s.addEventListener("DOMMouseScroll",ue(o).call(o,this),!1)):s.attachEvent("onmousewheel",ue(o).call(o,this)),i.appendChild(s),this.hammer=new Ur(s),this.hammer.on("panstart",ue(e=this._onDragStart).call(e,this)),this.hammer.on("panmove",ue(t=this._onDrag).call(t,this)),this.hammer.on("panend",ue(r=this._onDragEnd).call(r,this)),this.hammer.get("pan").set({threshold:5,direction:Ur.DIRECTION_ALL}),this.hammer.get("press").set({time:1e4})}destroy(){this.hide(),this.hammer.destroy(),this.hammer=null,this.body=null}redraw(){const e=this.body.dom.backgroundVertical;this.bar.parentNode!=e&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),e.appendChild(this.bar));const t=this.body.util.toScreen(this.customTime);let r=this.options.locales[this.options.locale];r||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),r=this.options.locales.en);let i=this.options.title;if(i===void 0){var s;i=$n(s="".concat(r.time,": ")).call(s,this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss")),i=i.charAt(0).toUpperCase()+i.substring(1)}else typeof i=="function"&&(i=i.call(this,this.customTime));return this.options.rtl?this.bar.style.right="".concat(t,"px"):this.bar.style.left="".concat(t,"px"),this.bar.title=i,!1}hide(){this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)}setCustomTime(e){this.customTime=W.convert(e,"Date"),this.redraw()}getCustomTime(){return new Date(this.customTime.valueOf())}setCustomMarker(e,t){if(this.marker&&this.bar.removeChild(this.marker),this.marker=document.createElement("div"),this.marker.className="vis-custom-time-marker",this.marker.innerHTML=W.xss(e),this.marker.style.position="absolute",t){var r;this.marker.setAttribute("contenteditable","true"),this.marker.addEventListener("pointerdown",()=>{this.marker.focus()}),this.marker.addEventListener("input",ue(r=this._onMarkerChange).call(r,this)),this.marker.title=e,this.marker.addEventListener("blur",i=>{this.title!=i.target.innerHTML&&(this._onMarkerChanged(i),this.title=i.target.innerHTML)})}this.bar.appendChild(this.marker)}setCustomTitle(e){this.options.title=e}_onDragStart(e){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,e.stopPropagation()}_onDrag(e){if(!this.eventParams.dragging)return;let t=this.options.rtl?-1*e.deltaX:e.deltaX;const r=this.body.util.toScreen(this.eventParams.customTime)+t,i=this.body.util.toTime(r),s=this.body.util.getScale(),o=this.body.util.getStep(),a=this.options.snap,l=a?a(i,s,o):i;this.setCustomTime(l),this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:e}),e.stopPropagation()}_onDragEnd(e){this.eventParams.dragging&&(this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:e}),e.stopPropagation())}_onMarkerChange(e){this.body.emitter.emit("markerchange",{id:this.options.id,title:e.target.innerHTML,event:e}),e.stopPropagation()}_onMarkerChanged(e){this.body.emitter.emit("markerchanged",{id:this.options.id,title:e.target.innerHTML,event:e}),e.stopPropagation()}static customTimeFromTarget(e){let t=e.target;for(;t;){if(Object.prototype.hasOwnProperty.call(t,"custom-time"))return t["custom-time"];t=t.parentNode}return null}}class jD{_create(e){var t,r,i;this.dom={},this.dom.container=e,this.dom.container.style.position="relative",this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.rollingModeBtn=document.createElement("div"),this.dom.loadingScreen=document.createElement("div"),this.dom.root.className="vis-timeline",this.dom.background.className="vis-panel vis-background",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical",this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal",this.dom.centerContainer.className="vis-panel vis-center",this.dom.leftContainer.className="vis-panel vis-left",this.dom.rightContainer.className="vis-panel vis-right",this.dom.top.className="vis-panel vis-top",this.dom.bottom.className="vis-panel vis-bottom",this.dom.left.className="vis-content",this.dom.center.className="vis-content",this.dom.right.className="vis-content",this.dom.shadowTop.className="vis-shadow vis-top",this.dom.shadowBottom.className="vis-shadow vis-bottom",this.dom.shadowTopLeft.className="vis-shadow vis-top",this.dom.shadowBottomLeft.className="vis-shadow vis-bottom",this.dom.shadowTopRight.className="vis-shadow vis-top",this.dom.shadowBottomRight.className="vis-shadow vis-bottom",this.dom.rollingModeBtn.className="vis-rolling-mode-btn",this.dom.loadingScreen.className="vis-loading-screen",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.root.appendChild(this.dom.rollingModeBtn),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.on("rangechange",()=>{this.initialDrawDone===!0&&this._redraw()}),this.on("rangechanged",()=>{this.initialRangeChangeDone||(this.initialRangeChangeDone=!0)}),this.on("touch",ue(t=this._onTouch).call(t,this)),this.on("panmove",ue(r=this._onDrag).call(r,this));const s=this;this._origRedraw=ue(i=this._redraw).call(i,this),this._redraw=W.throttle(this._origRedraw),this.on("_change",m=>{s.itemSet&&s.itemSet.initialItemSetDrawn&&m&&m.queue==!0?s._redraw():s._origRedraw()}),this.hammer=new Ur(this.dom.root);const o=this.hammer.get("pinch").set({enable:!0});o&&kDe(o),this.hammer.get("pan").set({threshold:5,direction:Ur.DIRECTION_ALL}),this.timelineListeners={};const a=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];je(a).call(a,m=>{const g=v=>{s.isActive()&&s.emit(m,v)};s.hammer.on(m,g),s.timelineListeners[m]=g}),XJ(this.hammer,m=>{s.emit("touch",m)}),SDe(this.hammer,m=>{s.emit("release",m)});function l(m){if(!this.isActive())return;if(this.emit("mousewheel",m),this.options.preferZoom){if(!this.options.zoomKey||m[this.options.zoomKey])return}else if(this.options.zoomKey&&m[this.options.zoomKey])return;if(!this.options.verticalScroll&&!this.options.horizontalScroll)return;let g=0,v=0;"detail"in m&&(v=m.detail*-1),"wheelDelta"in m&&(v=m.wheelDelta),"wheelDeltaY"in m&&(v=m.wheelDeltaY),"wheelDeltaX"in m&&(g=m.wheelDeltaX*-1),"axis"in m&&m.axis===m.HORIZONTAL_AXIS&&(g=v*-1,v=0),"deltaY"in m&&(v=m.deltaY*-1),"deltaX"in m&&(g=m.deltaX);var y=40,b=800;m.deltaMode&&(m.deltaMode===1?(g*=y,v*=y):(g*=y,v*=b));const w=this.options.verticalScroll,S=Math.abs(v)>=Math.abs(g),_=this.options.horizontalScroll&&this.options.horizontalScrollKey&&m[this.options.horizontalScrollKey];if(w&&S&&!_){const E=this.props.scrollTop,C=E+v;this._setScrollTop(C)!==E&&(this._redraw(),this.emit("scroll",m),m.preventDefault());return}if(this.options.horizontalScroll){this.range.stopRolling();let C=(S?v:g)/120*(this.range.end-this.range.start)/20;this.options.horizontalScrollInvert&&S&&(C=-C);const T=this.range.start+C,O=this.range.end+C,R={animation:!1,byUser:!0,event:m};this.range.setRange(T,O,R),m.preventDefault();return}}const c="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":this.dom.centerContainer.addEventListener?"DOMMouseScroll":"onmousewheel";this.dom.top.addEventListener,this.dom.bottom.addEventListener,this.dom.centerContainer.addEventListener(c,ue(l).call(l,this),!1),this.dom.top.addEventListener(c,ue(l).call(l,this),!1),this.dom.bottom.addEventListener(c,ue(l).call(l,this),!1);function u(m){if(s.options.verticalScroll&&(m.preventDefault(),s.isActive())){const g=-m.target.scrollTop;s._setScrollTop(g),s._redraw(),s.emit("scrollSide",m)}}this.dom.left.parentNode.addEventListener("scroll",ue(u).call(u,this)),this.dom.right.parentNode.addEventListener("scroll",ue(u).call(u,this));let h=!1;function d(m){var g;if(m.preventDefault&&(s.emit("dragover",s.getEventProperties(m)),m.preventDefault()),Xt(g=m.target.className).call(g,"timeline")>-1&&!h)return m.dataTransfer.dropEffect="move",h=!0,!1}function f(m){m.preventDefault&&m.preventDefault(),m.stopPropagation&&m.stopPropagation();try{var g=JSON.parse(m.dataTransfer.getData("text"));if(!g||!g.content)return}catch{return!1}return h=!1,m.center={x:m.clientX,y:m.clientY},g.target!=="item"?s.itemSet._onAddItem(m):s.itemSet._onDropObjectOnItem(m),s.emit("drop",s.getEventProperties(m)),!1}if(this.dom.center.addEventListener("dragover",ue(d).call(d,this),!1),this.dom.center.addEventListener("drop",ue(f).call(f,this),!1),this.customTimes=[],this.touch={},this.redrawCount=0,this.initialDrawDone=!1,this.initialRangeChangeDone=!1,!e)throw new Error("No container provided");e.appendChild(this.dom.root),e.appendChild(this.dom.loadingScreen)}setOptions(e){var t;if(e){const o=["width","height","minHeight","maxHeight","autoResize","start","end","clickToUse","dataAttributes","hiddenDates","locale","locales","moment","preferZoom","rtl","zoomKey","horizontalScroll","horizontalScrollKey","horizontalScrollInvert","verticalScroll","longSelectPressTime","snap"];if(W.selectiveExtend(o,this.options,e),this.dom.rollingModeBtn.style.visibility="hidden",this.options.rtl&&(this.dom.container.style.direction="rtl",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical-rtl"),this.options.verticalScroll&&(this.options.rtl?this.dom.rightContainer.className="vis-panel vis-right vis-vertical-scroll":this.dom.leftContainer.className="vis-panel vis-left vis-vertical-scroll"),typeof this.options.orientation!="object"&&(this.options.orientation={item:void 0,axis:void 0}),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation={item:e.orientation,axis:e.orientation}:typeof e.orientation=="object"&&("item"in e.orientation&&(this.options.orientation.item=e.orientation.item),"axis"in e.orientation&&(this.options.orientation.axis=e.orientation.axis))),this.options.orientation.axis==="both"){if(!this.timeAxis2){const a=this.timeAxis2=new _P(this.body,this.options);a.setOptions=l=>{const c=l?W.extend({},l):{};c.orientation="top",_P.prototype.setOptions.call(a,c)},this.components.push(a)}}else if(this.timeAxis2){var r;const a=Xt(r=this.components).call(r,this.timeAxis2);if(a!==-1){var i;Wr(i=this.components).call(i,a,1)}this.timeAxis2.destroy(),this.timeAxis2=null}typeof e.drawPoints=="function"&&(e.drawPoints={onRender:e.drawPoints}),"hiddenDates"in this.options&&OD(this.options.moment,this.body,this.options.hiddenDates),"clickToUse"in e&&(e.clickToUse?this.activator||(this.activator=new as(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator)),this._initAutoResize()}if(je(t=this.components).call(t,o=>o.setOptions(e)),"configure"in e){var s;this.configurator||(this.configurator=this._createConfigurator()),this.configurator.setOptions(e.configure);const o=W.deepExtend({},this.options);je(s=this.components).call(s,a=>{W.deepExtend(o,a.options)}),this.configurator.setModuleOptions({global:o})}this._redraw()}isActive(){return!this.activator||this.activator.active}destroy(){var e;this.setItems(null),this.setGroups(null),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator);for(const t in this.timelineListeners)Object.prototype.hasOwnProperty.call(this.timelineListeners,t)&&delete this.timelineListeners[t];this.timelineListeners=null,this.hammer&&this.hammer.destroy(),this.hammer=null,je(e=this.components).call(e,t=>t.destroy()),this.body=null}setCustomTime(e,t){var r;const i=yt(r=this.customTimes).call(r,s=>t===s.options.id);if(i.length===0)throw new Error("No custom time bar found with id ".concat(ii(t)));i.length>0&&i[0].setCustomTime(e)}getCustomTime(e){var t;const r=yt(t=this.customTimes).call(t,i=>i.options.id===e);if(r.length===0)throw new Error("No custom time bar found with id ".concat(ii(e)));return r[0].getCustomTime()}setCustomTimeMarker(e,t,r){var i;const s=yt(i=this.customTimes).call(i,o=>o.options.id===t);if(s.length===0)throw new Error("No custom time bar found with id ".concat(ii(t)));s.length>0&&s[0].setCustomMarker(e,r)}setCustomTimeTitle(e,t){var r;const i=yt(r=this.customTimes).call(r,s=>s.options.id===t);if(i.length===0)throw new Error("No custom time bar found with id ".concat(ii(t)));if(i.length>0)return i[0].setCustomTitle(e)}getEventProperties(e){return{event:e}}addCustomTime(e,t){var r;const i=e!==void 0?W.convert(e,"Date"):new Date;if(CD(r=this.customTimes).call(r,a=>a.options.id===t))throw new Error("A custom time with id ".concat(ii(t)," already exists"));const o=new sZ(this.body,W.extend({},this.options,{time:i,id:t,snap:this.itemSet?this.itemSet.options.snap:this.options.snap}));return this.customTimes.push(o),this.components.push(o),this._redraw(),t}removeCustomTime(e){var t;const r=yt(t=this.customTimes).call(t,i=>i.options.id===e);if(r.length===0)throw new Error("No custom time bar found with id ".concat(ii(e)));je(r).call(r,i=>{var s,o,a,l;Wr(s=this.customTimes).call(s,Xt(o=this.customTimes).call(o,i),1),Wr(a=this.components).call(a,Xt(l=this.components).call(l,i),1),i.destroy()})}getVisibleItems(){return this.itemSet&&this.itemSet.getVisibleItems()||[]}getItemsAtCurrentTime(e){return this.time=e,this.itemSet&&this.itemSet.getItemsAtCurrentTime(this.time)||[]}getVisibleGroups(){return this.itemSet&&this.itemSet.getVisibleGroups()||[]}fit(e,t){const r=this.getDataRange();if(r.min===null&&r.max===null)return;const i=r.max-r.min,s=new Date(r.min.valueOf()-i*.01),o=new Date(r.max.valueOf()+i*.01),a=e&&e.animation!==void 0?e.animation:!0;this.range.setRange(s,o,{animation:a},t)}getDataRange(){throw new Error("Cannot invoke abstract method getDataRange")}setWindow(e,t,r,i){typeof arguments[2]=="function"&&(i=arguments[2],r={});let s,o;arguments.length==1?(o=arguments[0],s=o.animation!==void 0?o.animation:!0,this.range.setRange(o.start,o.end,{animation:s})):arguments.length==2&&typeof arguments[1]=="function"?(o=arguments[0],i=arguments[1],s=o.animation!==void 0?o.animation:!0,this.range.setRange(o.start,o.end,{animation:s},i)):(s=r&&r.animation!==void 0?r.animation:!0,this.range.setRange(e,t,{animation:s},i))}moveTo(e,t,r){typeof arguments[1]=="function"&&(r=arguments[1],t={});const i=this.range.end-this.range.start,s=W.convert(e,"Date").valueOf(),o=s-i/2,a=s+i/2,l=t&&t.animation!==void 0?t.animation:!0;this.range.setRange(o,a,{animation:l},r)}getWindow(){const e=this.range.getRange();return{start:new Date(e.start),end:new Date(e.end)}}zoomIn(e,t,r){if(!e||e<0||e>1)return;typeof arguments[1]=="function"&&(r=arguments[1],t={});const i=this.getWindow(),s=i.start.valueOf(),o=i.end.valueOf(),a=o-s,l=a/(1+e),c=(a-l)/2,u=s+c,h=o-c;this.setWindow(u,h,t,r)}zoomOut(e,t,r){if(!e||e<0||e>1)return;typeof arguments[1]=="function"&&(r=arguments[1],t={});const i=this.getWindow(),s=i.start.valueOf(),o=i.end.valueOf(),a=o-s,l=s-a*e/2,c=o+a*e/2;this.setWindow(l,c,t,r)}redraw(){this._redraw()}_redraw(){var e;this.redrawCount++;const t=this.dom;if(!t||!t.container||t.root.offsetWidth==0)return;let r=!1;const i=this.options,s=this.props;Cb(this.options.moment,this.body,this.options.hiddenDates),i.orientation=="top"?(W.addClassName(t.root,"vis-top"),W.removeClassName(t.root,"vis-bottom")):(W.removeClassName(t.root,"vis-top"),W.addClassName(t.root,"vis-bottom")),i.rtl?(W.addClassName(t.root,"vis-rtl"),W.removeClassName(t.root,"vis-ltr")):(W.addClassName(t.root,"vis-ltr"),W.removeClassName(t.root,"vis-rtl")),t.root.style.maxHeight=W.option.asSize(i.maxHeight,""),t.root.style.minHeight=W.option.asSize(i.minHeight,""),t.root.style.width=W.option.asSize(i.width,"");const o=t.root.offsetWidth;s.border.left=1,s.border.right=1,s.border.top=1,s.border.bottom=1,s.center.height=t.center.offsetHeight,s.left.height=t.left.offsetHeight,s.right.height=t.right.offsetHeight,s.top.height=t.top.clientHeight||-s.border.top,s.bottom.height=Math.round(t.bottom.getBoundingClientRect().height)||t.bottom.clientHeight||-s.border.bottom;const a=Math.max(s.left.height,s.center.height,s.right.height),l=s.top.height+a+s.bottom.height+s.border.top+s.border.bottom;t.root.style.height=W.option.asSize(i.height,"".concat(l,"px")),s.root.height=t.root.offsetHeight,s.background.height=s.root.height;const c=s.root.height-s.top.height-s.bottom.height;s.centerContainer.height=c,s.leftContainer.height=c,s.rightContainer.height=s.leftContainer.height,s.root.width=o,s.background.width=s.root.width,this.initialDrawDone||(s.scrollbarWidth=W.getScrollBarWidth());const u=t.leftContainer.clientWidth,h=t.rightContainer.clientWidth;i.verticalScroll?i.rtl?(s.left.width=u||-s.border.left,s.right.width=h+s.scrollbarWidth||-s.border.right):(s.left.width=u+s.scrollbarWidth||-s.border.left,s.right.width=h||-s.border.right):(s.left.width=u||-s.border.left,s.right.width=h||-s.border.right),this._setDOM();let d=this._updateScrollTop();i.orientation.item!="top"&&(d+=Math.max(s.centerContainer.height-s.center.height-s.border.top-s.border.bottom,0)),t.center.style.transform="translateY(".concat(d,"px)");const f=s.scrollTop==0?"hidden":"",m=s.scrollTop==s.scrollTopMin?"hidden":"";t.shadowTop.style.visibility=f,t.shadowBottom.style.visibility=m,t.shadowTopLeft.style.visibility=f,t.shadowBottomLeft.style.visibility=m,t.shadowTopRight.style.visibility=f,t.shadowBottomRight.style.visibility=m,i.verticalScroll&&(t.rightContainer.className="vis-panel vis-right vis-vertical-scroll",t.leftContainer.className="vis-panel vis-left vis-vertical-scroll",t.shadowTopRight.style.visibility="hidden",t.shadowBottomRight.style.visibility="hidden",t.shadowTopLeft.style.visibility="hidden",t.shadowBottomLeft.style.visibility="hidden",t.left.style.top="0px",t.right.style.top="0px"),(!i.verticalScroll||s.center.height<s.centerContainer.height)&&(t.left.style.top="".concat(d,"px"),t.right.style.top="".concat(d,"px"),t.rightContainer.className=t.rightContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),t.leftContainer.className=t.leftContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),s.left.width=u||-s.border.left,s.right.width=h||-s.border.right,this._setDOM());const g=s.center.height>s.centerContainer.height;this.hammer.get("pan").set({direction:g?Ur.DIRECTION_ALL:Ur.DIRECTION_HORIZONTAL}),this.hammer.get("press").set({time:this.options.longSelectPressTime}),je(e=this.components).call(e,y=>{r=y.redraw()||r});const v=5;if(r)if(this.redrawCount<v){this.body.emitter.emit("_change");return}else console.log("WARNING: infinite loop in redraw?");else this.redrawCount=0;this.body.emitter.emit("changed")}_setDOM(){const e=this.props,t=this.dom;e.leftContainer.width=e.left.width,e.rightContainer.width=e.right.width;const r=e.root.width-e.left.width-e.right.width;e.center.width=r,e.centerContainer.width=r,e.top.width=r,e.bottom.width=r,t.background.style.height="".concat(e.background.height,"px"),t.backgroundVertical.style.height="".concat(e.background.height,"px"),t.backgroundHorizontal.style.height="".concat(e.centerContainer.height,"px"),t.centerContainer.style.height="".concat(e.centerContainer.height,"px"),t.leftContainer.style.height="".concat(e.leftContainer.height,"px"),t.rightContainer.style.height="".concat(e.rightContainer.height,"px"),t.background.style.width="".concat(e.background.width,"px"),t.backgroundVertical.style.width="".concat(e.centerContainer.width,"px"),t.backgroundHorizontal.style.width="".concat(e.background.width,"px"),t.centerContainer.style.width="".concat(e.center.width,"px"),t.top.style.width="".concat(e.top.width,"px"),t.bottom.style.width="".concat(e.bottom.width,"px"),t.background.style.left="0",t.background.style.top="0",t.backgroundVertical.style.left="".concat(e.left.width+e.border.left,"px"),t.backgroundVertical.style.top="0",t.backgroundHorizontal.style.left="0",t.backgroundHorizontal.style.top="".concat(e.top.height,"px"),t.centerContainer.style.left="".concat(e.left.width,"px"),t.centerContainer.style.top="".concat(e.top.height,"px"),t.leftContainer.style.left="0",t.leftContainer.style.top="".concat(e.top.height,"px"),t.rightContainer.style.left="".concat(e.left.width+e.center.width,"px"),t.rightContainer.style.top="".concat(e.top.height,"px"),t.top.style.left="".concat(e.left.width,"px"),t.top.style.top="0",t.bottom.style.left="".concat(e.left.width,"px"),t.bottom.style.top="".concat(e.top.height+e.centerContainer.height,"px"),t.center.style.left="0",t.left.style.left="0",t.right.style.left="0"}setCurrentTime(e){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(e)}getCurrentTime(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()}_toTime(e){return RU(this,e,this.props.center.width)}_toGlobalTime(e){return RU(this,e,this.props.root.width)}_toScreen(e){return OU(this,e,this.props.center.width)}_toGlobalScreen(e){return OU(this,e,this.props.root.width)}_initAutoResize(){this.options.autoResize==!0?this._startAutoResize():this._stopAutoResize()}_startAutoResize(){const e=this;this._stopAutoResize(),this._onResize=()=>{if(e.options.autoResize!=!0){e._stopAutoResize();return}if(e.dom.root){const t=e.dom.root.offsetHeight,r=e.dom.root.offsetWidth;(r!=e.props.lastWidth||t!=e.props.lastHeight)&&(e.props.lastWidth=r,e.props.lastHeight=t,e.props.scrollbarWidth=W.getScrollBarWidth(),e.body.emitter.emit("_change"))}},window.addEventListener("resize",this._onResize),e.dom.root&&(e.props.lastWidth=e.dom.root.offsetWidth,e.props.lastHeight=e.dom.root.offsetHeight),this.watchTimer=wDe(this._onResize,1e3)}_stopAutoResize(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),this._onResize&&(window.removeEventListener("resize",this._onResize),this._onResize=null)}_onTouch(){this.touch.allowDragging=!0,this.touch.initialScrollTop=this.props.scrollTop}_onPinch(){this.touch.allowDragging=!1}_onDrag(e){if(!e||!this.touch.allowDragging)return;const t=e.deltaY,r=this._getScrollTop(),i=this._setScrollTop(this.touch.initialScrollTop+t);this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),i!=r&&this.emit("verticalDrag")}_setScrollTop(e){return this.props.scrollTop=e,this._updateScrollTop(),this.props.scrollTop}_updateScrollTop(){const e=Math.min(this.props.centerContainer.height-this.props.border.top-this.props.border.bottom-this.props.center.height,0);return e!=this.props.scrollTopMin&&(this.options.orientation.item!="top"&&(this.props.scrollTop+=e-this.props.scrollTopMin),this.props.scrollTopMin=e),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<e&&(this.props.scrollTop=e),this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),this.props.scrollTop}_getScrollTop(){return this.props.scrollTop}_createConfigurator(){throw new Error("Cannot invoke abstract method _createConfigurator")}}oD(jD.prototype);class JDe extends $l{constructor(e,t){var r;super(),this.body=e,this.defaultOptions={rtl:!1,showCurrentTime:!0,alignCurrentTime:void 0,moment:li,locales:Pd,locale:"en"},this.options=W.extend({},this.defaultOptions),this.setOptions(t),this.options.locales=W.extend({},Pd,this.options.locales);const i=this.defaultOptions.locales[this.defaultOptions.locale];je(r=rr(this.options.locales)).call(r,s=>{this.options.locales[s]=W.extend({},i,this.options.locales[s])}),this.offset=0,this._create()}_create(){const e=document.createElement("div");e.className="vis-current-time",e.style.position="absolute",e.style.top="0px",e.style.height="100%",this.bar=e}destroy(){this.options.showCurrentTime=!1,this.redraw(),this.body=null}setOptions(e){e&&W.selectiveExtend(["rtl","showCurrentTime","alignCurrentTime","moment","locale","locales"],this.options,e)}redraw(){if(this.options.showCurrentTime){var e,t;const r=this.body.dom.backgroundVertical;this.bar.parentNode!=r&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),r.appendChild(this.bar),this.start());let i=this.options.moment(Ei()+this.offset);this.options.alignCurrentTime&&(i=i.startOf(this.options.alignCurrentTime));const s=this.body.util.toScreen(i);let o=this.options.locales[this.options.locale];o||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),o=this.options.locales.en);let a=$n(e=$n(t="".concat(o.current," ")).call(t,o.time,": ")).call(e,i.format("dddd, MMMM Do YYYY, H:mm:ss"));a=a.charAt(0).toUpperCase()+a.substring(1),this.options.rtl?this.bar.style.transform="translateX(".concat(s*-1,"px)"):this.bar.style.transform="translateX(".concat(s,"px)"),this.bar.title=a}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1}start(){const e=this;function t(){e.stop();let i=1/e.body.range.conversion(e.body.domProps.center.width).scale/10;i<30&&(i=30),i>1e3&&(i=1e3),e.redraw(),e.body.emitter.emit("currentTimeTick"),e.currentTimeTimer=fi(t,i)}t()}stop(){this.currentTimeTimer!==void 0&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)}setCurrentTime(e){const t=W.convert(e,"Date").valueOf(),r=Ei();this.offset=t-r,this.redraw()}getCurrentTime(){return new Date(Ei()+this.offset)}}var jU={},$U;function ZDe(){if($U)return jU;$U=1;var n=Je(),e=Ll().find,t=jg(),r="find",i=!0;return r in[]&&Array(1)[r](function(){i=!1}),n({target:"Array",proto:!0,forced:i},{find:function(o){return e(this,o,arguments.length>1?arguments[1]:void 0)}}),t(r),jU}var zT,BU;function eNe(){if(BU)return zT;BU=1,ZDe();var n=Fn();return zT=n("Array","find"),zT}var qT,zU;function tNe(){if(zU)return qT;zU=1;var n=hn(),e=eNe(),t=Array.prototype;return qT=function(r){var i=r.find;return r===t||n(t,r)&&i===t.find?e:i},qT}var UT,qU;function nNe(){if(qU)return UT;qU=1;var n=tNe();return UT=n,UT}var WT,UU;function rNe(){return UU||(UU=1,WT=nNe()),WT}var iNe=rNe(),sNe=nt(iNe);const Si=.001;function oNe(n){Un(n).call(n,(e,t)=>e.data.start-t.data.start)}function aNe(n){Un(n).call(n,(e,t)=>{const r="end"in e.data?e.data.end:e.data.start,i="end"in t.data?t.data.end:t.data.start;return r-i})}function WU(n,e,t,r){return $D(n,e.item,!1,s=>s.stack&&(t||s.top===null),s=>s.stack,()=>e.axis,r)===null}function lNe(n,e,t){const r=$D(n,e.item,!1,i=>i.stack,()=>!0,i=>i.baseTop);t.height=r-t.top+.5*e.item.vertical}function cNe(n,e,t,r){for(let i=0;i<n.length;i++){if(n[i].data.subgroup==null){n[i].top=e.item.vertical;continue}if(n[i].data.subgroup===void 0||!r)continue;let s=0;for(const o in t)!Object.prototype.hasOwnProperty.call(t,o)||t[o].visible!==!0||t[o].index>=t[n[i].data.subgroup].index||(s+=t[o].height,t[n[i].data.subgroup].top=s);n[i].top=s+.5*e.item.vertical}r||uNe(n,e,t)}function uNe(n,e,t){var r;$D(Un(r=iD(t)).call(r,(i,s)=>i.index>s.index?1:i.index<s.index?-1:0),{vertical:0},!0,()=>!0,()=>!0,()=>0);for(let i=0;i<n.length;i++)n[i].data.subgroup!==void 0&&(n[i].top=t[n[i].data.subgroup].top+.5*e.item.vertical)}function HU(n,e,t){let r=!1;const i=[];for(let s in t)Object.prototype.hasOwnProperty.call(t[s],"index")?i[t[s].index]=s:i.push(s);for(let s=0;s<i.length;s++){let o=i[s];if(!Object.prototype.hasOwnProperty.call(t,o))continue;r=r||t[o].stack,t[o].top=0;for(const l in t)t[l].visible&&t[o].index>t[l].index&&(t[o].top+=t[l].height);const a=n[o];for(let l=0;l<a.length;l++)a[l].data.subgroup!==void 0&&(a[l].top=t[a[l].data.subgroup].top+.5*e.item.vertical,t[o].stack&&(a[l].baseTop=a[l].top));r&&t[o].stack&&lNe(n[o],e,t[o])}}function $D(n,e,t,r,i,s,o){let a=b=>b.start,l=b=>b.end;t||(!!(n[0]&&n[0].options.rtl)?a=w=>w.right:a=w=>w.left,l=w=>a(w)+w.width+e.horizontal);const c=[],u=[];let h=null,d=0;for(const b of n)if(r(b))c.push(b);else if(i(b)){const w=a(b);h!==null&&w<h-Si&&(d=0),h=w,d=Mv(u,S=>a(S)-Si>w,d),Wr(u).call(u,d,0,b),d++}h=null;let f=null;d=0;let m=0,g=0,v=0;for(;c.length>0;){var y;const b=c.shift();b.top=s(b);const w=a(b),S=l(b);h!==null&&w<h-Si&&(m=0,g=0,d=0,f=null),(h===null||w>h+Si)&&(m=Mv(u,C=>w<l(C)-Si,m)),h=w,(f===null||f<S-Si)&&(g=Mv(u,C=>S<a(C)-Si,Math.max(m,g))),f!==null&&f-Si>S&&(g=dNe(u,C=>S+Si>=a(C),m,g)+1),f=S;const _=Un(y=fNe(u,C=>w<l(C)-Si,m,g)).call(y,(C,T)=>C.top-T.top);for(let C=0;C<_.length;C++){const T=_[C];hNe(b,T,e)&&(b.top=T.top+T.height+e.vertical)}i(b)&&(d=Mv(u,C=>a(C)-Si>w,d),Wr(u).call(u,d,0,b),d<m&&m++,d<=g&&g++,d++);const E=b.top+b.height;if(E>v&&(v=E),o&&o())return null}return v}function hNe(n,e,t){return n.top-t.vertical+Si<e.top+e.height&&n.top+n.height+t.vertical-Si>e.top}function Mv(n,e,t){t||(t=0);for(let r=t;r<n.length;r++)if(e(n[r]))return r;return n.length}function dNe(n,e,t,r){t||(t=0),r||(r=n.length);for(let i=r-1;i>=t;i--)if(e(n[i]))return i;return t-1}function fNe(n,e,t,r){t||(t=0),r?r=Math.min(r,n.length):r=n.length;const i=[];for(let s=t;s<r;s++)e(n[s])&&i.push(n[s]);return i}const pNe="__background__",YU={BACKGROUND:pNe};class SP{constructor(e,t,r){if(this.groupId=e,this.subgroups={},this.subgroupStack={},this.subgroupStackAll=!1,this.subgroupVisibility={},this.doInnerStack=!1,this.shouldBailStackItems=!1,this.subgroupIndex=0,this.subgroupOrderer=t&&t.subgroupOrder,this.itemSet=r,this.isVisible=null,this.height=0,this.stackDirty=!0,this._disposeCallbacks=[],t&&t.nestedGroups&&(this.nestedGroups=t.nestedGroups,t.showNested==!1?this.showNested=!1:this.showNested=!0),t&&t.subgroupStack)if(typeof t.subgroupStack=="boolean")this.doInnerStack=t.subgroupStack,this.subgroupStackAll=t.subgroupStack;else for(const s in t.subgroupStack)Object.prototype.hasOwnProperty.call(t.subgroupStack,s)&&(this.subgroupStack[s]=t.subgroupStack[s],this.doInnerStack=this.doInnerStack||t.subgroupStack[s]);t&&t.heightMode?this.heightMode=t.heightMode:this.heightMode=r.options.groupHeightMode,this.nestedInGroup=null,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.itemsInRange=[],this.orderedItems={byStart:[],byEnd:[]},this.checkRangedItems=!1;const i=()=>{this.checkRangedItems=!0};this.itemSet.body.emitter.on("checkRangedItems",i),this._disposeCallbacks.push(()=>{this.itemSet.body.emitter.off("checkRangedItems",i)}),this._create(),this.setData(t)}_create(){const e=document.createElement("div");this.itemSet.options.groupEditable.order?e.className="vis-label draggable":e.className="vis-label",this.dom.label=e;const t=document.createElement("div");t.className="vis-inner",e.appendChild(t),this.dom.inner=t;const r=document.createElement("div");r.className="vis-group",r["vis-group"]=this,this.dom.foreground=r,this.dom.background=document.createElement("div"),this.dom.background.className="vis-group",this.dom.axis=document.createElement("div"),this.dom.axis.className="vis-group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.style.position="absolute",this.dom.marker.innerHTML="",this.dom.background.appendChild(this.dom.marker)}setData(e){if(this.itemSet.groupTouchParams.isDragging)return;let t,r;if(e&&e.subgroupVisibility)for(const o in e.subgroupVisibility)Object.prototype.hasOwnProperty.call(e.subgroupVisibility,o)&&(this.subgroupVisibility[o]=e.subgroupVisibility[o]);if(this.itemSet.options&&this.itemSet.options.groupTemplate){var i;r=ue(i=this.itemSet.options.groupTemplate).call(i,this),t=r(e,this.dom.inner)}else t=e&&e.content;if(t instanceof Element){for(;this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(t)}else t instanceof Object&&t.isReactComponent||(t instanceof Object?r(e,this.dom.inner):t!=null?this.dom.inner.innerHTML=W.xss(t):this.dom.inner.innerHTML=W.xss(this.groupId||""));this.dom.label.title=e&&e.title||"",this.dom.inner.firstChild?W.removeClassName(this.dom.inner,"vis-hidden"):W.addClassName(this.dom.inner,"vis-hidden"),e&&e.nestedGroups?((!this.nestedGroups||this.nestedGroups!=e.nestedGroups)&&(this.nestedGroups=e.nestedGroups),(e.showNested!==void 0||this.showNested===void 0)&&(e.showNested==!1?this.showNested=!1:this.showNested=!0),W.addClassName(this.dom.label,"vis-nesting-group"),this.showNested?(W.removeClassName(this.dom.label,"collapsed"),W.addClassName(this.dom.label,"expanded")):(W.removeClassName(this.dom.label,"expanded"),W.addClassName(this.dom.label,"collapsed"))):this.nestedGroups&&(this.nestedGroups=null,W.removeClassName(this.dom.label,"collapsed"),W.removeClassName(this.dom.label,"expanded"),W.removeClassName(this.dom.label,"vis-nesting-group")),e&&(e.treeLevel||e.nestedInGroup)?(W.addClassName(this.dom.label,"vis-nested-group"),e.treeLevel?W.addClassName(this.dom.label,"vis-group-level-"+e.treeLevel):W.addClassName(this.dom.label,"vis-group-level-unknown-but-gte1")):W.addClassName(this.dom.label,"vis-group-level-0");const s=e&&e.className||null;s!=this.className&&(this.className&&(W.removeClassName(this.dom.label,this.className),W.removeClassName(this.dom.foreground,this.className),W.removeClassName(this.dom.background,this.className),W.removeClassName(this.dom.axis,this.className)),W.addClassName(this.dom.label,s),W.addClassName(this.dom.foreground,s),W.addClassName(this.dom.background,s),W.addClassName(this.dom.axis,s),this.className=s),this.style&&(W.removeCssText(this.dom.label,this.style),this.style=null),e&&e.style&&(W.addCssText(this.dom.label,e.style),this.style=e.style)}getLabelWidth(){return this.props.label.width}_didMarkerHeightChange(){const e=this.dom.marker.clientHeight;if(e!=this.lastMarkerHeight){this.lastMarkerHeight=e;const t={};let r=0;if(je(W).call(W,this.items,(s,o)=>{s.dirty=!0,s.displayed&&(t[o]=s.redraw(!0),r=t[o].length)}),r>0)for(let s=0;s<r;s++)je(W).call(W,t,o=>{o[s]()});return!0}else return!1}_calculateGroupSizeAndPosition(){const{offsetTop:e,offsetLeft:t,offsetWidth:r}=this.dom.foreground;this.top=e,this.right=t,this.width=r}_shouldBailItemsRedraw(){const e=this,t=this.itemSet.options.onTimeout,r={relativeBailingTime:this.itemSet.itemsSettingTime,bailTimeMs:t&&t.timeoutMs,userBailFunction:t&&t.callback,shouldBailStackItems:this.shouldBailStackItems};let i=null;if(!this.itemSet.initialDrawDone){if(r.shouldBailStackItems)return!0;Math.abs(Ei()-new Date(r.relativeBailingTime))>r.bailTimeMs&&(r.userBailFunction&&this.itemSet.userContinueNotBail==null?r.userBailFunction(s=>{e.itemSet.userContinueNotBail=s,i=!s}):e.itemSet.userContinueNotBail==!1?i=!0:i=!1)}return i}_redrawItems(e,t,r,i){if(e||this.stackDirty||this.isVisible&&!t){var o,a,l,c,u,h;const y={byEnd:yt(o=this.orderedItems.byEnd).call(o,_=>!_.isCluster),byStart:yt(a=this.orderedItems.byStart).call(a,_=>!_.isCluster)},b={byEnd:[...new Fc(yt(l=Ut(c=this.orderedItems.byEnd).call(c,_=>_.cluster)).call(l,_=>!!_))],byStart:[...new Fc(yt(u=Ut(h=this.orderedItems.byStart).call(h,_=>_.cluster)).call(u,_=>!!_))]},w=()=>{var _,E;const C=this._updateItemsInRange(y,yt(_=this.visibleItems).call(_,O=>!O.isCluster),i),T=this._updateClustersInRange(b,yt(E=this.visibleItems).call(E,O=>O.isCluster),i);return[...C,...T]},S=_=>{let E={};for(const T in this.subgroups){var C;if(!Object.prototype.hasOwnProperty.call(this.subgroups,T))continue;const O=yt(C=this.visibleItems).call(C,R=>R.data.subgroup===T);E[T]=_?Un(O).call(O,(R,D)=>_(R.data,D.data)):O}return E};if(typeof this.itemSet.options.order=="function"){const _=this;if(this.doInnerStack&&this.itemSet.options.stackSubgroups){const E=S(this.itemSet.options.order);HU(E,r,this.subgroups),this.visibleItems=w(),this._updateSubGroupHeights(r)}else{var d,f,m,g;this.visibleItems=w(),this._updateSubGroupHeights(r);const E=Un(d=yt(f=sf(m=this.visibleItems).call(m)).call(f,C=>C.isCluster||!C.isCluster&&!C.cluster)).call(d,(C,T)=>_.itemSet.options.order(C.data,T.data));this.shouldBailStackItems=WU(E,r,!0,ue(g=this._shouldBailItemsRedraw).call(g,this))}}else if(this.visibleItems=w(),this._updateSubGroupHeights(r),this.itemSet.options.stack)if(this.doInnerStack&&this.itemSet.options.stackSubgroups){const _=S();HU(_,r,this.subgroups)}else{var v;this.shouldBailStackItems=WU(this.visibleItems,r,!0,ue(v=this._shouldBailItemsRedraw).call(v,this))}else cNe(this.visibleItems,r,this.subgroups,this.itemSet.options.stackSubgroups);for(let _=0;_<this.visibleItems.length;_++)this.visibleItems[_].repositionX(),this.subgroupVisibility[this.visibleItems[_].data.subgroup]!==void 0&&(this.subgroupVisibility[this.visibleItems[_].data.subgroup]||this.visibleItems[_].hide());this.itemSet.options.cluster&&je(W).call(W,this.items,_=>{_.cluster&&_.displayed&&_.hide()}),this.shouldBailStackItems&&this.itemSet.body.emitter.emit("destroyTimeline"),this.stackDirty=!1}}_didResize(e,t){e=W.updateProperty(this,"height",t)||e;const r=this.dom.inner.clientWidth,i=this.dom.inner.clientHeight;return e=W.updateProperty(this.props.label,"width",r)||e,e=W.updateProperty(this.props.label,"height",i)||e,e}_applyGroupHeight(e){this.dom.background.style.height="".concat(e,"px"),this.dom.foreground.style.height="".concat(e,"px"),this.dom.label.style.height="".concat(e,"px")}_updateItemsVerticalPosition(e){for(let t=0,r=this.visibleItems.length;t<r;t++){const i=this.visibleItems[t];i.repositionY(e),!this.isVisible&&this.groupId!=YU.BACKGROUND&&i.displayed&&i.hide()}}redraw(e,t,r,i){var s,o,a,l,c;let u=!1;const h=this.isVisible;let d;const f=[()=>{r=this._didMarkerHeightChange.call(this)||r},ue(s=this._updateSubGroupHeights).call(s,this,t),ue(o=this._calculateGroupSizeAndPosition).call(o,this),()=>{var m;this.isVisible=ue(m=this._isGroupVisible).call(m,this)(e,t)},()=>{var m;ue(m=this._redrawItems).call(m,this)(r,h,t,e)},ue(a=this._updateSubgroupsSizes).call(a,this),()=>{var m;d=this.height=ue(m=this._calculateHeight).call(m,this)(t)},ue(l=this._calculateGroupSizeAndPosition).call(l,this),()=>{var m;u=ue(m=this._didResize).call(m,this)(u,d)},()=>{var m;ue(m=this._applyGroupHeight).call(m,this)(d)},()=>{var m;ue(m=this._updateItemsVerticalPosition).call(m,this)(t)},ue(c=()=>(!this.isVisible&&this.height&&(u=!1),u)).call(c,this)];if(i)return f;{let m;return je(f).call(f,g=>{m=g()}),m}}_updateSubGroupHeights(e){if(rr(this.subgroups).length>0){const t=this;this._resetSubgroups(),je(W).call(W,this.visibleItems,r=>{r.data.subgroup!==void 0&&(t.subgroups[r.data.subgroup].height=Math.max(t.subgroups[r.data.subgroup].height,r.height+e.item.vertical),t.subgroups[r.data.subgroup].visible=typeof this.subgroupVisibility[r.data.subgroup]>"u"?!0:!!this.subgroupVisibility[r.data.subgroup])})}}_isGroupVisible(e,t){return this.top<=e.body.domProps.centerContainer.height-e.body.domProps.scrollTop+t.axis&&this.top+this.height+t.axis>=-e.body.domProps.scrollTop}_calculateHeight(e){let t,r;if(this.heightMode==="fixed"?r=W.toArray(this.items):r=this.visibleItems,!this.isVisible&&this.height)t=Math.max(this.height,this.props.label.height);else if(r.length>0){let i=r[0].top,s=r[0].top+r[0].height;if(je(W).call(W,r,o=>{i=Math.min(i,o.top),s=Math.max(s,o.top+o.height)}),i>e.axis){const o=i-e.axis;s-=o,je(W).call(W,r,a=>{a.top-=o})}t=Math.ceil(s+e.item.vertical/2),this.heightMode!=="fitItems"&&(t=Math.max(t,this.props.label.height))}else t=this.props.label.height;return t}show(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)}hide(){const e=this.dom.label;e.parentNode&&e.parentNode.removeChild(e);const t=this.dom.foreground;t.parentNode&&t.parentNode.removeChild(t);const r=this.dom.background;r.parentNode&&r.parentNode.removeChild(r);const i=this.dom.axis;i.parentNode&&i.parentNode.removeChild(i)}add(e){var t;if(this.items[e.id]=e,e.setParent(this),this.stackDirty=!0,e.data.subgroup!==void 0&&(this._addToSubgroup(e),this.orderSubgroups()),!Cd(t=this.visibleItems).call(t,e)){const r=this.itemSet.body.range;this._checkIfVisible(e,this.visibleItems,r)}}_addToSubgroup(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.data.subgroup;t!=null&&this.subgroups[t]===void 0&&(this.subgroups[t]={height:0,top:0,start:e.data.start,end:e.data.end||e.data.start,visible:!1,index:this.subgroupIndex,items:[],stack:this.subgroupStackAll||this.subgroupStack[t]||!1},this.subgroupIndex++),new Date(e.data.start)<new Date(this.subgroups[t].start)&&(this.subgroups[t].start=e.data.start);const r=e.data.end||e.data.start;new Date(r)>new Date(this.subgroups[t].end)&&(this.subgroups[t].end=r),this.subgroups[t].items.push(e)}_updateSubgroupsSizes(){const e=this;if(e.subgroups)for(const r in e.subgroups){var t;if(!Object.prototype.hasOwnProperty.call(e.subgroups,r))continue;const i=e.subgroups[r].items[0].data.end||e.subgroups[r].items[0].data.start;let s=e.subgroups[r].items[0].data.start,o=i-1;je(t=e.subgroups[r].items).call(t,a=>{new Date(a.data.start)<new Date(s)&&(s=a.data.start);const l=a.data.end||a.data.start;new Date(l)>new Date(o)&&(o=l)}),e.subgroups[r].start=s,e.subgroups[r].end=new Date(o-1)}}orderSubgroups(){if(this.subgroupOrderer!==void 0){const e=[];if(typeof this.subgroupOrderer=="string"){for(const t in this.subgroups)Object.prototype.hasOwnProperty.call(this.subgroups,t)&&e.push({subgroup:t,sortField:this.subgroups[t].items[0].data[this.subgroupOrderer]});Un(e).call(e,(t,r)=>t.sortField-r.sortField)}else if(typeof this.subgroupOrderer=="function"){for(const t in this.subgroups)Object.prototype.hasOwnProperty.call(this.subgroups,t)&&e.push(this.subgroups[t].items[0].data);Un(e).call(e,this.subgroupOrderer)}if(e.length>0)for(let t=0;t<e.length;t++)this.subgroups[e[t].subgroup].index=t}}_resetSubgroups(){for(const e in this.subgroups)Object.prototype.hasOwnProperty.call(this.subgroups,e)&&(this.subgroups[e].visible=!1,this.subgroups[e].height=0)}remove(e){var t,r;delete this.items[e.id],e.setParent(null),this.stackDirty=!0;const i=Xt(t=this.visibleItems).call(t,e);i!=-1&&Wr(r=this.visibleItems).call(r,i,1),e.data.subgroup!==void 0&&(this._removeFromSubgroup(e),this.orderSubgroups())}_removeFromSubgroup(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.data.subgroup;if(t!=null){const s=this.subgroups[t];if(s){var r;const o=Xt(r=s.items).call(r,e);if(o>=0){var i;Wr(i=s.items).call(i,o,1),s.items.length?this._updateSubgroupsSizes():delete this.subgroups[t]}}}}removeFromDataSet(e){this.itemSet.removeItem(e.id)}order(){const e=W.toArray(this.items),t=[],r=[];for(let i=0;i<e.length;i++)e[i].data.end!==void 0&&r.push(e[i]),t.push(e[i]);this.orderedItems={byStart:t,byEnd:r},oNe(this.orderedItems.byStart),aNe(this.orderedItems.byEnd)}_updateItemsInRange(e,t,r){const i=[],s={};if(!this.isVisible&&this.height!==void 0&&this.groupId!=YU.BACKGROUND){for(let v=0;v<t.length;v++){var o=t[v];o.displayed&&o.hide()}return i}const a=(r.end-r.start)/4,l=r.start-a,c=r.end+a,u=v=>v<l?-1:v<=c?0:1,h=v=>{const{start:y,end:b}=v;return b<l?-1:y<=c?0:1};if(t.length>0)for(let v=0;v<t.length;v++)this._checkIfVisibleWithReference(t[v],i,s,r);const d=W.binarySearchCustom(e.byStart,u,"data","start");if(this._traceVisible(d,e.byStart,i,s,v=>v.data.start<l||v.data.start>c),this.checkRangedItems==!0){this.checkRangedItems=!1;for(let v=0;v<e.byEnd.length;v++)this._checkIfVisibleWithReference(e.byEnd[v],i,s,r)}else{const v=W.binarySearchCustom(e.byEnd,h,"data");this._traceVisible(v,e.byEnd,i,s,y=>y.data.end<l||y.data.start>c)}this._sortVisibleItems(e.byStart,i,s);const f={};let m=0;for(let v=0;v<i.length;v++){const y=i[v];y.displayed||(f[v]=y.redraw(!0),m=f[v].length)}if(m>0)for(let v=0;v<m;v++)je(W).call(W,f,y=>{y[v]()});for(let v=0;v<i.length;v++)i[v].repositionX();return i}_traceVisible(e,t,r,i,s){if(e!=-1){for(let o=e;o>=0;o--){let a=t[o];if(s(a))break;!(a.isCluster&&!a.hasItems())&&!a.cluster&&i[a.id]===void 0&&(i[a.id]=!0,r.unshift(a))}for(let o=e+1;o<t.length;o++){let a=t[o];if(s(a))break;!(a.isCluster&&!a.hasItems())&&!a.cluster&&i[a.id]===void 0&&(i[a.id]=!0,r.push(a))}}}_sortVisibleItems(e,t,r){t.length=0;for(let i=0;i<e.length;i++){let s=e[i];r[s.id]&&t.push(s)}}_checkIfVisible(e,t,r){e.isVisible(r)?(e.displayed||e.show(),e.repositionX(),t.push(e)):e.displayed&&e.hide()}_checkIfVisibleWithReference(e,t,r,i){e.isVisible(i)?r[e.id]===void 0&&(r[e.id]=!0,t.push(e)):e.displayed&&e.hide()}_updateClustersInRange(e,t,r){const i=[],s={};if(t.length>0)for(let u=0;u<t.length;u++)this._checkIfVisibleWithReference(t[u],i,s,r);for(let u=0;u<e.byStart.length;u++)this._checkIfVisibleWithReference(e.byStart[u],i,s,r);for(let u=0;u<e.byEnd.length;u++)this._checkIfVisibleWithReference(e.byEnd[u],i,s,r);const o={};let a=0;for(let u=0;u<i.length;u++){const h=i[u];h.displayed||(o[u]=h.redraw(!0),a=o[u].length)}if(a>0)for(var c=0;c<a;c++)je(W).call(W,o,function(u){u[c]()});for(let u=0;u<i.length;u++)i[u].repositionX();return i}changeSubgroup(e,t,r){this._removeFromSubgroup(e,t),this._addToSubgroup(e,r),this.orderSubgroups()}dispose(){this.hide();let e;for(;e=this._disposeCallbacks.pop();)e()}}class oZ extends SP{constructor(e,t,r){super(e,t,r),this.width=0,this.height=0,this.top=0,this.left=0}redraw(e,t){this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,e),this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(let i=0,s=this.visibleItems.length;i<s;i++)this.visibleItems[i].repositionY(t);return!1}show(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)}}class lf{constructor(e,t,r){var i;this.id=null,this.parent=null,this.data=e,this.dom=null,this.conversion=t||{},this.defaultOptions={locales:Pd,locale:"en"},this.options=W.extend({},this.defaultOptions,r),this.options.locales=W.extend({},Pd,this.options.locales);const s=this.defaultOptions.locales[this.defaultOptions.locale];je(i=rr(this.options.locales)).call(i,o=>{this.options.locales[o]=W.extend({},s,this.options.locales[o])}),this.selected=!1,this.displayed=!1,this.groupShowing=!0,this.selectable=r&&r.selectable||!1,this.dirty=!0,this.top=null,this.right=null,this.left=null,this.width=null,this.height=null,this.setSelectability(e),this.editable=null,this._updateEditStatus()}select(){this.selectable&&(this.selected=!0,this.dirty=!0,this.displayed&&this.redraw())}unselect(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()}setData(e){e.group!=null&&this.data.group!=e.group&&this.parent!=null&&this.parent.itemSet._moveToGroup(this,e.group),this.setSelectability(e),this.parent&&(this.parent.stackDirty=!0),e.subgroup!=null&&this.data.subgroup!=e.subgroup&&this.parent!=null&&this.parent.changeSubgroup(this,this.data.subgroup,e.subgroup),this.data=e,this._updateEditStatus(),this.dirty=!0,this.displayed&&this.redraw()}setSelectability(e){e&&(this.selectable=typeof e.selectable>"u"?!0:!!e.selectable)}setParent(e){this.displayed?(this.hide(),this.parent=e,this.parent&&this.show()):this.parent=e}isVisible(){return!1}show(){return!1}hide(){return!1}redraw(){}repositionX(){}repositionY(){}_repaintDragCenter(){if(this.selected&&this.editable.updateTime&&!this.dom.dragCenter){var e,t;const r=this,i=document.createElement("div");i.className="vis-drag-center",i.dragCenterItem=this,this.hammerDragCenter=new Ur(i),this.hammerDragCenter.on("tap",s=>{r.parent.itemSet.body.emitter.emit("click",{event:s,item:r.id})}),this.hammerDragCenter.on("doubletap",s=>{s.stopPropagation(),r.parent.itemSet._onUpdateItem(r),r.parent.itemSet.body.emitter.emit("doubleClick",{event:s,item:r.id})}),this.hammerDragCenter.on("panstart",s=>{s.stopPropagation(),r.parent.itemSet._onDragStart(s)}),this.hammerDragCenter.on("panmove",ue(e=r.parent.itemSet._onDrag).call(e,r.parent.itemSet)),this.hammerDragCenter.on("panend",ue(t=r.parent.itemSet._onDragEnd).call(t,r.parent.itemSet)),this.hammerDragCenter.get("press").set({time:1e4}),this.dom.box?this.dom.dragLeft?this.dom.box.insertBefore(i,this.dom.dragLeft):this.dom.box.appendChild(i):this.dom.point&&this.dom.point.appendChild(i),this.dom.dragCenter=i}else!this.selected&&this.dom.dragCenter&&(this.dom.dragCenter.parentNode&&this.dom.dragCenter.parentNode.removeChild(this.dom.dragCenter),this.dom.dragCenter=null,this.hammerDragCenter&&(this.hammerDragCenter.destroy(),this.hammerDragCenter=null))}_repaintDeleteButton(e){const t=(this.options.editable.overrideItems||this.editable==null)&&this.options.editable.remove||!this.options.editable.overrideItems&&this.editable!=null&&this.editable.remove;if(this.selected&&t&&!this.dom.deleteButton){const r=this,i=document.createElement("div");this.options.rtl?i.className="vis-delete-rtl":i.className="vis-delete";let s=this.options.locales[this.options.locale];s||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),s=this.options.locales.en),i.title=s.deleteSelected,this.hammerDeleteButton=new Ur(i).on("tap",o=>{o.stopPropagation(),r.parent.removeFromDataSet(r)}),e.appendChild(i),this.dom.deleteButton=i}else(!this.selected||!t)&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null,this.hammerDeleteButton&&(this.hammerDeleteButton.destroy(),this.hammerDeleteButton=null))}_repaintOnItemUpdateTimeTooltip(e){if(!this.options.tooltipOnItemUpdateTime)return;const t=(this.options.editable.updateTime||this.data.editable===!0)&&this.data.editable!==!1;if(this.selected&&t&&!this.dom.onItemUpdateTimeTooltip){const i=document.createElement("div");i.className="vis-onUpdateTime-tooltip",e.appendChild(i),this.dom.onItemUpdateTimeTooltip=i}else!this.selected&&this.dom.onItemUpdateTimeTooltip&&(this.dom.onItemUpdateTimeTooltip.parentNode&&this.dom.onItemUpdateTimeTooltip.parentNode.removeChild(this.dom.onItemUpdateTimeTooltip),this.dom.onItemUpdateTimeTooltip=null);if(this.dom.onItemUpdateTimeTooltip){this.dom.onItemUpdateTimeTooltip.style.visibility=this.parent.itemSet.touchParams.itemIsDragging?"visible":"hidden",this.dom.onItemUpdateTimeTooltip.style.transform="translateX(-50%)",this.dom.onItemUpdateTimeTooltip.style.left="50%";const i=50,s=this.parent.itemSet.body.domProps.scrollTop;let o;this.options.orientation.item=="top"?o=this.top:o=this.parent.height-this.top-this.height,o+this.parent.top-i<-s?(this.dom.onItemUpdateTimeTooltip.style.bottom="",this.dom.onItemUpdateTimeTooltip.style.top="".concat(this.height+2,"px")):(this.dom.onItemUpdateTimeTooltip.style.top="",this.dom.onItemUpdateTimeTooltip.style.bottom="".concat(this.height+2,"px"));let l,c;if(this.options.tooltipOnItemUpdateTime&&this.options.tooltipOnItemUpdateTime.template){var r;c=ue(r=this.options.tooltipOnItemUpdateTime.template).call(r,this),l=c(this.data)}else l="start: ".concat(li(this.data.start).format("MM/DD/YYYY hh:mm")),this.data.end&&(l+="<br> end: ".concat(li(this.data.end).format("MM/DD/YYYY hh:mm")));this.dom.onItemUpdateTimeTooltip.innerHTML=W.xss(l)}}_getItemData(){return this.parent.itemSet.itemsData.get(this.id)}_updateContents(e){let t,r,i,s,o;const a=this._getItemData(),c=(this.dom.box||this.dom.point).getElementsByClassName("vis-item-visible-frame")[0];if(this.options.visibleFrameTemplate){var u;o=ue(u=this.options.visibleFrameTemplate).call(u,this),s=W.xss(o(a,c))}else s="";if(c){if(s instanceof Object&&!(s instanceof Element))o(a,c);else if(r=this._contentToString(this.itemVisibleFrameContent)!==this._contentToString(s),r){if(s instanceof Element)c.innerHTML="",c.appendChild(s);else if(s!=null)c.innerHTML=W.xss(s);else if(!(this.data.type=="background"&&this.data.content===void 0))throw new Error('Property "content" missing in item '.concat(this.id));this.itemVisibleFrameContent=s}}if(this.options.template){var h;i=ue(h=this.options.template).call(h,this),t=i(a,e,this.data)}else t=this.data.content;if(t instanceof Object&&!(t instanceof Element))i(a,e);else if(r=this._contentToString(this.content)!==this._contentToString(t),r){if(t instanceof Element)e.innerHTML="",e.appendChild(t);else if(t!=null)e.innerHTML=W.xss(t);else if(!(this.data.type=="background"&&this.data.content===void 0))throw new Error('Property "content" missing in item '.concat(this.id));this.content=t}}_updateDataAttributes(e){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){let t=[];if(It(this.options.dataAttributes))t=this.options.dataAttributes;else if(this.options.dataAttributes=="all")t=rr(this.data);else return;for(const r of t){const i=this.data[r];i!=null?e.setAttribute("data-".concat(r),i):e.removeAttribute("data-".concat(r))}}}_updateStyle(e){this.style&&(W.removeCssText(e,this.style),this.style=null),this.data.style&&(W.addCssText(e,this.data.style),this.style=this.data.style)}_contentToString(e){return typeof e=="string"?e:e&&"outerHTML"in e?e.outerHTML:e}_updateEditStatus(){this.options&&(typeof this.options.editable=="boolean"?this.editable={updateTime:this.options.editable,updateGroup:this.options.editable,remove:this.options.editable}:typeof this.options.editable=="object"&&(this.editable={},W.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.options.editable))),(!this.options||!this.options.editable||this.options.editable.overrideItems!==!0)&&this.data&&(typeof this.data.editable=="boolean"?this.editable={updateTime:this.data.editable,updateGroup:this.data.editable,remove:this.data.editable}:typeof this.data.editable=="object"&&(this.editable={},W.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.data.editable)))}getWidthLeft(){return 0}getWidthRight(){return 0}getTitle(){if(this.options.tooltip&&this.options.tooltip.template){var e;return ue(e=this.options.tooltip.template).call(e,this)(this._getItemData(),this.data)}return this.data.title}}lf.prototype.stack=!0;class mNe extends lf{constructor(e,t,r){if(super(e,t,r),this.props={dot:{width:0,height:0},line:{width:0,height:0}},e&&e.start==null)throw new Error('Property "start" missing in item '.concat(e))}isVisible(e){if(this.cluster)return!1;let t;const r=this.data.align||this.options.align,i=this.width*e.getMillisecondsPerPixel();return r=="right"?t=this.data.start.getTime()>e.start&&this.data.start.getTime()-i<e.end:r=="left"?t=this.data.start.getTime()+i>e.start&&this.data.start.getTime()<e.end:t=this.data.start.getTime()+i/2>e.start&&this.data.start.getTime()-i/2<e.end,t}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-line",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-dot",this.dom.box["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(this.dom.box)}if(!this.dom.line.parentNode){var e=this.parent.dom.background;if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){const t=this.parent.dom.axis;if(!e)throw new Error("Cannot redraw item: parent has no axis container element");t.appendChild(this.dom.dot)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const e=this.editable.updateTime||this.editable.updateGroup,t=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(e?" vis-editable":" vis-readonly");this.dom.box.className="vis-item vis-box".concat(t),this.dom.line.className="vis-item vis-line".concat(t),this.dom.dot.className="vis-item vis-dot".concat(t)}}_getDomComponentsSizes(){return{previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},dot:{height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},line:{width:this.dom.line.offsetWidth},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}}}_updateDomComponentsSizes(e){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.props.dot.height=e.dot.height,this.props.dot.width=e.dot.width,this.props.line.width=e.line.width,this.width=e.box.width,this.height=e.box.height,this.options.rtl?this.dom.box.style.right=e.previous.right:this.dom.box.style.left=e.previous.left,this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.box)}redraw(e){var t,r,i,s;let o;const a=[ue(t=this._createDomElement).call(t,this),ue(r=this._appendDomElement).call(r,this),ue(i=this._updateDirtyDomComponents).call(i,this),()=>{this.dirty&&(o=this._getDomComponentsSizes())},()=>{if(this.dirty){var l;ue(l=this._updateDomComponentsSizes).call(l,this)(o)}},ue(s=this._repaintDomAdditionals).call(s,this)];if(e)return a;{let l;return je(a).call(a,c=>{l=c()}),l}}show(e){if(!this.displayed)return this.redraw(e)}hide(){if(this.displayed){const e=this.dom;e.box.remove?e.box.remove():e.box.parentNode&&e.box.parentNode.removeChild(e.box),e.line.remove?e.line.remove():e.line.parentNode&&e.line.parentNode.removeChild(e.line),e.dot.remove?e.dot.remove():e.dot.parentNode&&e.dot.parentNode.removeChild(e.dot),this.displayed=!1}}repositionXY(){const e=this.options.rtl,t=function(r,i,s){var o;let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(i===void 0&&s===void 0)return;const l=a?i*-1:i;if(s===void 0){r.style.transform="translateX(".concat(l,"px)");return}if(i===void 0){r.style.transform="translateY(".concat(s,"px)");return}r.style.transform=$n(o="translate(".concat(l,"px, ")).call(o,s,"px)")};t(this.dom.box,this.boxX,this.boxY,e),t(this.dom.dot,this.dotX,this.dotY,e),t(this.dom.line,this.lineX,this.lineY,e)}repositionX(){const e=this.conversion.toScreen(this.data.start),t=this.data.align===void 0?this.options.align:this.data.align,r=this.props.line.width,i=this.props.dot.width;t=="right"?(this.boxX=e-this.width,this.lineX=e-r,this.dotX=e-r/2-i/2):t=="left"?(this.boxX=e,this.lineX=e,this.dotX=e+r/2-i/2):(this.boxX=e-this.width/2,this.lineX=this.options.rtl?e-r:e-r/2,this.dotX=e-i/2),this.options.rtl?this.right=this.boxX:this.left=this.boxX,this.repositionXY()}repositionY(){const e=this.options.orientation.item,t=this.dom.line.style;if(e=="top"){const r=this.parent.top+this.top+1;this.boxY=this.top||0,t.height="".concat(r,"px"),t.bottom="",t.top="0"}else{const i=this.parent.itemSet.props.height-this.parent.top-this.parent.height+this.top;this.boxY=this.parent.height-this.top-(this.height||0),t.height="".concat(i,"px"),t.top="",t.bottom="0"}this.dotY=-this.props.dot.height/2,this.repositionXY()}getWidthLeft(){return this.width/2}getWidthRight(){return this.width/2}}class gNe extends lf{constructor(e,t,r){if(super(e,t,r),this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0,marginRight:0}},e&&e.start==null)throw new Error('Property "start" missing in item '.concat(e))}isVisible(e){if(this.cluster)return!1;const t=this.width*e.getMillisecondsPerPixel();return this.data.start.getTime()+t>e.start&&this.data.start<e.end}_createDomElement(){this.dom||(this.dom={},this.dom.point=document.createElement("div"),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.point.appendChild(this.dom.content),this.dom.dot=document.createElement("div"),this.dom.point.appendChild(this.dom.dot),this.dom.point["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.point.parentNode){const e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw item: parent has no foreground container element");e.appendChild(this.dom.point)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);const e=this.editable.updateTime||this.editable.updateGroup,t=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(e?" vis-editable":" vis-readonly");this.dom.point.className="vis-item vis-point".concat(t),this.dom.dot.className="vis-item vis-dot".concat(t)}}_getDomComponentsSizes(){return{dot:{width:this.dom.dot.offsetWidth,height:this.dom.dot.offsetHeight},content:{width:this.dom.content.offsetWidth,height:this.dom.content.offsetHeight},point:{width:this.dom.point.offsetWidth,height:this.dom.point.offsetHeight}}}_updateDomComponentsSizes(e){this.props.dot.width=e.dot.width,this.props.dot.height=e.dot.height,this.props.content.height=e.content.height,this.options.rtl?this.dom.content.style.marginRight="".concat(this.props.dot.width/2,"px"):this.dom.content.style.marginLeft="".concat(this.props.dot.width/2,"px"),this.width=e.point.width,this.height=e.point.height,this.dom.dot.style.top="".concat((this.height-this.props.dot.height)/2,"px");const t=this.props.dot.width,r=this.options.rtl?t/2:t/2*-1;this.dom.dot.style.transform="translateX(".concat(r,"px"),this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.point),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.point)}redraw(e){var t,r,i,s;let o;const a=[ue(t=this._createDomElement).call(t,this),ue(r=this._appendDomElement).call(r,this),ue(i=this._updateDirtyDomComponents).call(i,this),()=>{this.dirty&&(o=this._getDomComponentsSizes())},()=>{if(this.dirty){var l;ue(l=this._updateDomComponentsSizes).call(l,this)(o)}},ue(s=this._repaintDomAdditionals).call(s,this)];if(e)return a;{let l;return je(a).call(a,c=>{l=c()}),l}}repositionXY(){const e=this.options.rtl;(function(r,i,s){var o;let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(i===void 0&&s===void 0)return;const l=a?i*-1:i;if(s===void 0){r.style.transform="translateX(".concat(l,"px)");return}if(i===void 0){r.style.transform="translateY(".concat(s,"px)");return}r.style.transform=$n(o="translate(".concat(l,"px, ")).call(o,s,"px)")})(this.dom.point,this.pointX,this.pointY,e)}show(e){if(!this.displayed)return this.redraw(e)}hide(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.displayed=!1)}repositionX(){const e=this.conversion.toScreen(this.data.start);this.pointX=e,this.options.rtl?this.right=e-this.props.dot.width:this.left=e-this.props.dot.width,this.repositionXY()}repositionY(){this.options.orientation.item=="top"?this.pointY=this.top:this.pointY=this.parent.height-this.top-this.height,this.repositionXY()}getWidthLeft(){return this.props.dot.width}getWidthRight(){return this.props.dot.width}}class ou extends lf{constructor(e,t,r){if(super(e,t,r),this.props={content:{width:0}},this.overflow=!1,e){if(e.start==null)throw new Error('Property "start" missing in item '.concat(e.id));if(e.end==null)throw new Error('Property "end" missing in item '.concat(e.id))}}isVisible(e){return this.cluster?!1:this.data.start<e.end&&this.data.end>e.start}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.visibleFrame=document.createElement("div"),this.dom.visibleFrame.className="vis-item-visible-frame",this.dom.box.appendChild(this.dom.visibleFrame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dom.box["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw item: parent has no foreground container element");e.appendChild(this.dom.box)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const e=this.editable.updateTime||this.editable.updateGroup,t=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(e?" vis-editable":" vis-readonly");this.dom.box.className=this.baseClassName+t,this.dom.content.style.maxWidth="none"}}_getDomComponentsSizes(){return this.overflow=window.getComputedStyle(this.dom.frame).overflow!=="hidden",this.whiteSpace=window.getComputedStyle(this.dom.content).whiteSpace!=="nowrap",{content:{width:this.dom.content.offsetWidth},box:{height:this.dom.box.offsetHeight}}}_updateDomComponentsSizes(e){this.props.content.width=e.content.width,this.height=e.box.height,this.dom.content.style.maxWidth="",this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDeleteButton(this.dom.box),this._repaintDragCenter(),this._repaintDragLeft(),this._repaintDragRight()}redraw(e){var t,r,i,s;let o;const a=[ue(t=this._createDomElement).call(t,this),ue(r=this._appendDomElement).call(r,this),ue(i=this._updateDirtyDomComponents).call(i,this),()=>{if(this.dirty){var l;o=ue(l=this._getDomComponentsSizes).call(l,this)()}},()=>{if(this.dirty){var l;ue(l=this._updateDomComponentsSizes).call(l,this)(o)}},ue(s=this._repaintDomAdditionals).call(s,this)];if(e)return a;{let l;return je(a).call(a,c=>{l=c()}),l}}show(e){if(!this.displayed)return this.redraw(e)}hide(){if(this.displayed){const e=this.dom.box;e.parentNode&&e.parentNode.removeChild(e),this.displayed=!1}}repositionX(e){const t=this.parent.width;let r=this.conversion.toScreen(this.data.start),i=this.conversion.toScreen(this.data.end);const s=this.data.align===void 0?this.options.align:this.data.align;let o,a;this.data.limitSize!==!1&&(e===void 0||e===!0)&&(r<-t&&(r=-t),i>2*t&&(i=2*t));const l=Math.max(Math.round((i-r)*1e3)/1e3,1);switch(this.overflow?(this.options.rtl?this.right=r:this.left=r,this.width=l+this.props.content.width,a=this.props.content.width):(this.options.rtl?this.right=r:this.left=r,this.width=l,a=Math.min(i-r,this.props.content.width)),this.options.rtl?this.dom.box.style.transform="translateX(".concat(this.right*-1,"px)"):this.dom.box.style.transform="translateX(".concat(this.left,"px)"),this.dom.box.style.width="".concat(l,"px"),this.whiteSpace&&(this.height=this.dom.box.offsetHeight),s){case"left":this.dom.content.style.transform="translateX(0)";break;case"right":if(this.options.rtl){const c=Math.max(l-a,0)*-1;this.dom.content.style.transform="translateX(".concat(c,"px)")}else this.dom.content.style.transform="translateX(".concat(Math.max(l-a,0),"px)");break;case"center":if(this.options.rtl){const c=Math.max((l-a)/2,0)*-1;this.dom.content.style.transform="translateX(".concat(c,"px)")}else this.dom.content.style.transform="translateX(".concat(Math.max((l-a)/2,0),"px)");break;default:if(this.overflow?i>0?o=Math.max(-r,0):o=-a:r<0?o=-r:o=0,this.options.rtl){const c=o*-1;this.dom.content.style.transform="translateX(".concat(c,"px)")}else this.dom.content.style.transform="translateX(".concat(o,"px)")}}repositionY(){const e=this.options.orientation.item,t=this.dom.box;e=="top"?t.style.top="".concat(this.top,"px"):t.style.top="".concat(this.parent.height-this.top-this.height,"px")}_repaintDragLeft(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragLeft){const e=document.createElement("div");e.className="vis-drag-left",e.dragLeftItem=this,this.dom.box.appendChild(e),this.dom.dragLeft=e}else!this.selected&&!this.options.itemsAlwaysDraggable.range&&this.dom.dragLeft&&(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)}_repaintDragRight(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragRight){const e=document.createElement("div");e.className="vis-drag-right",e.dragRightItem=this,this.dom.box.appendChild(e),this.dom.dragRight=e}else!this.selected&&!this.options.itemsAlwaysDraggable.range&&this.dom.dragRight&&(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)}}ou.prototype.baseClassName="vis-item vis-range";class _u extends lf{constructor(e,t,r){if(super(e,t,r),this.props={content:{width:0}},this.overflow=!1,e){if(e.start==null)throw new Error('Property "start" missing in item '.concat(e.id));if(e.end==null)throw new Error('Property "end" missing in item '.concat(e.id))}}isVisible(e){return this.data.start<e.end&&this.data.end>e.start}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const e=this.parent.dom.background;if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.box)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);const e=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"");this.dom.box.className=this.baseClassName+e}}_getDomComponentsSizes(){return this.overflow=window.getComputedStyle(this.dom.content).overflow!=="hidden",{content:{width:this.dom.content.offsetWidth}}}_updateDomComponentsSizes(e){this.props.content.width=e.content.width,this.height=0,this.dirty=!1}_repaintDomAdditionals(){}redraw(e){var t,r,i,s;let o;const a=[ue(t=this._createDomElement).call(t,this),ue(r=this._appendDomElement).call(r,this),ue(i=this._updateDirtyDomComponents).call(i,this),()=>{if(this.dirty){var l;o=ue(l=this._getDomComponentsSizes).call(l,this)()}},()=>{if(this.dirty){var l;ue(l=this._updateDomComponentsSizes).call(l,this)(o)}},ue(s=this._repaintDomAdditionals).call(s,this)];if(e)return a;{let l;return je(a).call(a,c=>{l=c()}),l}}repositionY(){let e;const t=this.options.orientation.item;if(this.data.subgroup!==void 0){const r=this.data.subgroup;this.dom.box.style.height="".concat(this.parent.subgroups[r].height,"px"),t=="top"?this.dom.box.style.top="".concat(this.parent.top+this.parent.subgroups[r].top,"px"):this.dom.box.style.top="".concat(this.parent.top+this.parent.height-this.parent.subgroups[r].top-this.parent.subgroups[r].height,"px"),this.dom.box.style.bottom=""}else this.parent instanceof oZ?(e=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.bottom=t=="bottom"?"0":"",this.dom.box.style.top=t=="top"?"0":""):(e=this.parent.height,this.dom.box.style.top="".concat(this.parent.top,"px"),this.dom.box.style.bottom="");this.dom.box.style.height="".concat(e,"px")}}_u.prototype.baseClassName="vis-item vis-background";_u.prototype.stack=!1;_u.prototype.show=ou.prototype.show;_u.prototype.hide=ou.prototype.hide;_u.prototype.repositionX=ou.prototype.repositionX;class vNe{constructor(e,t){this.container=e,this.overflowMethod=t||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,t){this.x=Ti(e),this.y=Ti(t)}setText(e){e instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(e)):this.frame.innerHTML=W.xss(e)}show(e){if(e===void 0&&(e=!0),e===!0){var t=this.frame.clientHeight,r=this.frame.clientWidth,i=this.frame.parentNode.clientHeight,s=this.frame.parentNode.clientWidth,o=0,a=0;if(this.overflowMethod=="flip"||this.overflowMethod=="none"){let l=!1,c=!0;this.overflowMethod=="flip"&&(this.y-t<this.padding&&(c=!1),this.x+r>s-this.padding&&(l=!0)),l?o=this.x-r:o=this.x,c?a=this.y-t:a=this.y}else a=this.y-t,a+t+this.padding>i&&(a=i-t-this.padding),a<this.padding&&(a=this.padding),o=this.x,o+r+this.padding>s&&(o=s-r-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=a+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}}var GU={},VU;function yNe(){if(VU)return GU;VU=1;var n=Je(),e=Ll().every,t=of(),r=t("every");return n({target:"Array",proto:!0,forced:!r},{every:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),GU}var HT,KU;function bNe(){if(KU)return HT;KU=1,yNe();var n=Fn();return HT=n("Array","every"),HT}var YT,XU;function xNe(){if(XU)return YT;XU=1;var n=hn(),e=bNe(),t=Array.prototype;return YT=function(r){var i=r.every;return r===t||n(t,r)&&i===t.every?e:i},YT}var GT,QU;function wNe(){if(QU)return GT;QU=1;var n=xNe();return GT=n,GT}var VT,JU;function _Ne(){return JU||(JU=1,VT=wNe()),VT}var SNe=_Ne(),kNe=nt(SNe);class aw extends lf{constructor(e,t,r){const i=Pl({},{fitOnDoubleClick:!0},r,{editable:!1});if(super(e,t,i),this.props={content:{width:0,height:0}},!e||e.uiItems==null)throw new Error('Property "uiItems" missing in item '+e.id);this.id=jc(),this.group=e.group,this._setupRange(),this.emitter=this.data.eventEmitter,this.range=this.data.range,this.attached=!1,this.isCluster=!0,this.data.isCluster=!0}hasItems(){return this.data.uiItems&&this.data.uiItems.length&&this.attached}setUiItems(e){this.detach(),this.data.uiItems=e,this._setupRange(),this.attach()}isVisible(e){const t=this.data.end?this.data.end-this.data.start:0,r=this.width*e.getMillisecondsPerPixel(),i=Math.max(this.data.start.getTime()+t,this.data.start.getTime()+r);return this.data.start<e.end&&i>e.start&&this.hasItems()}getData(){return{isCluster:!0,id:this.id,items:this.data.items||[],data:this.data}}redraw(e){var t,r,i,s,o,a,l,c=[ue(t=this._createDomElement).call(t,this),ue(r=this._appendDomElement).call(r,this),ue(i=this._updateDirtyDomComponents).call(i,this),ue(s=function(){this.dirty&&(l=this._getDomComponentsSizes())}).call(s,this),ue(o=function(){if(this.dirty){var h;ue(h=this._updateDomComponentsSizes).call(h,this)(l)}}).call(o,this),ue(a=this._repaintDomAdditionals).call(a,this)];if(e)return c;var u;return je(c).call(c,function(h){u=h()}),u}show(){this.displayed||this.redraw()}hide(){if(this.displayed){var e=this.dom;e.box.parentNode&&e.box.parentNode.removeChild(e.box),this.options.showStipes&&(e.line.parentNode&&e.line.parentNode.removeChild(e.line),e.dot.parentNode&&e.dot.parentNode.removeChild(e.dot)),this.displayed=!1}}repositionX(){let e=this.conversion.toScreen(this.data.start),t=this.data.end?this.conversion.toScreen(this.data.end):0;if(t)this.repositionXWithRanges(e,t);else{let r=this.data.align===void 0?this.options.align:this.data.align;this.repositionXWithoutRanges(e,r)}this.options.showStipes&&(this.dom.line.style.display=this._isStipeVisible()?"block":"none",this.dom.dot.style.display=this._isStipeVisible()?"block":"none",this._isStipeVisible()&&this.repositionStype(e,t))}repositionStype(e,t){this.dom.line.style.display="block",this.dom.dot.style.display="block";const r=this.dom.line.offsetWidth,i=this.dom.dot.offsetWidth;if(t){const s=r+e+(t-e)/2,o=s-i/2,a=this.options.rtl?s*-1:s,l=this.options.rtl?o*-1:o;this.dom.line.style.transform="translateX(".concat(a,"px)"),this.dom.dot.style.transform="translateX(".concat(l,"px)")}else{const s=this.options.rtl?e*-1:e,o=this.options.rtl?(e-i/2)*-1:e-i/2;this.dom.line.style.transform="translateX(".concat(s,"px)"),this.dom.dot.style.transform="translateX(".concat(o,"px)")}}repositionXWithoutRanges(e,t){t=="right"?this.options.rtl?(this.right=e-this.width,this.dom.box.style.right=this.right+"px"):(this.left=e-this.width,this.dom.box.style.left=this.left+"px"):t=="left"?this.options.rtl?(this.right=e,this.dom.box.style.right=this.right+"px"):(this.left=e,this.dom.box.style.left=this.left+"px"):this.options.rtl?(this.right=e-this.width/2,this.dom.box.style.right=this.right+"px"):(this.left=e-this.width/2,this.dom.box.style.left=this.left+"px")}repositionXWithRanges(e,t){let r=Math.round(Math.max(t-e+.5,1));this.options.rtl?this.right=e:this.left=e,this.width=Math.max(r,this.minWidth||0),this.options.rtl?this.dom.box.style.right=this.right+"px":this.dom.box.style.left=this.left+"px",this.dom.box.style.width=r+"px"}repositionY(){var e=this.options.orientation.item,t=this.dom.box;if(e=="top"?t.style.top=(this.top||0)+"px":t.style.top=(this.parent.height-this.top-this.height||0)+"px",this.options.showStipes){if(e=="top")this.dom.line.style.top="0",this.dom.line.style.height=this.parent.top+this.top+1+"px",this.dom.line.style.bottom="";else{var r=this.parent.itemSet.props.height,i=r-this.parent.top-this.parent.height+this.top;this.dom.line.style.top=r-i+"px",this.dom.line.style.bottom="0"}this.dom.dot.style.top=-this.dom.dot.offsetHeight/2+"px"}}getWidthLeft(){return this.width/2}getWidthRight(){return this.width/2}move(){this.repositionX(),this.repositionY()}attach(){var e;for(let t of this.data.uiItems)t.cluster=this;this.data.items=Ut(e=this.data.uiItems).call(e,t=>t.data),this.attached=!0,this.dirty=!0}detach(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.hasItems()){for(let t of this.data.uiItems)delete t.cluster;this.attached=!1,e&&this.group&&(this.group.remove(this),this.group=null),this.data.items=[],this.dirty=!0}}_onDoubleClick(){this._fit()}_setupRange(){var e,t,r;const i=Ut(e=this.data.uiItems).call(e,a=>({start:a.data.start.valueOf(),end:a.data.end?a.data.end.valueOf():a.data.start.valueOf()}));this.data.min=Math.min(...Ut(i).call(i,a=>Math.min(a.start,a.end||a.start))),this.data.max=Math.max(...Ut(i).call(i,a=>Math.max(a.start,a.end||a.start)));const s=Ut(t=this.data.uiItems).call(t,a=>a.center),o=sw(s).call(s,(a,l)=>a+l,0)/this.data.uiItems.length;CD(r=this.data.uiItems).call(r,a=>a.data.end)?(this.data.start=new Date(this.data.min),this.data.end=new Date(this.data.max)):(this.data.start=new Date(o),this.data.end=null)}_getUiItems(){if(this.data.uiItems&&this.data.uiItems.length){var e;return yt(e=this.data.uiItems).call(e,t=>t.cluster===this)}return[]}_createDomElement(){if(!this.dom){if(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.options.showStipes&&(this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-cluster-line",this.dom.line.style.display="none",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-cluster-dot",this.dom.dot.style.display="none"),this.options.fitOnDoubleClick){var e;this.dom.box.ondblclick=ue(e=aw.prototype._onDoubleClick).call(e,this)}this.dom.box["vis-item"]=this,this.dirty=!0}}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const r=this.parent.dom.foreground;if(!r)throw new Error("Cannot redraw item: parent has no foreground container element");r.appendChild(this.dom.box)}const e=this.parent.dom.background;if(this.options.showStipes){if(!this.dom.line.parentNode){if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){var t=this.parent.dom.axis;if(!e)throw new Error("Cannot redraw item: parent has no axis container element");t.appendChild(this.dom.dot)}}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const e=this.baseClassName+" "+(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+" vis-readonly";this.dom.box.className="vis-item "+e,this.options.showStipes&&(this.dom.line.className="vis-item vis-cluster-line "+(this.selected?" vis-selected":""),this.dom.dot.className="vis-item vis-cluster-dot "+(this.selected?" vis-selected":"")),this.data.end&&(this.dom.content.style.maxWidth="none")}}_getDomComponentsSizes(){const e={previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}};return this.options.showStipes&&(e.dot={height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},e.line={width:this.dom.line.offsetWidth}),e}_updateDomComponentsSizes(e){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.data.end?this.minWidth=e.box.width:this.width=e.box.width,this.height=e.box.height,this.options.rtl?this.dom.box.style.right=e.previous.right:this.dom.box.style.left=e.previous.left,this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box)}_isStipeVisible(){return this.minWidth>=this.width||!this.data.end}_getFitRange(){const e=.05*(this.data.max-this.data.min)/2;return{fitStart:this.data.min-e,fitEnd:this.data.max+e}}_fit(){if(this.emitter){const{fitStart:e,fitEnd:t}=this._getFitRange(),r={start:new Date(e),end:new Date(t),animation:!0};this.emitter.emit("fit",r)}}_getItemData(){return this.data}}aw.prototype.baseClassName="vis-item vis-range vis-cluster";const CNe="__ungrouped__",ENe={UNGROUPED:CNe};class TNe{constructor(e){this.itemSet=e,this.groups={},this.cache={},this.cache[-1]=[]}createClusterItem(e,t,r){return new aw(e,t,r)}setItems(e,t){this.items=e||[],this.dataChanged=!0,this.applyOnChangedLevel=!1,t&&t.applyOnChangedLevel&&(this.applyOnChangedLevel=t.applyOnChangedLevel)}updateData(){this.dataChanged=!0,this.applyOnChangedLevel=!1}getClusters(e,t,r){let{maxItems:i,clusterCriteria:s}=typeof r=="boolean"?{}:r;s||(s=()=>!0),i=i||1;let o=-1,a=2,l=0;if(t>0){if(t>=1)return[];o=Math.abs(Math.round(Math.log(100/t)/Math.log(a))),l=Math.abs(Math.pow(a,o))}if(this.dataChanged){const u=o!=this.cacheLevel;(this.applyOnChangedLevel?u:!0)&&(this._dropLevelsCache(),this._filterData())}this.cacheLevel=o;let c=this.cache[o];if(!c){c=[];for(let u in this.groups){if(!Object.prototype.hasOwnProperty.call(this.groups,u))continue;const h=this.groups[u],d=h.length;let f=0;for(;f<d;){let m=h[f],g=1,v=f-1;for(;v>=0&&m.center-h[v].center<l/2;)!h[v].cluster&&s(m.data,h[v].data)&&g++,v--;let y=f+1;for(;y<h.length&&h[y].center-m.center<l/2;)s(m.data,h[y].data)&&g++,y++;let b=c.length-1;for(;b>=0&&m.center-c[b].center<l;)m.group==c[b].group&&s(m.data,c[b].data)&&g++,b--;if(g>i){const w=g-i+1,S=[];let _=f;for(;S.length<w&&_<h.length;)s(h[f].data,h[_].data)&&S.push(h[_]),_++;const E=this.itemSet.getGroupId(m.data),C=this.itemSet.groups[E]||this.itemSet.groups[ENe.UNGROUPED];let T=this._getClusterForItems(S,C,e,r);c.push(T),f+=w}else delete m.cluster,f+=1}}this.cache[o]=c}return c}_filterData(){const e={};this.groups=e;for(const r of iD(this.items)){const i=r.parent?r.parent.groupId:"";let s=e[i];s||(s=[],e[i]=s),s.push(r),r.data.start&&(r.data.end?r.center=(r.data.start.valueOf()+r.data.end.valueOf())/2:r.center=r.data.start.valueOf())}for(let r in e){var t;Object.prototype.hasOwnProperty.call(e,r)&&Un(t=e[r]).call(t,(i,s)=>i.center-s.center)}this.dataChanged=!1}_getClusterForItems(e,t,r,i){var s;const o=Ut(s=r||[]).call(s,m=>{var g;return{cluster:m,itemsIds:new Fc(Ut(g=m.data.uiItems).call(g,v=>v.id))}});let a;if(o.length){for(let m of o)if(m.itemsIds.size===e.length&&kNe(e).call(e,g=>m.itemsIds.has(g.id))){a=m.cluster;break}}if(a)return a.setUiItems(e),a.group!==t&&(a.group&&a.group.remove(a),t&&(t.add(a),a.group=t)),a;let l=i.titleTemplate||"";const c={toScreen:this.itemSet.body.util.toScreen,toTime:this.itemSet.body.util.toTime},u=l.replace(/{count}/,e.length),h='<div title="'+u+'">'+e.length+"</div>",d=Pl({},i,this.itemSet.options),f={content:h,title:u,group:t,uiItems:e,eventEmitter:this.itemSet.body.emitter,range:this.itemSet.body.range};return a=this.createClusterItem(f,c,d),t&&(t.add(a),a.group=t),a.attach(),a}_dropLevelsCache(){this.cache={},this.cacheLevel=-1,this.cache[this.cacheLevel]=[]}}const Fu="__ungrouped__",$a="__background__";class Od extends $l{constructor(e,t){super(),this.body=e,this.defaultOptions={type:null,orientation:{item:"bottom"},align:"auto",stack:!0,stackSubgroups:!0,groupOrderSwap(i,s){const o=s.order;s.order=i.order,i.order=o},groupOrder:"order",selectable:!0,multiselect:!1,longSelectPressTime:251,itemsAlwaysDraggable:{item:!1,range:!1},editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1,overrideItems:!1},groupEditable:{order:!1,add:!1,remove:!1},snap:su.snap,onDropObjectOnItem(i,s,o){o(s)},onAdd(i,s){s(i)},onUpdate(i,s){s(i)},onMove(i,s){s(i)},onRemove(i,s){s(i)},onMoving(i,s){s(i)},onAddGroup(i,s){s(i)},onMoveGroup(i,s){s(i)},onRemoveGroup(i,s){s(i)},margin:{item:{horizontal:10,vertical:10},axis:20},showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:500},tooltipOnItemUpdateTime:!1},this.options=W.extend({},this.defaultOptions),this.options.rtl=t.rtl,this.options.onTimeout=t.onTimeout,this.conversion={toScreen:e.util.toScreen,toTime:e.util.toTime},this.dom={},this.props={},this.hammer=null;const r=this;this.itemsData=null,this.groupsData=null,this.itemsSettingTime=null,this.initialItemSetDrawn=!1,this.userContinueNotBail=null,this.sequentialSelection=!1,this.itemListeners={add(i,s){r._onAdd(s.items),r.options.cluster&&r.clusterGenerator.setItems(r.items,{applyOnChangedLevel:!1}),r.redraw()},update(i,s){r._onUpdate(s.items),r.options.cluster&&r.clusterGenerator.setItems(r.items,{applyOnChangedLevel:!1}),r.redraw()},remove(i,s){r._onRemove(s.items),r.options.cluster&&r.clusterGenerator.setItems(r.items,{applyOnChangedLevel:!1}),r.redraw()}},this.groupListeners={add(i,s,o){if(r._onAddGroups(s.items),r.groupsData&&r.groupsData.length>0){var a;const l=r.groupsData.getDataSet();je(a=l.get()).call(a,c=>{if(c.nestedGroups){var u;c.showNested!=!1&&(c.showNested=!0);let h=[];je(u=c.nestedGroups).call(u,d=>{const f=l.get(d);f&&(f.nestedInGroup=c.id,c.showNested==!1&&(f.visible=!1),h=$n(h).call(h,f))}),l.update(h,o)}})}},update(i,s){r._onUpdateGroups(s.items)},remove(i,s){r._onRemoveGroups(s.items)}},this.items={},this.groups={},this.groupIds=[],this.selection=[],this.popup=null,this.popupTimer=null,this.touchParams={},this.groupTouchParams={group:null,isDragging:!1},this._create(),this.setOptions(t),this.clusters=[]}_create(){var e,t,r,i,s,o,a,l,c,u,h,d,f,m,g;const v=document.createElement("div");v.className="vis-itemset",v["vis-itemset"]=this,this.dom.frame=v;const y=document.createElement("div");y.className="vis-background",v.appendChild(y),this.dom.background=y;const b=document.createElement("div");b.className="vis-foreground",v.appendChild(b),this.dom.foreground=b;const w=document.createElement("div");w.className="vis-axis",this.dom.axis=w;const S=document.createElement("div");S.className="vis-labelset",this.dom.labelSet=S,this._updateUngrouped();const _=new oZ($a,null,this);_.show(),this.groups[$a]=_,this.hammer=new Ur(this.body.dom.centerContainer),this.hammer.on("hammer.input",E=>{E.isFirst&&this._onTouch(E)}),this.hammer.on("panstart",ue(e=this._onDragStart).call(e,this)),this.hammer.on("panmove",ue(t=this._onDrag).call(t,this)),this.hammer.on("panend",ue(r=this._onDragEnd).call(r,this)),this.hammer.get("pan").set({threshold:5,direction:Ur.ALL}),this.hammer.get("press").set({time:1e4}),this.hammer.on("tap",ue(i=this._onSelectItem).call(i,this)),this.hammer.on("press",ue(s=this._onMultiSelectItem).call(s,this)),this.hammer.get("press").set({time:1e4}),this.hammer.on("doubletap",ue(o=this._onAddItem).call(o,this)),this.options.rtl?this.groupHammer=new Ur(this.body.dom.rightContainer):this.groupHammer=new Ur(this.body.dom.leftContainer),this.groupHammer.on("tap",ue(a=this._onGroupClick).call(a,this)),this.groupHammer.on("panstart",ue(l=this._onGroupDragStart).call(l,this)),this.groupHammer.on("panmove",ue(c=this._onGroupDrag).call(c,this)),this.groupHammer.on("panend",ue(u=this._onGroupDragEnd).call(u,this)),this.groupHammer.get("pan").set({threshold:5,direction:Ur.DIRECTION_VERTICAL}),this.body.dom.centerContainer.addEventListener("mouseover",ue(h=this._onMouseOver).call(h,this)),this.body.dom.centerContainer.addEventListener("mouseout",ue(d=this._onMouseOut).call(d,this)),this.body.dom.centerContainer.addEventListener("mousemove",ue(f=this._onMouseMove).call(f,this)),this.body.dom.centerContainer.addEventListener("contextmenu",ue(m=this._onDragEnd).call(m,this)),this.body.dom.centerContainer.addEventListener("mousewheel",ue(g=this._onMouseWheel).call(g,this)),this.show()}setOptions(e){if(e){var t,r;const i=["type","rtl","align","order","stack","stackSubgroups","selectable","multiselect","sequentialSelection","multiselectPerGroup","longSelectPressTime","groupOrder","dataAttributes","template","groupTemplate","visibleFrameTemplate","hide","snap","groupOrderSwap","showTooltips","tooltip","tooltipOnItemUpdateTime","groupHeightMode","onTimeout"];W.selectiveExtend(i,this.options,e),"itemsAlwaysDraggable"in e&&(typeof e.itemsAlwaysDraggable=="boolean"?(this.options.itemsAlwaysDraggable.item=e.itemsAlwaysDraggable,this.options.itemsAlwaysDraggable.range=!1):typeof e.itemsAlwaysDraggable=="object"&&(W.selectiveExtend(["item","range"],this.options.itemsAlwaysDraggable,e.itemsAlwaysDraggable),this.options.itemsAlwaysDraggable.item||(this.options.itemsAlwaysDraggable.range=!1))),"sequentialSelection"in e&&typeof e.sequentialSelection=="boolean"&&(this.options.sequentialSelection=e.sequentialSelection),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation.item=e.orientation==="top"?"top":"bottom":typeof e.orientation=="object"&&"item"in e.orientation&&(this.options.orientation.item=e.orientation.item)),"margin"in e&&(typeof e.margin=="number"?(this.options.margin.axis=e.margin,this.options.margin.item.horizontal=e.margin,this.options.margin.item.vertical=e.margin):typeof e.margin=="object"&&(W.selectiveExtend(["axis"],this.options.margin,e.margin),"item"in e.margin&&(typeof e.margin.item=="number"?(this.options.margin.item.horizontal=e.margin.item,this.options.margin.item.vertical=e.margin.item):typeof e.margin.item=="object"&&W.selectiveExtend(["horizontal","vertical"],this.options.margin.item,e.margin.item)))),je(t=["locale","locales"]).call(t,o=>{o in e&&(this.options[o]=e[o])}),"editable"in e&&(typeof e.editable=="boolean"?(this.options.editable.updateTime=e.editable,this.options.editable.updateGroup=e.editable,this.options.editable.add=e.editable,this.options.editable.remove=e.editable,this.options.editable.overrideItems=!1):typeof e.editable=="object"&&W.selectiveExtend(["updateTime","updateGroup","add","remove","overrideItems"],this.options.editable,e.editable)),"groupEditable"in e&&(typeof e.groupEditable=="boolean"?(this.options.groupEditable.order=e.groupEditable,this.options.groupEditable.add=e.groupEditable,this.options.groupEditable.remove=e.groupEditable):typeof e.groupEditable=="object"&&W.selectiveExtend(["order","add","remove"],this.options.groupEditable,e.groupEditable));const s=o=>{const a=e[o];if(a){if(typeof a!="function"){var l;throw new Error($n(l="option ".concat(o," must be a function ")).call(l,o,"(item, callback)"))}this.options[o]=a}};je(r=["onDropObjectOnItem","onAdd","onUpdate","onRemove","onMove","onMoving","onAddGroup","onMoveGroup","onRemoveGroup"]).call(r,s),e.cluster?(Pl(this.options,{cluster:e.cluster}),this.clusterGenerator||(this.clusterGenerator=new TNe(this)),this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.clusterGenerator?(this._detachAllClusters(),this.clusters=[],this.clusterGenerator=null,this.options.cluster=void 0,this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.markDirty()}}markDirty(e){this.groupIds=[],e&&(e.refreshItems&&je(W).call(W,this.items,t=>{t.dirty=!0,t.displayed&&t.redraw()}),e.restackGroups&&je(W).call(W,this.groups,(t,r)=>{r!==$a&&(t.stackDirty=!0)}))}destroy(){this.clearPopupTimer(),this.hide(),this.setItems(null),this.setGroups(null),this.hammer&&this.hammer.destroy(),this.groupHammer&&this.groupHammer.destroy(),this.hammer=null,this.body=null,this.conversion=null}hide(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)}show(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||(this.options.rtl?this.body.dom.right.appendChild(this.dom.labelSet):this.body.dom.left.appendChild(this.dom.labelSet))}setPopupTimer(e){if(this.clearPopupTimer(),e){const t=this.options.tooltip.delay||typeof this.options.tooltip.delay=="number"?this.options.tooltip.delay:500;this.popupTimer=fi(function(){e.show()},t)}}clearPopupTimer(){this.popupTimer!=null&&(clearTimeout(this.popupTimer),this.popupTimer=null)}setSelection(e){var t;e==null&&(e=[]),It(e)||(e=[e]);const r=yt(t=this.selection).call(t,i=>Xt(e).call(e,i)===-1);for(let i of r){const s=this.getItemById(i);s&&s.unselect()}this.selection=[...e];for(let i of e){const s=this.getItemById(i);s&&s.select()}}getSelection(){var e;return $n(e=this.selection).call(e,[])}getVisibleItems(){const e=this.body.range.getRange();let t,r;this.options.rtl?(t=this.body.util.toScreen(e.start),r=this.body.util.toScreen(e.end)):(r=this.body.util.toScreen(e.start),t=this.body.util.toScreen(e.end));const i=[];for(const s in this.groups){if(!Object.prototype.hasOwnProperty.call(this.groups,s))continue;const o=this.groups[s],a=o.isVisible?o.visibleItems:[];for(const l of a)this.options.rtl?l.right<r&&l.right+l.width>t&&i.push(l.id):l.left<t&&l.left+l.width>r&&i.push(l.id)}return i}getItemsAtCurrentTime(e){let t,r;this.options.rtl?(t=this.body.util.toScreen(e),r=this.body.util.toScreen(e)):(r=this.body.util.toScreen(e),t=this.body.util.toScreen(e));const i=[];for(const s in this.groups){if(!Object.prototype.hasOwnProperty.call(this.groups,s))continue;const o=this.groups[s],a=o.isVisible?o.visibleItems:[];for(const l of a)this.options.rtl?l.right<r&&l.right+l.width>t&&i.push(l.id):l.left<t&&l.left+l.width>r&&i.push(l.id)}return i}getVisibleGroups(){const e=[];for(const t in this.groups){if(!Object.prototype.hasOwnProperty.call(this.groups,t))continue;this.groups[t].isVisible&&e.push(t)}return e}getItemById(e){var t;return this.items[e]||sNe(t=this.clusters).call(t,r=>r.id===e)}_deselect(e){const t=this.selection;for(let r=0,i=t.length;r<i;r++)if(t[r]==e){Wr(t).call(t,r,1);break}}redraw(){const e=this.options.margin,t=this.body.range,r=W.option.asSize,i=this.options,s=i.orientation.item;let o=!1;const a=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.options.rtl?this.props.right=this.body.domProps.right.width+this.body.domProps.border.right:this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,a.className="vis-itemset",this.options.cluster&&this._clusterItems(),o=this._orderGroups()||o;const l=t.end-t.start,c=l!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth,u=t.start!=this.lastRangeStart,h=i.stack!=this.lastStack,d=i.stackSubgroups!=this.lastStackSubgroups,f=c||u||h||d;this.lastVisibleInterval=l,this.lastRangeStart=t.start,this.lastStack=i.stack,this.lastStackSubgroups=i.stackSubgroups,this.props.lastWidth=this.props.width;const m=this._firstGroup(),g={item:e.item,axis:e.axis},v={item:e.item,axis:e.item.vertical/2};let y=0;const b=e.axis+e.item.vertical;this.groups[$a].redraw(t,v,f);const w={};let S=0;if(je(W).call(W,this.groups,(E,C)=>{if(C===$a)return;const T=E==m?g:v,O=!0;w[C]=E.redraw(t,T,f,O),S=w[C].length}),S>0){const E={};for(let C=0;C<S;C++)je(W).call(W,w,(T,O)=>{E[O]=T[C]()});je(W).call(W,this.groups,(C,T)=>{if(T===$a)return;o=E[T]||o,y+=C.height}),y=Math.max(y,b)}return y=Math.max(y,b),a.style.height=r(y),this.props.width=a.offsetWidth,this.props.height=y,this.dom.axis.style.top=r(s=="top"?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.options.rtl?this.dom.axis.style.right="0":this.dom.axis.style.left="0",this.hammer.get("press").set({time:this.options.longSelectPressTime}),this.initialItemSetDrawn=!0,o=this._isResized()||o,o}_firstGroup(){const e=this.options.orientation.item=="top"?0:this.groupIds.length-1,t=this.groupIds[e];return this.groups[t]||this.groups[Fu]||null}_updateUngrouped(){let e=this.groups[Fu],t,r;if(this.groupsData){if(e){e.dispose(),delete this.groups[Fu];for(r in this.items){if(!Object.prototype.hasOwnProperty.call(this.items,r))continue;t=this.items[r],t.parent&&t.parent.remove(t);const i=this.getGroupId(t.data),s=this.groups[i];s&&s.add(t)||t.hide()}}}else if(!e){e=new SP(null,null,this),this.groups[Fu]=e;for(r in this.items)Object.prototype.hasOwnProperty.call(this.items,r)&&(t=this.items[r],e.add(t));e.show()}}getLabelSet(){return this.dom.labelSet}setItems(e){this.itemsSettingTime=new Date;const t=this;let r;const i=this.itemsData;if(!e)this.itemsData=null;else if(iu(e))this.itemsData=Sb(e);else throw new TypeError("Data must implement the interface of DataSet or DataView");if(i&&(je(W).call(W,this.itemListeners,(s,o)=>{i.off(o,s)}),i.dispose(),r=i.getIds(),this._onRemove(r)),this.itemsData){const s=this.id;je(W).call(W,this.itemListeners,(o,a)=>{t.itemsData.on(a,o,s)}),r=this.itemsData.getIds(),this._onAdd(r),this._updateUngrouped()}this.body.emitter.emit("_change",{queue:!0})}getItems(){return this.itemsData!=null?this.itemsData.rawDS:null}setGroups(e){const t=this;let r;if(this.groupsData&&(je(W).call(W,this.groupListeners,(s,o)=>{t.groupsData.off(o,s)}),r=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(r)),!e)this.groupsData=null;else if(iu(e))this.groupsData=e;else throw new TypeError("Data must implement the interface of DataSet or DataView");if(this.groupsData){var i;const s=this.groupsData.getDataSet();je(i=s.get()).call(i,a=>{if(a.nestedGroups){var l;je(l=a.nestedGroups).call(l,c=>{const u=s.get(c);u.nestedInGroup=a.id,a.showNested==!1&&(u.visible=!1),s.update(u)})}});const o=this.id;je(W).call(W,this.groupListeners,(a,l)=>{t.groupsData.on(l,a,o)}),r=this.groupsData.getIds(),this._onAddGroups(r)}this._updateUngrouped(),this._order(),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems(),this.markDirty({refreshItems:!0,restackGroups:!0})),this.body.emitter.emit("_change",{queue:!0})}getGroups(){return this.groupsData}removeItem(e){const t=this.itemsData.get(e);t&&this.options.onRemove(t,r=>{r&&this.itemsData.remove(e)})}_getType(e){return e.type||this.options.type||(e.end?"range":"box")}getGroupId(e){return this._getType(e)=="background"&&e.group==null?$a:this.groupsData?e.group:Fu}_onUpdate(e){const t=this;je(e).call(e,r=>{const i=t.itemsData.get(r);let s=t.items[r];const o=i?t._getType(i):null,a=Od.types[o];let l;if(s&&(!a||!(s instanceof a)?(l=s.selected,t._removeItem(s),s=null):t._updateItem(s,i)),!s&&i)if(a)s=new a(i,t.conversion,t.options),s.id=r,t._addItem(s),l&&(this.selection.push(r),s.select());else throw new TypeError('Unknown item type "'.concat(o,'"'))}),this._order(),this.options.cluster&&(this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this._clusterItems()),this.body.emitter.emit("_change",{queue:!0})}_onRemove(e){let t=0;const r=this;je(e).call(e,i=>{const s=r.items[i];s&&(t++,r._removeItem(s))}),t&&(this._order(),this.body.emitter.emit("_change",{queue:!0}))}_order(){je(W).call(W,this.groups,e=>{e.order()})}_onUpdateGroups(e){this._onAddGroups(e)}_onAddGroups(e){const t=this;je(e).call(e,r=>{const i=t.groupsData.get(r);let s=t.groups[r];if(s)s.setData(i);else{if(r==Fu||r==$a)throw new Error("Illegal group id. ".concat(r," is a reserved id."));const o=$g(t.options);W.extend(o,{height:null}),s=new SP(r,i,t),t.groups[r]=s;for(const a in t.items){if(!Object.prototype.hasOwnProperty.call(t.items,a))continue;const l=t.items[a];l.data.group==r&&s.add(l)}s.order(),s.show()}}),this.body.emitter.emit("_change",{queue:!0})}_onRemoveGroups(e){je(e).call(e,t=>{const r=this.groups[t];r&&(r.dispose(),delete this.groups[t])}),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems()),this.markDirty({restackGroups:!!this.options.cluster}),this.body.emitter.emit("_change",{queue:!0})}_orderGroups(){if(this.groupsData){let e=this.groupsData.getIds({order:this.options.groupOrder});e=this._orderNestedGroups(e);const t=!W.equalArray(e,this.groupIds);if(t){const r=this.groups;je(e).call(e,i=>{r[i].hide()}),je(e).call(e,i=>{r[i].show()}),this.groupIds=e}return t}else return!1}_orderNestedGroups(e){function t(i,s){let o=[];return je(s).call(s,a=>{if(o.push(a),i.groupsData.get(a).nestedGroups){var c;const u=Ut(c=i.groupsData.get({filter(h){return h.nestedInGroup==a},order:i.options.groupOrder})).call(c,h=>h.id);o=$n(o).call(o,t(i,u))}}),o}const r=yt(e).call(e,i=>!this.groupsData.get(i).nestedInGroup);return t(this,r)}_addItem(e){this.items[e.id]=e;const t=this.getGroupId(e.data),r=this.groups[t];r?r&&r.data&&r.data.showNested&&(e.groupShowing=!0):e.groupShowing=!1,r&&r.add(e)}_updateItem(e,t){e.setData(t);const r=this.getGroupId(e.data),i=this.groups[r];i?i&&i.data&&i.data.showNested&&(e.groupShowing=!0):e.groupShowing=!1}_removeItem(e){var t,r;e.hide(),delete this.items[e.id];const i=Xt(t=this.selection).call(t,e.id);i!=-1&&Wr(r=this.selection).call(r,i,1),e.parent&&e.parent.remove(e),this.popup!=null&&this.popup.hide()}_constructByEndArray(e){const t=[];for(let r=0;r<e.length;r++)e[r]instanceof ou&&t.push(e[r]);return t}_onTouch(e){this.touchParams.item=this.itemFromTarget(e),this.touchParams.dragLeftItem=e.target.dragLeftItem||!1,this.touchParams.dragRightItem=e.target.dragRightItem||!1,this.touchParams.itemProps=null}_getGroupIndex(e){for(let t=0;t<this.groupIds.length;t++)if(e==this.groupIds[t])return t}_onDragStart(e){if(this.touchParams.itemIsDragging)return;const t=this.touchParams.item||null,r=this;let i;if(t&&(t.selected||this.options.itemsAlwaysDraggable.item)){if(this.options.editable.overrideItems&&!this.options.editable.updateTime&&!this.options.editable.updateGroup||t.editable!=null&&!t.editable.updateTime&&!t.editable.updateGroup&&!this.options.editable.overrideItems)return;const s=this.touchParams.dragLeftItem,o=this.touchParams.dragRightItem;if(this.touchParams.itemIsDragging=!0,this.touchParams.selectedItem=t,s)i={item:s,initialX:e.center.x,dragLeft:!0,data:this._cloneItemData(t.data)},this.touchParams.itemProps=[i];else if(o)i={item:o,initialX:e.center.x,dragRight:!0,data:this._cloneItemData(t.data)},this.touchParams.itemProps=[i];else if(this.options.editable.add&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey))this._onDragStartAddItem(e);else{this.groupIds.length<1&&this.redraw();const a=this._getGroupIndex(t.data.group),l=this.options.itemsAlwaysDraggable.item&&!t.selected?[t.id]:this.getSelection();this.touchParams.itemProps=Ut(l).call(l,c=>{const u=r.items[c],h=r._getGroupIndex(u.data.group);return{item:u,initialX:e.center.x,groupOffset:a-h,data:this._cloneItemData(u.data)}})}e.stopPropagation()}else this.options.editable.add&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey)&&this._onDragStartAddItem(e)}_onDragStartAddItem(e){const t=this.options.snap||null,r=this.dom.frame.getBoundingClientRect(),i=this.options.rtl?r.right-e.center.x+10:e.center.x-r.left-10,s=this.body.util.toTime(i),o=this.body.util.getScale(),a=this.body.util.getStep(),l=t?t(s,o,a):s,u={type:"range",start:l,end:l,content:"new item"},h=jc();u[this.itemsData.idProp]=h;const d=this.groupFromTarget(e);d&&(u.group=d.groupId);const f=new ou(u,this.conversion,this.options);f.id=h,f.data=this._cloneItemData(u),this._addItem(f),this.touchParams.selectedItem=f;const m={item:f,initialX:e.center.x,data:f.data};this.options.rtl?m.dragLeft=!0:m.dragRight=!0,this.touchParams.itemProps=[m],e.stopPropagation()}_onDrag(e){if(this.popup!=null&&this.options.showTooltips&&!this.popup.hidden){const r=this.body.dom.centerContainer,i=r.getBoundingClientRect();this.popup.setPosition(e.center.x-i.left+r.offsetLeft,e.center.y-i.top+r.offsetTop),this.popup.show()}if(this.touchParams.itemProps){var t;e.stopPropagation();const r=this,i=this.options.snap||null,s=this.body.dom.root.offsetLeft,o=this.options.rtl?s+this.body.domProps.right.width:s+this.body.domProps.left.width,a=this.body.util.getScale(),l=this.body.util.getStep(),c=this.touchParams.selectedItem,u=(this.options.editable.overrideItems||c.editable==null)&&this.options.editable.updateGroup||!this.options.editable.overrideItems&&c.editable!=null&&c.editable.updateGroup;let h=null;if(u&&c&&c.data.group!=null){const d=r.groupFromTarget(e);d&&(h=this._getGroupIndex(d.groupId))}je(t=this.touchParams.itemProps).call(t,d=>{const f=r.body.util.toTime(e.center.x-o),m=r.body.util.toTime(d.initialX-o);let g,v,y,b,w;this.options.rtl?g=-(f-m):g=f-m;let S=this._cloneItemData(d.item.data);if(d.item.editable!=null&&!d.item.editable.updateTime&&!d.item.editable.updateGroup&&!r.options.editable.overrideItems)return;if((this.options.editable.overrideItems||c.editable==null)&&this.options.editable.updateTime||!this.options.editable.overrideItems&&c.editable!=null&&c.editable.updateTime){if(d.dragLeft)this.options.rtl?S.end!=null&&(y=W.convert(d.data.end,"Date"),w=new Date(y.valueOf()+g),S.end=i?i(w,a,l):w):S.start!=null&&(v=W.convert(d.data.start,"Date"),b=new Date(v.valueOf()+g),S.start=i?i(b,a,l):b);else if(d.dragRight)this.options.rtl?S.start!=null&&(v=W.convert(d.data.start,"Date"),b=new Date(v.valueOf()+g),S.start=i?i(b,a,l):b):S.end!=null&&(y=W.convert(d.data.end,"Date"),w=new Date(y.valueOf()+g),S.end=i?i(w,a,l):w);else if(S.start!=null)if(v=W.convert(d.data.start,"Date").valueOf(),b=new Date(v+g),S.end!=null){y=W.convert(d.data.end,"Date");const E=y.valueOf()-v.valueOf();S.start=i?i(b,a,l):b,S.end=new Date(S.start.valueOf()+E)}else S.start=i?i(b,a,l):b}if(u&&!d.dragLeft&&!d.dragRight&&h!=null&&S.group!=null){let E=h-d.groupOffset;E=Math.max(0,E),E=Math.min(r.groupIds.length-1,E),S.group=r.groupIds[E]}S=this._cloneItemData(S),r.options.onMoving(S,E=>{E&&d.item.setData(this._cloneItemData(E,"Date"))})}),this.body.emitter.emit("_change")}}_moveToGroup(e,t){const r=this.groups[t];if(r&&r.groupId!=e.data.group){const i=e.parent;i.remove(e),i.order(),e.data.group=r.groupId,r.add(e),r.order()}}_onDragEnd(e){if(this.touchParams.itemIsDragging=!1,this.touchParams.itemProps){e.stopPropagation();const t=this,r=this.touchParams.itemProps;this.touchParams.itemProps=null,je(r).call(r,i=>{const s=i.item.id;if(!(t.itemsData.get(s)!=null))t.options.onAdd(i.item.data,a=>{t._removeItem(i.item),a&&t.itemsData.add(a),t.body.emitter.emit("_change")});else{const a=this._cloneItemData(i.item.data);t.options.onMove(a,l=>{l?(l[this.itemsData.idProp]=s,this.itemsData.update(l)):(i.item.setData(i.data),t.body.emitter.emit("_change"))})}})}}_onGroupClick(e){const t=this.groupFromTarget(e);fi(()=>{this.toggleGroupShowNested(t)},1)}toggleGroupShowNested(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(!e||!e.nestedGroups)return;const r=this.groupsData.getDataSet();t!=null?e.showNested=!!t:e.showNested=!e.showNested;let i=r.get(e.groupId);i.showNested=e.showNested;let s=e.nestedGroups,o=s;for(;o.length>0;){let u=o;o=[];for(let h=0;h<u.length;h++){let d=r.get(u[h]);d.nestedGroups&&(o=$n(o).call(o,d.nestedGroups))}o.length>0&&(s=$n(s).call(s,o))}var a;if(i.showNested){var l=r.get(i.nestedGroups);for(let u=0;u<l.length;u++){let h=l[u];h.nestedGroups&&h.nestedGroups.length>0&&(h.showNested==null||h.showNested==!0)&&l.push(...r.get(h.nestedGroups))}a=Ut(l).call(l,function(u){return u.visible==null&&(u.visible=!0),u.visible=!!i.showNested,u})}else{var c;a=Ut(c=r.get(s)).call(c,function(u){return u.visible==null&&(u.visible=!0),u.visible=!!i.showNested,u})}r.update($n(a).call(a,i)),i.showNested?(W.removeClassName(e.dom.label,"collapsed"),W.addClassName(e.dom.label,"expanded")):(W.removeClassName(e.dom.label,"expanded"),W.addClassName(e.dom.label,"collapsed"))}toggleGroupDragClassName(e){e.dom.label.classList.toggle("vis-group-is-dragging"),e.dom.foreground.classList.toggle("vis-group-is-dragging")}_onGroupDragStart(e){this.groupTouchParams.isDragging||this.options.groupEditable.order&&(this.groupTouchParams.group=this.groupFromTarget(e),this.groupTouchParams.group&&(e.stopPropagation(),this.groupTouchParams.isDragging=!0,this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})))}_onGroupDrag(e){if(this.options.groupEditable.order&&this.groupTouchParams.group){e.stopPropagation();const t=this.groupsData.getDataSet(),r=this.groupFromTarget(e);if(r&&r.height!=this.groupTouchParams.group.height){const i=r.top<this.groupTouchParams.group.top,s=e.center?e.center.y:e.clientY,o=r.dom.foreground.getBoundingClientRect(),a=this.groupTouchParams.group.height;if(i){if(o.top+a<s)return}else{const l=r.height;if(o.top+l-a>s)return}}if(r&&r!=this.groupTouchParams.group){const i=t.get(r.groupId),s=t.get(this.groupTouchParams.group.groupId);s&&i&&(this.options.groupOrderSwap(s,i,t),t.update(s),t.update(i));const o=t.getIds({order:this.options.groupOrder});if(!W.equalArray(o,this.groupTouchParams.originalOrder)){const a=this.groupTouchParams.originalOrder,l=this.groupTouchParams.group.groupId,c=Math.min(a.length,o.length);let u=0,h=0,d=0;for(;u<c;){for(;u+h<c&&u+d<c&&o[u+h]==a[u+d];)u++;if(u+h>=c)break;if(o[u+h]==l)h=1;else if(a[u+d]==l)d=1;else{const f=Xt(o).call(o,a[u+d]),m=t.get(o[u+h]),g=t.get(a[u+d]);this.options.groupOrderSwap(m,g,t),t.update(m),t.update(g);const v=o[u+h];o[u+h]=a[u+d],o[f]=v,u++}}}}}}_onGroupDragEnd(e){if(this.groupTouchParams.isDragging=!1,this.options.groupEditable.order&&this.groupTouchParams.group){e.stopPropagation();const t=this,r=t.groupTouchParams.group.groupId,i=t.groupsData.getDataSet(),s=W.extend({},i.get(r));t.options.onMoveGroup(s,o=>{if(o)o[i._idProp]=r,i.update(o);else{const a=i.getIds({order:t.options.groupOrder});if(!W.equalArray(a,t.groupTouchParams.originalOrder)){const l=t.groupTouchParams.originalOrder,c=Math.min(l.length,a.length);let u=0;for(;u<c;){for(;u<c&&a[u]==l[u];)u++;if(u>=c)break;const h=Xt(a).call(a,l[u]),d=i.get(a[u]),f=i.get(l[u]);t.options.groupOrderSwap(d,f,i),i.update(d),i.update(f);const m=a[u];a[u]=l[u],a[h]=m,u++}}}}),t.body.emitter.emit("groupDragged",{groupId:r}),this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.group=null}}_onSelectItem(e){if(!this.options.selectable)return;const t=e.srcEvent&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey),r=e.srcEvent&&e.srcEvent.shiftKey;if(t||r){this._onMultiSelectItem(e);return}const i=this.getSelection(),s=this.itemFromTarget(e),o=s&&s.selectable?[s.id]:[];this.setSelection(o);const a=this.getSelection();(a.length>0||i.length>0)&&this.body.emitter.emit("select",{items:a,event:e})}_onMouseOver(e){const t=this.itemFromTarget(e);if(!t)return;const r=this.itemFromRelatedTarget(e);if(t===r)return;const i=t.getTitle();if(this.options.showTooltips&&i){this.popup==null&&(this.popup=new vNe(this.body.dom.root,this.options.tooltip.overflowMethod||"flip")),this.popup.setText(i);const s=this.body.dom.centerContainer,o=s.getBoundingClientRect();this.popup.setPosition(e.clientX-o.left+s.offsetLeft,e.clientY-o.top+s.offsetTop),this.setPopupTimer(this.popup)}else this.clearPopupTimer(),this.popup!=null&&this.popup.hide();this.body.emitter.emit("itemover",{item:t.id,event:e})}_onMouseOut(e){const t=this.itemFromTarget(e);if(!t)return;const r=this.itemFromRelatedTarget(e);t!==r&&(this.clearPopupTimer(),this.popup!=null&&this.popup.hide(),this.body.emitter.emit("itemout",{item:t.id,event:e}))}_onMouseMove(e){if(this.itemFromTarget(e)&&(this.popupTimer!=null&&this.setPopupTimer(this.popup),this.options.showTooltips&&this.options.tooltip.followMouse&&this.popup&&!this.popup.hidden)){const r=this.body.dom.centerContainer,i=r.getBoundingClientRect();this.popup.setPosition(e.clientX-i.left+r.offsetLeft,e.clientY-i.top+r.offsetTop),this.popup.show()}}_onMouseWheel(e){this.touchParams.itemIsDragging&&this._onDragEnd(e)}_onUpdateItem(e){if(!this.options.selectable||!this.options.editable.updateTime&&!this.options.editable.updateGroup)return;const t=this;if(e){const r=t.itemsData.get(e.id);this.options.onUpdate(r,i=>{i&&t.itemsData.update(i)})}}_onDropObjectOnItem(e){const t=this.itemFromTarget(e),r=JSON.parse(e.dataTransfer.getData("text"));this.options.onDropObjectOnItem(r,t)}_onAddItem(e){if(!this.options.selectable||!this.options.editable.add)return;const t=this,r=this.options.snap||null,i=this.dom.frame.getBoundingClientRect(),s=this.options.rtl?i.right-e.center.x:e.center.x-i.left,o=this.body.util.toTime(s),a=this.body.util.getScale(),l=this.body.util.getStep();let c,u;e.type=="drop"?(u=JSON.parse(e.dataTransfer.getData("text")),u.content=u.content?u.content:"new item",u.start=u.start?u.start:r?r(o,a,l):o,u.type=u.type||"box",u[this.itemsData.idProp]=u.id||jc(),u.type=="range"&&!u.end&&(c=this.body.util.toTime(s+this.props.width/5),u.end=r?r(c,a,l):c)):(u={start:r?r(o,a,l):o,content:"new item"},u[this.itemsData.idProp]=jc(),this.options.type==="range"&&(c=this.body.util.toTime(s+this.props.width/5),u.end=r?r(c,a,l):c));const h=this.groupFromTarget(e);h&&(u.group=h.groupId),u=this._cloneItemData(u),this.options.onAdd(u,d=>{d&&(t.itemsData.add(d),e.type=="drop"&&t.setSelection([d.id]))})}_onMultiSelectItem(e){if(!this.options.selectable)return;const t=this.itemFromTarget(e);if(t){let r=this.options.multiselect?this.getSelection():[];if((e.srcEvent&&e.srcEvent.shiftKey||!1||this.options.sequentialSelection)&&this.options.multiselect){const o=this.itemsData.get(t.id).group;let a;this.options.multiselectPerGroup&&r.length>0&&(a=this.itemsData.get(r[0]).group),(!this.options.multiselectPerGroup||a==null||a==o)&&r.push(t.id);const l=Od._getItemRange(this.itemsData.get(r));if(!this.options.multiselectPerGroup||a==o){r=[];for(const c in this.items){if(!Object.prototype.hasOwnProperty.call(this.items,c))continue;const u=this.items[c],h=u.data.start,d=u.data.end!==void 0?u.data.end:h;h>=l.min&&d<=l.max&&(!this.options.multiselectPerGroup||a==this.itemsData.get(u.id).group)&&!(u instanceof _u)&&r.push(u.id)}}}else{const o=Xt(r).call(r,t.id);o==-1?r.push(t.id):Wr(r).call(r,o,1)}const s=yt(r).call(r,o=>this.getItemById(o).selectable);this.setSelection(s),this.body.emitter.emit("select",{items:this.getSelection(),event:e})}}static _getItemRange(e){let t=null,r=null;return je(e).call(e,i=>{(r==null||i.start<r)&&(r=i.start),i.end!=null?(t==null||i.end>t)&&(t=i.end):(t==null||i.start>t)&&(t=i.start)}),{min:r,max:t}}itemFromElement(e){let t=e;for(;t;){if(Object.prototype.hasOwnProperty.call(t,"vis-item"))return t["vis-item"];t=t.parentNode}return null}itemFromTarget(e){return this.itemFromElement(e.target)}itemFromRelatedTarget(e){return this.itemFromElement(e.relatedTarget)}groupFromTarget(e){const t=e.center?e.center.y:e.clientY;let r=this.groupIds;r.length<=0&&this.groupsData&&(r=this.groupsData.getIds({order:this.options.groupOrder}));for(let i=0;i<r.length;i++){const s=r[i],o=this.groups[s],a=o.dom.foreground,l=a.getBoundingClientRect();if(t>=l.top&&t<l.top+a.offsetHeight)return o;if(this.options.orientation.item==="top"){if(i===this.groupIds.length-1&&t>l.top)return o}else if(i===0&&t<l.top+a.offset)return o}return null}static itemSetFromTarget(e){let t=e.target;for(;t;){if(Object.prototype.hasOwnProperty.call(t,"vis-itemset"))return t["vis-itemset"];t=t.parentNode}return null}_cloneItemData(e,t){const r=W.extend({},e);return t||(t=this.itemsData.type),r.start!=null&&(r.start=W.convert(r.start,t&&t.start||"Date")),r.end!=null&&(r.end=W.convert(r.end,t&&t.end||"Date")),r}_clusterItems(){if(!this.options.cluster)return;const{scale:e}=this.body.range.conversion(this.body.domProps.center.width),t=this.clusterGenerator.getClusters(this.clusters,e,this.options.cluster);if(this.clusters!=t){if(this._detachAllClusters(),t){for(let r of t)r.attach();this.clusters=t}this._updateClusters(t)}}_detachAllClusters(){if(this.options.cluster&&this.clusters&&this.clusters.length)for(let e of this.clusters)e.detach()}_updateClusters(e){if(this.clusters&&this.clusters.length){var t;const s=new Fc(Ut(e).call(e,l=>l.id)),o=yt(t=this.clusters).call(t,l=>!s.has(l.id));let a=!1;for(let l of o){var r;const c=Xt(r=this.selection).call(r,l.id);if(c!==-1){var i;l.unselect(),Wr(i=this.selection).call(i,c,1),a=!0}}if(a){const l=this.getSelection();this.body.emitter.emit("select",{items:l,event})}}this.clusters=e||[]}}Od.types={background:_u,box:mNe,range:ou,point:gNe};Od.prototype._onAdd=Od.prototype._onUpdate;let Yf=!1,ZU,kP="background: #FFeeee; color: #dd0000";class Sn{constructor(){}static validate(e,t,r){Yf=!1,ZU=t;let i=t;return r!==void 0&&(i=t[r]),Sn.parse(e,i,[]),Yf}static parse(e,t,r){for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&Sn.check(i,e,t,r)}static check(e,t,r,i){if(r[e]===void 0&&r.__any__===void 0){Sn.getSuggestion(e,r,i);return}let s=e,o=!0;r[e]===void 0&&r.__any__!==void 0&&(s="__any__",o=Sn.getType(t[e])==="object");let a=r[s];o&&a.__type__!==void 0&&(a=a.__type__),Sn.checkFields(e,t,r,s,a,i)}static checkFields(e,t,r,i,s,o){let a=function(u){console.log("%c"+u+Sn.printLocation(o,e),kP)},l=Sn.getType(t[e]),c=s[l];c!==void 0?Sn.getType(c)==="array"&&Xt(c).call(c,t[e])===-1?(a('Invalid option detected in "'+e+'". Allowed values are:'+Sn.print(c)+' not "'+t[e]+'". '),Yf=!0):l==="object"&&i!=="__any__"&&(o=W.copyAndExtendArray(o,e),Sn.parse(t[e],r[i],o)):s.any===void 0&&(a('Invalid type received for "'+e+'". Expected: '+Sn.print(rr(s))+". Received ["+l+'] "'+t[e]+'"'),Yf=!0)}static getType(e){var t=typeof e;return t==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":It(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":t==="number"?"number":t==="boolean"?"boolean":t==="string"?"string":t===void 0?"undefined":t}static getSuggestion(e,t,r){let i=Sn.findInOptions(e,t,r,!1),s=Sn.findInOptions(e,ZU,[],!0),o=8,a=4,l;i.indexMatch!==void 0?l=" in "+Sn.printLocation(i.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+i.indexMatch+`"?

`:s.distance<=a&&i.distance>s.distance?l=" in "+Sn.printLocation(i.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+Sn.printLocation(s.path,s.closestMatch,""):i.distance<=o?l='. Did you mean "'+i.closestMatch+'"?'+Sn.printLocation(i.path,e):l=". Did you mean one of these: "+Sn.print(rr(t))+Sn.printLocation(r,e),console.log('%cUnknown option detected: "'+e+'"'+l,kP),Yf=!0}static findInOptions(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=1e9,o="",a=[],l=e.toLowerCase(),c;for(let h in t){if(!Object.prototype.hasOwnProperty.call(t,h))continue;let d;if(t[h].__type__!==void 0&&i===!0){let f=Sn.findInOptions(e,t[h],W.copyAndExtendArray(r,h));s>f.distance&&(o=f.closestMatch,a=f.path,s=f.distance,c=f.indexMatch)}else{var u;Xt(u=h.toLowerCase()).call(u,l)!==-1&&(c=h),d=Sn.levenshteinDistance(e,h),s>d&&(o=h,a=W.copyArray(r),s=d)}}return{closestMatch:o,path:a,distance:s,indexMatch:c}}static printLocation(e,t){let i=`

`+(arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`)+`options = {
`;for(let s=0;s<e.length;s++){for(let o=0;o<s+1;o++)i+="  ";i+=e[s]+`: {
`}for(let s=0;s<e.length+1;s++)i+="  ";i+=t+`
`;for(let s=0;s<e.length+1;s++){for(let o=0;o<e.length-s;o++)i+="  ";i+=`}
`}return i+`

`}static print(e){return ii(e).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}static levenshteinDistance(e,t){if(e.length===0)return t.length;if(t.length===0)return e.length;var r=[],i;for(i=0;i<=t.length;i++)r[i]=[i];var s;for(s=0;s<=e.length;s++)r[0][s]=s;for(i=1;i<=t.length;i++)for(s=1;s<=e.length;s++)t.charAt(i-1)==e.charAt(s-1)?r[i][s]=r[i-1][s-1]:r[i][s]=Math.min(r[i-1][s-1]+1,Math.min(r[i][s-1]+1,r[i-1][s]+1));return r[t.length][e.length]}}var MNe={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};class INe{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return MNe[e]}setColor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e==="none")return;let r;var i=this._isColorString(e);if(i!==void 0&&(e=i),W.isString(e)===!0){if(W.isValidRGB(e)===!0){let s=e.substr(4).substr(0,e.length-5).split(",");r={r:s[0],g:s[1],b:s[2],a:1}}else if(W.isValidRGBA(e)===!0){let s=e.substr(5).substr(0,e.length-6).split(",");r={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(W.isValidHex(e)===!0){let s=W.hexToRGB(e);r={r:s.r,g:s.g,b:s.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){let s=e.a!==void 0?e.a:"1.0";r={r:e.r,g:e.g,b:e.b,a:s}}if(r===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+ii(e));this._setColor(r,t)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0&&(this.previousColor=W.extend({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",fi(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)===!0&&(this.initialColor=W.extend({},e)),this.color=e;let r=W.RGBToHSV(e.r,e.g,e.b),i=2*Math.PI,s=this.r*r.s,o=this.centerCoordinates.x+s*Math.sin(i*r.h),a=this.centerCoordinates.y+s*Math.cos(i*r.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=a-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){let t=W.RGBToHSV(this.color.r,this.color.g,this.color.b);t.v=e/100;let r=W.HSVToRGB(t.h,t.s,t.v);r.a=this.color.a,this.color=r,this._updatePicker()}_updatePicker(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color,t=W.RGBToHSV(e.r,e.g,e.b),r=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1)),r.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);let i=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;r.clearRect(0,0,i,s),r.putImageData(this.hueCircle,0,0),r.fillStyle="rgba(0,0,0,"+(1-t.v)+")",r.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),QQ(r).call(r),this.brightnessRange.value=100*t.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){var e,t,r,i;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){let o=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{let o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var s=this;this.opacityRange.onchange=function(){s._setOpacity(this.value)},this.opacityRange.oninput=function(){s._setOpacity(this.value)},this.brightnessRange.onchange=function(){s._setBrightness(this.value)},this.brightnessRange.oninput=function(){s._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=ue(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=ue(t=this._apply).call(t,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=ue(r=this._save).call(r,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=ue(i=this._loadLast).call(i,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new Ur(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),XJ(this.hammer,e=>{this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){let e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);let t=this.colorPickerCanvas.clientWidth,r=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,t,r);let i,s,o,a;this.centerCoordinates={x:t*.5,y:r*.5},this.r=.49*t;let l=2*Math.PI/360,c=1/360,u=1/this.r,h;for(o=0;o<360;o++)for(a=0;a<this.r;a++)i=this.centerCoordinates.x+a*Math.sin(l*o),s=this.centerCoordinates.y+a*Math.cos(l*o),h=W.HSVToRGB(o*c,a*u,1),e.fillStyle="rgb("+h.r+","+h.g+","+h.b+")",e.fillRect(i-.5,s-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,t,r)}this.generated=!0}_moveSelector(e){let t=this.colorPickerDiv.getBoundingClientRect(),r=e.center.x-t.left,i=e.center.y-t.top,s=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=r-o,l=i-s,c=Math.atan2(a,l),u=.98*Math.min(Math.sqrt(a*a+l*l),o),h=Math.cos(c)*u+s,d=Math.sin(c)*u+o;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=d-.5*this.colorPickerSelector.clientWidth+"px";let f=c/(2*Math.PI);f=f<0?f+1:f;let m=u/this.r,g=W.RGBToHSV(this.color.r,this.color.g,this.color.b);g.h=f,g.s=m;let v=W.HSVToRGB(g.h,g.s,g.v);v.a=this.color.a,this.color=v,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}class PNe{constructor(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;this.parent=e,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},W.extend(this.options,this.defaultOptions),this.configureOptions=r,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new INe(i),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let t=!0;if(typeof e=="string")this.options.filter=e;else if(It(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),yt(e)!==void 0&&(this.options.filter=yt(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(t=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,t=e):typeof e=="function"&&(this.options.filter=e,t=!0);yt(this.options)===!1&&(t=!1),this.options.enabled=t}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];let e=yt(this.options),t=0,r=!1;for(let i in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,i)&&(this.allowCreation=!1,r=!1,typeof e=="function"?(r=e(i,[]),r=r||this._handleObject(this.configureOptions[i],[i],!0)):(e===!0||Xt(e).call(e,i)!==-1)&&(r=!0),r!==!1&&(this.allowCreation=!0,t>0&&this._makeItem([]),this._makeHeader(i),this._handleObject(this.configureOptions[i],[i])),t++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(var e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let t=this.moduleOptions;for(let r=0;r<e.length;r++)if(t[e[r]]!==void 0)t=t[e[r]];else{t=void 0;break}return t}_makeItem(e){if(this.allowCreation===!0){let s=document.createElement("div");s.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return je(r).call(r,o=>{s.appendChild(o)}),this.domElements.push(s),this.domElements.length}return 0}_makeHeader(e){let t=document.createElement("div");t.className="vis-configuration vis-config-header",t.innerHTML=W.xss(e),this._makeItem([],t)}_makeLabel(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=document.createElement("div");return i.className="vis-configuration vis-config-label vis-config-s"+t.length,r===!0?i.innerHTML=W.xss("<i><b>"+e+":</b></i>"):i.innerHTML=W.xss(e+":"),i}_makeDropdown(e,t,r){let i=document.createElement("select");i.className="vis-configuration vis-config-select";let s=0;t!==void 0&&Xt(e).call(e,t)!==-1&&(s=Xt(e).call(e,t));for(let l=0;l<e.length;l++){let c=document.createElement("option");c.value=e[l],l===s&&(c.selected="selected"),c.innerHTML=e[l],i.appendChild(c)}let o=this;i.onchange=function(){o._update(this.value,r)};let a=this._makeLabel(r[r.length-1],r);this._makeItem(r,a,i)}_makeRange(e,t,r){let i=e[0],s=e[1],o=e[2],a=e[3],l=document.createElement("input");l.className="vis-configuration vis-config-range";try{l.type="range",l.min=s,l.max=o}catch{}l.step=a;let c="",u=0;if(t!==void 0){let g=1.2;t<0&&t*g<s?(l.min=Math.ceil(t*g),u=l.min,c="range increased"):t/g<s&&(l.min=Math.ceil(t/g),u=l.min,c="range increased"),t*g>o&&o!==1&&(l.max=Math.ceil(t*g),u=l.max,c="range increased"),l.value=t}else l.value=i;let h=document.createElement("input");h.className="vis-configuration vis-config-rangeinput",h.value=Number(l.value);var d=this;l.onchange=function(){h.value=this.value,d._update(Number(this.value),r)},l.oninput=function(){h.value=this.value};let f=this._makeLabel(r[r.length-1],r),m=this._makeItem(r,f,l,h);c!==""&&this.popupHistory[m]!==u&&(this.popupHistory[m]=u,this._setupPopup(c,m))}_makeButton(){if(this.options.showButton===!0){let e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerHTML="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,t){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){let r=document.createElement("div");r.id="vis-configuration-popup",r.className="vis-configuration-popup",r.innerHTML=W.xss(e),r.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:r,index:t}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){let t=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=t.left+"px",this.popupDiv.html.style.top=t.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=fi(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=fi(()=>{this._removePopup()},1800)}}_makeCheckbox(e,t,r){var i=document.createElement("input");i.type="checkbox",i.className="vis-configuration vis-config-checkbox",i.checked=e,t!==void 0&&(i.checked=t,t!==e&&(typeof e=="object"?t!==e.enabled&&this.changedOptions.push({path:r,value:t}):this.changedOptions.push({path:r,value:t})));let s=this;i.onchange=function(){s._update(this.checked,r)};let o=this._makeLabel(r[r.length-1],r);this._makeItem(r,o,i)}_makeTextInput(e,t,r){var i=document.createElement("input");i.type="text",i.className="vis-configuration vis-config-text",i.value=t,t!==e&&this.changedOptions.push({path:r,value:t});let s=this;i.onchange=function(){s._update(this.value,r)};let o=this._makeLabel(r[r.length-1],r);this._makeItem(r,o,i)}_makeColorField(e,t,r){let i=e[1],s=document.createElement("div");t=t===void 0?i:t,t!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=t):s.className="vis-configuration vis-config-colorBlock none",t=t===void 0?i:t,s.onclick=()=>{this._showColorPicker(t,s,r)};let o=this._makeLabel(r[r.length-1],r);this._makeItem(r,o,s)}_showColorPicker(e,t,r){t.onclick=function(){},this.colorPicker.insertTo(t),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(i=>{let s="rgba("+i.r+","+i.g+","+i.b+","+i.a+")";t.style.backgroundColor=s,this._update(s,r)}),this.colorPicker.setCloseCallback(()=>{t.onclick=()=>{this._showColorPicker(e,t,r)}})}_handleObject(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=!1,s=yt(this.options),o=!1;for(let a in e){if(!Object.prototype.hasOwnProperty.call(e,a))continue;i=!0;let l=e[a],c=W.copyAndExtendArray(t,a);if(typeof s=="function"&&(i=s(a,t),i===!1&&!It(l)&&typeof l!="string"&&typeof l!="boolean"&&l instanceof Object&&(this.allowCreation=!1,i=this._handleObject(l,c,!0),this.allowCreation=r===!1)),i!==!1){o=!0;let u=this._getValue(c);if(It(l))this._handleArray(l,u,c);else if(typeof l=="string")this._makeTextInput(l,u,c);else if(typeof l=="boolean")this._makeCheckbox(l,u,c);else if(l instanceof Object){let h=!0;if(Xt(t).call(t,"physics")!==-1&&this.moduleOptions.physics.solver!==a&&(h=!1),h===!0)if(l.enabled!==void 0){let d=W.copyAndExtendArray(c,"enabled"),f=this._getValue(d);if(f===!0){let m=this._makeLabel(a,c,!0);this._makeItem(c,m),o=this._handleObject(l,c)||o}else this._makeCheckbox(l,f,c)}else{let d=this._makeLabel(a,c,!0);this._makeItem(c,d),o=this._handleObject(l,c)||o}}else console.error("dont know how to handle",l,a,c)}}return o}_handleArray(e,t,r){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,t,r),e[1]!==t&&this.changedOptions.push({path:r,value:t})):typeof e[0]=="string"?(this._makeDropdown(e,t,r),e[0]!==t&&this.changedOptions.push({path:r,value:t})):typeof e[0]=="number"&&(this._makeRange(e,t,r),e[0]!==t&&this.changedOptions.push({path:r,value:Number(t)}))}_update(e,t){let r=this._constructOptions(e,t);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",r),this.initialized=!0,this.parent.setOptions(r)}_constructOptions(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let s=0;s<t.length;s++)t[s]!=="global"&&(i[t[s]]===void 0&&(i[t[s]]={}),s!==t.length-1?i=i[t[s]]:i[t[s]]=e);return r}_printOptions(){let e=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+ii(e,null,2)+"</pre>"}getOptions(){let e={};for(var t=0;t<this.changedOptions.length;t++)this._constructOptions(this.changedOptions[t].value,this.changedOptions[t].path,e);return e}}class ONe{constructor(e,t,r,i,s,o){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;if(this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.customLines=null,this.containerHeight=s,this.majorCharHeight=o,this._start=e,this._end=t,this.scale=1,this.minorStepIdx=-1,this.magnitudefactor=1,this.determineScale(),this.zeroAlign=a,this.autoScaleStart=r,this.autoScaleEnd=i,this.formattingFunction=l,r||i){const c=this,u=h=>{const d=h-h%(c.magnitudefactor*c.minorSteps[c.minorStepIdx]);return h%(c.magnitudefactor*c.minorSteps[c.minorStepIdx])>.5*(c.magnitudefactor*c.minorSteps[c.minorStepIdx])?d+c.magnitudefactor*c.minorSteps[c.minorStepIdx]:d};r&&(this._start-=this.magnitudefactor*2*this.minorSteps[this.minorStepIdx],this._start=u(this._start)),i&&(this._end+=this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._end=u(this._end)),this.determineScale()}}setCharHeight(e){this.majorCharHeight=e}setHeight(e){this.containerHeight=e}determineScale(){const e=this._end-this._start;this.scale=this.containerHeight/e;const t=this.majorCharHeight/this.scale,r=e>0?Math.round(Math.log(e)/Math.LN10):0;this.minorStepIdx=-1,this.magnitudefactor=Math.pow(10,r);let i=0;r<0&&(i=r);let s=!1;for(let o=i;Math.abs(o)<=Math.abs(r);o++){this.magnitudefactor=Math.pow(10,o);for(let a=0;a<this.minorSteps.length;a++)if(this.magnitudefactor*this.minorSteps[a]>=t){s=!0,this.minorStepIdx=a;break}if(s===!0)break}}is_major(e){return e%(this.magnitudefactor*this.majorSteps[this.minorStepIdx])===0}getStep(){return this.magnitudefactor*this.minorSteps[this.minorStepIdx]}getFirstMajor(){const e=this.magnitudefactor*this.majorSteps[this.minorStepIdx];return this.convertValue(this._start+(e-this._start%e)%e)}formatValue(e){let t=e.toPrecision(5);return typeof this.formattingFunction=="function"&&(t=this.formattingFunction(e)),typeof t=="number"?"".concat(t):typeof t=="string"?t:e.toPrecision(5)}getLines(){const e=[],t=this.getStep(),r=(t-this._start%t)%t;for(let i=this._start+r;this._end-i>1e-5;i+=t)i!=this._start&&e.push({major:this.is_major(i),y:this.convertValue(i),val:this.formatValue(i)});return e}followScale(e){const t=this.minorStepIdx,r=this._start,i=this._end,s=this,o=()=>{s.magnitudefactor*=2},a=()=>{s.magnitudefactor/=2};e.minorStepIdx<=1&&this.minorStepIdx<=1||e.minorStepIdx>1&&this.minorStepIdx>1||(e.minorStepIdx<this.minorStepIdx?(this.minorStepIdx=1,t==2||o(),o()):(this.minorStepIdx=2,t==1||a(),a()));const l=e.convertValue(0),c=e.getStep()*e.scale;let u=!1,h=0;for(;!u&&h++<5;){this.scale=c/(this.minorSteps[this.minorStepIdx]*this.magnitudefactor);const d=this.containerHeight/this.scale;this._start=r,this._end=this._start+d;const f=this._end*this.scale,m=this.magnitudefactor*this.majorSteps[this.minorStepIdx],g=this.getFirstMajor()-e.getFirstMajor();if(this.zeroAlign){const v=l-f;this._end+=v/this.scale,this._start=this._end-d}else this.autoScaleStart?(this._start-=g/this.scale,this._end=this._start+d):(this._start+=m-g/this.scale,this._end=this._start+d);if(!this.autoScaleEnd&&this._end>i+1e-5){a(),u=!1;continue}if(!this.autoScaleStart&&this._start<r-1e-5)if(this.zeroAlign&&r>=0)console.warn("Can't adhere to given 'min' range, due to zeroalign");else{a(),u=!1;continue}if(this.autoScaleStart&&this.autoScaleEnd&&d<i-r){o(),u=!1;continue}u=!0}}convertValue(e){return this.containerHeight-(e-this._start)*this.scale}screenToValue(e){return(this.containerHeight-e)/this.scale+this._start}}class eW extends $l{constructor(e,t,r,i){super(),this.id=jc(),this.body=e,this.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,alignZeros:!0,left:{range:{min:void 0,max:void 0},format(o){return"".concat(kb(o.toPrecision(3)))},title:{text:void 0,style:void 0}},right:{range:{min:void 0,max:void 0},format(o){return"".concat(kb(o.toPrecision(3)))},title:{text:void 0,style:void 0}}},this.linegraphOptions=i,this.linegraphSVG=r,this.props={},this.DOMelements={lines:{},labels:{},title:{}},this.dom={},this.scale=void 0,this.range={start:0,end:0},this.options=W.extend({},this.defaultOptions),this.conversionFactor=1,this.setOptions(t),this.width=Number("".concat(this.options.width).replace("px","")),this.minWidth=this.width,this.height=this.linegraphSVG.getBoundingClientRect().height,this.hidden=!1,this.stepPixels=25,this.zeroCrossing=-1,this.amountOfSteps=-1,this.lineOffset=0,this.master=!0,this.masterAxis=null,this.svgElements={},this.iconsRemoved=!1,this.groups={},this.amountOfGroups=0,this._create(),this.scale==null&&this._redrawLabels(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups};const s=this;this.body.emitter.on("verticalDrag",()=>{s.dom.lineContainer.style.top="".concat(s.body.domProps.scrollTop,"px")})}addGroup(e,t){Object.prototype.hasOwnProperty.call(this.groups,e)||(this.groups[e]=t),this.amountOfGroups+=1}updateGroup(e,t){Object.prototype.hasOwnProperty.call(this.groups,e)||(this.amountOfGroups+=1),this.groups[e]=t}removeGroup(e){Object.prototype.hasOwnProperty.call(this.groups,e)&&(delete this.groups[e],this.amountOfGroups-=1)}setOptions(e){if(e){let t=!1;this.options.orientation!=e.orientation&&e.orientation!==void 0&&(t=!0);const r=["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","left","right","alignZeros"];W.selectiveDeepExtend(r,this.options,e),this.minWidth=Number("".concat(this.options.width).replace("px","")),t===!0&&this.dom.frame&&(this.hide(),this.show())}}_create(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.dom.lineContainer.style.position="relative",this.dom.lineContainer.style.visibility="visible",this.dom.lineContainer.style.display="block",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)}_redrawGroupIcons(){Ka(this.svgElements);let e;const t=this.options.iconWidth,r=15,i=4;let s=i+.5*r;this.options.orientation==="left"?e=i:e=this.width-t-i;const o=rr(this.groups);Un(o).call(o,(a,l)=>a<l?-1:1);for(const a of o)this.groups[a].visible===!0&&(this.linegraphOptions.visibility[a]===void 0||this.linegraphOptions.visibility[a]===!0)&&(this.groups[a].getLegend(t,r,this.framework,e,s),s+=r+i);Ji(this.svgElements),this.iconsRemoved=!1}_cleanupIcons(){this.iconsRemoved===!1&&(Ka(this.svgElements),Ji(this.svgElements),this.iconsRemoved=!0)}show(){this.hidden=!1,this.dom.frame.parentNode||(this.options.orientation==="left"?this.body.dom.left.appendChild(this.dom.frame):this.body.dom.right.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer),this.dom.lineContainer.style.display="block"}hide(){this.hidden=!0,this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.style.display="none"}setRange(e,t){this.range.start=e,this.range.end=t}redraw(){let e=!1,t=0;this.dom.lineContainer.style.top="".concat(this.body.domProps.scrollTop,"px");for(const r in this.groups)Object.prototype.hasOwnProperty.call(this.groups,r)&&this.groups[r].visible===!0&&(this.linegraphOptions.visibility[r]===void 0||this.linegraphOptions.visibility[r]===!0)&&t++;if(this.amountOfGroups===0||t===0)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height="".concat(this.height,"px"),this.width=this.options.visible===!0?Number("".concat(this.options.width).replace("px","")):0;const r=this.props,i=this.dom.frame;i.className="vis-data-axis",this._calculateCharSize();const s=this.options.orientation,o=this.options.showMinorLabels,a=this.options.showMajorLabels,l=this.body.dom.backgroundHorizontal.offsetWidth;r.minorLabelHeight=o?r.minorCharHeight:0,r.majorLabelHeight=a?r.majorCharHeight:0,r.minorLineWidth=l-this.lineOffset-this.width+2*this.options.minorLinesOffset,r.minorLineHeight=1,r.majorLineWidth=l-this.lineOffset-this.width+2*this.options.majorLinesOffset,r.majorLineHeight=1,s==="left"?(i.style.top="0",i.style.left="0",i.style.bottom="",i.style.width="".concat(this.width,"px"),i.style.height="".concat(this.height,"px"),this.props.width=this.body.domProps.left.width,this.props.height=this.body.domProps.left.height):(i.style.top="",i.style.bottom="0",i.style.left="0",i.style.width="".concat(this.width,"px"),i.style.height="".concat(this.height,"px"),this.props.width=this.body.domProps.right.width,this.props.height=this.body.domProps.right.height),e=this._redrawLabels(),e=this._isResized()||e,this.options.icons===!0?this._redrawGroupIcons():this._cleanupIcons(),this._redrawTitle(s)}return e}_redrawLabels(){let e=!1;Ka(this.DOMelements.lines),Ka(this.DOMelements.labels);const t=this.options.orientation,r=this.options[t].range!=null?this.options[t].range:{};let i=!0;r.max!=null&&(this.range.end=r.max,i=!1);let s=!0;r.min!=null&&(this.range.start=r.min,s=!1),this.scale=new ONe(this.range.start,this.range.end,s,i,this.dom.frame.offsetHeight,this.props.majorCharHeight,this.options.alignZeros,this.options[t].format),this.master===!1&&this.masterAxis!=null?(this.scale.followScale(this.masterAxis.scale),this.dom.lineContainer.style.display="none"):this.dom.lineContainer.style.display="block",this.maxLabelSize=0;const o=this.scale.getLines();je(o).call(o,c=>{const u=c.y,h=c.major;this.options.showMinorLabels&&h===!1&&this._redrawLabel(u-2,c.val,t,"vis-y-axis vis-minor",this.props.minorCharHeight),h&&u>=0&&this._redrawLabel(u-2,c.val,t,"vis-y-axis vis-major",this.props.majorCharHeight),this.master===!0&&(h?this._redrawLine(u,t,"vis-grid vis-horizontal vis-major",this.options.majorLinesOffset,this.props.majorLineWidth):this._redrawLine(u,t,"vis-grid vis-horizontal vis-minor",this.options.minorLinesOffset,this.props.minorLineWidth))});let a=0;this.options[t].title!==void 0&&this.options[t].title.text!==void 0&&(a=this.props.titleCharHeight);const l=this.options.icons===!0?Math.max(this.options.iconWidth,a)+this.options.labelOffsetX+15:a+this.options.labelOffsetX+15;return this.maxLabelSize>this.width-l&&this.options.visible===!0?(this.width=this.maxLabelSize+l,this.options.width="".concat(this.width,"px"),Ji(this.DOMelements.lines),Ji(this.DOMelements.labels),this.redraw(),e=!0):this.maxLabelSize<this.width-l&&this.options.visible===!0&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+l),this.options.width="".concat(this.width,"px"),Ji(this.DOMelements.lines),Ji(this.DOMelements.labels),this.redraw(),e=!0):(Ji(this.DOMelements.lines),Ji(this.DOMelements.labels),e=!1),e}convertValue(e){return this.scale.convertValue(e)}screenToValue(e){return this.scale.screenToValue(e)}_redrawLabel(e,t,r,i,s){const o=m2("div",this.DOMelements.labels,this.dom.frame);o.className=i,o.innerHTML=W.xss(t),r==="left"?(o.style.left="-".concat(this.options.labelOffsetX,"px"),o.style.textAlign="right"):(o.style.right="-".concat(this.options.labelOffsetX,"px"),o.style.textAlign="left"),o.style.top="".concat(e-.5*s+this.options.labelOffsetY,"px"),t+="";const a=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<t.length*a&&(this.maxLabelSize=t.length*a)}_redrawLine(e,t,r,i,s){if(this.master===!0){const o=m2("div",this.DOMelements.lines,this.dom.lineContainer);o.className=r,o.innerHTML="",t==="left"?o.style.left="".concat(this.width-i,"px"):o.style.right="".concat(this.width-i,"px"),o.style.width="".concat(s,"px"),o.style.top="".concat(e,"px")}}_redrawTitle(e){if(Ka(this.DOMelements.title),this.options[e].title!==void 0&&this.options[e].title.text!==void 0){const t=m2("div",this.DOMelements.title,this.dom.frame);t.className="vis-y-axis vis-title vis-".concat(e),t.innerHTML=W.xss(this.options[e].title.text),this.options[e].title.style!==void 0&&W.addCssText(t,this.options[e].title.style),e==="left"?t.style.left="".concat(this.props.titleCharHeight,"px"):t.style.right="".concat(this.props.titleCharHeight,"px"),t.style.width="".concat(this.height,"px")}Ji(this.DOMelements.title)}_calculateCharSize(){if(!("minorCharHeight"in this.props)){const e=document.createTextNode("0"),t=document.createElement("div");t.className="vis-y-axis vis-minor vis-measure",t.appendChild(e),this.dom.frame.appendChild(t),this.props.minorCharHeight=t.clientHeight,this.props.minorCharWidth=t.clientWidth,this.dom.frame.removeChild(t)}if(!("majorCharHeight"in this.props)){const e=document.createTextNode("0"),t=document.createElement("div");t.className="vis-y-axis vis-major vis-measure",t.appendChild(e),this.dom.frame.appendChild(t),this.props.majorCharHeight=t.clientHeight,this.props.majorCharWidth=t.clientWidth,this.dom.frame.removeChild(t)}if(!("titleCharHeight"in this.props)){const e=document.createTextNode("0"),t=document.createElement("div");t.className="vis-y-axis vis-title vis-measure",t.appendChild(e),this.dom.frame.appendChild(t),this.props.titleCharHeight=t.clientHeight,this.props.titleCharWidth=t.clientWidth,this.dom.frame.removeChild(t)}}}function Vg(){}Vg.draw=function(n,e,t,r){r=r||0;for(var i=RNe(t,e),s=0;s<n.length;s++)if(!i)Id(n[s].screen_x+r,n[s].screen_y,CP(e),t.svgElements,t.svg,n[s].label);else{var o=i(n[s],e);(o===!0||typeof o=="object")&&Id(n[s].screen_x+r,n[s].screen_y,CP(e,o),t.svgElements,t.svg,n[s].label)}};Vg.drawIcon=function(n,e,t,r,i,s){var o=i*.5,a=Ns("rect",s.svgElements,s.svg);a.setAttributeNS(null,"x",e),a.setAttributeNS(null,"y",t-o),a.setAttributeNS(null,"width",r),a.setAttributeNS(null,"height",2*o),a.setAttributeNS(null,"class","vis-outline"),Id(e+.5*r,t,CP(n),s.svgElements,s.svg)};function CP(n,e){return e=typeof e>"u"?{}:e,{style:e.style||n.options.drawPoints.style,styles:e.styles||n.options.drawPoints.styles,size:e.size||n.options.drawPoints.size,className:e.className||n.className}}function RNe(n,e){var t=void 0;return n.options&&n.options.drawPoints&&n.options.drawPoints.onRender&&typeof n.options.drawPoints.onRender=="function"&&(t=n.options.drawPoints.onRender),e.group.options&&e.group.options.drawPoints&&e.group.options.drawPoints.onRender&&typeof e.group.options.drawPoints.onRender=="function"&&(t=e.group.options.drawPoints.onRender),t}function Hr(){}Hr.drawIcon=function(n,e,t,r,i,s){var o=i*.5,a=Ns("rect",s.svgElements,s.svg);a.setAttributeNS(null,"x",e),a.setAttributeNS(null,"y",t-o),a.setAttributeNS(null,"width",r),a.setAttributeNS(null,"height",2*o),a.setAttributeNS(null,"class","vis-outline");var l=Math.round(.3*r),c=n.options.barChart.width,u=c/l,h=Math.round(.4*i),d=Math.round(.75*i),f=Math.round((r-2*l)/3);if(vP(e+.5*l+f,t+o-h-1,l,h,n.className+" vis-bar",s.svgElements,s.svg,n.style),vP(e+1.5*l+f+2,t+o-d-1,l,d,n.className+" vis-bar",s.svgElements,s.svg,n.style),n.options.drawPoints.enabled==!0){var m={style:n.options.drawPoints.style,styles:n.options.drawPoints.styles,size:n.options.drawPoints.size/u,className:n.className};Id(e+.5*l+f,t+o-h-1,m,s.svgElements,s.svg),Id(e+1.5*l+f+2,t+o-d-1,m,s.svgElements,s.svg)}};Hr.draw=function(n,e,t){var r=[],i={},s,o,a,l,c,u,h=0;for(c=0;c<n.length;c++)if(l=t.groups[n[c]],l.options.style==="bar"&&l.visible===!0&&(t.options.groups.visibility[n[c]]===void 0||t.options.groups.visibility[n[c]]===!0))for(u=0;u<e[n[c]].length;u++)r.push({screen_x:e[n[c]][u].screen_x,screen_end:e[n[c]][u].screen_end,screen_y:e[n[c]][u].screen_y,x:e[n[c]][u].x,end:e[n[c]][u].end,y:e[n[c]][u].y,groupId:n[c],label:e[n[c]][u].label}),h+=1;if(h!==0)for(Un(r).call(r,function(g,v){return g.screen_x===v.screen_x?g.groupId<v.groupId?-1:1:g.screen_x-v.screen_x}),Hr._getDataIntersections(i,r),c=0;c<r.length;c++){l=t.groups[r[c].groupId];var d=l.options.barChart.minWidth!=null?l.options.barChart.minWidth:.1*l.options.barChart.width;o=r[c].screen_x;var f=0;if(i[o]===void 0)c+1<r.length&&(s=Math.abs(r[c+1].screen_x-o)),a=Hr._getSafeDrawData(s,l,d);else{var m=c+(i[o].amount-i[o].resolved);m<r.length&&(s=Math.abs(r[m].screen_x-o)),a=Hr._getSafeDrawData(s,l,d),i[o].resolved+=1,l.options.stack===!0&&l.options.excludeFromStacking!==!0?r[c].screen_y<l.zeroPosition?(f=i[o].accumulatedNegative,i[o].accumulatedNegative+=l.zeroPosition-r[c].screen_y):(f=i[o].accumulatedPositive,i[o].accumulatedPositive+=l.zeroPosition-r[c].screen_y):l.options.barChart.sideBySide===!0&&(a.width=a.width/i[o].amount,a.offset+=i[o].resolved*a.width-.5*a.width*(i[o].amount+1))}let g=a.width,v=r[c].screen_x;if(r[c].screen_end!=null?(g=r[c].screen_end-r[c].screen_x,v+=g*.5):v+=a.offset,vP(v,r[c].screen_y-f,g,l.zeroPosition-r[c].screen_y,l.className+" vis-bar",t.svgElements,t.svg,l.style),l.options.drawPoints.enabled===!0){let y={screen_x:r[c].screen_x,screen_y:r[c].screen_y-f,x:r[c].x,y:r[c].y,groupId:r[c].groupId,label:r[c].label};Vg.draw([y],l,t,a.offset)}}};Hr._getDataIntersections=function(n,e){for(var t,r=0;r<e.length;r++)r+1<e.length&&(t=Math.abs(e[r+1].screen_x-e[r].screen_x)),r>0&&(t=Math.min(t,Math.abs(e[r-1].screen_x-e[r].screen_x))),t===0&&(n[e[r].screen_x]===void 0&&(n[e[r].screen_x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0}),n[e[r].screen_x].amount+=1)};Hr._getSafeDrawData=function(n,e,t){var r,i;return n<e.options.barChart.width&&n>0?(r=n<t?t:n,i=0,e.options.barChart.align==="left"?i-=.5*n:e.options.barChart.align==="right"&&(i+=.5*n)):(r=e.options.barChart.width,i=0,e.options.barChart.align==="left"?i-=.5*e.options.barChart.width:e.options.barChart.align==="right"&&(i+=.5*e.options.barChart.width)),{width:r,offset:i}};Hr.getStackedYRange=function(n,e,t,r,i){if(n.length>0){Un(n).call(n,function(o,a){return o.screen_x===a.screen_x?o.groupId<a.groupId?-1:1:o.screen_x-a.screen_x});var s={};Hr._getDataIntersections(s,n),e[r]=Hr._getStackedYRange(s,n),e[r].yAxisOrientation=i,t.push(r)}};Hr._getStackedYRange=function(n,e){for(var t,r=e[0].screen_y,i=e[0].screen_y,s=0;s<e.length;s++)t=e[s].screen_x,n[t]===void 0?(r=r>e[s].screen_y?e[s].screen_y:r,i=i<e[s].screen_y?e[s].screen_y:i):e[s].screen_y<0?n[t].accumulatedNegative+=e[s].screen_y:n[t].accumulatedPositive+=e[s].screen_y;for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r=r>n[o].accumulatedNegative?n[o].accumulatedNegative:r,r=r>n[o].accumulatedPositive?n[o].accumulatedPositive:r,i=i<n[o].accumulatedNegative?n[o].accumulatedNegative:i,i=i<n[o].accumulatedPositive?n[o].accumulatedPositive:i);return{min:r,max:i}};function Sr(){}Sr.calcPath=function(n,e){if(n!=null&&n.length>0){var t=[];return e.options.interpolation.enabled==!0?t=Sr._catmullRom(n,e):t=Sr._linear(n),t}};Sr.drawIcon=function(n,e,t,r,i,s){var o=i*.5,a,l,c=Ns("rect",s.svgElements,s.svg);if(c.setAttributeNS(null,"x",e),c.setAttributeNS(null,"y",t-o),c.setAttributeNS(null,"width",r),c.setAttributeNS(null,"height",2*o),c.setAttributeNS(null,"class","vis-outline"),a=Ns("path",s.svgElements,s.svg),a.setAttributeNS(null,"class",n.className),n.style!==void 0&&a.setAttributeNS(null,"style",n.style),a.setAttributeNS(null,"d","M"+e+","+t+" L"+(e+r)+","+t),n.options.shaded.enabled==!0&&(l=Ns("path",s.svgElements,s.svg),n.options.shaded.orientation=="top"?l.setAttributeNS(null,"d","M"+e+", "+(t-o)+"L"+e+","+t+" L"+(e+r)+","+t+" L"+(e+r)+","+(t-o)):l.setAttributeNS(null,"d","M"+e+","+t+" L"+e+","+(t+o)+" L"+(e+r)+","+(t+o)+"L"+(e+r)+","+t),l.setAttributeNS(null,"class",n.className+" vis-icon-fill"),n.options.shaded.style!==void 0&&n.options.shaded.style!==""&&l.setAttributeNS(null,"style",n.options.shaded.style)),n.options.drawPoints.enabled==!0){var u={style:n.options.drawPoints.style,styles:n.options.drawPoints.styles,size:n.options.drawPoints.size,className:n.className};Id(e+.5*r,t,u,s.svgElements,s.svg)}};Sr.drawShading=function(n,e,t,r){if(e.options.shaded.enabled==!0){var i=Number(r.svg.style.height.replace("px","")),s=Ns("path",r.svgElements,r.svg),o="L";e.options.interpolation.enabled==!0&&(o="C");var a,l=0;e.options.shaded.orientation=="top"?l=0:e.options.shaded.orientation=="bottom"?l=i:l=Math.min(Math.max(0,e.zeroPosition),i),e.options.shaded.orientation=="group"&&t!=null&&t!=null?a="M"+n[0][0]+","+n[0][1]+" "+this.serializePath(n,o,!1)+" L"+t[t.length-1][0]+","+t[t.length-1][1]+" "+this.serializePath(t,o,!0)+t[0][0]+","+t[0][1]+" Z":a="M"+n[0][0]+","+n[0][1]+" "+this.serializePath(n,o,!1)+" V"+l+" H"+n[0][0]+" Z",s.setAttributeNS(null,"class",e.className+" vis-fill"),e.options.shaded.style!==void 0&&s.setAttributeNS(null,"style",e.options.shaded.style),s.setAttributeNS(null,"d",a)}};Sr.draw=function(n,e,t){if(n!=null&&n!=null){var r=Ns("path",t.svgElements,t.svg);r.setAttributeNS(null,"class",e.className),e.style!==void 0&&r.setAttributeNS(null,"style",e.style);var i="L";e.options.interpolation.enabled==!0&&(i="C"),r.setAttributeNS(null,"d","M"+n[0][0]+","+n[0][1]+" "+this.serializePath(n,i,!1))}};Sr.serializePath=function(n,e,t){if(n.length<2)return"";var r=e,i;if(t)for(i=n.length-2;i>0;i--)r+=n[i][0]+","+n[i][1]+" ";else for(i=1;i<n.length;i++)r+=n[i][0]+","+n[i][1]+" ";return r};Sr._catmullRomUniform=function(n){var e,t,r,i,s,o,a=[];a.push([Math.round(n[0].screen_x),Math.round(n[0].screen_y)]);for(var l=1/6,c=n.length,u=0;u<c-1;u++)e=u==0?n[0]:n[u-1],t=n[u],r=n[u+1],i=u+2<c?n[u+2]:r,s={screen_x:(-e.screen_x+6*t.screen_x+r.screen_x)*l,screen_y:(-e.screen_y+6*t.screen_y+r.screen_y)*l},o={screen_x:(t.screen_x+6*r.screen_x-i.screen_x)*l,screen_y:(t.screen_y+6*r.screen_y-i.screen_y)*l},a.push([s.screen_x,s.screen_y]),a.push([o.screen_x,o.screen_y]),a.push([r.screen_x,r.screen_y]);return a};Sr._catmullRom=function(n,e){var t=e.options.interpolation.alpha;if(t==0||t===void 0)return this._catmullRomUniform(n);var r,i,s,o,a,l,c,u,h,d,f,m,g,v,y,b,w,S,_,E=[];E.push([Math.round(n[0].screen_x),Math.round(n[0].screen_y)]);for(var C=n.length,T=0;T<C-1;T++)r=T==0?n[0]:n[T-1],i=n[T],s=n[T+1],o=T+2<C?n[T+2]:s,c=Math.sqrt(Math.pow(r.screen_x-i.screen_x,2)+Math.pow(r.screen_y-i.screen_y,2)),u=Math.sqrt(Math.pow(i.screen_x-s.screen_x,2)+Math.pow(i.screen_y-s.screen_y,2)),h=Math.sqrt(Math.pow(s.screen_x-o.screen_x,2)+Math.pow(s.screen_y-o.screen_y,2)),v=Math.pow(h,t),b=Math.pow(h,2*t),y=Math.pow(u,t),w=Math.pow(u,2*t),_=Math.pow(c,t),S=Math.pow(c,2*t),d=2*S+3*_*y+w,f=2*b+3*v*y+w,m=3*_*(_+y),m>0&&(m=1/m),g=3*v*(v+y),g>0&&(g=1/g),a={screen_x:(-w*r.screen_x+d*i.screen_x+S*s.screen_x)*m,screen_y:(-w*r.screen_y+d*i.screen_y+S*s.screen_y)*m},l={screen_x:(b*i.screen_x+f*s.screen_x-w*o.screen_x)*g,screen_y:(b*i.screen_y+f*s.screen_y-w*o.screen_y)*g},a.screen_x==0&&a.screen_y==0&&(a=i),l.screen_x==0&&l.screen_y==0&&(l=s),E.push([a.screen_x,a.screen_y]),E.push([l.screen_x,l.screen_y]),E.push([s.screen_x,s.screen_y]);return E};Sr._linear=function(n){for(var e=[],t=0;t<n.length;t++)e.push([n[t].screen_x,n[t].screen_y]);return e};function Bl(n,e,t,r){this.id=e;var i=["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","interpolation","zIndex","excludeFromStacking","excludeFromLegend"];this.options=W.selectiveBridgeObject(i,t),this.usingDefaultStyle=n.className===void 0,this.groupsUsingDefaultStyles=r,this.zeroPosition=0,this.update(n),this.usingDefaultStyle==!0&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[],this.visible=n.visible===void 0?!0:n.visible}Bl.prototype.setItems=function(n){n!=null?(this.itemsData=n,Un(this.options)==!0&&W.insertSort(this.itemsData,function(e,t){return e.x>t.x?1:-1})):this.itemsData=[]};Bl.prototype.getItems=function(){return this.itemsData};Bl.prototype.setZeroPosition=function(n){this.zeroPosition=n};Bl.prototype.setOptions=function(n){if(n!==void 0){var e=["sampling","style","sort","yAxisOrientation","barChart","zIndex","excludeFromStacking","excludeFromLegend"];W.selectiveDeepExtend(e,this.options,n),typeof n.drawPoints=="function"&&(n.drawPoints={onRender:n.drawPoints}),W.mergeOptions(this.options,n,"interpolation"),W.mergeOptions(this.options,n,"drawPoints"),W.mergeOptions(this.options,n,"shaded"),n.interpolation&&typeof n.interpolation=="object"&&n.interpolation.parametrization&&(n.interpolation.parametrization=="uniform"?this.options.interpolation.alpha=0:n.interpolation.parametrization=="chordal"?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5))}};Bl.prototype.update=function(n){this.group=n,this.content=n.content||"graph",this.className=n.className||this.className||"vis-graph-group"+this.groupsUsingDefaultStyles[0]%10,this.visible=n.visible===void 0?!0:n.visible,this.style=n.style,this.setOptions(n.options)};Bl.prototype.getLegend=function(n,e,t,r,i){if(t==null||t==null){var s=document.createElementNS("http://www.w3.org/2000/svg","svg");t={svg:s,svgElements:{},options:this.options,groups:[this]}}switch((r==null||r==null)&&(r=0),(i==null||i==null)&&(i=.5*e),this.options.style){case"line":Sr.drawIcon(this,r,i,n,e,t);break;case"points":case"point":Vg.drawIcon(this,r,i,n,e,t);break;case"bar":Hr.drawIcon(this,r,i,n,e,t);break}return{icon:t.svg,label:this.content,orientation:this.options.yAxisOrientation}};Bl.prototype.getYRange=function(n){for(var e=n[0].y,t=n[0].y,r=0;r<n.length;r++)e=e>n[r].y?n[r].y:e,t=t<n[r].y?n[r].y:t;return{min:e,max:t,yAxisOrientation:this.options.yAxisOrientation}};function ji(n,e,t,r){this.body=n,this.defaultOptions={enabled:!1,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}},this.side=t,this.options=W.extend({},this.defaultOptions),this.linegraphOptions=r,this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups},this.setOptions(e)}ji.prototype=new $l;ji.prototype.clear=function(){this.groups={},this.amountOfGroups=0};ji.prototype.addGroup=function(n,e){e.options.excludeFromLegend!=!0&&(Object.prototype.hasOwnProperty.call(this.groups,n)||(this.groups[n]=e),this.amountOfGroups+=1)};ji.prototype.updateGroup=function(n,e){this.groups[n]=e};ji.prototype.removeGroup=function(n){Object.prototype.hasOwnProperty.call(this.groups,n)&&(delete this.groups[n],this.amountOfGroups-=1)};ji.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="vis-legend-text",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.width=this.options.iconSize+5+"px",this.svg.style.height="100%",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)};ji.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};ji.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};ji.prototype.setOptions=function(n){var e=["enabled","orientation","icons","left","right"];W.selectiveDeepExtend(e,this.options,n)};ji.prototype.redraw=function(){var n=0,e=rr(this.groups);Un(e).call(e,function(o,a){return o<a?-1:1});for(var t=0;t<e.length;t++){var r=e[t];this.groups[r].visible==!0&&(this.linegraphOptions.visibility[r]===void 0||this.linegraphOptions.visibility[r]==!0)&&n++}if(this.options[this.side].visible==!1||this.amountOfGroups==0||this.options.enabled==!1||n==0)this.hide();else{if(this.show(),this.options[this.side].position=="top-left"||this.options[this.side].position=="bottom-left"?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left="0px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right="0px",this.svg.style.left=""),this.options[this.side].position=="top-left"||this.options[this.side].position=="top-right")this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom="";else{var i=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+i+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""}this.options.icons==!1?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());var s="";for(t=0;t<e.length;t++)r=e[t],this.groups[r].visible==!0&&(this.linegraphOptions.visibility[r]===void 0||this.linegraphOptions.visibility[r]==!0)&&(s+=this.groups[r].content+"<br />");this.dom.textArea.innerHTML=W.xss(s),this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}};ji.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var n=rr(this.groups);Un(n).call(n,function(c,u){return c<u?-1:1}),BIe(this.svgElements);var e=window.getComputedStyle(this.dom.frame).paddingTop,t=Number(e.replace("px","")),r=t,i=this.options.iconSize,s=.75*this.options.iconSize,o=t+.5*s+3;this.svg.style.width=i+5+t+"px";for(var a=0;a<n.length;a++){var l=n[a];this.groups[l].visible==!0&&(this.linegraphOptions.visibility[l]===void 0||this.linegraphOptions.visibility[l]==!0)&&(this.groups[l].getLegend(i,s,this.framework,r,o),o+=s+this.options.iconSpacing)}}};var Mb="__ungrouped__";function Qt(n,e){this.id=jc(),this.body=n,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,stack:!1,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,sideBySide:!1,align:"center"},interpolation:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{},legend:{},groups:{visibility:{}}},this.options=W.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={},this.abortedGraphUpdate=!1,this.updateSVGheight=!1,this.updateSVGheightOnResize=!1,this.forceGraphUpdate=!0;var t=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(r,i){t._onAdd(i.items)},update:function(r,i){t._onUpdate(i.items)},remove:function(r,i){t._onRemove(i.items)}},this.groupListeners={add:function(r,i){t._onAddGroups(i.items)},update:function(r,i){t._onUpdateGroups(i.items)},remove:function(r,i){t._onRemoveGroups(i.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(e),this.groupsUsingDefaultStyles=[0],this.body.emitter.on("rangechanged",function(){t.svg.style.left=W.option.asSize(-t.props.width),t.forceGraphUpdate=!0,t.redraw.call(t)}),this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups}}Qt.prototype=new $l;Qt.prototype._create=function(){var n=document.createElement("div");n.className="vis-line-graph",this.dom.frame=n,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",n.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new eW(this.body,this.options.dataAxis,this.svg,this.options.groups),this.options.dataAxis.orientation="right",this.yAxisRight=new eW(this.body,this.options.dataAxis,this.svg,this.options.groups),delete this.options.dataAxis.orientation,this.legendLeft=new ji(this.body,this.options.legend,"left",this.options.groups),this.legendRight=new ji(this.body,this.options.legend,"right",this.options.groups),this.show()};Qt.prototype.setOptions=function(n){if(n){var e=["sampling","defaultGroup","stack","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"];n.graphHeight===void 0&&n.height!==void 0?(this.updateSVGheight=!0,this.updateSVGheightOnResize=!0):this.body.domProps.centerContainer.height!==void 0&&n.graphHeight!==void 0&&Ti((n.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.updateSVGheight=!0),W.selectiveDeepExtend(e,this.options,n),W.mergeOptions(this.options,n,"interpolation"),W.mergeOptions(this.options,n,"drawPoints"),W.mergeOptions(this.options,n,"shaded"),W.mergeOptions(this.options,n,"legend"),n.interpolation&&typeof n.interpolation=="object"&&n.interpolation.parametrization&&(n.interpolation.parametrization=="uniform"?this.options.interpolation.alpha=0:n.interpolation.parametrization=="chordal"?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5)),this.yAxisLeft&&n.dataAxis!==void 0&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&n.legend!==void 0&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),Object.prototype.hasOwnProperty.call(this.groups,Mb)&&this.groups[Mb].setOptions(n)}this.dom.frame&&(this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0}))};Qt.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};Qt.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};Qt.prototype.setItems=function(n){var e=this,t,r=this.itemsData;if(!n)this.itemsData=null;else if(iu(n))this.itemsData=Sb(n);else throw new TypeError("Data must implement the interface of DataSet or DataView");if(r&&(je(W).call(W,this.itemListeners,function(s,o){r.off(o,s)}),r.dispose(),t=r.getIds(),this._onRemove(t)),this.itemsData){var i=this.id;je(W).call(W,this.itemListeners,function(s,o){e.itemsData.on(o,s,i)}),t=this.itemsData.getIds(),this._onAdd(t)}};Qt.prototype.setGroups=function(n){var e=this,t;if(this.groupsData){je(W).call(W,this.groupListeners,function(s,o){e.groupsData.off(o,s)}),t=this.groupsData.getIds(),this.groupsData=null;for(var r=0;r<t.length;r++)this._removeGroup(t[r])}if(!n)this.groupsData=null;else if(iu(n))this.groupsData=n;else throw new TypeError("Data must implement the interface of DataSet or DataView");if(this.groupsData){var i=this.id;je(W).call(W,this.groupListeners,function(s,o){e.groupsData.on(o,s,i)}),t=this.groupsData.getIds(),this._onAddGroups(t)}};Qt.prototype._onUpdate=function(n){this._updateAllGroupData(n)};Qt.prototype._onAdd=function(n){this._onUpdate(n)};Qt.prototype._onRemove=function(n){this._onUpdate(n)};Qt.prototype._onUpdateGroups=function(n){this._updateAllGroupData(null,n)};Qt.prototype._onAddGroups=function(n){this._onUpdateGroups(n)};Qt.prototype._onRemoveGroups=function(n){for(var e=0;e<n.length;e++)this._removeGroup(n[e]);this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})};Qt.prototype._removeGroup=function(n){Object.prototype.hasOwnProperty.call(this.groups,n)&&(this.groups[n].options.yAxisOrientation=="right"?(this.yAxisRight.removeGroup(n),this.legendRight.removeGroup(n),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(n),this.legendLeft.removeGroup(n),this.legendLeft.redraw()),delete this.groups[n])};Qt.prototype._updateGroup=function(n,e){Object.prototype.hasOwnProperty.call(this.groups,e)?(this.groups[e].update(n),this.groups[e].options.yAxisOrientation=="right"?(this.yAxisRight.updateGroup(e,this.groups[e]),this.legendRight.updateGroup(e,this.groups[e]),this.yAxisLeft.removeGroup(e),this.legendLeft.removeGroup(e)):(this.yAxisLeft.updateGroup(e,this.groups[e]),this.legendLeft.updateGroup(e,this.groups[e]),this.yAxisRight.removeGroup(e),this.legendRight.removeGroup(e))):(this.groups[e]=new Bl(n,e,this.options,this.groupsUsingDefaultStyles),this.groups[e].options.yAxisOrientation=="right"?(this.yAxisRight.addGroup(e,this.groups[e]),this.legendRight.addGroup(e,this.groups[e])):(this.yAxisLeft.addGroup(e,this.groups[e]),this.legendLeft.addGroup(e,this.groups[e]))),this.legendLeft.redraw(),this.legendRight.redraw()};Qt.prototype._updateAllGroupData=function(n,e){if(this.itemsData!=null){var t={},r=this.itemsData.get(),i=this.itemsData.idProp,s={};n&&Ut(n).call(n,function(v){s[v]=v});for(var o={},a=0;a<r.length;a++){var l=r[a],c=l.group;c==null&&(c=Mb),Object.prototype.hasOwnProperty.call(o,c)?o[c]++:o[c]=1}var u={};if(!e&&n){for(c in this.groups)if(Object.prototype.hasOwnProperty.call(this.groups,c)){g=this.groups[c];var h=g.getItems();t[c]=yt(h).call(h,function(v){return u[v[i]]=v[i],v[i]!==s[v[i]]});var d=o[c];o[c]-=t[c].length,t[c].length<d&&(t[c][d-1]={})}}for(a=0;a<r.length;a++)if(l=r[a],c=l.group,c==null&&(c=Mb),!(!e&&n&&l[i]!==s[l[i]]&&Object.prototype.hasOwnProperty.call(u,l[i]))){Object.prototype.hasOwnProperty.call(t,c)||(t[c]=new Array(o[c]));var f=W.bridgeObject(l);f.x=W.convert(l.x,"Date"),f.end=W.convert(l.end,"Date"),f.orginalY=l.y,f.y=Number(l.y),f[i]=l[i];var m=t[c].length-o[c]--;t[c][m]=f}for(c in this.groups)!Object.prototype.hasOwnProperty.call(this.groups,c)||Object.prototype.hasOwnProperty.call(t,c)||(t[c]=new Array(0));for(c in t)if(Object.prototype.hasOwnProperty.call(t,c))if(t[c].length==0)Object.prototype.hasOwnProperty.call(this.groups,c)&&this._removeGroup(c);else{var g=void 0;this.groupsData!=null&&(g=this.groupsData.get(c)),g==null&&(g={id:c,content:this.options.defaultGroup+c}),this._updateGroup(g,c),this.groups[c].setItems(t[c])}this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})}};Qt.prototype.redraw=function(){var n=!1;this.props.width=this.dom.frame.offsetWidth,this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom,n=this._isResized()||n;var e=this.body.range.end-this.body.range.start,t=e!=this.lastVisibleInterval;if(this.lastVisibleInterval=e,n==!0){var r;this.svg.style.width=W.option.asSize(3*this.props.width),this.svg.style.left=W.option.asSize(-this.props.width),(Xt(r=this.options.height+"").call(r,"%")!=-1||this.updateSVGheightOnResize==!0)&&(this.updateSVGheight=!0)}if(this.updateSVGheight==!0?(this.options.graphHeight!=this.props.height+"px"&&(this.options.graphHeight=this.props.height+"px",this.svg.style.height=this.props.height+"px"),this.updateSVGheight=!1):this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",n==!0||t==!0||this.abortedGraphUpdate==!0||this.forceGraphUpdate==!0)n=this._updateGraph()||n,this.forceGraphUpdate=!1,this.lastStart=this.body.range.start,this.svg.style.left=-this.props.width+"px";else if(this.lastStart!=0){var i=this.body.range.start-this.lastStart,s=this.body.range.end-this.body.range.start;if(this.props.width!=0){var o=this.props.width/s,a=i*o;this.svg.style.left=-this.props.width-a+"px"}}return this.legendLeft.redraw(),this.legendRight.redraw(),n};Qt.prototype._getSortedGroupIds=function(){var n=[];for(var e in this.groups)if(Object.prototype.hasOwnProperty.call(this.groups,e)){var t=this.groups[e];t.visible==!0&&(this.options.groups.visibility[e]===void 0||this.options.groups.visibility[e]==!0)&&n.push({id:e,zIndex:t.options.zIndex})}W.insertSort(n,function(s,o){var a=s.zIndex,l=o.zIndex;return a===void 0&&(a=0),l===void 0&&(l=0),a==l?0:a<l?-1:1});for(var r=new Array(n.length),i=0;i<n.length;i++)r[i]=n[i].id;return r};Qt.prototype._updateGraph=function(){if(Ka(this.svgElements),this.props.width!=0&&this.itemsData!=null){var n,e,t={},r=!1,i=this.body.util.toGlobalTime(-this.body.domProps.root.width),s=this.body.util.toGlobalTime(2*this.body.domProps.root.width),o=this._getSortedGroupIds();if(o.length>0){var a={};for(this._getRelevantData(o,a,i,s),this._applySampling(o,a),e=0;e<o.length;e++)this._convertXcoordinates(a[o[e]]);if(this._getYRanges(o,a,t),r=this._updateYAxis(o,t),r==!0)return Ji(this.svgElements),this.abortedGraphUpdate=!0,!0;this.abortedGraphUpdate=!1;var l=void 0;for(e=0;e<o.length;e++)n=this.groups[o[e]],this.options.stack===!0&&this.options.style==="line"&&(n.options.excludeFromStacking==null||!n.options.excludeFromStacking)&&(l!=null&&(this._stack(a[n.id],a[l.id]),n.options.shaded.enabled==!0&&n.options.shaded.orientation!=="group"&&(n.options.shaded.orientation=="top"&&l.options.shaded.orientation!=="group"?(l.options.shaded.orientation="group",l.options.shaded.groupId=n.id):(n.options.shaded.orientation="group",n.options.shaded.groupId=l.id))),l=n),this._convertYcoordinates(a[o[e]],n);var c={};for(e=0;e<o.length;e++)if(n=this.groups[o[e]],n.options.style==="line"&&n.options.shaded.enabled==!0){var u=a[o[e]];if(u==null||u.length==0)continue;if(Object.prototype.hasOwnProperty.call(c,o[e])||(c[o[e]]=Sr.calcPath(u,n)),n.options.shaded.orientation==="group"){var h=n.options.shaded.groupId;if(Xt(o).call(o,h)===-1){console.log(n.id+": Unknown shading group target given:"+h);continue}Object.prototype.hasOwnProperty.call(c,h)||(c[h]=Sr.calcPath(a[h],this.groups[h])),Sr.drawShading(c[o[e]],n,c[h],this.framework)}else Sr.drawShading(c[o[e]],n,void 0,this.framework)}for(Hr.draw(o,a,this.framework),e=0;e<o.length;e++)if(n=this.groups[o[e]],a[o[e]].length>0)switch(n.options.style){case"line":Object.prototype.hasOwnProperty.call(c,o[e])||(c[o[e]]=Sr.calcPath(a[o[e]],n)),Sr.draw(c[o[e]],n,this.framework);case"point":case"points":(n.options.style=="point"||n.options.style=="points"||n.options.drawPoints.enabled==!0)&&Vg.draw(a[o[e]],n,this.framework);break}}}return Ji(this.svgElements),!1};Qt.prototype._stack=function(n,e){var t,r,i,s,o;t=0;for(var a=0;a<n.length;a++){s=void 0,o=void 0;for(var l=t;l<e.length;l++)if(e[l].x===n[a].x){s=e[l],o=e[l],t=l;break}else if(e[l].x>n[a].x){o=e[l],l==0?s=o:s=e[l-1],t=l;break}o===void 0&&(s=e[e.length-1],o=e[e.length-1]),r=o.x-s.x,i=o.y-s.y,r==0?n[a].y=n[a].orginalY+o.y:n[a].y=n[a].orginalY+i/r*(n[a].x-s.x)+s.y}};Qt.prototype._getRelevantData=function(n,e,t,r){var i,s,o,a;if(n.length>0)for(s=0;s<n.length;s++){i=this.groups[n[s]];var l=i.getItems();if(Un(i.options)==!0){var c=function(f,m){return f.getTime()==m.getTime()?0:f<m?-1:1},u=Math.max(0,W.binarySearchValue(l,t,"x","before",c)),h=Math.min(l.length,W.binarySearchValue(l,r,"x","after",c)+1);h<=0&&(h=l.length);var d=new Array(h-u);for(o=u;o<h;o++)a=i.itemsData[o],d[o-u]=a;e[n[s]]=d}else e[n[s]]=i.itemsData}};Qt.prototype._applySampling=function(n,e){var t;if(n.length>0){for(var r=0;r<n.length;r++)if(t=this.groups[n[r]],t.options.sampling==!0){var i=e[n[r]];if(i.length>0){var s=1,o=i.length,a=this.body.util.toGlobalScreen(i[i.length-1].x)-this.body.util.toGlobalScreen(i[0].x),l=o/a;s=Math.min(Math.ceil(.2*o),Math.max(1,Math.round(l)));for(var c=new Array(o),u=0;u<o;u+=s){var h=Math.round(u/s);c[h]=i[u]}e[n[r]]=Wr(c).call(c,0,Math.round(o/s))}}}};Qt.prototype._getYRanges=function(n,e,t){var r,i,s,o=[],a=[],l;if(n.length>0){for(s=0;s<n.length;s++)r=e[n[s]],l=this.groups[n[s]].options,r.length>0&&(i=this.groups[n[s]],l.stack===!0&&l.style==="bar"?l.yAxisOrientation==="left"?o=$n(o).call(o,r):a=$n(a).call(a,r):t[n[s]]=i.getYRange(r,n[s]));Hr.getStackedYRange(o,t,n,"__barStackLeft","left"),Hr.getStackedYRange(a,t,n,"__barStackRight","right")}};Qt.prototype._updateYAxis=function(n,e){var t=!1,r=!1,i=!1,s=1e9,o=1e9,a=-1e9,l=-1e9,c,u;if(n.length>0){for(var h=0;h<n.length;h++){var d=this.groups[n[h]];d&&d.options.yAxisOrientation!="right"?(r=!0,s=1e9,a=-1e9):d&&d.options.yAxisOrientation&&(i=!0,o=1e9,l=-1e9)}for(h=0;h<n.length;h++)!Object.prototype.hasOwnProperty.call(e,n[h])||e[n[h]].ignore===!0||(c=e[n[h]].min,u=e[n[h]].max,e[n[h]].yAxisOrientation!="right"?(r=!0,s=s>c?c:s,a=a<u?u:a):(i=!0,o=o>c?c:o,l=l<u?u:l));r==!0&&this.yAxisLeft.setRange(s,a),i==!0&&this.yAxisRight.setRange(o,l)}t=this._toggleAxisVisiblity(r,this.yAxisLeft)||t,t=this._toggleAxisVisiblity(i,this.yAxisRight)||t,i==!0&&r==!0?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!r,this.yAxisRight.masterAxis=this.yAxisLeft,this.yAxisRight.master==!1?(i==!0?this.yAxisLeft.lineOffset=this.yAxisRight.width:this.yAxisLeft.lineOffset=0,t=this.yAxisLeft.redraw()||t,t=this.yAxisRight.redraw()||t):t=this.yAxisRight.redraw()||t;var f=["__barStackLeft","__barStackRight","__lineStackLeft","__lineStackRight"];for(h=0;h<f.length;h++)Xt(n).call(n,f[h])!=-1&&Wr(n).call(n,Xt(n).call(n,f[h]),1);return t};Qt.prototype._toggleAxisVisiblity=function(n,e){var t=!1;return n==!1?e.dom.frame.parentNode&&e.hidden==!1&&(e.hide(),t=!0):!e.dom.frame.parentNode&&e.hidden==!0&&(e.show(),t=!0),t};Qt.prototype._convertXcoordinates=function(n){for(var e=this.body.util.toScreen,t=0;t<n.length;t++)n[t].screen_x=e(n[t].x)+this.props.width,n[t].screen_y=n[t].y,n[t].end!=null?n[t].screen_end=e(n[t].end)+this.props.width:n[t].screen_end=void 0};Qt.prototype._convertYcoordinates=function(n,e){var t=this.yAxisLeft,r=Number(this.svg.style.height.replace("px",""));e.options.yAxisOrientation=="right"&&(t=this.yAxisRight);for(var i=0;i<n.length;i++)n[i].screen_y=Math.round(t.convertValue(n[i].y));e.setZeroPosition(Math.min(r,t.convertValue(0)))};let pt="string",Ot="boolean",Gt="number",DNe="array",ju="date",gn="object",NNe="dom",$u="moment",tW="any",ANe={configure:{enabled:{boolean:Ot},filter:{boolean:Ot,function:"function"},container:{dom:NNe},__type__:{object:gn,boolean:Ot,function:"function"}},alignCurrentTime:{string:pt,undefined:"undefined"},yAxisOrientation:{string:["left","right"]},defaultGroup:{string:pt},sort:{boolean:Ot},sampling:{boolean:Ot},stack:{boolean:Ot},graphHeight:{string:pt,number:Gt},shaded:{enabled:{boolean:Ot},orientation:{string:["bottom","top","zero","group"]},groupId:{object:gn},__type__:{boolean:Ot,object:gn}},style:{string:["line","bar","points"]},barChart:{width:{number:Gt},minWidth:{number:Gt},sideBySide:{boolean:Ot},align:{string:["left","center","right"]},__type__:{object:gn}},interpolation:{enabled:{boolean:Ot},parametrization:{string:["centripetal","chordal","uniform"]},alpha:{number:Gt},__type__:{object:gn,boolean:Ot}},drawPoints:{enabled:{boolean:Ot},onRender:{function:"function"},size:{number:Gt},style:{string:["square","circle"]},__type__:{object:gn,boolean:Ot,function:"function"}},dataAxis:{showMinorLabels:{boolean:Ot},showMajorLabels:{boolean:Ot},showWeekScale:{boolean:Ot},icons:{boolean:Ot},width:{string:pt,number:Gt},visible:{boolean:Ot},alignZeros:{boolean:Ot},left:{range:{min:{number:Gt,undefined:"undefined"},max:{number:Gt,undefined:"undefined"},__type__:{object:gn}},format:{function:"function"},title:{text:{string:pt,number:Gt,undefined:"undefined"},style:{string:pt,undefined:"undefined"},__type__:{object:gn}},__type__:{object:gn}},right:{range:{min:{number:Gt,undefined:"undefined"},max:{number:Gt,undefined:"undefined"},__type__:{object:gn}},format:{function:"function"},title:{text:{string:pt,number:Gt,undefined:"undefined"},style:{string:pt,undefined:"undefined"},__type__:{object:gn}},__type__:{object:gn}},__type__:{object:gn}},legend:{enabled:{boolean:Ot},icons:{boolean:Ot},left:{visible:{boolean:Ot},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:gn}},right:{visible:{boolean:Ot},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:gn}},__type__:{object:gn,boolean:Ot}},groups:{visibility:{any:tW},__type__:{object:gn}},autoResize:{boolean:Ot},throttleRedraw:{number:Gt},clickToUse:{boolean:Ot},end:{number:Gt,date:ju,string:pt,moment:$u},format:{minorLabels:{millisecond:{string:pt,undefined:"undefined"},second:{string:pt,undefined:"undefined"},minute:{string:pt,undefined:"undefined"},hour:{string:pt,undefined:"undefined"},weekday:{string:pt,undefined:"undefined"},day:{string:pt,undefined:"undefined"},week:{string:pt,undefined:"undefined"},month:{string:pt,undefined:"undefined"},quarter:{string:pt,undefined:"undefined"},year:{string:pt,undefined:"undefined"},__type__:{object:gn}},majorLabels:{millisecond:{string:pt,undefined:"undefined"},second:{string:pt,undefined:"undefined"},minute:{string:pt,undefined:"undefined"},hour:{string:pt,undefined:"undefined"},weekday:{string:pt,undefined:"undefined"},day:{string:pt,undefined:"undefined"},week:{string:pt,undefined:"undefined"},month:{string:pt,undefined:"undefined"},quarter:{string:pt,undefined:"undefined"},year:{string:pt,undefined:"undefined"},__type__:{object:gn}},__type__:{object:gn}},moment:{function:"function"},height:{string:pt,number:Gt},hiddenDates:{start:{date:ju,number:Gt,string:pt,moment:$u},end:{date:ju,number:Gt,string:pt,moment:$u},repeat:{string:pt},__type__:{object:gn,array:DNe}},locale:{string:pt},locales:{__any__:{any:tW},__type__:{object:gn}},max:{date:ju,number:Gt,string:pt,moment:$u},maxHeight:{number:Gt,string:pt},maxMinorChars:{number:Gt},min:{date:ju,number:Gt,string:pt,moment:$u},minHeight:{number:Gt,string:pt},moveable:{boolean:Ot},multiselect:{boolean:Ot},orientation:{string:pt},showCurrentTime:{boolean:Ot},showMajorLabels:{boolean:Ot},showMinorLabels:{boolean:Ot},showWeekScale:{boolean:Ot},snap:{function:"function",null:"null"},start:{date:ju,number:Gt,string:pt,moment:$u},timeAxis:{scale:{string:pt,undefined:"undefined"},step:{number:Gt,undefined:"undefined"},__type__:{object:gn}},width:{string:pt,number:Gt},zoomable:{boolean:Ot},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:Gt},zoomMin:{number:Gt},zIndex:{number:Gt},__type__:{object:gn}},LNe={global:{alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],sort:!0,sampling:!0,stack:!1,shaded:{enabled:!1,orientation:["zero","top","bottom","group"]},style:["line","bar","points"],barChart:{width:[50,5,100,5],minWidth:[50,5,100,5],sideBySide:!1,align:["left","center","right"]},interpolation:{enabled:!0,parametrization:["centripetal","chordal","uniform"]},drawPoints:{enabled:!0,size:[6,2,30,1],style:["square","circle"]},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,width:[40,0,200,1],visible:!0,alignZeros:!0,left:{title:{text:"",style:""}},right:{title:{text:"",style:""}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]},right:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]}},autoResize:!0,clickToUse:!1,end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",quarter:"[Q]Q",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",quarter:"YYYY",year:""}},height:"",locale:"",max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!0,orientation:["both","bottom","top"],showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,showWeekScale:!1,start:"",width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],zIndex:0}};function xa(n,e,t,r){var i,s,o,a,l,c,u;if(!(It(t)||iu(t))&&t instanceof Object){var h=r;r=t,t=h}r&&r.throttleRedraw&&console.warn('Graph2d option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var d=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:li,width:null,height:null,maxHeight:null,minHeight:null},this.options=W.deepExtend({},this.defaultOptions),this._create(n),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:ue(i=this.on).call(i,this),off:ue(s=this.off).call(s,this),emit:ue(o=this.emit).call(o,this)},hiddenDates:[],util:{getScale(){return d.timeAxis.step.scale},getStep(){return d.timeAxis.step.step},toScreen:ue(a=d._toScreen).call(a,d),toGlobalScreen:ue(l=d._toGlobalScreen).call(l,d),toTime:ue(c=d._toTime).call(c,d),toGlobalTime:ue(u=d._toGlobalTime).call(u,d)}},this.range=new RD(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new _P(this.body),this.components.push(this.timeAxis),this.currentTime=new JDe(this.body),this.components.push(this.currentTime),this.linegraph=new Qt(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,this.on("tap",function(f){d.emit("click",d.getEventProperties(f))}),this.on("doubletap",function(f){d.emit("doubleClick",d.getEventProperties(f))}),this.dom.root.oncontextmenu=function(f){d.emit("contextmenu",d.getEventProperties(f))},this.initialFitDone=!1,this.on("changed",function(){if(d.itemsData!=null){if(!d.initialFitDone&&!d.options.rollingMode)if(d.initialFitDone=!0,d.options.start!=null||d.options.end!=null){if(d.options.start==null||d.options.end==null)var f=d.getItemRange();var m=d.options.start!=null?d.options.start:f.min,g=d.options.end!=null?d.options.end:f.max;d.setWindow(m,g,{animation:!1})}else d.fit({animation:!1});!d.initialDrawDone&&(d.initialRangeChangeDone||!d.options.start&&!d.options.end||d.options.rollingMode)&&(d.initialDrawDone=!0,d.dom.root.style.visibility="visible",d.dom.loadingScreen.parentNode.removeChild(d.dom.loadingScreen),d.options.onInitialDrawComplete&&fi(()=>d.options.onInitialDrawComplete(),0))}}),r&&this.setOptions(r),t&&this.setGroups(t),e&&this.setItems(e),this._redraw()}xa.prototype=new jD;xa.prototype.setOptions=function(n){Sn.validate(n,ANe)===!0&&console.log("%cErrors have been found in the supplied options object.",kP),jD.prototype.setOptions.call(this,n)};xa.prototype.setItems=function(n){var e=this.itemsData==null,t;if(n?iu(n)?t=Sb(n):t=Sb(new MD(n)):t=null,this.itemsData&&this.itemsData.dispose(),this.itemsData=t,this.linegraph&&this.linegraph.setItems(t!=null?t.rawDS:null),e)if(this.options.start!=null||this.options.end!=null){var r=this.options.start!=null?this.options.start:null,i=this.options.end!=null?this.options.end:null;this.setWindow(r,i,{animation:!1})}else this.fit({animation:!1})};xa.prototype.setGroups=function(n){var e;n?iu(n)?e=n:e=new MD(n):e=null,this.groupsData=e,this.linegraph.setGroups(e)};xa.prototype.getLegend=function(n,e,t){return e===void 0&&(e=15),t===void 0&&(t=15),this.linegraph.groups[n]!==void 0?this.linegraph.groups[n].getLegend(e,t):"cannot find group:'"+n+"'"};xa.prototype.isGroupVisible=function(n){return this.linegraph.groups[n]!==void 0?this.linegraph.groups[n].visible&&(this.linegraph.options.groups.visibility[n]===void 0||this.linegraph.options.groups.visibility[n]==!0):!1};xa.prototype.getDataRange=function(){var n=null,e=null;for(var t in this.linegraph.groups)if(!(!Object.prototype.hasOwnProperty.call(this.linegraph.groups,t)||this.linegraph.groups[t].visible!==!0))for(var r=0;r<this.linegraph.groups[t].itemsData.length;r++){var i=this.linegraph.groups[t].itemsData[r],s=W.convert(i.x,"Date").valueOf();n=n==null||n>s?s:n,e=e==null||e<s?s:e}return{min:n!=null?new Date(n):null,max:e!=null?new Date(e):null}};xa.prototype.getEventProperties=function(n){var e=n.center?n.center.x:n.clientX,t=n.center?n.center.y:n.clientY,r=e-W.getAbsoluteLeft(this.dom.centerContainer),i=t-W.getAbsoluteTop(this.dom.centerContainer),s=this._toTime(r),o=sZ.customTimeFromTarget(n),a=W.getTarget(n),l=null;W.hasParent(a,this.timeAxis.dom.foreground)||this.timeAxis2&&W.hasParent(a,this.timeAxis2.dom.foreground)?l="axis":W.hasParent(a,this.linegraph.yAxisLeft.dom.frame)||W.hasParent(a,this.linegraph.yAxisRight.dom.frame)?l="data-axis":W.hasParent(a,this.linegraph.legendLeft.dom.frame)||W.hasParent(a,this.linegraph.legendRight.dom.frame)?l="legend":o!=null?l="custom-time":W.hasParent(a,this.currentTime.bar)?l="current-time":W.hasParent(a,this.dom.center)&&(l="background");var c=[],u=this.linegraph.yAxisLeft,h=this.linegraph.yAxisRight;return!u.hidden&&this.itemsData.length>0&&c.push(u.screenToValue(i)),!h.hidden&&this.itemsData.length>0&&c.push(h.screenToValue(i)),{event:n,customTime:o?o.options.id:null,what:l,pageX:n.srcEvent?n.srcEvent.pageX:n.pageX,pageY:n.srcEvent?n.srcEvent.pageY:n.pageY,x:r,y:i,time:s,value:c}};xa.prototype._createConfigurator=function(){return new PNe(this,this.dom.container,LNe)};const FNe=zIe();li.locale(FNe);const jNe=I.createContext(void 0),Gf="onboard_mnemonic",Vf="onboard_wallet_address",$Ne=({children:n})=>{const[e,t]=I.useState(null),[r,i]=I.useState(null);I.useEffect(()=>{const l=localStorage.getItem(Vf),c=localStorage.getItem(Gf),u=localStorage.getItem("generatedAddress"),h=localStorage.getItem("mnemonic");l&&c?(t(l),i(c)):u&&h&&(t(u),i(h),localStorage.setItem(Vf,u),localStorage.setItem(Gf,h),localStorage.removeItem("generatedAddress"),localStorage.removeItem("mnemonic"))},[]),I.useEffect(()=>{const l=c=>{c.key===Vf?t(c.newValue):c.key===Gf&&i(c.newValue)};return window.addEventListener("storage",l),()=>window.removeEventListener("storage",l)},[]);const s=I.useCallback((l,c)=>{t(l),i(c),localStorage.setItem(Vf,l),localStorage.setItem(Gf,c)},[]),o=I.useCallback(()=>{t(null),i(null),localStorage.removeItem(Vf),localStorage.removeItem(Gf)},[]),a=I.useMemo(()=>({generatedAddress:e,mnemonic:r,setGeneratedData:s,clearGeneratedData:o}),[e,r,s,o]);return k.jsx(jNe.Provider,{value:a,children:n})},Iv="onboard_completed",vn={baseURL:"https://router.morpheum.io",wsURL:"wss://router.morpheum.io/websocket",layoutConfig:Rme,compactType:"vertical",allStatic:!0,orderbookEnhancement:{enabled:!0,jitter:IV,fakePending:{maxFakeLevelsPerSide:3,minLifetimeMs:2e3,maxLifetimeMs:8e3,volumeScalePct:.8,minAddDelayMs:1500,maxAddDelayMs:5e3}},orderbookMaxDepth:20,refreshInterval:5e3,tradingViewSymbol:"BINANCE:BTCUSDT",tradingViewInterval:"5",layoutMargin:[5,5]},BNe=30,zNe=12;function qNe(){var cf;const[n,e]=I.useState("--"),[t,r]=I.useState(void 0),[i,s]=I.useState(!1),[o,a]=I.useState(10),[l,c]=I.useState(!1),[u,h]=I.useState(hve),[d,f]=I.useState(!1),[m,g]=I.useState(0),[v,y]=I.useState(0),[b,w]=I.useState("orders"),S=I.useRef(null),_=I.useRef(null),[E,C]=I.useState("lg"),[T,O]=I.useState(!1),R=I.useRef(!1),D=I.useRef([]),A=I.useMemo(()=>Ep(vn.layoutConfig),[]),[F,z]=I.useState(()=>Ep(vn.layoutConfig));I.useEffect(()=>{z(A),D.current=A,O(!1),R.current=!1},[A]);const[j,L]=I.useState(()=>localStorage.getItem("authToken")||""),{markets:B,selectedMarketId:$,loadingMarkets:U,getError:H}=Bd({baseURL:vn.baseURL,sessionToken:j,autoFetchMarkets:!0}),{toggleEnabled:K}=pi(),{mnemonic:J,walletAddress:Z,authToken:q,setMnemonic:X,onboard:G,setAccountData:ne,resetAll:te}=$de(),[be,Y]=I.useState(()=>!localStorage.getItem(Iv));I.useEffect(()=>{!J&&!be&&X(pI)},[J,X,be]);const ee=I.useCallback(async(Be,ft)=>{await X(Be),await G(Be,vn.baseURL),localStorage.setItem(Iv,"1"),Y(!1)},[X,G]),pe=I.useCallback(Be=>{ne("",Be),localStorage.setItem(Iv,"1"),Y(!1)},[ne]);I.useEffect(()=>{D.current=F},[F]),I.useEffect(()=>{L(q??""),q?localStorage.setItem("authToken",q):localStorage.removeItem("authToken")},[q]);const{setAuthToken:ge,setWalletAddress:qe,client:De}=pi();I.useEffect(()=>{ge(j||void 0)},[j,ge]),I.useEffect(()=>{qe(Z||void 0)},[Z,qe]);const{collections:_e,spotWalletBalance:Ae,refreshBucketBalance:et}=KO({subscriptionClient:De??void 0,baseURL:vn.baseURL,authToken:j,walletAddress:Z??"",refreshInterval:vn.refreshInterval}),{client:Ee,isReady:Re,error:Xe}=ax({baseURL:vn.baseURL,mnemonic:J??""}),[Ue,ct]=I.useState(!1),[Ht,fe]=I.useState(""),[ae,se]=I.useState(""),[Pe,Ge]=I.useState(10),[me,ve]=I.useState(10),[oe,ke]=I.useState(""),[Oe,ye]=I.useState("cross"),[Le,ot]=I.useState("cross"),[en,$t]=I.useState("transfer"),[dn,Pn]=I.useState(!1),He=I.useRef(0),[ht,Me]=I.useState(!1),[le,lt]=I.useState(""),[mt,Ie]=I.useState("USDC"),[Fe,Ce]=I.useState(10),[Bt,Qe]=I.useState(""),[Yt,We]=I.useState(0),Ze=I.useRef(null);I.useEffect(()=>{if(Xe){const Be=Xe.message;console.error("Failed to initialize FiClient:",Xe),Ke.error("Exchange client initialization failed",{description:Be,action:yn(Be)})}},[Xe]),I.useEffect(()=>{Ze.current=new Ls({baseURL:vn.baseURL,sessionToken:j??void 0})},[j]);const Ne=I.useCallback(async()=>{if(!(!(Z!=null&&Z.trim())||!Ze.current))try{const Be=await Ze.current.getBalanceDecimal(Z,mt),ft=typeof Be.available=="number"?Be.available:Be.availableBalance?st(Be.availableBalance):0;We(ft)}catch{We(0)}},[Z,mt]);I.useEffect(()=>{ht&&(Z!=null&&Z.trim())&&Ne()},[ht,Z,mt,Ne]);const rt=I.useCallback(Be=>({USDC:1,USDT:2})[Be==null?void 0:Be.toUpperCase()]??1,[]),dt=I.useCallback((Be,ft)=>{const ut=Be.toLowerCase(),it=ft.toUpperCase(),ir=it&&String(rt(it));return _e.find(_n=>{var fn,Vs;const on=(fn=Cp(_n))==null?void 0:fn.toLowerCase(),Vn=((Vs=_n.status)==null?void 0:Vs.toLowerCase())==="dormant",Kn=Number(_n.totalEquity||0)<=0,Xn=on===ut,Mo=ir?_n.collateralAssetIndex===ir:!0;return(Vn||Kn)&&Xn&&Mo})||null},[_e,rt]),tt=I.useCallback(()=>{ct(!0),fe(""),se(""),Ge(10),ve(10),ke(""),ye("cross"),ot("cross"),$t("transfer")},[]),xt=I.useCallback(()=>{ct(!1),fe(""),se(""),Ge(10),ve(10),ke(""),ye("cross"),ot("cross"),$t("transfer")},[]),At=I.useCallback(()=>{Me(!0),lt(""),Ie("USDC"),Ce(10),Qe("")},[]),Tt=I.useCallback(()=>{Me(!1),lt(""),Ie("USDC"),Ce(10),Qe("")},[]),Gn=I.useCallback(()=>{_.current&&a(_.current.leverage),s(!1)},[]),wa=I.useCallback(async Be=>{if(!J){Ke.error("Mnemonic required",{description:"Mnemonic is required to perform transfers.",action:yn("Mnemonic required")});return}if(!Ee||!Re){Ke.error("Exchange client not ready",{description:"Please wait for the exchange client to initialize.",action:yn("Exchange client not ready")});return}Pn(!0);const ft=Ke.loading("Processing transfer...",{description:"Sending tokens to address"});He.current=typeof ft=="number"?ft:0;try{const ut=await Ee.bankTransfer({to:Be.to,assetId:Be.assetId,amount:Be.amount,memo:Be.memo});He.current!==0&&(Ke.dismiss(He.current),He.current=0),ut.success?(Ke.success("Transfer completed",{description:`Successfully sent ${zt(Be.amount)} ${Be.assetId} to ${Be.to.slice(0,10)}...${ut.txHash?`
TxHash: ${ut.txHash}`:""}`}),Me(!1),lt(""),Ie("USDC"),Ce(10),Qe(""),et()):Ke.error("Transfer failed",{description:ut.errorMessage??"Unknown error",action:yn(ut.errorMessage??"")})}catch(ut){He.current!==0&&(Ke.dismiss(He.current),He.current=0);const it=ut instanceof Error?ut.message:"Transfer failed";Ke.error("Transfer failed",{description:it,action:yn(it)}),console.error("Wallet transfer error:",ut)}finally{Pn(!1)}},[J,Ee,Re,et]),gr=I.useCallback(async Be=>{if(!J){const ut="Mnemonic is required to perform transfers. Please provide a mnemonic to enable transfer functionality.";Ke.error("Mnemonic required",{description:ut,action:yn(ut)});return}if(!Ee||!Re){const ut="Exchange client is still initializing. Please wait a moment and try again.";Ke.error("Exchange client not ready",{description:ut,action:yn(ut)});return}Pn(!0);const ft=Ke.loading("Processing transfer...",{description:"Please wait while the transfer is being processed"});He.current=typeof ft=="number"?ft:0;try{const ut="USDC";let it,ir="";if(Be.type==="transfer"){const{from:_n,to:on,amount:Vn}=Be;if(_n==="spot-wallet"&&on==="spot-wallet")throw new Error("Cannot transfer from spot wallet to spot wallet");if(_n==="spot-wallet"){if(!on||on==="spot-wallet")throw new Error("Please select a destination bucket");if(it=await Ee.extractToBucket({bucketId:on,assetId:ut,amount:Vn}),!it.success){const Xn=it.errorMessage||it.error_message||"Failed to transfer to bucket";He.current!==0&&(Ke.dismiss(He.current),He.current=0),Ke.error("Transfer failed",{description:Xn,action:yn(Xn)});return}const Kn=it.txhash||"";ir=`Successfully transferred ${zt(Vn)} from Spot Wallet to ${on}${Kn?`
TxHash: ${Kn}`:""}`}else if(on==="spot-wallet"){if(it=await Ee.withdrawFromBucket({bucketId:_n,assetId:ut,amount:Vn}),!it.success){const Xn=it.errorMessage||it.error_message||"Failed to withdraw from bucket";He.current!==0&&(Ke.dismiss(He.current),He.current=0),Ke.error("Withdraw failed",{description:Xn,action:yn(Xn)});return}const Kn=it.txhash||it.txHash||"";ir=`Successfully transferred ${zt(Vn)} from ${_n} to Spot Wallet${Kn?`
TxHash: ${Kn}`:""}`}else{if(!on)throw new Error("Please select a destination bucket");if(it=await Ee.bucketTransfer({fromBucketId:_n,toBucketId:on,assetId:ut,amount:Vn}),!it.success){const Xn=it.errorMessage||it.error_message||it.message||"Failed to transfer between buckets";He.current!==0&&(Ke.dismiss(He.current),He.current=0),Ke.error("Transfer failed",{description:Xn,action:yn(Xn)});return}const Kn=it.txHash??it.txhash??"";ir=`Successfully transferred ${zt(Vn)} from ${_n} to ${on}${Kn?`
TxHash: ${Kn}`:""}`}}else{const{from:_n,collateralAsset:on,marginType:Vn,amount:Kn}=Be,Xn=dt(Vn,on);let Mo;if(Xn)Mo=Xn.bucketId,ir=`Using existing ${Vn} ${on} bucket: ${Mo}`;else{const fn=await Ee.createBucket({collateralAssetIndex:rt(on),marginType:Vn,initialMargin:"0"});if(!fn.success)throw new Error(fn.message||"Failed to create bucket");Mo=fn.bucketId??"",ir=`Successfully created ${Vn} margin bucket (${on})`}if(Kn>0&&!Xn&&await new Promise(fn=>setTimeout(fn,1500)),Kn>0&&_n==="spot-wallet"){const fn=await Ee.extractToBucket({bucketId:Mo,assetId:on,amount:Kn});if(!fn.success){const Io=fn.errorMessage||fn.error_message||"Unknown error";throw new Error(`${Xn?"Bucket found":"Bucket created"} but failed to transfer funds: ${Io}`)}const Vs=fn.txHash??fn.txhash??"";ir=`${Xn?"Using existing":"Successfully created"} ${Vn} margin bucket (${on}) and transferred ${zt(Kn)}${Vs?`
TxHash: ${Vs}`:""}`}else if(Kn>0&&_n!=="spot-wallet"){const fn=await Ee.bucketTransfer({fromBucketId:_n,toBucketId:Mo,assetId:on,amount:Kn});if(!fn.success){const Io=fn.errorMessage||fn.error_message||fn.message||"Unknown error";throw new Error(`${Xn?"Bucket found":"Bucket created"} but failed to transfer funds: ${Io}`)}const Vs=fn.txHash??fn.txhash??"";ir=`${Xn?"Using existing":"Successfully created"} ${Vn} margin bucket (${on}) and transferred ${zt(Kn)}${Vs?`
TxHash: ${Vs}`:""}`}}He.current!==0&&(Ke.dismiss(He.current),He.current=0),Ke.success("Transfer completed",{description:ir}),ct(!1),fe(""),se(""),Ge(10),ve(10),ke(""),ye("cross"),ot("cross"),await new Promise(_n=>setTimeout(_n,1e3)),et()}catch(ut){He.current!==0&&(Ke.dismiss(He.current),He.current=0);const it=ut instanceof Error?ut.message:"Transfer failed";Ke.error("Transfer failed",{description:it,action:yn(it)}),console.error("Transfer error:",ut)}finally{Pn(!1)}},[J,Ee,Re,et,dt,rt]),Gs=I.useMemo(()=>{const Be=_e.filter(ft=>(ft==null?void 0:ft.bucketId)&&ft.bucketId.trim()!=="").map(ft=>({value:ft.bucketId,label:`${ft.bucketId} (${zt(ft.totalEquity)})`}));return[{value:"spot-wallet",label:`Spot Wallet (${zt(Ae)})`},...Be]},[_e,Ae]),_a=I.useMemo(()=>_e.filter(Be=>(Be==null?void 0:Be.bucketId)&&Be.bucketId.trim()!=="").map(Be=>({bucketId:Be.bucketId,totalEquity:Be.totalEquity})),[_e]),kt=I.useRef(!1);I.useEffect(()=>{j&&j.trim()!==""&&!kt.current&&localStorage.getItem("authToken")!==j&&localStorage.setItem("authToken",j),kt.current=!1},[j]),I.useEffect(()=>{const Be=ut=>{ut.key==="authToken"&&ut.newValue&&(kt.current=!0,L(ut.newValue))};window.addEventListener("storage",Be);const ft=setInterval(()=>{const ut=localStorage.getItem("authToken");L(it=>ut&&ut!==it?(kt.current=!0,ut):it)},5e3);return()=>{window.removeEventListener("storage",Be),clearInterval(ft)}},[]);const vs=I.useCallback(()=>{O(!0)},[]);I.useEffect(()=>{T&&!U&&B.length>0&&$&&!R.current&&(R.current=!0,setTimeout(()=>{K()},100))},[T,U,B.length,$,K]);const To=I.useCallback((Be,ft)=>{},[]);I.useEffect(()=>(document.body.classList.remove("full-width-screen"),()=>document.body.classList.remove("full-width-screen")),[]);const Mr=$||"",Sa=I.useMemo(()=>{if(F.length===0)return{};const Be={};for(let ft=0;ft<=8;ft++){const ut=F.find(it=>it.i===ft.toString());if(ut){const it=ut,ir=it.h*BNe+(it.h-1)*vn.layoutMargin[1],_n=it.w/zNe*100;Be[ft]={width:`${_n}%`,height:`${ir}px`}}}return Be},[F]);I.useCallback(async()=>{try{const ft=`[
${F.slice().sort((ut,it)=>{const ir=ut,_n=it,on=parseInt(ir.i,10),Vn=parseInt(_n.i,10);return on-Vn}).map(ut=>{const it=ut;return`  [${it.x}, ${it.y}, ${it.w}, ${it.h}]`}).join(`,
`)},
]`;await navigator.clipboard.writeText(ft),alert("Layout matrix copied to clipboard!")}catch(Be){console.error("Failed to copy layout matrix:",Be),alert("Failed to copy layout matrix to clipboard")}},[F]),I.useMemo(()=>F.map(function(Be){const ft=Be;return k.jsxs("div",{className:"layoutItem",children:[k.jsx("b",{children:ft.i}),": [",ft.x,", ",ft.y,", ",ft.w,", ",ft.h,"]"]},ft.i)}),[F]);const ka=I.useCallback(Be=>{_.current&&_.current.setPrice(Be)},[]),wn=I.useMemo(()=>{var Be,ft;return[k.jsx(lfe,{baseURL:vn.baseURL,selectedMarketId:Mr,height:(Be=Sa[0])==null?void 0:Be.height},`ticker-${Mr}`),k.jsx(rve,{symbol:vn.tradingViewSymbol,interval:vn.tradingViewInterval,isCollapsed:!1},"tv"),k.jsx(mfe,{baseURL:vn.baseURL,marketId:Mr,maxDepth:vn.orderbookMaxDepth,height:(ft=Sa[2])==null?void 0:ft.height,onPriceClick:ka,enhancementConfig:vn.orderbookEnhancement},`clobx-${Mr}`),k.jsx(hfe,{baseURL:vn.baseURL,marketId:Mr},`price-${Mr}`),k.jsx(cfe,{ref:_,baseURL:vn.baseURL,mnemonic:J??pI,marketId:Mr,selectedBucketBalance:t,selectedBucketId:n,authToken:j,walletAddress:Z??"",onLeverageClick:()=>{_.current&&a(_.current.leverage),s(!0)},onNumberCalculatorClick:()=>{_.current&&(g(_.current.getSizeInput()),y(_.current.getAvailableTradeAmount()),f(!0))}},`trade-${Mr}`),k.jsx(ofe,{baseURL:vn.baseURL,authToken:j,walletAddress:Z,mnemonic:J,height:"400px",activeTab:b,onTabChange:w,onBucketSelect:(ut,it)=>{e(ut),r(it)},selectedBucketId:n,onRequestOpenTransferModal:tt,onRequestOpenWalletTransferModal:At})]},[Mr,Sa,n,t,ka,tt,At,J,j,Z,b]),Ca=k.jsx(cve,{isOpen:be,onMnemonicConnect:ee,onWalletExtensionConnect:pe});if(U)return k.jsxs(k.Fragment,{children:[k.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:k.jsx("div",{children:"Loading markets..."})}),Ca]});const Kg=H("markets");if(Kg)return k.jsxs(k.Fragment,{children:[k.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#ff6b6b"},children:k.jsxs("div",{children:["Error loading markets: ",Kg]})}),Ca]});if(B.length===0||!$)return k.jsxs(k.Fragment,{children:[k.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:k.jsx("div",{children:"No markets available."})}),Ca]});const Xg=vn.baseURL.includes("router.morpheum.io")?"Morpheum Mainnet":new URL(vn.baseURL).hostname;return k.jsxs("div",{className:"App-dex-content",children:[k.jsx(ave,{brandName:"Morpheum",walletAddress:Z??"",networkChainName:Xg,onSettingsClick:()=>c(Be=>!Be),onConnectClick:()=>{},onBucketTransfer:()=>{w("buckets"),tt()},onCoinTransfer:At,onDisconnect:()=>{te(),localStorage.removeItem(Iv),Y(!0)}}),k.jsx(mve,{isOpen:l,onClose:()=>c(!1),state:u,onStateChange:h}),!1,k.jsx(SK,{ref:S,margin:vn.layoutMargin,onLayoutChange:To,onBreakpointChange:C,slotContent:wn,compactType:vn.compactType,allStatic:vn.allStatic,onCompactTypeChange:()=>{},onToggleStatic:()=>{},onNewLayout:()=>{},initialLayout:A,onMount:vs}),k.jsx($me,{isOpen:i,currentLeverage:((cf=_.current)==null?void 0:cf.leverage)??10,tempLeverage:o,maxRatio:_.current?_.current.calculateMaxRatio(o):o.toFixed(2),onLeverageChange:a,onConfirm:async()=>{if(!n||n==="--"||n.trim()===""){Ke.error("Bucket Required",{description:"Please select a bucket before changing leverage."});return}if(_.current){s(!1);try{await _.current.changeLeverage(o,{bucketId:n})}catch{_.current&&a(_.current.leverage)}}else s(!1)},onCancel:Gn}),k.jsx(QO,{isOpen:d,value:m,min:0,max:v,onConfirm:Be=>{_.current&&_.current.setSizeInput(Be),f(!1)},onCancel:()=>f(!1)}),k.jsx(Bme,{isOpen:Ue,fromValue:Ht,toValue:ae,options:Gs,bucketsData:_a,transferAmount:Pe,createBucketAmount:me,createBucketAsset:oe,createMarginType:Oe,transferMarginType:Le,onFromChange:fe,onToChange:se,onTransferAmountChange:Ge,onCreateBucketAmountChange:ve,onCreateBucketAssetChange:ke,onCreateMarginTypeChange:ye,onTransferMarginTypeChange:ot,onConfirm:gr,onCancel:xt,spotWalletBalance:Ae,activeTab:en,onActiveTabChange:$t,isTransferring:dn,onOpen:et,collections:_e.map(Be=>({bucketId:Be.bucketId,marginType:Be.marginType}))}),k.jsx(Ume,{isOpen:ht,toAddress:le,assetId:mt,amount:Fe,availableBalance:Yt,onToAddressChange:lt,onAssetChange:Ie,onAmountChange:Ce,onConfirm:wa,onCancel:Tt,isTransferring:dn,onOpen:Ne,memo:Bt,onMemoChange:Qe}),Ca]})}function UNe(){return k.jsx(rde,{defaultWsURL:vn.wsURL,children:k.jsx(qNe,{})})}function WNe(){return k.jsxs($Ne,{children:[k.jsx("div",{className:"App ADemo",children:k.jsx("main",{className:"App-main",children:k.jsx(UNe,{})})}),k.jsx(Jde,{position:"bottom-right",toastOptions:{duration:4e3,style:{color:"var(--foreground)",border:"1px solid var(--border)"}}})]})}const nW=XY({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockTime:12e3,rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:23085558},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),rW=XY({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://11155111.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:8928790}},testnet:!0}),HNe=Zoe({chains:[nW,rW],connectors:[Kb()],transports:{[nW.id]:VA(),[rW.id]:VA()}}),YNe=new Sse,GNe=WNe,VNe=KT.createRoot(document.getElementById("root"));VNe.render(k.jsx(de.StrictMode,{children:k.jsx(nae,{config:HNe,children:k.jsx(Cse,{client:YNe,children:k.jsx(GNe,{})})})}));
//# sourceMappingURL=index-KF0tp39C.js.map
